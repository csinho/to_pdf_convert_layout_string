<script>document.write(decodeURIComponent(escape(atob('PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InB0LUJSIj4KCjxoZWFkPgogIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgPHRpdGxlPkxhYiBQREYgLSBFZGl0b3IgdmlzdWFsPC90aXRsZT4KICA8bGluayByZWw9Imljb24iIHR5cGU9ImltYWdlL3N2Zyt4bWwiCiAgICBocmVmPSJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnJTIweG1sbnMlM0QlMjJodHRwJTNBJTJGJTJGd3d3LnczLm9yZyUyRjIwMDAlMkZzdmclMjIlMjB4bWxucyUzQXhsaW5rJTNEJTIyaHR0cCUzQSUyRiUyRnd3dy53My5vcmclMkYxOTk5JTJGeGxpbmslMjIlMjB2aWV3Qm94JTNEJTIyMjc1JTIwMTQwJTIwNTIwJTIwODk1JTIyJTIwd2lkdGglM0QlMjIyMCUyMiUyMGhlaWdodCUzRCUyMjIwJTIyJTIwc3R5bGUlM0QlMjJkaXNwbGF5JTNBJTIwYmxvY2slM0IlMjIlMjBwcmVzZXJ2ZUFzcGVjdFJhdGlvJTNEJTIyeE1pZFlNaWQlMjBtZWV0JTIyJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjNGQUZDRkQlMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNDI5Ljg1NiUyMDE3NS4zNTFDNDE4LjAwNyUyMDE3NS40MzIlMjA0MDQuNDMlMjAxNzUuNDE2JTIwNDA0Ljk0NCUyMDE1OS4wN0M0MDUuNDg0JTIwMTQxLjg5MyUyMDQyMi4wOSUyMDE0My44MSUyMDQzNC4yOTklMjAxNDMuNzYyTDQ2Mi45OSUyMDE0My42NTJMNTE3LjY4JTIwMTQzLjYwM0M1MjguMzY3JTIwMTQzLjYxNCUyMDU0Ny43MTklMjAxNDIuMzQyJTIwNTU4LjA0NCUyMDE0NS45MDVDNTYyLjc4JTIwMTQ3LjUzOSUyMDU2Ny4wOTglMjAxNTYuNjA0JTIwNTY2LjE2MSUyMDE2MS4yMzhDNTY0LjU0NCUyMDE3Ni40MSUyMDU1MS45MjglMjAxNzUuNjElMjA1NDAuODQ2JTIwMTc1LjQ2NEw1NDEuMDcxJTIwMjg5Ljg3MUw1NDEuMDklMjAyOTAuNzlMNTQxLjU5OSUyMDI5OC42OThDNTQ5Ljc4MSUyMDMzNC4yNjklMjA1NzEuNjQzJTIwMzM0LjczNCUyMDU5Ny43NTklMjAzNTMuODhDNjM3LjQ0OCUyMDM4Mi45NzUlMjA2NjUuMTkyJTIwNDI1LjU1MyUyMDY3NS42NTQlMjA0NzMuNzA0QzY4My42NTclMjA1MDkuNDAxJTIwNjgxLjk3NCUyMDU1MS42OTQlMjA2NjguNDczJTIwNTg1LjkwOEM2NjQuOTIzJTIwNTk4LjAzJTIwNjU1LjU3NyUyMDYxNS41NTYlMjA2NDguNzI1JTIwNjI2LjE3NEM2MjEuMTA5JTIwNjY4Ljk2OCUyMDU3OC41NjUlMjA3MDAuNjg2JTIwNTI4LjgyNSUyMDcxMS45OTVDNDc4LjAxOCUyMDcyMy42OTUlMjA0MjQuNjQxJTIwNzE0LjQyMSUyMDM4MC43NTclMjA2ODYuMjdDMjk2Ljc4OCUyMDYzMy4zODklMjAyNjguNTE0JTIwNTIyLjgzNCUyMDMwOC41NzQlMjA0MzMuODE5QzMxMS4yMzElMjA0MjcuOTE2JTIwMzE0LjMxNyUyMDQyMS41NTMlMjAzMTcuNzYzJTIwNDE2LjA4NkMzMTkuOTEyJTIwNDExLjY2MiUyMDMyNC41MTglMjA0MDUuMDIzJTIwMzI3LjQ3MyUyMDQwMC45MTRDMzQzLjIxNyUyMDM3OS4wMjYlMjAzNjIuNzk0JTIwMzU5Ljg0MSUyMDM4NS44MjklMjAzNDUuNzIyQzM5NS40OTElMjAzMzkuMzgxJTIwNDA2LjY2OCUyMDMzNi4wNTYlMjA0MTQuOTY4JTIwMzI3Ljc5OUM0MzEuMzczJTIwMzExLjQ3OCUyMDQyOS40MTclMjAyOTIuNjMxJTIwNDI5LjU0MiUyMDI3MS43MzVDNDI5LjczJTIwMjU3LjQxNCUyMDQyOS43OTQlMjAyNDMuMDkyJTIwNDI5LjczNSUyMDIyOC43N0M0MjkuNjk2JTIwMjExLjE4NCUyMDQyOS4zMDQlMjAxOTIuODUzJTIwNDI5Ljg1NiUyMDE3NS4zNTFaJTIyJTJGJTNFJTNDZGVmcyUzRSUzQ2xpbmVhckdyYWRpZW50JTIwaWQlM0QlMjJncmFkaWVudF8wJTIyJTIwZ3JhZGllbnRVbml0cyUzRCUyMnVzZXJTcGFjZU9uVXNlJTIyJTIweDElM0QlMjI0ODkuNzkxNzUlMjIlMjB5MSUzRCUyMjUwNi45OTUwMyUyMiUyMHgyJTNEJTIyNTY2Ljg2MTY5JTIyJTIweTIlM0QlMjIyODAuNDkxMTUlMjIlM0UlM0NzdG9wJTIwb2Zmc2V0JTNEJTIyMCUyMiUyMHN0b3AtY29sb3IlM0QlMjIlMjMyMTc1OTclMjIlMkYlM0UlM0NzdG9wJTIwb2Zmc2V0JTNEJTIyMSUyMiUyMHN0b3AtY29sb3IlM0QlMjIlMjMyRUNBQzElMjIlMkYlM0UlM0MlMkZsaW5lYXJHcmFkaWVudCUzRSUzQyUyRmRlZnMlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMnVybCUyOCUyM2dyYWRpZW50XzAlMjklMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNDI5Ljg1NiUyMDE3NS4zNTFDNDE4LjAwNyUyMDE3NS40MzIlMjA0MDQuNDMlMjAxNzUuNDE2JTIwNDA0Ljk0NCUyMDE1OS4wN0M0MDUuNDg0JTIwMTQxLjg5MyUyMDQyMi4wOSUyMDE0My44MSUyMDQzNC4yOTklMjAxNDMuNzYyTDQ2Mi45OSUyMDE0My42NTJMNTE3LjY4JTIwMTQzLjYwM0M1MjguMzY3JTIwMTQzLjYxNCUyMDU0Ny43MTklMjAxNDIuMzQyJTIwNTU4LjA0NCUyMDE0NS45MDVDNTYyLjc4JTIwMTQ3LjUzOSUyMDU2Ny4wOTglMjAxNTYuNjA0JTIwNTY2LjE2MSUyMDE2MS4yMzhDNTY0LjU0NCUyMDE3Ni40MSUyMDU1MS45MjglMjAxNzUuNjElMjA1NDAuODQ2JTIwMTc1LjQ2NEw1NDEuMDcxJTIwMjg5Ljg3MUw1NDEuMDklMjAyOTAuNzlMNTQxLjU5OSUyMDI5OC42OThDNTQ5Ljc4MSUyMDMzNC4yNjklMjA1NzEuNjQzJTIwMzM0LjczNCUyMDU5Ny43NTklMjAzNTMuODhDNjM3LjQ0OCUyMDM4Mi45NzUlMjA2NjUuMTkyJTIwNDI1LjU1MyUyMDY3NS42NTQlMjA0NzMuNzA0QzY4My42NTclMjA1MDkuNDAxJTIwNjgxLjk3NCUyMDU1MS42OTQlMjA2NjguNDczJTIwNTg1LjkwOEM2NjcuNjc4JTIwNTgyLjM1NSUyMDY3My40NzUlMjA1NjcuMDU5JTIwNjc0LjUxNyUyMDU2Mi40NjhDNjc0LjYxMiUyMDU2Mi4zMDElMjA2NzQuNzA2JTIwNTYyLjEzNCUyMDY3NC44JTIwNTYxLjk2N0M2NzQuNDE5JTIwNTU5LjczMyUyMDY3NS43MDQlMjA1NTguNTglMjA2NzUuMzMxJTIwNTU1LjcyOUM2NjguODg2JTIwNTQ5Ljc3NSUyMDY1MC42MzElMjA1NjQuMzYyJTIwNjQwLjkxMSUyMDU1OC41MjRMNjQwLjUyOSUyMDU1OC4zODlDNjQxLjM5MyUyMDU2NS4xMzIlMjA2MzguMzE4JTIwNTc0LjgwNyUyMDYzNi4yMTYlMjA1ODEuMTE5TDYzNS44NzYlMjA1ODAuODU0QzYzNS44MDglMjA1NzguNTM5JTIwNjM3Ljc2NCUyMDU3My41OTklMjA2MzguNzgxJTIwNTcxLjQwMUM2MzYuNzc5JTIwNTY5LjU1OSUyMDYyNC41NjElMjA1NzAuNDk3JTIwNjIxLjAyNSUyMDU3MC41NzZDNjIwLjk3NiUyMDU3My41MzklMjA2MjEuMDg3JTIwNTc5LjkyNiUyMDYyMC4zMDMlMjA1ODIuNDQ0QzYyMC4xOTMlMjA1ODUuOTg2JTIwNjIwLjE3NCUyMDU4OS41MyUyMDYyMC4yNDclMjA1OTMuMDczQzYxMy41MDIlMjA1OTMuNDQxJTIwNTk1LjE3MyUyMDU5My44MTIlMjA1ODguNzI4JTIwNTkzLjEyM0w1ODguNzA5JTIwNTkwLjgwOEM1ODguNzY2JTIwNTgzLjY2OSUyMDU4OC43NDElMjA1NzYuNTI5JTIwNTg4LjYzNCUyMDU2OS4zOUM1ODguMzAyJTIwNTY2LjY0NSUyMDU4OC41MzklMjA1NjQuMDk4JTIwNTg4LjY5OCUyMDU2MS4zNDlMNTg4LjcyNiUyMDU0NS44ODJMNTg4LjYyNiUyMDU0Mi45NTdMNTg4LjcwNCUyMDUzNi4zNkM1ODcuODgzJTIwNTI4LjM5JTIwNTg4LjQwNSUyMDUxMy4wNSUyMDU4OC40OTQlMjA1MDQuNjI1TDU4OC40NzglMjA0ODkuNTAxTDU4OC4zNjUlMjA0NDguODY2QzU4OC4yOTMlMjA0NDAuMzY2JTIwNTg3LjkxMSUyMDQyOC4xODUlMjA1ODguNTgzJTIwNDE5LjkzQzU3Ny45OTQlMjA0MDguMzk4JTIwNTY2LjIzNCUyMDM5Ny40NzclMjA1NTUuMjQ4JTIwMzg2LjI5MUM1NTEuNzc0JTIwMzgyLjc1MyUyMDU0Ny45NyUyMDM3OS4xMTUlMjA1NDQuMjU5JTIwMzc1Ljg0OUM1MjkuNDY4JTIwMzc1LjAzNiUyMDUwNi4zOTIlMjAzNzUuODQlMjA0OTAuOTIyJTIwMzc1Ljg1MkM0NTIuODY0JTIwMzc2LjA1JTIwNDE0LjgwNSUyMDM3NS44OTclMjAzNzYuNzQ5JTIwMzc1LjM5MkMzNzYuNjYlMjAzODYuNDg0JTIwMzc2LjY0NyUyMDM5Ny41NzclMjAzNzYuNzElMjA0MDguNjY5QzM3NS45ODYlMjA0MDUuNDU0JTIwMzc2LjY0NiUyMDQwMS40NTUlMjAzNzUuOTcxJTIwMzk5LjA3N0wzNzUuNTY2JTIwNDAwLjkyOEwzNzQuOTA5JTIwNDAxLjEwNUMzNzMuNzYyJTIwNDAwLjEyMiUyMDM3My44OTMlMjA0MDAuMDU1JTIwMzczLjQ1NiUyMDM5OC41NjRDMzY5LjA4NyUyMDM5OS4wMDQlMjAzNTkuMjE1JTIwNDEwLjc4NiUyMDM1Ni43NTIlMjA0MTMuODM4QzM1My4zMSUyMDQxOC4xMDMlMjAzMzguODQ2JTIwNDQyLjAyMSUyMDMzNy43MDQlMjA0NDYuNTQxTDMzNy4xMTUlMjA0NDYuNjc0QzMzNy4zMDElMjA0NDMuNTQ0JTIwMzM5LjQ4OCUyMDQ0My4wMTQlMjAzMzkuMzMzJTIwNDQwLjY1QzMzOC4yNTElMjA0NDAuMTMyJTIwMzMyLjcxMSUyMDQzNy41NTQlMjAzMzIuMTYxJTIwNDM2Ljk5NkMzMjYuMTc4JTIwNDMwLjk0MiUyMDMxNy40MDMlMjA0MjUuNTI4JTIwMzE3Ljc2MyUyMDQxNi4wODZDMzE5LjkxMiUyMDQxMS42NjIlMjAzMjQuNTE4JTIwNDA1LjAyMyUyMDMyNy40NzMlMjA0MDAuOTE0QzM0My4yMTclMjAzNzkuMDI2JTIwMzYyLjc5NCUyMDM1OS44NDElMjAzODUuODI5JTIwMzQ1LjcyMkMzOTUuNDkxJTIwMzM5LjM4MSUyMDQwNi42NjglMjAzMzYuMDU2JTIwNDE0Ljk2OCUyMDMyNy43OTlDNDMxLjM3MyUyMDMxMS40NzglMjA0MjkuNDE3JTIwMjkyLjYzMSUyMDQyOS41NDIlMjAyNzEuNzM1QzQyOS43MyUyMDI1Ny40MTQlMjA0MjkuNzk0JTIwMjQzLjA5MiUyMDQyOS43MzUlMjAyMjguNzdDNDI5LjY5NiUyMDIxMS4xODQlMjA0MjkuMzA0JTIwMTkyLjg1MyUyMDQyOS44NTYlMjAxNzUuMzUxWiUyMiUyRiUzRSUzQ2RlZnMlM0UlM0NsaW5lYXJHcmFkaWVudCUyMGlkJTNEJTIyZ3JhZGllbnRfMSUyMiUyMGdyYWRpZW50VW5pdHMlM0QlMjJ1c2VyU3BhY2VPblVzZSUyMiUyMHgxJTNEJTIyNDU4Ljc1MTMxJTIyJTIweTElM0QlMjIyNzIuNzkzNjclMjIlMjB4MiUzRCUyMjQ5OS4yMjE4JTIyJTIweTIlM0QlMjIxMjkuNzUzNzclMjIlM0UlM0NzdG9wJTIwb2Zmc2V0JTNEJTIyMCUyMiUyMHN0b3AtY29sb3IlM0QlMjIlMjMyQ0MzQkYlMjIlMkYlM0UlM0NzdG9wJTIwb2Zmc2V0JTNEJTIyMSUyMiUyMHN0b3AtY29sb3IlM0QlMjIlMjMzMEYxRDYlMjIlMkYlM0UlM0MlMkZsaW5lYXJHcmFkaWVudCUzRSUzQyUyRmRlZnMlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMnVybCUyOCUyM2dyYWRpZW50XzElMjklMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNDI5Ljg1NiUyMDE3NS4zNTFDNDE4LjAwNyUyMDE3NS40MzIlMjA0MDQuNDMlMjAxNzUuNDE2JTIwNDA0Ljk0NCUyMDE1OS4wN0M0MDUuNDg0JTIwMTQxLjg5MyUyMDQyMi4wOSUyMDE0My44MSUyMDQzNC4yOTklMjAxNDMuNzYyTDQ2Mi45OSUyMDE0My42NTJMNTE3LjY4JTIwMTQzLjYwM0M1MjguMzY3JTIwMTQzLjYxNCUyMDU0Ny43MTklMjAxNDIuMzQyJTIwNTU4LjA0NCUyMDE0NS45MDVDNTYyLjc4JTIwMTQ3LjUzOSUyMDU2Ny4wOTglMjAxNTYuNjA0JTIwNTY2LjE2MSUyMDE2MS4yMzhDNTY0LjU0NCUyMDE3Ni40MSUyMDU1MS45MjglMjAxNzUuNjElMjA1NDAuODQ2JTIwMTc1LjQ2NEw1NDEuMDcxJTIwMjg5Ljg3MUw1NDAuODAzJTIwMjkwLjU1QzUzOS40NjQlMjAyOTEuMzMyJTIwNTM3LjU1NyUyMDI5My41NTElMjA1MzYuMzc0JTIwMjk0Ljc1M0w1MzUuNTczJTIwMjk0LjY2NkM1MzMuMjYxJTIwMjg1LjQ3MSUyMDUyNS4xMzIlMjAyOTMuODAxJTIwNTE5Ljg1NSUyMDI4NS44NjZDNTE5LjgwNyUyMDI4NS43OTMlMjA1MDQuNTY3JTIwMjg0LjQzOSUyMDUwNC4wNDklMjAyNzguMDQzQzUwMy4yNzclMjAyNzguNjY0JTIwNTAzLjYyNSUyMDI3OC4zNDUlMjA1MDMuMzQzJTIwMjc5LjcwNUM1MDIuMTYzJTIwMjgwLjA1MyUyMDQ5Ny4xMjYlMjAyNzcuMTM0JTIwNDk1LjU5OSUyMDI3Ni40NTRDNDg2Ljc0OCUyMDI3Mi41MDglMjA0NzcuMzkyJTIwMjcyLjMxNiUyMDQ2OC45NTklMjAyNjcuMDk4QzQ2My41ODMlMjAyNjMuNzcxJTIwNDYwLjUzNCUyMDI1OC40NjIlMjA0NTUuNTQlMjAyNTUuMjExQzQ0OC40MjElMjAyNTAuNTc3JTIwNDM5LjM1JTIwMjQ4LjQ4NyUyMDQzMy43NzklMjAyNDEuNDY0QzQzMC4xNDUlMjAyMzcuMDkyJTIwNDMyLjAyNSUyMDIzMi41MjMlMjA0MjkuNzM1JTIwMjI4Ljc3QzQyOS42OTYlMjAyMTEuMTg0JTIwNDI5LjMwNCUyMDE5Mi44NTMlMjA0MjkuODU2JTIwMTc1LjM1MVolMjIlMkYlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMiUyMzQ5QzNEMiUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk01ODguNTgzJTIwNDE5LjkzQzU4OS4xMDYlMjA0MjguMTMyJTIwNTg4LjY4NCUyMDQzOS4xODIlMjA1ODguNzQxJTIwNDQ3LjYzMUM1OTguNjkxJTIwNDQ3LjU5MSUyMDYxMC4yOTQlMjA0NDcuMjg4JTIwNjIwLjEyOCUyMDQ0Ny41NTlDNjIwLjE2JTIwNDU1LjY2NCUyMDYyMC4xNSUyMDQ2My43NjklMjA2MjAuMSUyMDQ3MS44NzRDNjI1LjczOCUyMDQ3MS44NDElMjA2MzYuNjM0JTIwNDcxLjAyOSUyMDY0MS4xNjglMjA0NzIuNzA5QzY0Mi40MjglMjA0NzQuMDQ2JTIwNjQyLjAyOCUyMDQ3My43MzIlMjA2NDIuMzAxJTIwNDc1Ljk4OEM2NDIuMzUzJTIwNDc4LjY2NiUyMDY0Mi4yNzIlMjA0OTQuMDglMjA2NDMuMDQ2JTIwNDk1LjM0NUw2NDMuOTU2JTIwNDk1LjU1N0M2NDQuODk5JTIwNDk1Ljc4JTIwNjQ1LjE2NCUyMDQ5NS44NDglMjA2NDYuMDYzJTIwNDk2LjI3MkM2NDYuMTYyJTIwNDk3LjU2NyUyMDY0Ni4zNDclMjA0OTcuMDIlMjA2NDUuODMxJTIwNDk4LjA0OUM2NDUuMTA1JTIwNDk4LjI0NyUyMDY0My4wNTIlMjA0OTguNjMzJTIwNjQyLjk1MyUyMDQ5OS4wNzJDNjQyLjAzOCUyMDUwMy4xMzQlMjA2NDIuMjM1JTIwNTE1LjQ3MyUyMDY0Mi40MDUlMjA1MTkuNDg1QzY0NS4wMDglMjA1MTkuNzYzJTIwNjQ0Ljc1OCUyMDUxOS4zMjIlMjA2NDYuNDMzJTIwNTIwLjcwN0M2NDUuNzQ5JTIwNTIyLjYwNSUyMDY0NC4zMTUlMjA1MjIuMzM4JTIwNjQyLjQ3MSUyMDUyMi40MjlDNjQyLjQyMyUyMDUyNS44MDclMjA2NDEuNzklMjA1NDAuOTQ0JTIwNjQzLjA1OSUyMDU0Mi43NTRMNjQ0LjA0MyUyMDU0Mi45ODVDNjQ1LjQ4MyUyMDU0My43NCUyMDY0NS41OTYlMjA1NDMuNDglMjA2NDYuMTYxJTIwNTQ0LjY2MkM2NDQuMjc3JTIwNTQ2LjQ0NiUyMDY0Mi41OTQlMjA1NDUuNTMzJTIwNjQyLjM2OSUyMDU0OC4xODlDNjQyLjEyMiUyMDU1MS4wOTclMjA2NDMuMjQ2JTIwNTU2LjMzMyUyMDY0MC45MTElMjA1NTguNTI0TDY0MC41MjklMjA1NTguMzg5QzY0MS4zOTMlMjA1NjUuMTMyJTIwNjM4LjMxOCUyMDU3NC44MDclMjA2MzYuMjE2JTIwNTgxLjExOUw2MzUuODc2JTIwNTgwLjg1NEM2MzUuODA4JTIwNTc4LjUzOSUyMDYzNy43NjQlMjA1NzMuNTk5JTIwNjM4Ljc4MSUyMDU3MS40MDFDNjM2Ljc3OSUyMDU2OS41NTklMjA2MjQuNTYxJTIwNTcwLjQ5NyUyMDYyMS4wMjUlMjA1NzAuNTc2QzYyMC45NzYlMjA1NzMuNTM5JTIwNjIxLjA4NyUyMDU3OS45MjYlMjA2MjAuMzAzJTIwNTgyLjQ0NEM2MjAuMTkzJTIwNTg1Ljk4NiUyMDYyMC4xNzQlMjA1ODkuNTMlMjA2MjAuMjQ3JTIwNTkzLjA3M0M2MTMuNTAyJTIwNTkzLjQ0MSUyMDU5NS4xNzMlMjA1OTMuODEyJTIwNTg4LjcyOCUyMDU5My4xMjNMNTg4LjcwOSUyMDU5MC44MDhDNTg4Ljc2NiUyMDU4My42NjklMjA1ODguNzQxJTIwNTc2LjUyOSUyMDU4OC42MzQlMjA1NjkuMzlDNTg4LjMwMiUyMDU2Ni42NDUlMjA1ODguNTM5JTIwNTY0LjA5OCUyMDU4OC42OTglMjA1NjEuMzQ5TDU4OC43MjYlMjA1NDUuODgyTDU4OC42MjYlMjA1NDIuOTU3TDU4OC43MDQlMjA1MzYuMzZDNTg3Ljg4MyUyMDUyOC4zOSUyMDU4OC40MDUlMjA1MTMuMDUlMjA1ODguNDk0JTIwNTA0LjYyNUw1ODguNDc4JTIwNDg5LjUwMUw1ODguMzY1JTIwNDQ4Ljg2NkM1ODguMjkzJTIwNDQwLjM2NiUyMDU4Ny45MTElMjA0MjguMTg1JTIwNTg4LjU4MyUyMDQxOS45M1olMjIlMkYlM0UlM0NkZWZzJTNFJTNDbGluZWFyR3JhZGllbnQlMjBpZCUzRCUyMmdyYWRpZW50XzIlMjIlMjBncmFkaWVudFVuaXRzJTNEJTIydXNlclNwYWNlT25Vc2UlMjIlMjB4MSUzRCUyMjYyOC4wMTMlMjIlMjB5MSUzRCUyMjQ4NS42MjQ2MyUyMiUyMHgyJTNEJTIyNTkxLjEwNTgzJTIyJTIweTIlM0QlMjI0NDYuODcwNDIlMjIlM0UlM0NzdG9wJTIwb2Zmc2V0JTNEJTIyMCUyMiUyMHN0b3AtY29sb3IlM0QlMjIlMjM0MUJDQzklMjIlMkYlM0UlM0NzdG9wJTIwb2Zmc2V0JTNEJTIyMSUyMiUyMHN0b3AtY29sb3IlM0QlMjIlMjM1RURERTAlMjIlMkYlM0UlM0MlMkZsaW5lYXJHcmFkaWVudCUzRSUzQyUyRmRlZnMlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMnVybCUyOCUyM2dyYWRpZW50XzIlMjklMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNTg4LjU4MyUyMDQxOS45M0M1ODkuMTA2JTIwNDI4LjEzMiUyMDU4OC42ODQlMjA0MzkuMTgyJTIwNTg4Ljc0MSUyMDQ0Ny42MzFDNTk4LjY5MSUyMDQ0Ny41OTElMjA2MTAuMjk0JTIwNDQ3LjI4OCUyMDYyMC4xMjglMjA0NDcuNTU5QzYyMC4xNiUyMDQ1NS42NjQlMjA2MjAuMTUlMjA0NjMuNzY5JTIwNjIwLjElMjA0NzEuODc0QzYyNS43MzglMjA0NzEuODQxJTIwNjM2LjYzNCUyMDQ3MS4wMjklMjA2NDEuMTY4JTIwNDcyLjcwOUM2NDIuNDI4JTIwNDc0LjA0NiUyMDY0Mi4wMjglMjA0NzMuNzMyJTIwNjQyLjMwMSUyMDQ3NS45ODhMNjM5LjgyNCUyMDQ3NC40MDFDNjM0LjMxNCUyMDQ3NC45MzglMjA2MjUuOTg5JTIwNDc0Ljc1OCUyMDYyMC4yMjMlMjA0NzQuNzc3QzYyMC4yMTElMjA0ODEuMzg3JTIwNjIwLjMzNCUyMDQ4OC40ODElMjA2MjAuMTcxJTIwNDk1LjA0OEM2MTguOTk4JTIwNDk0LjY2OCUyMDYxOC44MTklMjA0OTQuODU5JTIwNjE3LjQ1OCUyMDQ5NC45OTVDNjE3LjEzOCUyMDQ4OC41NDIlMjA2MTcuMjgzJTIwNDgwLjk2NiUyMDYxNy4yNjUlMjA0NzQuNDIxQzYxMi4yOTElMjA0NzMuODU4JTIwNjAyLjc0NCUyMDQ3NC4xNTclMjA1OTcuNDM3JTIwNDc0LjIyMUM1OTcuNTEzJTIwNDc4Ljk4NCUyMDU5Ny42OTMlMjA0ODMuODE2JTIwNTk3LjI5NCUyMDQ4OC41NTdDNTk3LjExNyUyMDQ4NC4xMyUyMDU5Ny4wMjYlMjA0NzkuNyUyMDU5Ny4wMiUyMDQ3NS4yN0w1OTYuMjU3JTIwNDc1LjQ1M0M1OTUuNzk1JTIwNDc5LjM0OCUyMDU5NS45MDklMjA0ODUuNzY2JTIwNTk1Ljg2MiUyMDQ4OS44NjdDNTk1LjgwNCUyMDQ4Ni45NCUyMDU5NS44NjMlMjA0NzYuOTIxJTIwNTk1LjM1OCUyMDQ3NC43MzlDNTkyLjgzNCUyMDQ3NC40NjglMjA1OTEuMzI4JTIwNDc0LjUxNyUyMDU4OC44MzYlMjA0NzQuNTg1QzU4OC44NCUyMDQ3OS40JTIwNTg4LjkzNiUyMDQ4NC42MDYlMjA1ODguODM3JTIwNDg5LjM5TDU4OC40NzglMjA0ODkuNTAxTDU4OC4zNjUlMjA0NDguODY2QzU4OC4yOTMlMjA0NDAuMzY2JTIwNTg3LjkxMSUyMDQyOC4xODUlMjA1ODguNTgzJTIwNDE5LjkzWiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzMjQ4N0ExJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTU4OC43OTklMjA0NTAuMDNDNTk4LjMwNyUyMDQ1MC4xMyUyMDYwNy44MTYlMjA0NTAuMTgyJTIwNjE3LjMyNCUyMDQ1MC4xODZMNjE3LjMxOCUyMDQ3MS43MzJMNTk3Ljk1NCUyMDQ3MS43NjlDNTk4LjAxOCUyMDQ2OC40NjclMjA1OTguMzY4JTIwNDU0LjkzOSUyMDU5Ny4xOCUyMDQ1Mi44MzlMNTk2LjI2OSUyMDQ1Mi43NTJDNTkzLjg2OSUyMDQ1Ni4wMDIlMjA1OTYuODQlMjA0NjkuMzU3JTIwNTk0LjcxNiUyMDQ3MS43MjFDNTkyLjYzMyUyMDQ3MS44ODElMjA1OTEuNjE0JTIwNDcyLjExNiUyMDU4OS42NDMlMjA0NzEuNTdDNTg4LjAyOCUyMDQ2OS4zMTElMjA1ODguODEzJTIwNDUzLjklMjA1ODguNzk5JTIwNDUwLjAzWiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzMjU3MTlDJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTU4OC42MzQlMjA1NjkuMzlMNTk0Ljk4NSUyMDU2OS4zMTlDNTk0Ljk4NiUyMDU3My4xMzclMjA1OTQuNTY3JTIwNTgxLjMlMjA1OTYuMzM5JTIwNTg0LjM1OUw1OTYuOTglMjA1ODQuMDIyQzU5OC4zNzQlMjA1NzkuMzg4JTIwNTk4LjA2NiUyMDU3NC40OTYlMjA1OTguMDQ1JTIwNTY5LjY1MkM2MDQuMzU2JTIwNTY5LjY0MSUyMDYxMC45ODUlMjA1NjkuNTI5JTIwNjE3LjI2OCUyMDU2OS42NThMNjE3LjM1MiUyMDU5MC40ODhDNjA3LjU2NiUyMDU5MC44NTglMjA1OTguMjg4JTIwNTkwLjU0NyUyMDU4OC43MDklMjA1OTAuODA4QzU4OC43NjYlMjA1ODMuNjY5JTIwNTg4Ljc0MSUyMDU3Ni41MjklMjA1ODguNjM0JTIwNTY5LjM5WiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzMjU3MTlDJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTU5OC4wMiUyMDQ5OC40NzFMNjE3LjQxNiUyMDQ5OC40NDhDNjE3LjM2NyUyMDUwMi4zNjIlMjA2MTcuMzQyJTIwNTA2LjI3NiUyMDYxNy4zNDIlMjA1MTAuMTlDNjE3LjkwOSUyMDUxMy44NzklMjA2MTcuNTYyJTIwNTE5LjQwMSUyMDYxOC4xNzglMjA1MjEuOTk3TDYxNy42NjMlMjA1MjIuMzU1QzYxMS4xMjQlMjA1MjIuMzk2JTIwNjA0LjU4NSUyMDUyMi4zNTUlMjA1OTguMDQ3JTIwNTIyLjIzMkw1OTUuMTE4JTIwNTIyLjAwM0M1OTIuOTU0JTIwNTIyLjAzMiUyMDU5MS4yJTIwNTIxLjczOSUyMDU4OS41ODElMjA1MjIuOTg4QzU4Ny42OTYlMjA1MjYuMDMlMjA1ODkuMDAxJTIwNTMxLjQyOCUyMDU4OC43MDQlMjA1MzYuMzZDNTg3Ljg4MyUyMDUyOC4zOSUyMDU4OC40MDUlMjA1MTMuMDUlMjA1ODguNDk0JTIwNTA0LjYyNUw1ODguODQ4JTIwNTA0LjczNEM1ODguOTI2JTIwNTA5LjAyOSUyMDU4Ny43MzclMjA1MTYuMjc5JTIwNTg5LjY2OCUyMDUxOC42OTVDNTkxLjI4NiUyMDUxOS43MDklMjA1OTMuMzcxJTIwNTE5LjM0NCUyMDU5NS4zNjMlMjA1MTkuMjcyTDU5Ny45OSUyMDUxOS40MTdDNTk4LjE5NiUyMDUxMi43NTglMjA1OTguMDIxJTIwNTA1LjIwMSUyMDU5OC4wMiUyMDQ5OC40NzFaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjM0OUMzRDIlMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNTg4LjQ5NCUyMDUwNC42MjVMNTg4Ljg0OCUyMDUwNC43MzRDNTg4LjkyNiUyMDUwOS4wMjklMjA1ODcuNzM3JTIwNTE2LjI3OSUyMDU4OS42NjglMjA1MTguNjk1QzU5MS4yODYlMjA1MTkuNzA5JTIwNTkzLjM3MSUyMDUxOS4zNDQlMjA1OTUuMzYzJTIwNTE5LjI3Mkw1OTcuOTklMjA1MTkuNDE3QzYwMS4yNzglMjA1MTguOTUyJTIwNjEzLjI4NSUyMDUxOS4xMTIlMjA2MTcuMjI1JTIwNTE5LjA4NEw2MTcuMzQyJTIwNTEwLjE5QzYxNy45MDklMjA1MTMuODc5JTIwNjE3LjU2MiUyMDUxOS40MDElMjA2MTguMTc4JTIwNTIxLjk5N0w2MTcuNjYzJTIwNTIyLjM1NUM2MTEuMTI0JTIwNTIyLjM5NiUyMDYwNC41ODUlMjA1MjIuMzU1JTIwNTk4LjA0NyUyMDUyMi4yMzJMNTk1LjExOCUyMDUyMi4wMDNDNTkyLjk1NCUyMDUyMi4wMzIlMjA1OTEuMiUyMDUyMS43MzklMjA1ODkuNTgxJTIwNTIyLjk4OEM1ODcuNjk2JTIwNTI2LjAzJTIwNTg5LjAwMSUyMDUzMS40MjglMjA1ODguNzA0JTIwNTM2LjM2QzU4Ny44ODMlMjA1MjguMzklMjA1ODguNDA1JTIwNTEzLjA1JTIwNTg4LjQ5NCUyMDUwNC42MjVaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjMyNTcxOUMlMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNjIwLjIwMSUyMDU0Ni4xMDVMNjM5LjgxNyUyMDU0Ni4wOThDNjM5LjgxNCUyMDU1MC4wMzglMjA2MzkuNjM4JTIwNTU0LjYyNiUyMDY0MC41MjklMjA1NTguMzg5QzY0MS4zOTMlMjA1NjUuMTMyJTIwNjM4LjMxOCUyMDU3NC44MDclMjA2MzYuMjE2JTIwNTgxLjExOUw2MzUuODc2JTIwNTgwLjg1NEM2MzUuODA4JTIwNTc4LjUzOSUyMDYzNy43NjQlMjA1NzMuNTk5JTIwNjM4Ljc4MSUyMDU3MS40MDFDNjM2Ljc3OSUyMDU2OS41NTklMjA2MjQuNTYxJTIwNTcwLjQ5NyUyMDYyMS4wMjUlMjA1NzAuNTc2QzYyMC45NzYlMjA1NzMuNTM5JTIwNjIxLjA4NyUyMDU3OS45MjYlMjA2MjAuMzAzJTIwNTgyLjQ0NEw2MjAuMDg1JTIwNTY5LjYyNkM2MjQuNzI3JTIwNTY5LjU5MSUyMDYzMi43MzYlMjA1NjkuODE5JTIwNjM2Ljg5NCUyMDU2OC40NjNMNjM3LjE0OSUyMDU2Ny44MzVDNjMzLjU0MSUyMDU2Ni4yMiUyMDYyNC40MjUlMjA1NjYuNzE3JTIwNjIwLjE1NCUyMDU2Ni43NjFDNjIwLjEyMyUyMDU1OS44NzUlMjA2MjAuMTM5JTIwNTUyLjk5JTIwNjIwLjIwMSUyMDU0Ni4xMDVaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjMyNTcxOUMlMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNjIwLjIyMyUyMDQ3NC43NzdDNjI1Ljk4OSUyMDQ3NC43NTglMjA2MzQuMzE0JTIwNDc0LjkzOCUyMDYzOS44MjQlMjA0NzQuNDAxTDYzOS42OTElMjA0OTUuNDIzQzYzNi43NDElMjA0OTUuNDQ4JTIwNjIyLjMzMSUyMDQ5NS43NzclMjA2MjAuMTcxJTIwNDk1LjA0OEM2MjAuMzM0JTIwNDg4LjQ4MSUyMDYyMC4yMTElMjA0ODEuMzg3JTIwNjIwLjIyMyUyMDQ3NC43NzdaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjMyNTcxOUMlMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNTk4LjA0NyUyMDUyMi4yMzJDNjA0LjU4NSUyMDUyMi4zNTUlMjA2MTEuMTI0JTIwNTIyLjM5NiUyMDYxNy42NjMlMjA1MjIuMzU1QzYxNi44NjklMjA1MjUuODAyJTIwNjE3LjI1MyUyMDUzOC45NDElMjA2MTcuMjk3JTIwNTQyLjk1OUM2MTAuOTc5JTIwNTQzLjA3MSUyMDYwNC4zNTIlMjA1NDIuOTYlMjA1OTguMDA5JTIwNTQyLjk0OEw1OTguMDQ3JTIwNTIyLjIzMlolMjIlMkYlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMiUyMzI1NzE5QyUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk01OTguMTE2JTIwNDc0Ljc4OUM2MDMuODUzJTIwNDc0Ljc3JTIwNjExLjczMSUyMDQ3NC45MzElMjA2MTcuMjY1JTIwNDc0LjQyMUM2MTcuMjgzJTIwNDgwLjk2NiUyMDYxNy4xMzglMjA0ODguNTQyJTIwNjE3LjQ1OCUyMDQ5NC45OTVDNjE0LjQ0NCUyMDQ5NS43ODclMjA2MDEuNzc2JTIwNDk1LjIzOCUyMDU5OC4wNTMlMjA0OTUuMTIxQzU5OC4xODElMjA0ODguNDE5JTIwNTk4LjEwNiUyMDQ4MS41MDglMjA1OTguMTE2JTIwNDc0Ljc4OVolMjIlMkYlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMiUyMzI1NzE5QyUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk01ODguNzI2JTIwNTQ1Ljg4MkM1OTAuNzgzJTIwNTQ1LjkwNyUyMDU5Mi45NjYlMjA1NDUuOTgxJTIwNTk1LjAwOSUyMDU0NS44NjJDNTk1LjE5MSUyMDU1Mi45MDclMjA1OTUuMjExJTIwNTU5Ljk1NyUyMDU5NS4wNjglMjA1NjcuMDAzQzU5My4xNDklMjA1NjcuMTA1JTIwNTkwLjkxMyUyMDU2Ny41MTklMjA1ODkuMzc1JTIwNTY2LjU1NEM1ODguNTMzJTIwNTY1LjA4NyUyMDU4OC43MjIlMjA1NjMuMTE1JTIwNTg4LjY5OCUyMDU2MS4zNDlMNTg4LjcyNiUyMDU0NS44ODJaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjMyNTcxOUMlMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNTg4Ljg0OCUyMDUwNC43MzRDNTg4LjgxNCUyMDUwMi43MjElMjA1ODguNDU3JTIwNTAwLjQ3NCUyMDU4OS41NzglMjA0OTguOTM3QzU5MS4xOTQlMjA0OTguMDQzJTIwNTkzLjIyOCUyMDQ5OC4yMjUlMjA1OTUuMTMzJTIwNDk4LjE4MUM1OTUuMTg4JTIwNTA1LjAzJTIwNTk1LjExOCUyMDUxMi40NjMlMjA1OTUuMzYzJTIwNTE5LjI3MkM1OTMuMzcxJTIwNTE5LjM0NCUyMDU5MS4yODYlMjA1MTkuNzA5JTIwNTg5LjY2OCUyMDUxOC42OTVDNTg3LjczNyUyMDUxNi4yNzklMjA1ODguOTI2JTIwNTA5LjAyOSUyMDU4OC44NDglMjA1MDQuNzM0WiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzMjU3MTlDJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTU4OC43MDQlMjA1MzYuMzZDNTg5LjAwMSUyMDUzMS40MjglMjA1ODcuNjk2JTIwNTI2LjAzJTIwNTg5LjU4MSUyMDUyMi45ODhDNTkxLjIlMjA1MjEuNzM5JTIwNTkyLjk1NCUyMDUyMi4wMzIlMjA1OTUuMTE4JTIwNTIyLjAwM0M1OTUuMTY5JTIwNTI4LjgwNCUyMDU5NS4zNjMlMjA1MzYuMjUlMjA1OTUuMDQzJTIwNTQyLjk4NEw1ODguNjI2JTIwNTQyLjk1N0w1ODguNzA0JTIwNTM2LjM2WiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzMjU3MTlDJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTU4OC44MzYlMjA0NzQuNTg1QzU5MS4zMjglMjA0NzQuNTE3JTIwNTkyLjgzNCUyMDQ3NC40NjglMjA1OTUuMzU4JTIwNDc0LjczOUM1OTQuOTA1JTIwNDgwLjY4JTIwNTk1LjE3JTIwNDg5LjA1NiUyMDU5NS4yNTglMjA0OTUuMTcyQzU5My4yNTIlMjA0OTUuMjg5JTIwNTkxLjIxOCUyMDQ5NS42OTElMjA1ODkuNTQ0JTIwNDk0LjcyM0M1ODguNDkzJTIwNDkzLjE2NyUyMDU4OC43OTYlMjA0OTEuMzMzJTIwNTg4LjgzNyUyMDQ4OS4zOUM1ODguOTM2JTIwNDg0LjYwNiUyMDU4OC44NCUyMDQ3OS40JTIwNTg4LjgzNiUyMDQ3NC41ODVaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjMyNTcxOUMlMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNjIwLjE5MyUyMDQ5OC40NjVMNjM5LjcxJTIwNDk4LjU5N0M2MzkuODk0JTIwNTA1LjQwNCUyMDYzOS44MjElMjA1MTIuNDUlMjA2MzkuODMlMjA1MTkuMjc5TDYyMC4yNTQlMjA1MTkuMTQxTDYyMC4xOTMlMjA0OTguNDY1WiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzMjU3MTlDJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTYyMC4yOTYlMjA1MjIuNDI5QzYyNi44MjIlMjA1MjIuMzI3JTIwNjMzLjM0OSUyMDUyMi4yNzElMjA2MzkuODc1JTIwNTIyLjI2M0M2MzkuOTI3JTIwNTI5LjA5OCUyMDYzOS44MDYlMjA1MzYuMDc0JTIwNjM5Ljc1NCUyMDU0Mi45MjJMNjIwLjIzJTIwNTQyLjkxM0w2MjAuMjk2JTIwNTIyLjQyOVolMjIlMkYlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMiUyMzI1NzE5QyUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk01OTguMDklMjA1NDYuMDc1TDYxNy4yODIlMjA1NDYuMDQ3TDYxNy4zMzIlMjA1NjYuNzQ3QzYxMS40NyUyMDU2Ny4wMjYlMjA2MDQuMDM4JTIwNTY2LjgwMyUyMDU5OC4wNjIlMjA1NjYuNzc2TDU5OC4wOSUyMDU0Ni4wNzVaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjMyNTcxOUMlMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNjQyLjQ3MSUyMDUyMi40MjlDNjQ0LjMzJTIwNTIyLjYzJTIwNjQ1LjM0OSUyMDUyMi4zNjElMjA2NDYuMzc1JTIwNTIzLjM4MkM2NDYuNzQ5JTIwNTI2Ljg5OSUyMDY0Ni41OTElMjA1MzkuMzg3JTIwNjQ1LjE4NSUyMDU0Mi4zMTdMNjQ0LjA0MyUyMDU0Mi45ODVMNjQzLjA1OSUyMDU0Mi43NTRDNjQxLjc5JTIwNTQwLjk0NCUyMDY0Mi40MjMlMjA1MjUuODA3JTIwNjQyLjQ3MSUyMDUyMi40MjlaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjMyNTcxOUMlMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNjQyLjQwNSUyMDUxOS40ODVDNjQyLjIzNSUyMDUxNS40NzMlMjA2NDIuMDM4JTIwNTAzLjEzNCUyMDY0Mi45NTMlMjA0OTkuMDcyQzY0My4wNTIlMjA0OTguNjMzJTIwNjQ1LjEwNSUyMDQ5OC4yNDclMjA2NDUuODMxJTIwNDk4LjA0OUM2NDUuOTI3JTIwNTAxLjgzOCUyMDY0Ni45NDklMjA1MTYuNjM3JTIwNjQ1Ljc2MSUyMDUxOC44NDdDNjQ0LjYzNSUyMDUxOS4wODIlMjA2NDMuNTQ1JTIwNTE5LjMyOCUyMDY0Mi40MDUlMjA1MTkuNDg1WiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzNTdFMEUzJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTU0MS41OTklMjAyOTguNjk4QzU0MS4zOTIlMjAyOTkuMzA2JTIwNTQxLjU1NSUyMDI5OC45MzMlMjA1NDAuOTcxJTIwMjk5Ljc0NEM1MzguOTI5JTIwMjk3LjI2JTIwNTM5LjEyMyUyMDI5My4xOTElMjA1NDEuMDklMjAyOTAuNzlMNTQxLjU5OSUyMDI5OC42OThaJTIyJTJGJTNFJTNDZGVmcyUzRSUzQ2xpbmVhckdyYWRpZW50JTIwaWQlM0QlMjJncmFkaWVudF8zJTIyJTIwZ3JhZGllbnRVbml0cyUzRCUyMnVzZXJTcGFjZU9uVXNlJTIyJTIweDElM0QlMjI0MTMuODI2NiUyMiUyMHkxJTNEJTIyNzAyLjA4OTIzJTIyJTIweDIlM0QlMjI1MTAuMjExODUlMjIlMjB5MiUzRCUyMjQ1Mi43NDMyMyUyMiUzRSUzQ3N0b3AlMjBvZmZzZXQlM0QlMjIwJTIyJTIwc3RvcC1jb2xvciUzRCUyMiUyMzE4Mjc2RiUyMiUyRiUzRSUzQ3N0b3AlMjBvZmZzZXQlM0QlMjIxJTIyJTIwc3RvcC1jb2xvciUzRCUyMiUyMzIzODM5RiUyMiUyRiUzRSUzQyUyRmxpbmVhckdyYWRpZW50JTNFJTNDJTJGZGVmcyUzRSUzQ3BhdGglMjBmaWxsJTNEJTIydXJsJTI4JTIzZ3JhZGllbnRfMyUyOSUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk0zMTcuNzYzJTIwNDE2LjA4NkMzMTcuNDAzJTIwNDI1LjUyOCUyMDMyNi4xNzglMjA0MzAuOTQyJTIwMzMyLjE2MSUyMDQzNi45OTZDMzMyLjcxMSUyMDQzNy41NTQlMjAzMzguMjUxJTIwNDQwLjEzMiUyMDMzOS4zMzMlMjA0NDAuNjVDMzM5LjQ4OCUyMDQ0My4wMTQlMjAzMzcuMzAxJTIwNDQzLjU0NCUyMDMzNy4xMTUlMjA0NDYuNjc0TDMzNy43MDQlMjA0NDYuNTQxQzMzOC44NDYlMjA0NDIuMDIxJTIwMzUzLjMxJTIwNDE4LjEwMyUyMDM1Ni43NTIlMjA0MTMuODM4QzM1OS4yMTUlMjA0MTAuNzg2JTIwMzY5LjA4NyUyMDM5OS4wMDQlMjAzNzMuNDU2JTIwMzk4LjU2NEMzNzMuODkzJTIwNDAwLjA1NSUyMDM3My43NjIlMjA0MDAuMTIyJTIwMzc0LjkwOSUyMDQwMS4xMDVMMzc1LjU2NiUyMDQwMC45MjhMMzc1Ljk3MSUyMDM5OS4wNzdDMzc2LjY0NiUyMDQwMS40NTUlMjAzNzUuOTg2JTIwNDA1LjQ1NCUyMDM3Ni43MSUyMDQwOC42NjlMMzc2Ljc5MiUyMDQ2My44MDFDMzc2Ljc5NyUyMDQ3Mi45OTElMjAzNzcuMTg3JTIwNDg1LjgyNiUyMDM3Ni43MzMlMjA0OTQuNzkxQzM3Ny42MTklMjA1MjEuOTQ1JTIwMzc2LjMzNSUyMDU0OS42NDYlMjAzNzYuODgyJTIwNTc2Ljg0N0MzNzYuOTc3JTIwNTgxLjU4NyUyMDM3Ni45OTQlMjA1ODYuNzU4JTIwMzc2LjgwMiUyMDU5MS40OTJMMzc2LjkyMiUyMDU5My41MDRMMzc2Ljg4OSUyMDU5Ni4yNzhDMzc2Ljc3MyUyMDYxMS4yMzglMjAzNzYuODE0JTIwNjI2LjE5OCUyMDM3Ny4wMTQlMjA2NDEuMTU3QzM4My4zMzglMjA2NDEuNDA3JTIwMzg5Ljg4MSUyMDY0MS4yNDUlMjAzOTYuMjI2JTIwNjQxLjI5NkM0NjAuMzA3JTIwNjQxLjgxMyUyMDUyNC41ODklMjA2NDAuNjQlMjA1ODguNjQ2JTIwNjQxLjMxOUM1ODkuMTc3JTIwNjI1LjQzOSUyMDU4OC4yMzklMjA2MDkuMTI1JTIwNTg4LjcyOCUyMDU5My4xMjNDNTk1LjE3MyUyMDU5My44MTIlMjA2MTMuNTAyJTIwNTkzLjQ0MSUyMDYyMC4yNDclMjA1OTMuMDczQzYyMC4xNzQlMjA1ODkuNTMlMjA2MjAuMTkzJTIwNTg1Ljk4NiUyMDYyMC4zMDMlMjA1ODIuNDQ0QzYyMS4wODclMjA1NzkuOTI2JTIwNjIwLjk3NiUyMDU3My41MzklMjA2MjEuMDI1JTIwNTcwLjU3NkM2MjQuNTYxJTIwNTcwLjQ5NyUyMDYzNi43NzklMjA1NjkuNTU5JTIwNjM4Ljc4MSUyMDU3MS40MDFDNjM3Ljc2NCUyMDU3My41OTklMjA2MzUuODA4JTIwNTc4LjUzOSUyMDYzNS44NzYlMjA1ODAuODU0TDYzNi4yMTYlMjA1ODEuMTE5QzYzOC4zMTglMjA1NzQuODA3JTIwNjQxLjM5MyUyMDU2NS4xMzIlMjA2NDAuNTI5JTIwNTU4LjM4OUw2NDAuOTExJTIwNTU4LjUyNEM2NTAuNjMxJTIwNTY0LjM2MiUyMDY2OC44ODYlMjA1NDkuNzc1JTIwNjc1LjMzMSUyMDU1NS43MjlDNjc1LjcwNCUyMDU1OC41OCUyMDY3NC40MTklMjA1NTkuNzMzJTIwNjc0LjglMjA1NjEuOTY3QzY3NC43MDYlMjA1NjIuMTM0JTIwNjc0LjYxMiUyMDU2Mi4zMDElMjA2NzQuNTE3JTIwNTYyLjQ2OEM2NzMuNDc1JTIwNTY3LjA1OSUyMDY2Ny42NzglMjA1ODIuMzU1JTIwNjY4LjQ3MyUyMDU4NS45MDhDNjY0LjkyMyUyMDU5OC4wMyUyMDY1NS41NzclMjA2MTUuNTU2JTIwNjQ4LjcyNSUyMDYyNi4xNzRDNjIxLjEwOSUyMDY2OC45NjglMjA1NzguNTY1JTIwNzAwLjY4NiUyMDUyOC44MjUlMjA3MTEuOTk1QzQ3OC4wMTglMjA3MjMuNjk1JTIwNDI0LjY0MSUyMDcxNC40MjElMjAzODAuNzU3JTIwNjg2LjI3QzI5Ni43ODglMjA2MzMuMzg5JTIwMjY4LjUxNCUyMDUyMi44MzQlMjAzMDguNTc0JTIwNDMzLjgxOUMzMTEuMjMxJTIwNDI3LjkxNiUyMDMxNC4zMTclMjA0MjEuNTUzJTIwMzE3Ljc2MyUyMDQxNi4wODZaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjM0OUMzRDIlMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNMzc2LjkyMiUyMDU5My41MDRMMzc2Ljg4OSUyMDU5Ni4yNzhDMzczLjE5MiUyMDU5Ni4zMDklMjAzNTMuMTU4JTIwNTk3LjAxOCUyMDM1MS4wMDElMjA1OTUuOTY5TDM1MC44MDclMjA1OTUuMTgxQzM1My42NTMlMjA1OTMuMjIlMjAzNzIuNTc4JTIwNTkzLjU4OCUyMDM3Ni45MjIlMjA1OTMuNTA0WiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzNDlDM0QyJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTM3Ni41OTYlMjA0OTcuMzA1QzM3NC4yMzklMjA0OTcuNDI1JTIwMzcxLjI3MyUyMDQ5OC4wNTIlMjAzNjkuNjYlMjA0OTYuMTMxTDM3MC4yMTYlMjA0OTUuMzM0QzM3Mi40MDQlMjA0OTQuMjczJTIwMzc0LjI0MyUyMDQ5NC42NTglMjAzNzYuNzMzJTIwNDk0Ljc5MUMzNzcuNjE5JTIwNTIxLjk0NSUyMDM3Ni4zMzUlMjA1NDkuNjQ2JTIwMzc2Ljg4MiUyMDU3Ni44NDdDMzc2Ljk3NyUyMDU4MS41ODclMjAzNzYuOTk0JTIwNTg2Ljc1OCUyMDM3Ni44MDIlMjA1OTEuNDkyQzM3Ni4wNTMlMjA1ODYuNDM3JTIwMzc2LjQzNiUyMDU2NS4zODklMjAzNzYuNDUlMjA1NTkuNDAzTDM3Ni41OTYlMjA0OTcuMzA1WiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzNDlDM0QyJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTMzMy4xMzYlMjA1MzEuMzMzQzMzNy40NTMlMjA1MzEuMDk3JTIwMzU5LjY2JTIwNTMxLjA3MSUyMDM2Mi42MzUlMjA1MzIuNDU3TDM2Mi42NzMlMjA1MzMuNDgyQzM1OC41NTYlMjA1MzQuMDUzJTIwMzM4LjA2OCUyMDUzNC4yMDIlMjAzMzMuNzclMjA1MzMuODgyQzMzMi42ODUlMjA1MzIuNzQzJTIwMzMzLjA5JTIwNTMzLjQ0NiUyMDMzMy4xMzYlMjA1MzEuMzMzWiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzNDlDM0QyJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTM0Ny42MjIlMjA0NDIuMTI0QzM1MS45MTQlMjA0NDEuODklMjAzNjguMDQlMjA0NDEuMzc0JTIwMzcxLjIzOSUyMDQ0Mi40MTZDMzcxLjc0OCUyMDQ0My44MjclMjAzNzEuNzA2JTIwNDQzLjA5OSUyMDM3MS4xNDIlMjA0NDQuNjc0QzM2Ni4zOCUyMDQ0NC40ODYlMjAzNTAuMTUxJTIwNDQ1LjI2NiUyMDM0Ni45NTUlMjA0NDMuOUwzNDYuNjg5JTIwNDQyLjkwN0wzNDcuNjIyJTIwNDQyLjEyNFolMjIlMkYlM0UlM0NkZWZzJTNFJTNDbGluZWFyR3JhZGllbnQlMjBpZCUzRCUyMmdyYWRpZW50XzQlMjIlMjBncmFkaWVudFVuaXRzJTNEJTIydXNlclNwYWNlT25Vc2UlMjIlMjB4MSUzRCUyMjQ2OC43Mjc3MiUyMiUyMHkxJTNEJTIyNjMxLjAxNzMzJTIyJTIweDIlM0QlMjI1NzUuMDk1NjQlMjIlMjB5MiUzRCUyMjQwMi40Mzk1OCUyMiUzRSUzQ3N0b3AlMjBvZmZzZXQlM0QlMjIwJTIyJTIwc3RvcC1jb2xvciUzRCUyMiUyMzFBMzg3NSUyMiUyRiUzRSUzQ3N0b3AlMjBvZmZzZXQlM0QlMjIxJTIyJTIwc3RvcC1jb2xvciUzRCUyMiUyMzJCOURBQSUyMiUyRiUzRSUzQyUyRmxpbmVhckdyYWRpZW50JTNFJTNDJTJGZGVmcyUzRSUzQ3BhdGglMjBmaWxsJTNEJTIydXJsJTI4JTIzZ3JhZGllbnRfNCUyOSUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk00NzAuNzk3JTIwMzgzLjA4QzQ5Mi45NDYlMjAzODMuMjA1JTIwNTE1LjA5NiUyMDM4My4xODQlMjA1MzcuMjQ0JTIwMzgzLjAxNkM1MzcuMjM3JTIwMzg2LjIwMyUyMDUzNy4zNjYlMjAzOTAuNjY0JTIwNTM3LjE3NCUyMDM5My43NDhDNTM3LjIxOCUyMDQwMi4xNjQlMjA1MzcuMiUyMDQxMC41ODElMjA1MzcuMTIxJTIwNDE4Ljk5N0w1MzcuMzE3JTIwNDI2LjE3MUM1NTEuODg2JTIwNDI2LjM1MSUyMDU2Ni41OTQlMjA0MjYuMDI3JTIwNTgxLjEyOSUyMDQyNi4zNDlMNTgxLjE3MSUyMDYzNC4wODFDNTQ1LjQ1NCUyMDYzNC4xNzklMjA1MDguNzIyJTIwNjMzLjYzNCUyMDQ3My4xMTUlMjA2MzQuMjA0TDQ2OC4yNDglMjA2MzQuMTIyQzQ1Ny4yMDQlMjA2MzQuOTI1JTIwNDM2Ljg1NiUyMDYzNC4wNzUlMjA0MjUuMTUzJTIwNjM0LjIzNEM0MTUuODc0JTIwNjM0LjM1OSUyMDM5Mi43NzUlMjA2MzQuODE0JTIwMzg0LjMwOSUyMDYzMy45ODFDMzg0Ljc3NyUyMDYyMi45JTIwMzg0LjIyMyUyMDYwOC4xNDElMjAzODQuMTglMjA1OTYuNjUyQzM4My45NTUlMjA1ODYuNDM0JTIwMzg0LjAwNCUyMDU3MS40NzIlMjAzODQuMjI1JTIwNTYxLjI0OUwzODQuMjE2JTIwNTUwLjc0MUMzODMuOTYyJTIwNTQ2LjM0NiUyMDM4My45MzYlMjA1NDAuNzc1JTIwMzg0LjA5JTIwNTM2LjMyOUMzODUuMDEyJTIwNTA5LjYwMiUyMDM4Mi45MjQlMjA0ODEuMDI4JTIwMzg0LjUyOCUyMDQ1NC41MjFDMzg0LjQyJTIwNDQwLjk0NSUyMDM4NC4xNyUyMDQyOC4wNzklMjAzODQuNDY0JTIwNDE0LjQ5NkwzODQuNTQzJTIwNDEyLjQ3NUMzODQuNjUyJTIwNDAyLjc1NyUyMDM4NC4zMjclMjAzOTIuOTI5JTIwMzg0LjQxNiUyMDM4My4xNTRDMzk2LjI4NCUyMDM4Mi45MTklMjA0MDguNzQ4JTIwMzgzLjEwOSUyMDQyMC42NzElMjAzODMuMDkxTDQyNC4wOCUyMDM4My4wOTlDNDM4LjI5OCUyMDM4My4xODElMjA0NTQuMDclMjAzODMuNTE1JTIwNDY4LjIyJTIwMzgzLjA4Nkw0NzAuNzk3JTIwMzgzLjA4WiUyMiUyRiUzRSUzQ2RlZnMlM0UlM0NsaW5lYXJHcmFkaWVudCUyMGlkJTNEJTIyZ3JhZGllbnRfNSUyMiUyMGdyYWRpZW50VW5pdHMlM0QlMjJ1c2VyU3BhY2VPblVzZSUyMiUyMHgxJTNEJTIyNDA1LjQ0OTU1JTIyJTIweTElM0QlMjI1OTkuOTQxNjUlMjIlMjB4MiUzRCUyMjQ0Ni43MTg3OCUyMiUyMHkyJTNEJTIyNDkwLjg4NTU2JTIyJTNFJTNDc3RvcCUyMG9mZnNldCUzRCUyMjAlMjIlMjBzdG9wLWNvbG9yJTNEJTIyJTIzMUIzRTc5JTIyJTJGJTNFJTNDc3RvcCUyMG9mZnNldCUzRCUyMjElMjIlMjBzdG9wLWNvbG9yJTNEJTIyJTIzMjI2QTkxJTIyJTJGJTNFJTNDJTJGbGluZWFyR3JhZGllbnQlM0UlM0MlMkZkZWZzJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjJ1cmwlMjglMjNncmFkaWVudF81JTI5JTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTM4NC4yMTYlMjA1NTAuNzQxQzM4My45NjIlMjA1NDYuMzQ2JTIwMzgzLjkzNiUyMDU0MC43NzUlMjAzODQuMDklMjA1MzYuMzI5QzM4NS4wMTIlMjA1MDkuNjAyJTIwMzgyLjkyNCUyMDQ4MS4wMjglMjAzODQuNTI4JTIwNDU0LjUyMUMzODUuMTU1JTIwNDY3LjU1MiUyMDM4NC40MTklMjA0ODEuNTgyJTIwMzg0LjY0NSUyMDQ5NC43MDFDMzk2LjY3MSUyMDQ5NC41OTklMjA0MDguNjk3JTIwNDk0LjU1NyUyMDQyMC43MjMlMjA0OTQuNTc2QzQyMC42NzYlMjA0ODkuMTg4JTIwNDIwLjExMyUyMDQ3OS41MjclMjA0MjEuODQzJTIwNDc0LjczOEw0MjIuNDYzJTIwNDc0LjQ1NUM0MjQuNDM1JTIwNDc4LjQ4MSUyMDQyMy44MTMlMjA0ODkuNzI0JTIwNDIzLjc1OCUyMDQ5NC42NEw0NTIuMzQ4JTIwNDk0LjY1NkM0NTYuNDQ2JTIwNDk0LjY2MSUyMDQ2My44MjElMjA0OTQuNDgyJTIwNDY3Ljc2NSUyMDQ5NC44MjNMNDY3LjQ3MiUyMDQ5Ni4wMjNDNDY4LjQ0OSUyMDQ5Ny41NzclMjA0NjcuNzc2JTIwNDk2Ljk1NyUyMDQ2OS44MTMlMjA0OTcuNjMxTDQ3MC43NiUyMDQ5Ny4yMjlMNDcwLjg0NCUyMDQ5Ny41NDlMNDcwLjgyOCUyMDU2My4yODVDNDcwLjgyNiUyMDU2OC40OTQlMjA0NzAuNDE3JTIwNTg5Ljg2NSUyMDQ3MC45NCUyMDU5My43MzlMNDcwLjUwMiUyMDU5Ni41NzdDNDcxLjE5OSUyMDYwNC45MDglMjA0NzAuNzE5JTIwNjE0LjQwMSUyMDQ3MC45NCUyMDYyMi44MjlDNDcxLjAwNyUyMDYyNS4zNzglMjA0NzAuNjY1JTIwNjMxLjEzNyUyMDQ3MS4wNjUlMjA2MzMuNDA1QzQ3MS45MDQlMjA2MzMuNzczJTIwNDcyLjIzNiUyMDYzMy45NDUlMjA0NzMuMTE1JTIwNjM0LjIwNEw0NjguMjQ4JTIwNjM0LjEyMkM0NTcuMjA0JTIwNjM0LjkyNSUyMDQzNi44NTYlMjA2MzQuMDc1JTIwNDI1LjE1MyUyMDYzNC4yMzRDNDE1Ljg3NCUyMDYzNC4zNTklMjAzOTIuNzc1JTIwNjM0LjgxNCUyMDM4NC4zMDklMjA2MzMuOTgxQzM4NC43NzclMjA2MjIuOSUyMDM4NC4yMjMlMjA2MDguMTQxJTIwMzg0LjE4JTIwNTk2LjY1MkMzODMuOTU1JTIwNTg2LjQzNCUyMDM4NC4wMDQlMjA1NzEuNDcyJTIwMzg0LjIyNSUyMDU2MS4yNDlMMzg0LjIxNiUyMDU1MC43NDFaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjMxQjNGNzglMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNDIxLjExNiUyMDU5Ni41NzJMNDI0LjE2MyUyMDU5Ni42NTFDNDM4LjczJTIwNTk2LjM0NCUyMDQ1My43MDIlMjA1OTYuNjQlMjA0NjguMzMzJTIwNTk2LjU2OEw0NjguNDAzJTIwNjA2LjIzOUM0NjguMzQzJTIwNjEwLjU3OSUyMDQ2OC43NDklMjA2MzAuNjY0JTIwNDY4LjM3MSUyMDYzMy43OTJMNDY4LjI0OCUyMDYzNC4xMjJDNDU3LjIwNCUyMDYzNC45MjUlMjA0MzYuODU2JTIwNjM0LjA3NSUyMDQyNS4xNTMlMjA2MzQuMjM0QzQxNS44NzQlMjA2MzQuMzU5JTIwMzkyLjc3NSUyMDYzNC44MTQlMjAzODQuMzA5JTIwNjMzLjk4MUMzODQuNzc3JTIwNjIyLjklMjAzODQuMjIzJTIwNjA4LjE0MSUyMDM4NC4xOCUyMDU5Ni42NTJDMzg3LjMyMSUyMDU5Ni4zMzElMjAzOTMuNDIxJTIwNTk2LjUzOSUyMDM5Ni44MzMlMjA1OTYuNTQ1TDQyMS4xMTYlMjA1OTYuNTcyWiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzMUIzRjc4JTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTM4NC4xOCUyMDU5Ni42NTJDMzg3LjMyMSUyMDU5Ni4zMzElMjAzOTMuNDIxJTIwNTk2LjUzOSUyMDM5Ni44MzMlMjA1OTYuNTQ1TDQyMS4xMTYlMjA1OTYuNTcyQzQyMS4xNjMlMjA2MDguMjIyJTIwNDIxLjU0NiUyMDYyMi4zNTglMjA0MjEuMDMyJTIwNjMzLjg2OUM0MTAuMzc4JTIwNjMzLjc5OCUyMDM5NC42NzIlMjA2MzMuMjIzJTIwMzg0LjMwOSUyMDYzMy45ODFDMzg0Ljc3NyUyMDYyMi45JTIwMzg0LjIyMyUyMDYwOC4xNDElMjAzODQuMTglMjA1OTYuNjUyWiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzNDhBQ0M5JTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTQyMS4xMTYlMjA1OTYuNTcyTDQyNC4xNjMlMjA1OTYuNjUxQzQyNC4xNDIlMjA2MDkuMDMzJTIwNDI0LjM2NyUyMDYyMS41ODglMjA0MjQuMjM4JTIwNjMzLjkzMkM0MzguMzg1JTIwNjMzLjgxMyUyMDQ1NC40OTUlMjA2MzQuMjI2JTIwNDY4LjM3MSUyMDYzMy43OTJMNDY4LjI0OCUyMDYzNC4xMjJDNDU3LjIwNCUyMDYzNC45MjUlMjA0MzYuODU2JTIwNjM0LjA3NSUyMDQyNS4xNTMlMjA2MzQuMjM0QzQxNS44NzQlMjA2MzQuMzU5JTIwMzkyLjc3NSUyMDYzNC44MTQlMjAzODQuMzA5JTIwNjMzLjk4MUMzOTQuNjcyJTIwNjMzLjIyMyUyMDQxMC4zNzglMjA2MzMuNzk4JTIwNDIxLjAzMiUyMDYzMy44NjlDNDIxLjU0NiUyMDYyMi4zNTglMjA0MjEuMTYzJTIwNjA4LjIyMiUyMDQyMS4xMTYlMjA1OTYuNTcyWiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzNDlDM0QyJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTM4NC4yMTYlMjA1NTAuNzQxQzM4My45NjIlMjA1NDYuMzQ2JTIwMzgzLjkzNiUyMDU0MC43NzUlMjAzODQuMDklMjA1MzYuMzI5QzM4NS4wMTIlMjA1MDkuNjAyJTIwMzgyLjkyNCUyMDQ4MS4wMjglMjAzODQuNTI4JTIwNDU0LjUyMUMzODUuMTU1JTIwNDY3LjU1MiUyMDM4NC40MTklMjA0ODEuNTgyJTIwMzg0LjY0NSUyMDQ5NC43MDFDMzk2LjY3MSUyMDQ5NC41OTklMjA0MDguNjk3JTIwNDk0LjU1NyUyMDQyMC43MjMlMjA0OTQuNTc2QzQyMC42NzYlMjA0ODkuMTg4JTIwNDIwLjExMyUyMDQ3OS41MjclMjA0MjEuODQzJTIwNDc0LjczOEw0MjIuNDYzJTIwNDc0LjQ1NUM0MjQuNDM1JTIwNDc4LjQ4MSUyMDQyMy44MTMlMjA0ODkuNzI0JTIwNDIzLjc1OCUyMDQ5NC42NEw0NTIuMzQ4JTIwNDk0LjY1NkM0NTYuNDQ2JTIwNDk0LjY2MSUyMDQ2My44MjElMjA0OTQuNDgyJTIwNDY3Ljc2NSUyMDQ5NC44MjNMNDY3LjQ3MiUyMDQ5Ni4wMjNDNDY4LjQ0OSUyMDQ5Ny41NzclMjA0NjcuNzc2JTIwNDk2Ljk1NyUyMDQ2OS44MTMlMjA0OTcuNjMxTDQ3MC43NiUyMDQ5Ny4yMjlMNDcwLjg0NCUyMDQ5Ny41NDlMNDcwLjgyOCUyMDU2My4yODVDNDcwLjgyNiUyMDU2OC40OTQlMjA0NzAuNDE3JTIwNTg5Ljg2NSUyMDQ3MC45NCUyMDU5My43MzlMNDcwLjUwMiUyMDU5Ni41NzdDNDcxLjE5OSUyMDYwNC45MDglMjA0NzAuNzE5JTIwNjE0LjQwMSUyMDQ3MC45NCUyMDYyMi44MjlDNDcxLjAwNyUyMDYyNS4zNzglMjA0NzAuNjY1JTIwNjMxLjEzNyUyMDQ3MS4wNjUlMjA2MzMuNDA1QzQ3MS45MDQlMjA2MzMuNzczJTIwNDcyLjIzNiUyMDYzMy45NDUlMjA0NzMuMTE1JTIwNjM0LjIwNEw0NjguMjQ4JTIwNjM0LjEyMkw0NjguMzcxJTIwNjMzLjc5MkM0NjguNzQ5JTIwNjMwLjY2NCUyMDQ2OC4zNDMlMjA2MTAuNTc5JTIwNDY4LjQwMyUyMDYwNi4yMzlDNDY5Ljg4MiUyMDYwNC4zMDglMjA0NjkuMDY2JTIwNTg5LjgxMyUyMDQ2OC4zMDclMjA1ODYuOTkyQzQ2Ny44NDQlMjA1NzguODAyJTIwNDY4LjIxNCUyMDU2NS44ODMlMjA0NjguMjE5JTIwNTU3LjQzMUM0NjguMzYlMjA1MzcuNDg5JTIwNDY4LjMzOCUyMDUxNy41NDUlMjA0NjguMTU1JTIwNDk3LjYwM0w0MjMuNzczJTIwNDk3LjU5M0M0MjMuODM0JTIwNTAyLjIzMSUyMDQyNC4yMjIlMjA1MDguMTg2JTIwNDIyLjgxOSUyMDUxMi40OTVMNDIyLjE4JTIwNTEyLjc0OEM0MjAuMzI0JTIwNTA5LjQ5OCUyMDQyMC43MzElMjA1MDEuNTA2JTIwNDIwLjczNSUyMDQ5Ny41MDhDNDA4LjYwNCUyMDQ5Ny42ODYlMjAzOTYuNDcxJTIwNDk3LjYyNiUyMDM4NC4zNDIlMjA0OTcuMzI5QzM4NC44OTYlMjA1MTEuNjc3JTIwMzg1LjAwMSUyMDUzNi4zNDklMjAzODQuMjE2JTIwNTUwLjc0MVolMjIlMkYlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMiUyMzQ4QUNDOSUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk0zODQuMjI1JTIwNTYxLjI0OUMzODUuMTE4JTIwNTcwLjQxMiUyMDM4NC42ODYlMjA1ODQuMzYlMjAzODQuNjEzJTIwNTkzLjg5OUw0MjEuMjE1JTIwNTkzLjY5MUM0MjEuMTI2JTIwNTg4Ljc2NSUyMDQyMC41MzElMjA1ODAuMzcyJTIwNDIyLjE1NCUyMDU3NS45ODhMNDIyLjgzOCUyMDU3NS45MzZDNDI0LjU2NCUyMDU3OS45NTglMjA0MjQuMDk1JTIwNTg4LjkzOCUyMDQyNC4xMzMlMjA1OTMuNjM0QzQzNy4xOCUyMDU5NC4xNTIlMjA0NTUuMDQ5JTIwNTkzLjk5JTIwNDY4LjI4MyUyMDU5My43MTdMNDY4LjMwNyUyMDU4Ni45OTJDNDY5LjA2NiUyMDU4OS44MTMlMjA0NjkuODgyJTIwNjA0LjMwOCUyMDQ2OC40MDMlMjA2MDYuMjM5TDQ2OC4zMzMlMjA1OTYuNTY4QzQ1My43MDIlMjA1OTYuNjQlMjA0MzguNzMlMjA1OTYuMzQ0JTIwNDI0LjE2MyUyMDU5Ni42NTFMNDIxLjExNiUyMDU5Ni41NzJMMzk2LjgzMyUyMDU5Ni41NDVDMzkzLjQyMSUyMDU5Ni41MzklMjAzODcuMzIxJTIwNTk2LjMzMSUyMDM4NC4xOCUyMDU5Ni42NTJDMzgzLjk1NSUyMDU4Ni40MzQlMjAzODQuMDA0JTIwNTcxLjQ3MiUyMDM4NC4yMjUlMjA1NjEuMjQ5WiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzRkFGQ0ZEJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTQwNC43NjMlMjA1NDEuNjlDNDE1LjUzMyUyMDU0MS44MTIlMjA0MjYuMzA0JTIwNTQxLjg1MyUyMDQzNy4wNzUlMjA1NDEuODE0TDQzNy4wODklMjA1NzEuNjVDNDI2LjMwMiUyMDU3MS44MTYlMjA0MTUuNTEzJTIwNTcxLjc0MyUyMDQwNC43MjklMjA1NzEuNDNDNDA0LjU0NyUyMDU2MS41MTclMjA0MDQuNTU4JTIwNTUxLjYwMiUyMDQwNC43NjMlMjA1NDEuNjlaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjMxQjNGNzglMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNDEwLjAyNyUyMDU0Ny4wNDJMNDMxLjUyNCUyMDU0Ni45NjdMNDMxLjU4OSUyMDU2Ni4yMjVMNDEwLjAxNSUyMDU2Ni4yMjhDNDEwLjEzMSUyMDU1OS44MzMlMjA0MTAuMTM1JTIwNTUzLjQzNyUyMDQxMC4wMjclMjA1NDcuMDQyWiUyMiUyRiUzRSUzQ2RlZnMlM0UlM0NsaW5lYXJHcmFkaWVudCUyMGlkJTNEJTIyZ3JhZGllbnRfNiUyMiUyMGdyYWRpZW50VW5pdHMlM0QlMjJ1c2VyU3BhY2VPblVzZSUyMiUyMHgxJTNEJTIyNDEyLjg0OTU1JTIyJTIweTElM0QlMjI1MDEuMTU3NzglMjIlMjB4MiUzRCUyMjQzOS4yODk2MSUyMiUyMHkyJTNEJTIyNDA3Ljg1MDc3JTIyJTNFJTNDc3RvcCUyMG9mZnNldCUzRCUyMjAlMjIlMjBzdG9wLWNvbG9yJTNEJTIyJTIzMjA2MThBJTIyJTJGJTNFJTNDc3RvcCUyMG9mZnNldCUzRCUyMjElMjIlMjBzdG9wLWNvbG9yJTNEJTIyJTIzMjQ4NTlEJTIyJTJGJTNFJTNDJTJGbGluZWFyR3JhZGllbnQlM0UlM0MlMkZkZWZzJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjJ1cmwlMjglMjNncmFkaWVudF82JTI5JTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTQyMC42NzElMjAzODMuMDkxTDQyNC4wOCUyMDM4My4wOTlDNDI0LjE2NCUyMDM5Mi45MDMlMjA0MjQuMDY0JTIwNDAyLjcwOCUyMDQyMy43NzglMjA0MTIuNTA5TDQzMS4zMzIlMjA0MTIuNTUzTDQzMC44MDIlMjA0MTIuNjcxQzQyOC4yMDMlMjA0MTMuMjMlMjA0MjYuMzc1JTIwNDEzLjM5JTIwNDIzLjczOSUyMDQxMy42MzhMNDIzLjUyMyUyMDQxMy4wODhMNDIyLjA2OCUyMDQxMy41MTlMNDIyLjMxMiUyMDQxMy40MTdMNDIyLjY5OCUyMDQxMy44MzlMNDIyLjg4MSUyMDQxMy4zNTdMNDIzLjE5JTIwNDEzLjkwOUw0MjMuNDclMjA0MTMuMzYxTDQyMy42OTElMjA0MTMuOTU1TDQyNC4wMjUlMjA0MTMuNDA1QzQyNi43NTklMjA0MTMuNjU0JTIwNDI4LjY4JTIwNDEzLjc1JTIwNDMxLjM1NSUyMDQxNC41MDhDNDQzLjQxNCUyMDQxNC42ODglMjA0NTYuMzA2JTIwNDE0LjIzMyUyMDQ2OC4xMjYlMjA0MTQuNTk3TDQ2OC4yMzklMjA0NjkuNTgzQzQ2OC4yNDYlMjA0NzMuNTQlMjA0NjguNTM4JTIwNDkyLjA2NiUyMDQ2Ny43NjUlMjA0OTQuODIzQzQ2My44MjElMjA0OTQuNDgyJTIwNDU2LjQ0NiUyMDQ5NC42NjElMjA0NTIuMzQ4JTIwNDk0LjY1Nkw0MjMuNzU4JTIwNDk0LjY0QzQyMy44MTMlMjA0ODkuNzI0JTIwNDI0LjQzNSUyMDQ3OC40ODElMjA0MjIuNDYzJTIwNDc0LjQ1NUw0MjEuODQzJTIwNDc0LjczOEM0MjAuMTEzJTIwNDc5LjUyNyUyMDQyMC42NzYlMjA0ODkuMTg4JTIwNDIwLjcyMyUyMDQ5NC41NzZDNDA4LjY5NyUyMDQ5NC41NTclMjAzOTYuNjcxJTIwNDk0LjU5OSUyMDM4NC42NDUlMjA0OTQuNzAxQzM4NC40MTklMjA0ODEuNTgyJTIwMzg1LjE1NSUyMDQ2Ny41NTIlMjAzODQuNTI4JTIwNDU0LjUyMUMzODQuNDIlMjA0NDAuOTQ1JTIwMzg0LjE3JTIwNDI4LjA3OSUyMDM4NC40NjQlMjA0MTQuNDk2TDM4NC41NDMlMjA0MTIuNDc1QzM4NC42NTIlMjA0MDIuNzU3JTIwMzg0LjMyNyUyMDM5Mi45MjklMjAzODQuNDE2JTIwMzgzLjE1NEMzOTYuMjg0JTIwMzgyLjkxOSUyMDQwOC43NDglMjAzODMuMTA5JTIwNDIwLjY3MSUyMDM4My4wOTFaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjMyNDg3QTElMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNDIwLjY3MSUyMDM4My4wOTFMNDI0LjA4JTIwMzgzLjA5OUM0MjQuMTY0JTIwMzkyLjkwMyUyMDQyNC4wNjQlMjA0MDIuNzA4JTIwNDIzLjc3OCUyMDQxMi41MDlMNDMxLjMzMiUyMDQxMi41NTNMNDMwLjgwMiUyMDQxMi42NzFDNDI4LjIwMyUyMDQxMy4yMyUyMDQyNi4zNzUlMjA0MTMuMzklMjA0MjMuNzM5JTIwNDEzLjYzOEw0MjMuNTIzJTIwNDEzLjA4OEw0MjIuMDY4JTIwNDEzLjUxOUw0MjIuMzEyJTIwNDEzLjQxN0w0MjIuNjk4JTIwNDEzLjgzOUw0MjIuODgxJTIwNDEzLjM1N0w0MjMuMTklMjA0MTMuOTA5TDQyMy40NyUyMDQxMy4zNjFMNDIzLjY5MSUyMDQxMy45NTVMNDI0LjAyNSUyMDQxMy40MDVDNDI2Ljc1OSUyMDQxMy42NTQlMjA0MjguNjglMjA0MTMuNzUlMjA0MzEuMzU1JTIwNDE0LjUwOEw0MjMuODQxJTIwNDE0LjY2Mkw0MjEuMDg2JTIwNDE0LjcxQzQxOC4zMTElMjA0MTQuNTEyJTIwNDE0LjY2NyUyMDQxNC41NzUlMjA0MTEuODE2JTIwNDE0LjU0NEM0MDIuNjk5JTIwNDE0LjU5OCUyMDM5My41ODElMjA0MTQuNTgyJTIwMzg0LjQ2NCUyMDQxNC40OTZMMzg0LjU0MyUyMDQxMi40NzVDMzg0LjY1MiUyMDQwMi43NTclMjAzODQuMzI3JTIwMzkyLjkyOSUyMDM4NC40MTYlMjAzODMuMTU0QzM5Ni4yODQlMjAzODIuOTE5JTIwNDA4Ljc0OCUyMDM4My4xMDklMjA0MjAuNjcxJTIwMzgzLjA5MVolMjIlMkYlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMiUyMzQ5QzNEMiUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk00MjAuNjcxJTIwMzgzLjA5MUw0MjQuMDglMjAzODMuMDk5QzQyNC4xNjQlMjAzOTIuOTAzJTIwNDI0LjA2NCUyMDQwMi43MDglMjA0MjMuNzc4JTIwNDEyLjUwOUw0MzEuMzMyJTIwNDEyLjU1M0w0MzAuODAyJTIwNDEyLjY3MUM0MjguMjAzJTIwNDEzLjIzJTIwNDI2LjM3NSUyMDQxMy4zOSUyMDQyMy43MzklMjA0MTMuNjM4TDQyMy41MjMlMjA0MTMuMDg4TDQyMi4wNjglMjA0MTMuNTE5TDQyMi4zMTIlMjA0MTMuNDE3TDQyMi42OTglMjA0MTMuODM5TDQyMi44ODElMjA0MTMuMzU3TDQyMy4xOSUyMDQxMy45MDlMNDIzLjQ3JTIwNDEzLjM2MUw0MjMuNjkxJTIwNDEzLjk1NUw0MjQuMDI1JTIwNDEzLjQwNUM0MjYuNzU5JTIwNDEzLjY1NCUyMDQyOC42OCUyMDQxMy43NSUyMDQzMS4zNTUlMjA0MTQuNTA4TDQyMy44NDElMjA0MTQuNjYyTDQyMS4wODYlMjA0MTQuNzFDNDE4LjMxMSUyMDQxNC41MTIlMjA0MTQuNjY3JTIwNDE0LjU3NSUyMDQxMS44MTYlMjA0MTQuNTQ0QzQxNC4xMzclMjA0MTMuOTMlMjA0MTcuNTU5JTIwNDEzLjQ1NSUyMDQxOS45NyUyMDQxMy43NTZDNDE5LjI4NiUyMDQxMy4yNSUyMDQxNy4yODQlMjA0MTMuMjIyJTIwNDE1LjklMjA0MTIuODM2TDQxNC45NjElMjA0MTIuNTY4TDQyMS4yNzUlMjA0MTIuNDE3QzQyMS4yMDUlMjA0MDMuMzYzJTIwNDIxLjM3NiUyMDM5MS45OTYlMjA0MjAuNjcxJTIwMzgzLjA5MVolMjIlMkYlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMiUyMzU3RTBFMyUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk0zODQuNTQzJTIwNDEyLjQ3NUMzOTQuMTg4JTIwNDEyLjQ2NyUyMDQwNS40NDMlMjA0MTIuMTc0JTIwNDE0Ljk2MSUyMDQxMi41NjhMNDE1LjklMjA0MTIuODM2QzQxNy4yODQlMjA0MTMuMjIyJTIwNDE5LjI4NiUyMDQxMy4yNSUyMDQxOS45NyUyMDQxMy43NTZDNDE3LjU1OSUyMDQxMy40NTUlMjA0MTQuMTM3JTIwNDEzLjkzJTIwNDExLjgxNiUyMDQxNC41NDRDNDAyLjY5OSUyMDQxNC41OTglMjAzOTMuNTgxJTIwNDE0LjU4MiUyMDM4NC40NjQlMjA0MTQuNDk2TDM4NC41NDMlMjA0MTIuNDc1WiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzNDlDM0QyJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTQyMS4wODYlMjA0MTQuNzFMNDIzLjg0MSUyMDQxNC42NjJDNDIzLjg2NiUyMDQxOC4yOTclMjA0MjQuNDM0JTIwNDMwLjg5JTIwNDIyLjM5NyUyMDQzMy4yMzJDNDIwLjQ4MiUyMDQzMS4xMjUlMjA0MjEuMDU1JTIwNDE4LjEzMiUyMDQyMS4wODYlMjA0MTQuNzFaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjNGQUZDRkQlMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNDA0LjQzOCUyMDQzOS44NTNDNDE1LjEzNCUyMDQzOS42MjMlMjA0MjUuODE5JTIwNDM5Ljk0OSUyMDQzNi41OSUyMDQzOS42MzRDNDM2LjcyNyUyMDQ0OS45ODMlMjA0MzYuNzU0JTIwNDYwLjMzMyUyMDQzNi42NzIlMjA0NzAuNjgzQzQyNS45MzUlMjA0NzAuNTM5JTIwNDE1LjEzMyUyMDQ3MC45MjglMjA0MDQuNDEyJTIwNDcwLjM3NkM0MDQuMzA4JTIwNDYwLjIwMiUyMDQwNC4zMTclMjA0NTAuMDI3JTIwNDA0LjQzOCUyMDQzOS44NTNaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjMyNTcxOUMlMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNDA5Ljk0MSUyMDQ0NS4yOTRDNDE2Ljk4NSUyMDQ0NS4zODYlMjA0MjQuMTU5JTIwNDQ1LjMyMiUyMDQzMS4yMTUlMjA0NDUuMzI5QzQzMS4wODUlMjA0NTEuODM4JTIwNDMxLjE4JTIwNDU4LjYwNiUyMDQzMS4xODUlMjA0NjUuMTM2TDQwOS44ODUlMjA0NjUuMTExTDQwOS45NDElMjA0NDUuMjk0WiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzMjQ4N0ExJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTQyNC4wOCUyMDM4My4wOTlDNDM4LjI5OCUyMDM4My4xODElMjA0NTQuMDclMjAzODMuNTE1JTIwNDY4LjIyJTIwMzgzLjA4NkM0NjguNDgyJTIwMzkyLjcyMiUyMDQ2Ny45MTIlMjA0MDIuOTMyJTIwNDY4LjIzNSUyMDQxMi4xNzdDNDY1LjU0MiUyMDQxMi43NzIlMjA0MzYuMjIyJTIwNDEyLjUxNiUyMDQzMS4zMzIlMjA0MTIuNTUzTDQyMy43NzglMjA0MTIuNTA5QzQyNC4wNjQlMjA0MDIuNzA4JTIwNDI0LjE2NCUyMDM5Mi45MDMlMjA0MjQuMDglMjAzODMuMDk5WiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzNDlDM0QyJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTQ2OC4xMjYlMjA0MTQuNTk3TDQ3MC43MzMlMjA0MTQuNzU2TDQ3MC42ODclMjA0NjYuNzMxQzQ3MC42OCUyMDQ3NC4xMDklMjA0NzAuMzUyJTIwNDg3LjczMiUyMDQ3MC45NjklMjA0OTQuNTg4TDQ3MC43NiUyMDQ5Ny4yMjlMNDY5LjgxMyUyMDQ5Ny42MzFDNDY3Ljc3NiUyMDQ5Ni45NTclMjA0NjguNDQ5JTIwNDk3LjU3NyUyMDQ2Ny40NzIlMjA0OTYuMDIzTDQ2Ny43NjUlMjA0OTQuODIzQzQ2OC41MzglMjA0OTIuMDY2JTIwNDY4LjI0NiUyMDQ3My41NCUyMDQ2OC4yMzklMjA0NjkuNTgzTDQ2OC4xMjYlMjA0MTQuNTk3WiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzNTdFMEUzJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTQ2OC4yMzUlMjA0MTIuMTc3QzQ3MC4wOSUyMDQxMS45OTQlMjA0NjkuMzI5JTIwNDExLjc1MSUyMDQ3MC44MjIlMjA0MTIuNDFDNDc5LjAwMSUyMDQxMi41MzYlMjA0ODguMDkyJTIwNDEyLjI4NiUyMDQ5Ni4wOTklMjA0MTIuOEw0OTYuNDg3JTIwNDEzLjI1QzQ4OS45MjklMjA0MTYuMzglMjA0NzguMjcxJTIwNDEzLjQxOCUyMDQ3MC43MzMlMjA0MTQuNzU2TDQ2OC4xMjYlMjA0MTQuNTk3QzQ1Ni4zMDYlMjA0MTQuMjMzJTIwNDQzLjQxNCUyMDQxNC42ODglMjA0MzEuMzU1JTIwNDE0LjUwOEM0MjguNjglMjA0MTMuNzUlMjA0MjYuNzU5JTIwNDEzLjY1NCUyMDQyNC4wMjUlMjA0MTMuNDA1TDQyMy42OTElMjA0MTMuOTU1TDQyMy40NyUyMDQxMy4zNjFMNDIzLjE5JTIwNDEzLjkwOUw0MjIuODgxJTIwNDEzLjM1N0w0MjIuNjk4JTIwNDEzLjgzOUw0MjIuMzEyJTIwNDEzLjQxN0w0MjIuMDY4JTIwNDEzLjUxOUw0MjMuNTIzJTIwNDEzLjA4OEw0MjMuNzM5JTIwNDEzLjYzOEM0MjYuMzc1JTIwNDEzLjM5JTIwNDI4LjIwMyUyMDQxMy4yMyUyMDQzMC44MDIlMjA0MTIuNjcxTDQzMS4zMzIlMjA0MTIuNTUzQzQzNi4yMjIlMjA0MTIuNTE2JTIwNDY1LjU0MiUyMDQxMi43NzIlMjA0NjguMjM1JTIwNDEyLjE3N1olMjIlMkYlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMiUyMzQ5QzNEMiUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk00NjguMjIlMjAzODMuMDg2TDQ3MC43OTclMjAzODMuMDhDNDcwLjcyMiUyMDM5Mi44NTYlMjA0NzAuNzMlMjA0MDIuNjMzJTIwNDcwLjgyMiUyMDQxMi40MUM0NjkuMzI5JTIwNDExLjc1MSUyMDQ3MC4wOSUyMDQxMS45OTQlMjA0NjguMjM1JTIwNDEyLjE3N0M0NjcuOTEyJTIwNDAyLjkzMiUyMDQ2OC40ODIlMjAzOTIuNzIyJTIwNDY4LjIyJTIwMzgzLjA4NlolMjIlMkYlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMiUyMzQ5QzNEMiUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk00NzAuOTY5JTIwNDk0LjU4OEM0NzUuNDg1JTIwNDk0LjYxOSUyMDQ4NC44NzglMjA0OTQuMjc5JTIwNDg4LjcxNSUyMDQ5NS45MTRMNDg4LjQ4NCUyMDQ5Ni41MDVDNDgzLjkxOCUyMDQ5Ny44NzglMjA0NzUuODUxJTIwNDk3LjU2NCUyMDQ3MC44NDQlMjA0OTcuNTQ5TDQ3MC43NiUyMDQ5Ny4yMjlMNDcwLjk2OSUyMDQ5NC41ODhaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjM0OEFDQzklMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNDcwLjk0JTIwNTkzLjczOUM0NzUuMTE4JTIwNTkzLjczNyUyMDQ4My40MTElMjA1OTMuMzM1JTIwNDg2Ljg4NyUyMDU5NS4wNzZMNDg2LjY1OSUyMDU5NS42MzhDNDgyLjAwMiUyMDU5Ny4xMTUlMjA0NzUuNDkyJTIwNTk2LjY5NSUyMDQ3MC41MDIlMjA1OTYuNTc3TDQ3MC45NCUyMDU5My43MzlaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjM0OEFDQzklMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNTM3LjEyMSUyMDQxOC45OTdDNTM2LjEzJTIwNDE2LjAyJTIwNTM2LjY2NyUyMDQxMi40MzMlMjA1MzYuMTA3JTIwNDA5LjQ0NEM1MzQuODYyJTIwNDAyLjc5MiUyMDUzMS4zMTclMjAzOTkuMzA4JTIwNTM3LjE3NCUyMDM5My43NDhDNTM3LjIxOCUyMDQwMi4xNjQlMjA1MzcuMiUyMDQxMC41ODElMjA1MzcuMTIxJTIwNDE4Ljk5N1olMjIlMkYlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMiUyM0ZBRkNGRCUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk00OTUuNDI3JTIwNTc5LjA0OEw1NjAuOTU5JTIwNTc5LjA5OEM1NjEuMDkzJTIwNTkxLjc4NyUyMDU2MS4xMDIlMjA2MDQuNDc2JTIwNTYwLjk4NiUyMDYxNy4xNjVMNDk1LjQ3NyUyMDYxNy4xNjJDNDk1LjM5NCUyMDYwNC4yODklMjA0OTUuMjE3JTIwNTkxLjkyOCUyMDQ5NS40MjclMjA1NzkuMDQ4WiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzMUIzRjc4JTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTUwMS41NzYlMjA1ODQuNzcyQzUxOS4zMDYlMjA1ODQuNjc4JTIwNTM3LjAzNyUyMDU4NC43JTIwNTU0Ljc2NyUyMDU4NC44MzhMNTU0Ljc1MyUyMDYxMS4yNTFDNTM3LjUwMyUyMDYxMS43NDglMjA1MTguNzQ3JTIwNjExLjQ0JTIwNTAxLjQ0NiUyMDYxMS4xOTdMNTAxLjU3NiUyMDU4NC43NzJaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjNGQUZDRkQlMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNDk2LjU0NCUyMDQ5MS45NEM1MDguNTY2JTIwNDkyLjA3OSUyMDUyMC41MDMlMjA0OTEuODklMjA1MzIuNTQ5JTIwNDkyLjE1NUw1MzIuNjEzJTIwNTIxLjc0N0w0OTYuNTM3JTIwNTIxLjcwNkM0OTYuNDYyJTIwNTExLjc4NCUyMDQ5Ni40NjQlMjA1MDEuODYyJTIwNDk2LjU0NCUyMDQ5MS45NFolMjIlMkYlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMiUyMzI1NzE5QyUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk01MDIuMDU4JTIwNDk3LjU3QzUxMC4yMTYlMjA0OTcuNzY5JTIwNTE4LjcxMyUyMDQ5Ny42NjQlMjA1MjYuODk4JTIwNDk3LjY3NEw1MjYuODQ3JTIwNTE1Ljk5NUM1MTguNjE3JTIwNTE2LjA3MSUyMDUxMC4zODclMjA1MTUuOTY1JTIwNTAyLjE2MiUyMDUxNS42NzhMNTAyLjA1OCUyMDQ5Ny41N1olMjIlMkYlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMiUyM0ZBRkNGRCUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk00OTQuNjc0JTIwNTQxLjk2Mkw1MzkuNTQ4JTIwNTQxLjk2QzU0NC4wMjMlMjA1NDEuOTclMjA1NTYuNzE3JTIwNTQxLjY5JTIwNTYwLjQ1NCUyMDU0Mi4yODhDNTYxLjI1NiUyMDU0My45NjIlMjA1NjAuOTglMjA1NDYuMjIzJTIwNTYwLjk0MyUyMDU0OC4xNTJMNDk0LjgyMSUyMDU0OC4xMjZMNDk0LjY3NCUyMDU0MS45NjJaJTIyJTJGJTNFJTNDcGF0aCUyMGZpbGwlM0QlMjIlMjNGQUZDRkQlMjIlMjB0cmFuc2Zvcm0lM0QlMjJtYXRyaXglMjgxLjA4NjY5JTIwMCUyMDAlMjAxLjA4NzEyJTIwMCUyMC0zLjA1MTc2ZS0wNSUyOSUyMiUyMGQlM0QlMjJNNDk0LjU0OCUyMDU1Ny44NDVDNTAzLjAwNyUyMDU1Ny44MTElMjA1NTUuMjg5JTIwNTU2LjY0NSUyMDU2MC42NzElMjA1NTguMjNDNTYxLjQxOSUyMDU2MC4yMTYlMjA1NjEuMDkzJTIwNTYxLjc5MiUyMDU2MC45NDIlMjA1NjMuOTRDNTQ1Ljk2MyUyMDU2My4xNTIlMjA1MjkuODI1JTIwNTY0LjA1MiUyMDUxNC43NjglMjA1NjMuNzgzQzUxMC43MTUlMjA1NjMuNzExJTIwNDk4LjE0NCUyMDU2NC4xOTglMjA0OTUuMTAxJTIwNTYzLjNDNDk0LjE5MSUyMDU2MS42MDklMjA0OTQuNDgyJTIwNTU5LjgwNCUyMDQ5NC41NDglMjA1NTcuODQ1WiUyMiUyRiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzRkFGQ0ZEJTIyJTIwdHJhbnNmb3JtJTNEJTIybWF0cml4JTI4MS4wODY2OSUyMDAlMjAwJTIwMS4wODcxMiUyMDAlMjAtMy4wNTE3NmUtMDUlMjklMjIlMjBkJTNEJTIyTTQ5Ni41NDMlMjA0NTMuNzc5TDU2MC43NjglMjA0NTMuNzYxTDU2MC44MDElMjA0NTkuODE0TDUxOS45MTglMjA0NTkuOTM2QzUxMy43NSUyMDQ1OS45NDIlMjA1MDIuNzgyJTIwNDYwLjI1OSUyMDQ5Ni45NSUyMDQ1OS42OTlDNDk2LjE5OSUyMDQ1OC4xODUlMjA0OTYuNSUyMDQ1NS41NzklMjA0OTYuNTQzJTIwNDUzLjc3OVolMjIlMkYlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMiUyM0ZBRkNGRCUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk00OTYuNzA0JTIwNDY4Ljk4OEM1MTcuNjI2JTIwNDY5LjQ3JTIwNTM5LjQ2MSUyMDQ2OS4xNDclMjA1NjAuNDc5JTIwNDY5LjEyOUM1NjAuNjcxJTIwNDcxLjA0OSUyMDU2MC43NjIlMjA0NzMuMTQ4JTIwNTYwLjg4NyUyMDQ3NS4wODhDNTQ1LjUyOCUyMDQ3NC42MjIlMjA1MjkuNzQyJTIwNDc1LjIwMyUyMDUxNC4zNjYlMjA0NzUuMDM0QzUxMS4xMTElMjA0NzQuOTk4JTIwNDk5LjIzNSUyMDQ3NS4zNzclMjA0OTYuODIyJTIwNDc0Ljc5N0M0OTYuMTc4JTIwNDczLjA5NiUyMDQ5Ni41NjIlMjA0NzAuODclMjA0OTYuNzA0JTIwNDY4Ljk4OFolMjIlMkYlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMiUyM0ZBRkNGRCUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk00OTcuMjI2JTIwNDM4LjUwNUM1MDcuOTQyJTIwNDM4LjQ1JTIwNTIxLjAzMiUyMDQzOC4wMTElMjA1MzEuNTMlMjA0MzguNTE1QzUzMi41NDUlMjA0NDAuMDIlMjA1MzIuMjk4JTIwNDQyLjM5NSUyMDUzMi4wMDklMjA0NDQuMTY2TDUzMS4xMTglMjA0NDQuNTE5QzUxOS41MzklMjA0NDQuNTY2JTIwNTA3Ljk1OSUyMDQ0NC41MzYlMjA0OTYuMzgxJTIwNDQ0LjQyOEM0OTYuMjE5JTIwNDQyLjM3MyUyMDQ5NS43OSUyMDQ0MC4wMTQlMjA0OTcuMjI2JTIwNDM4LjUwNVolMjIlMkYlM0UlM0NwYXRoJTIwZmlsbCUzRCUyMiUyM0Y0NzgxOSUyMiUyMHRyYW5zZm9ybSUzRCUyMm1hdHJpeCUyODEuMDg2NjklMjAwJTIwMCUyMDEuMDg3MTIlMjAwJTIwLTMuMDUxNzZlLTA1JTI5JTIyJTIwZCUzRCUyMk01NDQuNDc0JTIwMzg1Ljk2MUM1NDUuNzY2JTIwMzg2LjkzMSUyMDU1NC40MTglMjAzOTUuNjI3JTIwNTU1LjcxNSUyMDM5Ny4wMDJDNTYxLjkyMiUyMDQwMy41ODUlMjA1NzEuMjMzJTIwNDExLjc5OSUyMDU3Ni43MjYlMjA0MTguNzE3QzU2Ni4wNzUlMjA0MTkuMzkyJTIwNTU1LjU2MyUyMDQxOS4zMzclMjA1NDQuOTA1JTIwNDE5LjM0OEM1NDQuNDE5JTIwNDA4LjUwMSUyMDU0NC41MDQlMjAzOTYuODY2JTIwNTQ0LjQ3NCUyMDM4NS45NjFaJTIyJTJGJTNFJTNDJTJGc3ZnJTNFIj4KCiAgPCEtLSBwZGZtYWtlIChjbGllbnQtc2lkZSkgcmVxdWlyZXMgcGRmbWFrZSArIHZmc19mb250cyArIHRlc3RlIC0tPgogIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9wZGZtYWtlLzAuMi4xMi9wZGZtYWtlLm1pbi5qcyI+PC9zY3JpcHQ+CiAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3BkZm1ha2UvMC4yLjEyL3Zmc19mb250cy5qcyI+PC9zY3JpcHQ+CiAgPCEtLSBKc0JhcmNvZGUgZm9yIGJhcmNvZGUgZ2VuZXJhdGlvbiAtLT4KICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9qc2JhcmNvZGVAMy4xMS41L2Rpc3QvSnNCYXJjb2RlLmFsbC5taW4uanMiPjwvc2NyaXB0PgogIDwhLS0gQ2hhcnQuanMgZm9yIGNoYXJ0IGdlbmVyYXRpb24gLS0+CiAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vY2hhcnQuanNANC40LjAvZGlzdC9jaGFydC51bWQubWluLmpzIj48L3NjcmlwdD4KICA8IS0tIFN1cGFiYXNlIC0tPgogIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL0BzdXBhYmFzZS9zdXBhYmFzZS1qc0AyIj48L3NjcmlwdD4KCiAgPHN0eWxlPgogICAgLyogVmFyacOhdmVpcyBDU1MgcGFyYSBtb2RvIGNsYXJvICovCiAgICA6cm9vdCB7CiAgICAgIC0tYmctcHJpbWFyeTogI2YzZjRmNjsKICAgICAgLS1iZy1zZWNvbmRhcnk6ICNmZmZmZmY7CiAgICAgIC0tYmctdGVydGlhcnk6ICNmOWZhZmI7CiAgICAgIC0tYmctaG92ZXI6ICNmM2Y0ZjY7CiAgICAgIC0tdGV4dC1wcmltYXJ5OiAjMTExODI3OwogICAgICAtLXRleHQtc2Vjb25kYXJ5OiAjMzc0MTUxOwogICAgICAtLXRleHQtdGVydGlhcnk6ICM2YjcyODA7CiAgICAgIC0tYm9yZGVyLWNvbG9yOiAjZTVlN2ViOwogICAgICAtLWJvcmRlci1ob3ZlcjogI2QxZDVkYjsKICAgICAgLS1zaGFkb3c6IHJnYmEoMCwgMCwgMCwgMC4xKTsKICAgICAgLS1tb2RhbC1vdmVybGF5OiByZ2JhKDAsIDAsIDAsIDAuNSk7CiAgICB9CgogICAgLyogVmFyacOhdmVpcyBDU1MgcGFyYSBtb2RvIGVzY3VybyAqLwogICAgW2RhdGEtdGhlbWU9ImRhcmsiXSB7CiAgICAgIC0tYmctcHJpbWFyeTogIzBmMTcyYTsKICAgICAgLS1iZy1zZWNvbmRhcnk6ICMxZTI5M2I7CiAgICAgIC0tYmctdGVydGlhcnk6ICMzMzQxNTU7CiAgICAgIC0tYmctaG92ZXI6ICM0YjU1NjM7CiAgICAgIC0tdGV4dC1wcmltYXJ5OiAjZjlmYWZiOwogICAgICAtLXRleHQtc2Vjb25kYXJ5OiAjZTVlN2ViOwogICAgICAtLXRleHQtdGVydGlhcnk6ICM5Y2EzYWY7CiAgICAgIC0tYm9yZGVyLWNvbG9yOiAjMzc0MTUxOwogICAgICAtLWJvcmRlci1ob3ZlcjogIzRiNTU2MzsKICAgICAgLS1zaGFkb3c6IHJnYmEoMCwgMCwgMCwgMC4zKTsKICAgICAgLS1tb2RhbC1vdmVybGF5OiByZ2JhKDAsIDAsIDAsIDAuNyk7CiAgICB9CgogICAgKiB7CiAgICAgIG1hcmdpbjogMDsKICAgICAgcGFkZGluZzogMDsKICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIH0KCiAgICBib2R5IHsKICAgICAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgJ1NlZ29lIFVJJywgUm9ib3RvLCBPeHlnZW4sIFVidW50dSwgQ2FudGFyZWxsLCBzYW5zLXNlcmlmOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1wcmltYXJ5KTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgIGhlaWdodDogMTAwdmg7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zcyBlYXNlLCBjb2xvciAwLjNzIGVhc2U7CiAgICB9CgogICAgLmNvbnRhaW5lciB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgIGhlaWdodDogMTAwdmg7CiAgICB9CgogICAgLyogSGVhZGVyICovCiAgICAuaGVhZGVyIHsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmctc2Vjb25kYXJ5KTsKICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICAgIHBhZGRpbmc6IDFyZW0gMS41cmVtOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBnYXA6IDFyZW07CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zcyBlYXNlLCBib3JkZXItY29sb3IgMC4zcyBlYXNlOwogICAgfQoKICAgIC5oZWFkZXItdG9wIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgfQoKICAgIC5oZWFkZXItbGVmdCB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGdhcDogMXJlbTsKICAgIH0KCiAgICAuaGVhZGVyLWxlZnQgaDEgewogICAgICBmb250LXNpemU6IDEuMjVyZW07CiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgIH0KCiAgICAuaGVhZGVyLWxlZnQgcCB7CiAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKICAgIH0KCiAgICAuaGVhZGVyLXJpZ2h0IHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgZ2FwOiAxcmVtOwogICAgfQoKICAgIC8qIEJvdMOjbyBEYXJrIE1vZGUgKi8KICAgIC5kYXJrLW1vZGUtdG9nZ2xlIHsKICAgICAgcGFkZGluZzogMTBweCAxNnB4OwogICAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXNlY29uZGFyeSk7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICBmb250LXdlaWdodDogNjAwOwogICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICB0cmFuc2l0aW9uOiBhbGwgMC4yczsKICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgbWluLXdpZHRoOiA0MHB4OwogICAgICBoZWlnaHQ6IGF1dG87CiAgICB9CgogICAgLmRhcmstbW9kZS10b2dnbGU6aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1ob3Zlcik7CiAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYm9yZGVyLWhvdmVyKTsKICAgIH0KCiAgICAuZGFyay1tb2RlLXRvZ2dsZSBzdmcgewogICAgICB3aWR0aDogMjBweDsKICAgICAgaGVpZ2h0OiAyMHB4OwogICAgICBzdHJva2U6IGN1cnJlbnRDb2xvcjsKICAgIH0KCiAgICAvKiBQb3IgcGFkcsOjbywgbW9zdHJhciBsdWEgKG1vZG8gY2xhcm8pIGUgZXNjb25kZXIgc29sICovCiAgICAjc3VuSWNvbiB7CiAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICB9CgogICAgI21vb25JY29uIHsKICAgICAgZGlzcGxheTogYmxvY2s7CiAgICB9CgogICAgLyogUXVhbmRvIGVzdGl2ZXIgbm8gbW9kbyBkYXJrLCBtb3N0cmFyIHNvbCBlIGVzY29uZGVyIGx1YSAqLwogICAgW2RhdGEtdGhlbWU9ImRhcmsiXSAjc3VuSWNvbiB7CiAgICAgIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7CiAgICB9CgogICAgW2RhdGEtdGhlbWU9ImRhcmsiXSAjbW9vbkljb24gewogICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLm9yaWVudGF0aW9uLWdyb3VwIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgZ2FwOiAwLjVyZW07CiAgICB9CgogICAgLm9yaWVudGF0aW9uLWdyb3VwIGxhYmVsIHsKICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsKICAgIH0KCiAgICAuYnV0dG9uLWdyb3VwIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZ2FwOiAwLjVyZW07CiAgICB9CgogICAgYnV0dG9uIHsKICAgICAgcGFkZGluZzogMC41cmVtIDFyZW07CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7CiAgICB9CgogICAgLmJ0bi1wb3J0cmFpdCwKICAgIC5idG4tbGFuZHNjYXBlIHsKICAgICAgYmFja2dyb3VuZDogI2QxZDVkYjsKICAgICAgY29sb3I6ICMzNzQxNTE7CiAgICB9CgogICAgLmJ0bi1wb3J0cmFpdC5hY3RpdmUsCiAgICAuYnRuLWxhbmRzY2FwZS5hY3RpdmUgewogICAgICBiYWNrZ3JvdW5kOiAjMjU2M2ViOwogICAgICBjb2xvcjogd2hpdGU7CiAgICB9CgogICAgLmJ0bi1wb3J0cmFpdDpob3ZlciwKICAgIC5idG4tbGFuZHNjYXBlOmhvdmVyIHsKICAgICAgYmFja2dyb3VuZDogIzljYTNhZjsKICAgIH0KCiAgICAuYnRuLXBvcnRyYWl0LmFjdGl2ZTpob3ZlciwKICAgIC5idG4tbGFuZHNjYXBlLmFjdGl2ZTpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6ICMxZDRlZDg7CiAgICB9CgogICAgLmJ0bi1jbGVhciB7CiAgICAgIGJhY2tncm91bmQ6ICNmZWUyZTI7CiAgICAgIGNvbG9yOiAjOTkxYjFiOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBnYXA6IDAuNXJlbTsKICAgIH0KCiAgICAuYnRuLWNsZWFyOmhvdmVyIHsKICAgICAgYmFja2dyb3VuZDogI2ZlY2FjYTsKICAgIH0KCiAgICAvKiBUb29sYmFyICovCiAgICAudG9vbGJhciB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGdhcDogMTBweDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgZmxleC13cmFwOiB3cmFwOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOwogICAgICBwYWRkaW5nLXRvcDogMC41cmVtOwogICAgICBoZWlnaHQ6IDgwcHg7CiAgICB9CgogICAgLmNoaXAgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBnYXA6IDhweDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgcGFkZGluZzogOHB4IDEycHg7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsKICAgICAgYm9yZGVyLXJhZGl1czogOTk5cHg7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7CiAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UsIGJvcmRlci1jb2xvciAwLjNzIGVhc2UsIGNvbG9yIDAuM3MgZWFzZTsKICAgIH0KCiAgICAuY2hpcCBzcGFuIHsKICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOwogICAgfQoKICAgIC5jaGlwIHNlbGVjdCwKICAgIC5jaGlwIGlucHV0IHsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIG91dGxpbmU6IG5vbmU7CiAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgd2lkdGg6IGF1dG87CiAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogICAgfQoKICAgIC5jaGlwIHNlbGVjdCB7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIH0KCiAgICAuY2hpcCBpbnB1dCB7CiAgICAgIHdpZHRoOiA2NHB4OwogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgIHBhZGRpbmc6IDJweCA0cHg7CiAgICB9CgogICAgLmJ0biB7CiAgICAgIHBhZGRpbmc6IDEwcHggMTZweDsKICAgICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1zZWNvbmRhcnkpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpOwogICAgICBmb250LXdlaWdodDogNjAwOwogICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzOwogICAgICBmb250LXNpemU6IDAuODc1cmVtOwogICAgfQoKICAgIC5idG46aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1ob3Zlcik7CiAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYm9yZGVyLWhvdmVyKTsKICAgIH0KCiAgICAuYnRuOmFjdGl2ZSB7CiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxcHgpOwogICAgfQoKICAgIC5idG4ucHJpbWFyeSB7CiAgICAgIGJvcmRlci1jb2xvcjogIzI1NjNlYjsKICAgICAgYmFja2dyb3VuZDogIzI1NjNlYjsKICAgICAgY29sb3I6IHdoaXRlOwogICAgfQoKICAgIC5idG4ucHJpbWFyeTpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6ICMxZDRlZDg7CiAgICAgIGJvcmRlci1jb2xvcjogIzFkNGVkODsKICAgIH0KCiAgICAuYnRuLmdvb2QgewogICAgICBib3JkZXItY29sb3I6ICMxMGI5ODE7CiAgICAgIGJhY2tncm91bmQ6ICMxMGI5ODE7CiAgICAgIGNvbG9yOiB3aGl0ZTsKICAgIH0KCiAgICAuYnRuLmdvb2Q6aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiAjMDU5NjY5OwogICAgICBib3JkZXItY29sb3I6ICMwNTk2Njk7CiAgICB9CgogICAgLyogVjEgLSBSZXBsaWNhw6fDo28gY29tIElBIGRlc2FiaWxpdGFkYQogICAgI2FpUmVwbGljYXRlQnRuOmhvdmVyIHsKICAgICAgYmFja2dyb3VuZDogI2ZlZjJmMjsKICAgICAgYm9yZGVyLWNvbG9yOiAjZTI1NzRjOwogICAgICBjb2xvcjogI2UyNTc0YzsKICAgIH0KCiAgICAjYWlSZXBsaWNhdGVCdG46YWN0aXZlIHsKICAgICAgYmFja2dyb3VuZDogI2ZlZTJlMjsKICAgIH0KICAgICovCgogICAgLyogTWFpbiBMYXlvdXQgKi8KICAgIC5tYWluIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleDogMTsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgfQoKICAgIC8qIEFqdXN0YXIgY2FudmFzLWFyZWEgcXVhbmRvIGNvZGUtcGFuZWwgZXN0w6Egdmlzw612ZWwgKi8KICAgIC5jYW52YXMtYXJlYSB7CiAgICAgIG1hcmdpbi1yaWdodDogMDsKICAgICAgLyogTWFyZ2VtIHJlbW92aWRhIHBvaXMgbyBwYWluZWwgYWdvcmEgw6kgZmx1dHVhbnRlIChwb3NpdGlvbjogZml4ZWQpICovCiAgICB9CgogICAgLyogU2lkZWJhciAqLwogICAgLnNpZGViYXIgewogICAgICB3aWR0aDogMTZyZW07CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXNlY29uZGFyeSk7CiAgICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICAgIHBhZGRpbmc6IDFyZW07CiAgICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zcyBlYXNlLCBib3JkZXItY29sb3IgMC4zcyBlYXNlOwogICAgfQoKICAgIC5zaWRlYmFyIGgyIHsKICAgICAgZm9udC1zaXplOiAxLjEyNXJlbTsKICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgIG1hcmdpbi1ib3R0b206IDFyZW07CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgfQoKICAgIC5lbGVtZW50cy1ncmlkIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgZ2FwOiAwLjVyZW07CiAgICB9CgogICAgLmVsZW1lbnQtYnRuIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgZ2FwOiAwLjc1cmVtOwogICAgICBwYWRkaW5nOiAwLjc1cmVtOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy10ZXJ0aWFyeSk7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICAgIGJvcmRlci1yYWRpdXM6IDAuNXJlbTsKICAgICAgY3Vyc29yOiBtb3ZlOwogICAgICB0cmFuc2l0aW9uOiBhbGwgMC4yczsKICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsKICAgIH0KCiAgICAuZWxlbWVudC1idG46aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1ob3Zlcik7CiAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYm9yZGVyLWhvdmVyKTsKICAgIH0KCiAgICAuZWxlbWVudC1pY29uIHsKICAgICAgd2lkdGg6IDJyZW07CiAgICAgIGhlaWdodDogMnJlbTsKICAgICAgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICBjb2xvcjogd2hpdGU7CiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgICBmb250LXNpemU6IDEuMTI1cmVtOwogICAgfQoKICAgIC5pY29uLXRleHQgewogICAgICBiYWNrZ3JvdW5kOiAjM2I4MmY2OwogICAgfQoKICAgIC5pY29uLWhlYWRlciB7CiAgICAgIGJhY2tncm91bmQ6ICNhODU1Zjc7CiAgICB9CgogICAgLmljb24taW1hZ2UgewogICAgICBiYWNrZ3JvdW5kOiAjMTBiOTgxOwogICAgfQoKICAgIC5pY29uLXRhYmxlIHsKICAgICAgYmFja2dyb3VuZDogI2Y5NzMxNjsKICAgIH0KCiAgICAuaWNvbi1jb2x1bW5zIHsKICAgICAgYmFja2dyb3VuZDogIzIyODMwYTsKICAgIH0KCiAgICAuaWNvbi1saXN0IHsKICAgICAgYmFja2dyb3VuZDogIzA2YjZkNDsKICAgIH0KCiAgICAuaWNvbi1tYXJnaW4gewogICAgICBiYWNrZ3JvdW5kOiAjNmI3MjgwOwogICAgfQoKICAgIC5pY29uLXBhZ2VicmVhayB7CiAgICAgIGJhY2tncm91bmQ6ICNlZjQ0NDQ7CiAgICB9CgogICAgLmljb24tY2hlY2tib3ggewogICAgICBiYWNrZ3JvdW5kOiAjZWY0NDQ0OwogICAgfQoKICAgIC5pY29uLXN0YW1wIHsKICAgICAgYmFja2dyb3VuZDogIzA4YWY2MTsKICAgIH0KCiAgICAuaWNvbi1yYWRpbyB7CiAgICAgIGJhY2tncm91bmQ6ICMxNjJjZjM7CiAgICB9CgogICAgLmljb24tbGluZSB7CiAgICAgIGJhY2tncm91bmQ6ICNmMzllMDg7CiAgICB9CgogICAgLmljb24tY2hhcnQgewogICAgICBiYWNrZ3JvdW5kOiAjZjMxODYyOwogICAgfQoKICAgIC5pY29uLXFyIHsKICAgICAgYmFja2dyb3VuZDogI2ZmMmYyZjsKICAgIH0KCiAgICAuaWNvbi1zdmcgewogICAgICBiYWNrZ3JvdW5kOiAjZmMyZmZmOwogICAgfQoKICAgIC5pY29uLWJhcmNvZGUgewogICAgICBiYWNrZ3JvdW5kOiAjYjExM2ZhOwogICAgfQoKICAgIC5pY29uLWdyb3VwIHsKICAgICAgYmFja2dyb3VuZDogIzhiNWNmNjsKICAgIH0KCiAgICAuaW5mby1ib3ggewogICAgICBtYXJnaW4tdG9wOiAxLjVyZW07CiAgICAgIHBhZGRpbmc6IDFyZW07CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsKICAgICAgYm9yZGVyLXJhZGl1czogMC41cmVtOwogICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOwogICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MgZWFzZSwgYm9yZGVyLWNvbG9yIDAuM3MgZWFzZTsKICAgIH0KCiAgICAuaW5mby1ib3ggaDMgewogICAgICBmb250LXNpemU6IDAuODc1cmVtOwogICAgICBmb250LXdlaWdodDogNjAwOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtOwogICAgfQoKICAgIC5pbmZvLWJveCBvbCB7CiAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsKICAgICAgbGlzdC1zdHlsZS1wb3NpdGlvbjogaW5zaWRlOwogICAgfQoKICAgIC5pbmZvLWJveCBsaSB7CiAgICAgIG1hcmdpbi1ib3R0b206IDAuMjVyZW07CiAgICB9CgogICAgLyogQ2FudmFzICovCiAgICAuY2FudmFzLWFyZWEgewogICAgICBmbGV4OiAxOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1wcmltYXJ5KTsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2U7CiAgICB9CgogICAgLmNhbnZhcy10b29scyB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgZ2FwOiAxMHB4OwogICAgICBwYWRkaW5nOiAxMHB4IDEycHg7CiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1zZWNvbmRhcnkpOwogICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MgZWFzZSwgYm9yZGVyLWNvbG9yIDAuM3MgZWFzZTsKICAgIH0KCiAgICAuY2FudmFzLXRvb2xzLXJpZ2h0IHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZ2FwOiAxMHB4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgfQoKICAgIC56b29tIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZ2FwOiA4cHg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIHBhZGRpbmc6IDhweCAxMnB4OwogICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOwogICAgICBib3JkZXItcmFkaXVzOiA5OTlweDsKICAgICAgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOwogICAgICBmb250LXNpemU6IDEycHg7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UsIGJvcmRlci1jb2xvciAwLjNzIGVhc2UsIGNvbG9yIDAuM3MgZWFzZTsKICAgIH0KCiAgICAuem9vbSBzcGFuOmZpcnN0LWNoaWxkIHsKICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsKICAgIH0KCiAgICAuem9vbSBpbnB1dFt0eXBlPSJyYW5nZSJdIHsKICAgICAgd2lkdGg6IDEyMHB4OwogICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB9CgogICAgLnpvb20tYnRuIHsKICAgICAgd2lkdGg6IDI0cHg7CiAgICAgIGhlaWdodDogMjRweDsKICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsKICAgICAgYm9yZGVyLXJhZGl1czogMTAwcHg7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXNlY29uZGFyeSk7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7CiAgICAgIGZvbnQtc2l6ZTogMThweDsKICAgICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgcGFkZGluZzogMDsKICAgICAgbGluZS1oZWlnaHQ6IDE7CiAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzOwogICAgfQoKICAgIC56b29tLWJ0bjpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLWhvdmVyKTsKICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1ib3JkZXItaG92ZXIpOwogICAgfQoKICAgIC56b29tLWJ0bjphY3RpdmUgewogICAgICBiYWNrZ3JvdW5kOiAjNjJiYTQ1OwogICAgICB0cmFuc2Zvcm06IHNjYWxlKDAuOTUpOwogICAgfQoKICAgIC56b29tIHNwYW46bGFzdC1jaGlsZCB7CiAgICAgIG1pbi13aWR0aDogNDBweDsKICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICBmb250LXdlaWdodDogNjAwOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgIH0KCiAgICAuY2FudmFzLXdyYXBwZXIgewogICAgICBmbGV4OiAxOwogICAgICBvdmVyZmxvdzogYXV0bzsKICAgICAgcGFkZGluZzogMS41cmVtOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICB9CgogICAgLmNhbnZhcy13cmFwcGVyOjotd2Via2l0LXNjcm9sbGJhciB7CiAgICAgIHdpZHRoOiA4cHg7CiAgICAgIGhlaWdodDogOHB4OwogICAgfQoKICAgIC5jYW52YXMtd3JhcHBlcjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1wcmltYXJ5KTsKICAgIH0KCiAgICAuY2FudmFzLXdyYXBwZXI6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYm9yZGVyLWhvdmVyKTsKICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgfQoKICAgIC5jYW52YXMtd3JhcHBlcjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKICAgIH0KCiAgICAuY2FudmFzIHsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmctc2Vjb25kYXJ5KTsKICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsKICAgICAgYm9yZGVyLXJhZGl1czogMC41cmVtOwogICAgICBwYWRkaW5nOiAycmVtOwogICAgICAvKiB3aWR0aCBlIG1heC13aWR0aCBzw6NvIGNvbnRyb2xhZG9zIGRpbmFtaWNhbWVudGUgdmlhIEphdmFTY3JpcHQgKGFkanVzdENhbnZhc1NpemUpICovCiAgICAgIC8qIFJlbW92aWRvIGFzcGVjdC1yYXRpbyBmaXhvIHBhcmEgcGVybWl0aXIgY3Jlc2NpbWVudG8gZGluw6JtaWNvICovCiAgICAgIG92ZXJmbG93OiB2aXNpYmxlOwogICAgICBib3gtc2hhZG93OiAwIDRweCA2cHggdmFyKC0tc2hhZG93KTsKICAgICAgbWluLWhlaWdodDogODQycHg7CiAgICAgIC8qIEFsdHVyYSBtw61uaW1hIGluaWNpYWwgKHRhbWFuaG8gQTQgcG9ydHJhaXQpICovCiAgICAgIG1pbi13aWR0aDogNTk1cHg7CiAgICAgIC8qIExhcmd1cmEgbcOtbmltYSBpbmljaWFsICh0YW1hbmhvIEE0IHBvcnRyYWl0KSAqLwogICAgICAvKiBBbHR1cmEgZSBsYXJndXJhIG3DoXhpbWFzIG7Do28gZGVmaW5pZGFzIC0gY2FudmFzIGNyZXNjZSBjb25mb3JtZSBuZWNlc3PDoXJpbyAqLwogICAgICB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4ycywgdHJhbnNmb3JtIDAuMnMsIGJhY2tncm91bmQtY29sb3IgMC4zcyBlYXNlLCBib3gtc2hhZG93IDAuM3MgZWFzZTsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgIH0KCiAgICAvKiBHYXJhbnRpciBxdWUgdG9kb3Mgb3MgZWxlbWVudG9zIGRlbnRybyBkbyBjYW52YXMgaGVyZGVtIGEgY29yIGRlIHRleHRvICovCiAgICAuY2FudmFzICogewogICAgICBjb2xvcjogaW5oZXJpdDsKICAgIH0KCiAgICAvKiBFeGNlw6fDtWVzOiBlbGVtZW50b3MgcXVlIGRldmVtIG1hbnRlciBzdWFzIHByw7NwcmlhcyBjb3JlcyAqLwogICAgLmNhbnZhcyAucHJldmlldy1pbWFnZS1ib3gsCiAgICAuY2FudmFzIC5lbGVtZW50LWltYWdlLAogICAgLmNhbnZhcyBidXR0b24gewogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgIH0KCiAgICAuY2FudmFzLmRyYWctb3ZlciB7CiAgICAgIGJvcmRlcjogNHB4IGRhc2hlZCAjMjU2M2ViOwogICAgfQoKICAgIC5jYW52YXMtZW1wdHkgewogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIHRvcDogNTAlOwogICAgICBsZWZ0OiA1MCU7CiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOwogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgICB3aWR0aDogMTAwJTsKICAgIH0KCiAgICAuY2FudmFzLWVtcHR5IHA6Zmlyc3QtY2hpbGQgewogICAgICBmb250LXNpemU6IDEuMTI1cmVtOwogICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07CiAgICB9CgogICAgLmNhbnZhcy1lbXB0eSBwOmxhc3QtY2hpbGQgewogICAgICBmb250LXNpemU6IDAuODc1cmVtOwogICAgfQoKICAgIC5lbGVtZW50cy1saXN0IHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgZ2FwOiAxcmVtOwogICAgfQoKICAgIC5lbGVtZW50LWl0ZW0gewogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgIHBhZGRpbmc6IDFyZW07CiAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICAgIGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtOwogICAgICB0cmFuc2l0aW9uOiBhbGwgMC4yczsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmctc2Vjb25kYXJ5KTsKICAgICAgYm94LXNoYWRvdzogMCAycHggNHB4IHZhcigtLXNoYWRvdyk7CiAgICAgIGN1cnNvcjogbW92ZTsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgfQoKICAgIC5lbGVtZW50LWl0ZW06aG92ZXIgewogICAgICBib3JkZXItY29sb3I6IHZhcigtLWJvcmRlci1ob3Zlcik7CiAgICB9CgogICAgLmVsZW1lbnQtaXRlbS5kcmFnZ2luZyB7CiAgICAgIG9wYWNpdHk6IDAuNzsKICAgICAgY3Vyc29yOiBncmFiYmluZzsKICAgIH0KCiAgICAuZWxlbWVudC1ncm91cCB7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMTM5LCA5MiwgMjQ2LCAwLjA1KSAhaW1wb3J0YW50OwogICAgICBtaW4taGVpZ2h0OiAyMDBweDsKICAgICAgcGFkZGluZzogMDsKICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsKICAgIH0KCiAgICBbZGF0YS10aGVtZT0iZGFyayJdIC5lbGVtZW50LWdyb3VwIHsKICAgICAgYmFja2dyb3VuZDogcmdiYSgxMzksIDkyLCAyNDYsIDAuMTUpICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLmVsZW1lbnQtZ3JvdXAuZHJhZy1vdmVyIHsKICAgICAgYm9yZGVyLWNvbG9yOiAjNjM2NmYxICFpbXBvcnRhbnQ7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoOTksIDEwMiwgMjQxLCAwLjE1KSAhaW1wb3J0YW50OwogICAgfQoKICAgIFtkYXRhLXRoZW1lPSJkYXJrIl0gLmVsZW1lbnQtZ3JvdXAuZHJhZy1vdmVyIHsKICAgICAgYmFja2dyb3VuZDogcmdiYSg5OSwgMTAyLCAyNDEsIDAuMykgIWltcG9ydGFudDsKICAgIH0KCiAgICAvKiBFbGVtZW50byBkZSBpbWFnZW0gLSBjb250YWluZXIgaW52aXPDrXZlbCAoasOhIGFwbGljYWRvIGFjaW1hIGNvbSAuZWxlbWVudC1pdGVtLmVsZW1lbnQtaW1hZ2UpICovCiAgICAuZWxlbWVudC1pbWFnZSB7CiAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgd2lkdGg6IGF1dG8gIWltcG9ydGFudDsKICAgICAgbWFyZ2luOiAwOwogICAgfQoKICAgIC5lbGVtZW50LWltYWdlIC5lbGVtZW50LXByZXZpZXcgewogICAgICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7CiAgICAgIG1hcmdpbjogMCAhaW1wb3J0YW50OwogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OwogICAgICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50OwogICAgICBib3JkZXItcmFkaXVzOiAwICFpbXBvcnRhbnQ7CiAgICAgIG1pbi1oZWlnaHQ6IDAgIWltcG9ydGFudDsKICAgICAgbWluLXdpZHRoOiAwICFpbXBvcnRhbnQ7CiAgICAgIGxpbmUtaGVpZ2h0OiAwICFpbXBvcnRhbnQ7CiAgICAgIGZvbnQtc2l6ZTogMCAhaW1wb3J0YW50OwogICAgICBjb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIH0KCiAgICAuZ3JvdXAtY2hpbGRyZW4gewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBnYXA6IDEwcHg7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICAvKiBTZW1wcmUgb2N1cGEgMTAwJSBkYSBsYXJndXJhICovCiAgICAgIGhlaWdodDogYXV0bzsKICAgICAgbWluLWhlaWdodDogMTIwcHg7CiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OwogICAgfQoKICAgIC5ncm91cC1jaGlsZHJlbi5vcmllbnRhdGlvbi1yb3cgewogICAgICBmbGV4LWRpcmVjdGlvbjogcm93OwogICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICAgICAgZmxleC13cmFwOiBub3dyYXA7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgfQoKICAgIC5ncm91cC1jaGlsZHJlbi5vcmllbnRhdGlvbi1jb2x1bW4gewogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICAgIH0KCiAgICAuZ3JvdXAtY2hpbGQtaXRlbSB7CiAgICAgIHBhZGRpbmc6IDAuNXJlbTsKICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsKICAgICAgYm9yZGVyLXJhZGl1czogMC41cmVtOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1zZWNvbmRhcnkpOwogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7CiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgfQoKICAgIC5ncm91cC1jaGlsZHJlbi5vcmllbnRhdGlvbi1jb2x1bW4gLmdyb3VwLWNoaWxkLWl0ZW0gewogICAgICB3aWR0aDogMTAwJTsKICAgIH0KCiAgICAuZ3JvdXAtY2hpbGRyZW4ub3JpZW50YXRpb24tcm93IC5ncm91cC1jaGlsZC1pdGVtIHsKICAgICAgLyogTGFyZ3VyYSBzZXLDoSBkZWZpbmlkYSBpbmxpbmUgdmlhIHN0eWxlIGJhc2VhZG8gZW0gY2hpbGQud2lkdGggKi8KICAgICAgbWluLXdpZHRoOiAwOwogICAgICAvKiBQZXJtaXRlIHF1ZSBlbGVtZW50b3MgZW5jb2xoYW0gYWJhaXhvIGRvIGNvbnRlw7pkbyBtw61uaW1vICovCiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgIC8qIFByZXZpbmUgcXVlIGNvbnRlw7pkbyB1bHRyYXBhc3NlIG8gY29udGFpbmVyICovCiAgICB9CgogICAgLmdyb3VwLWNoaWxkLWl0ZW06aG92ZXIgewogICAgICBib3JkZXItY29sb3I6IHZhcigtLWJvcmRlci1ob3Zlcik7CiAgICB9CgogICAgLmdyb3VwLWNoaWxkLWl0ZW0uc2VsZWN0ZWQgewogICAgICBib3JkZXItY29sb3I6ICMyNTYzZWI7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsKICAgIH0KCiAgICBbZGF0YS10aGVtZT0iZGFyayJdIC5ncm91cC1jaGlsZC1pdGVtLnNlbGVjdGVkIHsKICAgICAgYmFja2dyb3VuZDogcmdiYSgzNywgOTksIDIzNSwgMC4yKTsKICAgIH0KCiAgICAvKiBRdWFuZG8gZ3JvdXAtY2hpbGQtaXRlbSBjb250w6ltIHVtYSBpbWFnZW0sIHRvcm5hciBpbnZpc8OtdmVsICovCiAgICAuZ3JvdXAtY2hpbGQtaXRlbS5ncm91cC1jaGlsZC1zZW0tYWJhcyB7CiAgICAgIHBhZGRpbmc6IDUwICFpbXBvcnRhbnQ7CiAgICAgIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50OwogICAgICBib3JkZXItcmFkaXVzOiAwICFpbXBvcnRhbnQ7CiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7CiAgICAgIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKICAgICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLmdyb3VwLWNoaWxkLWl0ZW0uZ3JvdXAtY2hpbGQtc2VtLWFiYXM6aG92ZXIgewogICAgICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKICAgIH0KCiAgICAuZ3JvdXAtY2hpbGQtaXRlbS5ncm91cC1jaGlsZC1zZW0tYWJhcy5zZWxlY3RlZCB7CiAgICAgIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50OwogICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OwogICAgfQoKICAgIC5ncm91cC1wbGFjZWhvbGRlciB7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICBwYWRkaW5nOiAycmVtOwogICAgICB3aWR0aDogMTAwJTsKICAgICAgYm9yZGVyLXJhZGl1czogMC43NXJlbTsKICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgdHJhbnNpdGlvbjogY29sb3IgMC4zcyBlYXNlOwogICAgfQoKICAgIC8qIEJvdMOjbyBkZSByZW1vdmVyIHJlbW92aWRvIC0gYWdvcmEgZXN0w6Egbm8gZWRpdG9yICovCgogICAgLnNtYWxsTm90ZSB7CiAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOwogICAgICBtYXJnaW4tdG9wOiAwLjVyZW07CiAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7CiAgICAgIHRyYW5zaXRpb246IGNvbG9yIDAuM3MgZWFzZTsKICAgIH0KCiAgICAuZWxlbWVudC1pdGVtOmhvdmVyIHsKICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1ib3JkZXItaG92ZXIpOwogICAgfQoKICAgIC5lbGVtZW50LWl0ZW0uc2VsZWN0ZWQgewogICAgICBib3JkZXItY29sb3I6ICMyNTYzZWI7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsKICAgIH0KCiAgICBbZGF0YS10aGVtZT0iZGFyayJdIC5lbGVtZW50LWl0ZW0uc2VsZWN0ZWQgewogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDM3LCA5OSwgMjM1LCAwLjIpOwogICAgfQoKCiAgICBbZGF0YS10aGVtZT0iZGFyayJdIC50ZXh0X2xhYiB7ICAgICAgCiAgICAgICBmaWxsOiAjRkZGRkZGICFpbXBvcnRhbnQ7IAogICAgfQoKCiAgICAvKiBTb2JyZXNjcmV2ZXIgZXN0aWxvcyBkbyAuZWxlbWVudC1pdGVtIHF1YW5kbyBmb3IgaW1hZ2VtICovCiAgICAuZWxlbWVudC1pdGVtLmVsZW1lbnQtaW1hZ2UgewogICAgICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7CiAgICAgIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50OwogICAgICBib3JkZXItcmFkaXVzOiAwICFpbXBvcnRhbnQ7CiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7CiAgICAgIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKICAgICAgd2lkdGg6IGF1dG8gIWltcG9ydGFudDsKICAgICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7CiAgICAgIG1pbi13aWR0aDogMCAhaW1wb3J0YW50OwogICAgICBtaW4taGVpZ2h0OiAwICFpbXBvcnRhbnQ7CiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgbGluZS1oZWlnaHQ6IDAgIWltcG9ydGFudDsKICAgICAgZm9udC1zaXplOiAwICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLyogUXVhbmRvIGltYWdlbSBlc3TDoSBlbSBwb3Npw6fDo28gYWJzb2x1dGEsIGdhcmFudGlyIHF1ZSBuw6NvIGludGVyZmlyYSBjb20gb3V0cm9zIGVsZW1lbnRvcyAqLwogICAgLmVsZW1lbnQtaXRlbS5lbGVtZW50LWltYWdlW3N0eWxlKj0icG9zaXRpb246IGFic29sdXRlIl0sCiAgICAuZWxlbWVudC1pdGVtLmVsZW1lbnQtaW1hZ2Vbc3R5bGUqPSJwb3NpdGlvbjphYnNvbHV0ZSJdIHsKICAgICAgei1pbmRleDogMTA7CiAgICB9CgogICAgLmVsZW1lbnQtaXRlbS5lbGVtZW50LWltYWdlOmhvdmVyIHsKICAgICAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7CiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7CiAgICAgIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKICAgIH0KCiAgICAuZWxlbWVudC1pdGVtLmVsZW1lbnQtaW1hZ2Uuc2VsZWN0ZWQgewogICAgICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50OwogICAgICBvdXRsaW5lOiAycHggZGFzaGVkICMyNTYzZWI7CiAgICAgIG91dGxpbmUtb2Zmc2V0OiAycHg7CiAgICB9CgogICAgLyogR2FyYW50aXIgcXVlIG5lbmh1bSBlc3RpbG8gZGUgc2VsZcOnw6NvIHBhZHLDo28gc2VqYSBhcGxpY2FkbyAqLwogICAgLmVsZW1lbnQtaXRlbS5lbGVtZW50LWltYWdlLnNlbGVjdGVkOjpiZWZvcmUsCiAgICAuZWxlbWVudC1pdGVtLmVsZW1lbnQtaW1hZ2Uuc2VsZWN0ZWQ6OmFmdGVyIHsKICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OwogICAgfQoKICAgIC5lbGVtZW50LWl0ZW0uZWxlbWVudC1pbWFnZS5kcmFnZ2luZyB7CiAgICAgIG9wYWNpdHk6IDAuNzsKICAgICAgY3Vyc29yOiBncmFiYmluZzsKICAgIH0KCiAgICAuZWxlbWVudC1pdGVtIHsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgfQoKICAgIC5lbGVtZW50LWNvbnRyb2xzIHsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IC0wLjc1cmVtOwogICAgICByaWdodDogMC41cmVtOwogICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7CiAgICAgIGdhcDogMC4yNXJlbTsKICAgICAgb3BhY2l0eTogMDsKICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzOwogICAgICB6LWluZGV4OiAxMDsKICAgIH0KCiAgICAuZWxlbWVudC1idG4tc21hbGwgewogICAgICB3aWR0aDogMS43NXJlbTsKICAgICAgaGVpZ2h0OiAxLjc1cmVtOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwgMCwgMCwgMC4xKTsKICAgICAgcGFkZGluZzogMDsKICAgICAgei1pbmRleDogMTE7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIH0KCiAgICAuYnRuLWNvbmZpZyB7CiAgICAgIGJhY2tncm91bmQ6ICMyNTYzZWI7CiAgICB9CgogICAgLmJ0bi1jb25maWc6aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiAjMWQ0ZWQ4OwogICAgfQoKICAgIC5idG4tdXAsCiAgICAuYnRuLWRvd24gewogICAgICBiYWNrZ3JvdW5kOiAjNGI1NTYzOwogICAgfQoKICAgIC5idG4tdXA6aG92ZXIsCiAgICAuYnRuLWRvd246aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiAjMzc0MTUxOwogICAgfQoKICAgIC5idG4tcmVtb3ZlIHsKICAgICAgYmFja2dyb3VuZDogI2VmNDQ0NDsKICAgIH0KCiAgICAuYnRuLXJlbW92ZTpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6ICNkYzI2MjY7CiAgICB9CgogICAgLmVsZW1lbnQtcHJldmlldyB7CiAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICB0cmFuc2l0aW9uOiBjb2xvciAwLjNzIGVhc2U7CiAgICB9CgogICAgLyogUGFyYSBpbWFnZW5zLCByZW1vdmVyIHF1YWxxdWVyIGVzcGHDp28gZGUgdGV4dG8gKi8KICAgIC5lbGVtZW50LWltYWdlIC5lbGVtZW50LXByZXZpZXcgewogICAgICBmb250LXNpemU6IDAgIWltcG9ydGFudDsKICAgICAgbGluZS1oZWlnaHQ6IDAgIWltcG9ydGFudDsKICAgICAgY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLnByZXZpZXctdGV4dCB7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICB0cmFuc2l0aW9uOiBjb2xvciAwLjNzIGVhc2U7CiAgICB9CgogICAgLnByZXZpZXctaGVhZGVyIHsKICAgICAgZm9udC1zaXplOiAxLjI1cmVtOwogICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgdHJhbnNpdGlvbjogY29sb3IgMC4zcyBlYXNlOwogICAgfQoKICAgIC5wcmV2aWV3LWltYWdlIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIG1hcmdpbjogMCAhaW1wb3J0YW50OwogICAgICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7CiAgICAgIG1pbi1oZWlnaHQ6IDAgIWltcG9ydGFudDsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKICAgICAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7CiAgICAgIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKICAgICAgbGluZS1oZWlnaHQ6IDAgIWltcG9ydGFudDsKICAgICAgZm9udC1zaXplOiAwICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLnByZXZpZXctaW1hZ2UgaW1nIHsKICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgIG9iamVjdC1maXQ6IGNvbnRhaW47CiAgICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07CiAgICAgIGJveC1zaGFkb3c6IG5vbmU7CiAgICAgIG1heC13aWR0aDogMTAwJTsKICAgICAgbWF4LWhlaWdodDogMTAwJTsKICAgICAgbWFyZ2luOiAwOwogICAgICBwYWRkaW5nOiAwOwogICAgfQoKICAgIC5wcmV2aWV3LWltYWdlLWJveCB7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsKICAgICAgYm9yZGVyOiAycHggZGFzaGVkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7CiAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UsIGJvcmRlci1jb2xvciAwLjNzIGVhc2UsIGNvbG9yIDAuM3MgZWFzZTsKICAgIH0KCiAgICAvKiBRdWFuZG8gYSBpbWFnZW0gZXN0w6EgZGVudHJvIGRlIHVtIGVsZW1lbnRvLWltYWdlLCB0b3JuYXIgbyBwcmV2aWV3LWltYWdlLWJveCB0YW1iw6ltIGludmlzw612ZWwgc2UgbmVjZXNzw6FyaW8gKi8KICAgIC5lbGVtZW50LWltYWdlIC5wcmV2aWV3LWltYWdlLWJveCB7CiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogICAgICBib3JkZXI6IDJweCBkYXNoZWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsKICAgIH0KCiAgICAucHJldmlldy10YWJsZSB7CiAgICAgIC8qIHdpZHRoIGNvbnRyb2xhZG8gZGluYW1pY2FtZW50ZSAtIHBvZGUgY3Jlc2NlciBhbMOpbSBkZSAxMDAlIHNlIG5lY2Vzc8OhcmlvICovCiAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgICAgIG1hcmdpbjogMC41cmVtIDA7CiAgICAgIC8qIFBlcm1pdGlyIHF1ZSBhIHRhYmVsYSB0ZW5oYSBsYXJndXJhIG5hdHVyYWwgcXVhbmRvIG5lY2Vzc8OhcmlvICovCiAgICAgIG1pbi13aWR0aDogMTAwJTsKICAgICAgd2lkdGg6IGF1dG87CiAgICB9CgogICAgLnByZXZpZXctdGFibGUgdGgsCiAgICAucHJldmlldy10YWJsZSB0ZCB7CiAgICAgIC8qIEJvcmRhcyBwYWRyw6NvIC0gc2Vyw6NvIHNvYnJlc2NyaXRhcyBwZWxvIGxheW91dCBjdXN0b21pemFkbyBzZSBhcGxpY8OhdmVsICovCiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICAgIHBhZGRpbmc6IDAuNXJlbTsKICAgICAgZm9udC1zaXplOiAwLjc1cmVtOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmctc2Vjb25kYXJ5KTsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UsIGJvcmRlci1jb2xvciAwLjNzIGVhc2UsIGNvbG9yIDAuM3MgZWFzZTsKICAgIH0KCiAgICAucHJldmlldy10YWJsZSB0aCB7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsKICAgICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICB9CgogICAgLnByZXZpZXctY29sdW1ucyB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGdhcDogMXJlbTsKICAgICAgbWFyZ2luOiAwLjVyZW0gMDsKICAgIH0KCiAgICAucHJldmlldy1jb2x1bW4gewogICAgICBmbGV4OiAxOwogICAgICBwYWRkaW5nOiAwLjVyZW07CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsKICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsKICAgICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsKICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zcyBlYXNlLCBib3JkZXItY29sb3IgMC4zcyBlYXNlLCBjb2xvciAwLjNzIGVhc2U7CiAgICB9CgogICAgLnByZXZpZXctbGlzdCB7CiAgICAgIG1hcmdpbi1sZWZ0OiAxLjVyZW07CiAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgfQoKICAgIC5wcmV2aWV3LWxpc3QgbGkgewogICAgICBtYXJnaW4tYm90dG9tOiAwLjI1cmVtOwogICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycywgYm9yZGVyLWNvbG9yIDAuMnMsIGNvbG9yIDAuM3MgZWFzZTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICB9CgogICAgLnByZXZpZXctbGlzdCBsaTpob3ZlciB7CiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJnLWhvdmVyKTsKICAgIH0KCiAgICAucHJldmlldy1tYXJnaW4gewogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgZm9udC1zdHlsZTogaXRhbGljOwogICAgfQoKICAgIC5wcmV2aWV3LXBhZ2VicmVhayB7CiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOwogICAgICBmb250LXNpemU6IDAuODc1cmVtOwogICAgICBmb250LXN0eWxlOiBpdGFsaWM7CiAgICAgIGJvcmRlci10b3A6IDJweCBkYXNoZWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsKICAgICAgcGFkZGluZy10b3A6IDAuNXJlbTsKICAgICAgbWFyZ2luLXRvcDogMC41cmVtOwogICAgfQoKICAgIC8qIENvZGUgUGFuZWwgKi8KICAgIC5jb2RlLXBhbmVsIHsKICAgICAgd2lkdGg6IDI0cmVtOwogICAgICBtYXgtd2lkdGg6IDYwMHB4OwogICAgICBtaW4td2lkdGg6IDMwMHB4OwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1zZWNvbmRhcnkpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgcGFkZGluZzogMDsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOwogICAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MgZWFzZSwgYm9yZGVyLWNvbG9yIDAuM3MgZWFzZSwgY29sb3IgMC4zcyBlYXNlLCBib3gtc2hhZG93IDAuM3MgZWFzZTsKICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICB0b3A6IDA7CiAgICAgIHJpZ2h0OiAwOwogICAgICB6LWluZGV4OiAxMDAwOwogICAgICBib3gtc2hhZG93OiAtMnB4IDAgOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTsKICAgICAgd2lsbC1jaGFuZ2U6IHRyYW5zZm9ybTsKICAgICAgaGVpZ2h0OiA3MHZoOwogICAgICBtYXgtaGVpZ2h0OiA3MHZoOwogICAgfQoKICAgIFtkYXRhLXRoZW1lPSJkYXJrIl0gLmNvZGUtcGFuZWwgewogICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMykgIWltcG9ydGFudDsKICAgICAgYm94LXNoYWRvdzogLTJweCAwIDEycHggcmdiYSgwLCAwLCAwLCAwLjUpLCAwIDAgMjBweCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpLCAycHggMCA4cHggcmdiYSgwLCAwLCAwLCAwLjMpICFpbXBvcnRhbnQ7CiAgICB9CgogICAgQG1lZGlhIChtYXgtd2lkdGg6IDEwMjRweCkgewogICAgICAuY29kZS1wYW5lbCB7CiAgICAgICAgd2lkdGg6IDIwcmVtOwogICAgICAgIG1heC13aWR0aDogNTAwcHg7CiAgICAgIH0KICAgIH0KCiAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHsKICAgICAgLmNvZGUtcGFuZWwgewogICAgICAgIHdpZHRoOiA5MHZ3OwogICAgICAgIG1heC13aWR0aDogOTB2dzsKICAgICAgICBtaW4td2lkdGg6IDI4MHB4OwogICAgICB9CiAgICB9CgogICAgLmNvZGUtcGFuZWwuZHJhZ2dpbmcgewogICAgICBjdXJzb3I6IGdyYWJiaW5nOwogICAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87CiAgICB9CgogICAgYm9keS5wYW5lbC1kcmFnZ2luZyB7CiAgICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgICBjdXJzb3I6IGdyYWJiaW5nOwogICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgfQoKICAgIGJvZHkucGFuZWwtZHJhZ2dpbmcgLm1haW4gewogICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgICB9CgogICAgYm9keS5wYW5lbC1kcmFnZ2luZyAuY2FudmFzLWFyZWEsCiAgICBib2R5LnBhbmVsLWRyYWdnaW5nIC5jYW52YXMsCiAgICBib2R5LnBhbmVsLWRyYWdnaW5nIC5lbGVtZW50LWl0ZW0sCiAgICBib2R5LnBhbmVsLWRyYWdnaW5nIC5zaWRlYmFyIHsKICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgfQoKICAgIGJvZHkucGFuZWwtZHJhZ2dpbmcgLmNvZGUtcGFuZWwgewogICAgICBwb2ludGVyLWV2ZW50czogYXV0bzsKICAgIH0KCiAgICAuY29kZS1oZWFkZXIgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBtYXJnaW4tYm90dG9tOiAwOwogICAgICBwYWRkaW5nOiAwOwogICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsKICAgICAgYmFja2dyb3VuZDogIzBmMTcyYTsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2U7CiAgICAgIGN1cnNvcjogZ3JhYjsKICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgICB9CgogICAgLmNvZGUtaGVhZGVyOmhvdmVyIHsKICAgICAgYmFja2dyb3VuZDogIzBmMTcyYTsKICAgIH0KCiAgICAuY29kZS1oZWFkZXI6YWN0aXZlIHsKICAgICAgY3Vyc29yOiBncmFiYmluZzsKICAgIH0KCiAgICAuaGVhZGVyLXRvcCB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgcGFkZGluZzogMC43NXJlbSAxcmVtOwogICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmMDA7CiAgICB9CgogICAgLmVsZW1lbnQtdHlwZS10aXRsZSB7CiAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07CiAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgIGNvbG9yOiAjZmZmZmZmOwogICAgfQoKICAgIC5lbGVtZW50LXR5cGUtdGl0bGUgc3Ryb25nIHsKICAgICAgY29sb3I6ICNmZmZmZmY7CiAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICB9CgogICAgLmNvZGUtaGVhZGVyIC50YWJzIHsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGdhcDogMDsKICAgICAgYmFja2dyb3VuZDogIzBmMTcyYTsKICAgICAgcGFkZGluZzogMDsKICAgIH0KCiAgICAuY2xvc2UtcGFuZWwtYnRuIHsKICAgICAgd2lkdGg6IDMycHg7CiAgICAgIGhlaWdodDogMzJweDsKICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgYmFja2dyb3VuZDogcmdiYSgyMzksIDY4LCA2OCwgMC4xNSk7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjM5LCA2OCwgNjgsIDAuMyk7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07CiAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7CiAgICAgIGZsZXgtc2hyaW5rOiAwOwogICAgICBvdmVyZmxvdzogdmlzaWJsZSAhaW1wb3J0YW50OwogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgIHotaW5kZXg6IDEwOwogICAgfQoKICAgIC5jbG9zZS1wYW5lbC1idG4gc3ZnIHsKICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTsKICAgICAgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsKICAgICAgd2lkdGg6IDEwcHggIWltcG9ydGFudDsKICAgICAgaGVpZ2h0OiAxMHB4ICFpbXBvcnRhbnQ7CiAgICAgIGZpbGw6ICNlZjQ0NDQgIWltcG9ydGFudDsKICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZSAhaW1wb3J0YW50OwogICAgICBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7CiAgICAgIG92ZXJmbG93OiB2aXNpYmxlICFpbXBvcnRhbnQ7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgei1pbmRleDogMTsKICAgIH0KCiAgICAuY2xvc2UtcGFuZWwtYnRuIHN2ZyBwYXRoIHsKICAgICAgZmlsbDogI2VmNDQ0NCAhaW1wb3J0YW50OwogICAgICB2aXNpYmlsaXR5OiB2aXNpYmxlICFpbXBvcnRhbnQ7CiAgICAgIG9wYWNpdHk6IDEgIWltcG9ydGFudDsKICAgICAgc3Ryb2tlOiBub25lICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLmNsb3NlLXBhbmVsLWJ0bjpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjM5LCA2OCwgNjgsIDAuMjUpOwogICAgICBib3JkZXItY29sb3I6IHJnYmEoMjM5LCA2OCwgNjgsIDAuNSk7CiAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7CiAgICB9CgogICAgLmNsb3NlLXBhbmVsLWJ0bjpob3ZlciBzdmcgewogICAgICBmaWxsOiAjZGMyNjI2ICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLmNsb3NlLXBhbmVsLWJ0bjpob3ZlciBzdmcgcGF0aCB7CiAgICAgIGZpbGw6ICNkYzI2MjYgIWltcG9ydGFudDsKICAgIH0KCiAgICAuY2xvc2UtcGFuZWwtYnRuOmFjdGl2ZSB7CiAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC45NSk7CiAgICB9CgoKICAgIC5jb2RlLXBhbmVsLmhpZGRlbiB7CiAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICB9CgogICAgLmNvZGUtaGVhZGVyIGgyIHsKICAgICAgZm9udC1zaXplOiAxLjEyNXJlbTsKICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgfQoKICAgIC8qIFRhYnMgKi8KICAgIC50YWJzIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZ2FwOiAwOwogICAgICBmbGV4OiAxOwogICAgfQoKICAgIC50YWItYnRuIHsKICAgICAgZmxleDogMTsKICAgICAgcGFkZGluZzogMC42MjVyZW0gMC43NXJlbTsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgY29sb3I6ICNmZmZmZmY7CiAgICAgIGJvcmRlci1yYWRpdXM6IDA7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgfQoKICAgIC50YWItYnRuOmhvdmVyIHsKICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpOwogICAgICBjb2xvcjogI2ZmZmZmZjsKICAgIH0KCiAgICAudGFiLWJ0bi5hY3RpdmUgewogICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgICAgY29sb3I6ICNmZmZmZmY7CiAgICAgIGJvcmRlci1ib3R0b20tY29sb3I6ICMyNTYzZWI7CiAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICB9CgogICAgLnRhYi1jb250ZW50IHsKICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgZmxleDogMTsKICAgICAgb3ZlcmZsb3cteTogYXV0bzsKICAgICAgb3ZlcmZsb3cteDogaGlkZGVuOwogICAgICBtaW4taGVpZ2h0OiAwOwogICAgICBtYXgtaGVpZ2h0OiBjYWxjKDcwdmggLSAxMjBweCk7CiAgICAgIC13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaDsKICAgICAgcGFkZGluZzogMDsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgfQoKICAgIC50YWItY29udGVudC5hY3RpdmUgewogICAgICBkaXNwbGF5OiBibG9jazsKICAgIH0KCiAgICAudGFiLWNvbnRlbnQ+KiB7CiAgICAgIHBhZGRpbmc6IDFyZW07CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgei1pbmRleDogMTsKICAgIH0KCgogICAgI3RhYkNvbnRlbnRDb2RlIHsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmctc2Vjb25kYXJ5KTsKICAgIH0KCiAgICAjdGFiQ29udGVudENvZGU+ZGl2OmZpcnN0LWNoaWxkIHsKICAgICAgcGFkZGluZzogMXJlbTsKICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICB9CgogICAgLyogSW5zcGVjdG9yICovCiAgICAuaW5zcGVjdG9yIHsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIHBhZGRpbmc6IDAuNXJlbTsKICAgICAgb3ZlcmZsb3cteTogdmlzaWJsZTsKICAgICAgb3ZlcmZsb3cteDogaGlkZGVuOwogICAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OwogICAgICB2aXNpYmlsaXR5OiB2aXNpYmxlICFpbXBvcnRhbnQ7CiAgICAgIG9wYWNpdHk6IDEgIWltcG9ydGFudDsKICAgICAgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7CiAgICAgIG1pbi1oZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsKICAgIH0KCiAgICAuaW5zcGVjdG9yICogewogICAgICB2aXNpYmlsaXR5OiB2aXNpYmxlICFpbXBvcnRhbnQ7CiAgICAgIG9wYWNpdHk6IDEgIWltcG9ydGFudDsKICAgIH0KCiAgICAuaW5zcGVjdG9yLWZpZWxkIHsKICAgICAgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsKICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZSAhaW1wb3J0YW50OwogICAgfQoKICAgIC5pbnNwZWN0b3ItZmllbGQgaW5wdXQsCiAgICAuaW5zcGVjdG9yLWZpZWxkIHRleHRhcmVhLAogICAgLmluc3BlY3Rvci1maWVsZCBzZWxlY3QgewogICAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OwogICAgICB2aXNpYmlsaXR5OiB2aXNpYmxlICFpbXBvcnRhbnQ7CiAgICAgIG9wYWNpdHk6IDEgIWltcG9ydGFudDsKICAgIH0KCiAgICAuaW5zcGVjdG9yLWZpZWxkOmxhc3QtY2hpbGQgewogICAgICBtYXJnaW4tYm90dG9tOiAwOwogICAgfQoKICAgIC5pbnNwZWN0b3IgLm11dGVkIHsKICAgICAgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOwogICAgICBmb250LXNpemU6IDAuODc1cmVtOwogICAgfQoKICAgIC5pbnNwZWN0b3ItZmllbGQgewogICAgICBtYXJnaW4tYm90dG9tOiAxcmVtOwogICAgfQoKICAgIC5pbnNwZWN0b3ItZmllbGQgbGFiZWwgewogICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsKICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtOwogICAgfQoKICAgIC5pbnNwZWN0b3ItZmllbGQgLnNtYWxsTm90ZSB7CiAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOwogICAgICBtYXJnaW4tdG9wOiAwLjI1cmVtOwogICAgfQoKICAgIC5pbnNwZWN0b3ItZmllbGQgaW5wdXQsCiAgICAuaW5zcGVjdG9yLWZpZWxkIHNlbGVjdCwKICAgIC5pbnNwZWN0b3ItZmllbGQgdGV4dGFyZWEgewogICAgICB3aWR0aDogMTAwJTsKICAgICAgcGFkZGluZzogMC41cmVtIDAuNzVyZW07CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsKICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsKICAgICAgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICBmb250LXNpemU6IDAuODc1cmVtOwogICAgICBmb250LWZhbWlseTogaW5oZXJpdDsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UsIGJvcmRlci1jb2xvciAwLjNzIGVhc2UsIGNvbG9yIDAuM3MgZWFzZTsKICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIH0KCiAgICAuaW5zcGVjdG9yLWZpZWxkIHRleHRhcmVhIHsKICAgICAgbWluLWhlaWdodDogMTIwcHg7CiAgICAgIHJlc2l6ZTogdmVydGljYWw7CiAgICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBtb25vc3BhY2U7CiAgICB9CgogICAgLmluc3BlY3Rvci1maWVsZCB0ZXh0YXJlYTo6cGxhY2Vob2xkZXIgewogICAgICBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7CiAgICAgIG9wYWNpdHk6IDAuNzsKICAgIH0KCiAgICAvKiBFc3RpbG9zIHBhcmEgYXMgb3DDp8O1ZXMgZG9zIHNlbGVjdHMgLSBnYXJhbnRpciBjb250cmFzdGUgKi8KICAgIC5pbnNwZWN0b3ItZmllbGQgc2VsZWN0IG9wdGlvbiB7CiAgICAgIGJhY2tncm91bmQ6IHdoaXRlICFpbXBvcnRhbnQ7CiAgICAgIGNvbG9yOiAjMTExODI3ICFpbXBvcnRhbnQ7CiAgICAgIHBhZGRpbmc6IDAuNXJlbTsKICAgIH0KCiAgICAvKiBRdWFuZG8gbyBzZWxlY3QgZXN0w6EgYWJlcnRvL2ZvY2FkbywgZ2FyYW50aXIgcXVlIHRlbmhhIGZ1bmRvIGJyYW5jbyBlIHRleHRvIGVzY3VybyAqLwogICAgLmluc3BlY3Rvci1maWVsZCBzZWxlY3Q6Zm9jdXMsCiAgICAuaW5zcGVjdG9yLWZpZWxkIHNlbGVjdDphY3RpdmUgewogICAgICBiYWNrZ3JvdW5kOiB3aGl0ZSAhaW1wb3J0YW50OwogICAgICBjb2xvcjogIzExMTgyNyAhaW1wb3J0YW50OwogICAgfQoKICAgIC8qIEdhcmFudGlyIHF1ZSBvIHNlbGVjdCB0ZW5oYSBmdW5kbyBicmFuY28gcXVhbmRvIGVzdGl2ZXIgYWJlcnRvICovCiAgICAuaW5zcGVjdG9yLWZpZWxkIHNlbGVjdCB7CiAgICAgIGFwcGVhcmFuY2U6IG5vbmU7CiAgICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKICAgICAgLW1vei1hcHBlYXJhbmNlOiBub25lOwogICAgfQoKICAgIC8qIEVzdGlsbyBwYXJhIG8gZHJvcGRvd24gYWJlcnRvIC0gZ2FyYW50aXIgcXVlIGFzIG9ww6fDtWVzIHNlamFtIHZpc8OtdmVpcyAqLwogICAgLmluc3BlY3Rvci1maWVsZCBzZWxlY3Qgb3B0aW9uOmNoZWNrZWQsCiAgICAuaW5zcGVjdG9yLWZpZWxkIHNlbGVjdCBvcHRpb246aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiAjZjNmNGY2ICFpbXBvcnRhbnQ7CiAgICAgIGNvbG9yOiAjMTExODI3ICFpbXBvcnRhbnQ7CiAgICB9CgogICAgLmluc3BlY3Rvci1maWVsZCBpbnB1dDpmb2N1cywKICAgIC5pbnNwZWN0b3ItZmllbGQgdGV4dGFyZWE6Zm9jdXMgewogICAgICBvdXRsaW5lOiBub25lOwogICAgICBib3JkZXItY29sb3I6ICMyNTYzZWI7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLWhvdmVyKTsKICAgIH0KCgogICAgLmluc3BlY3Rvci1maWVsZCAucm93IHsKICAgICAgZGlzcGxheTogZ3JpZDsKICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOwogICAgICBnYXA6IDAuNXJlbTsKICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtOwogICAgfQoKICAgIC5pbnNwZWN0b3ItZmllbGQgLnJvdz5kaXYgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgfQoKICAgIC5idG4tY29weSB7CiAgICAgIGJhY2tncm91bmQ6ICMyNTYzZWI7CiAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgIGdhcDogMC41cmVtOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzOwogICAgICBmb250LXdlaWdodDogNTAwOwogICAgfQoKICAgIC5idG4tY29weTpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6ICMxZDRlZDg7CiAgICB9CgogICAgLmJ0bi1jb3B5LmNvcGllZCB7CiAgICAgIGJhY2tncm91bmQ6ICMxNmEzNGE7CiAgICB9CgogICAgLmJ0bi1yZW1vdmUtbGFyZ2UgewogICAgICBiYWNrZ3JvdW5kOiAjZWY0NDQ0OwogICAgICBjb2xvcjogd2hpdGU7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgYm9yZGVyLXJhZGl1czogMC41cmVtOwogICAgICBmb250LXNpemU6IDFyZW07CiAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzOwogICAgfQoKICAgIC5idG4tcmVtb3ZlLWxhcmdlOmhvdmVyIHsKICAgICAgYmFja2dyb3VuZDogI2RjMjYyNjsKICAgIH0KCiAgICAvKiBNb2RhbCBwZXJzb25hbGl6YWRvICovCiAgICAuY3VzdG9tLW1vZGFsIHsKICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICB0b3A6IDA7CiAgICAgIGxlZnQ6IDA7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgIHotaW5kZXg6IDEwMDAwOwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIH0KCiAgICAuY3VzdG9tLW1vZGFsLmFjdGl2ZSB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICB9CgogICAgLmN1c3RvbS1tb2RhbC1vdmVybGF5IHsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IDA7CiAgICAgIGxlZnQ6IDA7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC41KTsKICAgICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDJweCk7CiAgICB9CgogICAgLmN1c3RvbS1tb2RhbC1jb250ZW50IHsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1zZWNvbmRhcnkpOwogICAgICBib3JkZXItcmFkaXVzOiAwLjc1cmVtOwogICAgICBib3gtc2hhZG93OiAwIDIwcHggMjVweCAtNXB4IHZhcigtLXNoYWRvdyksIDAgMTBweCAxMHB4IC01cHggdmFyKC0tc2hhZG93KTsKICAgICAgbWF4LXdpZHRoOiA1MDBweDsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UsIGJveC1zaGFkb3cgMC4zcyBlYXNlOwogICAgICB3aWR0aDogOTAlOwogICAgICBtYXgtaGVpZ2h0OiA5MHZoOwogICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICB6LWluZGV4OiAxMDAwMTsKICAgIH0KCiAgICAuY3VzdG9tLW1vZGFsLWhlYWRlciB7CiAgICAgIHBhZGRpbmc6IDEuNXJlbTsKICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICAgIHRyYW5zaXRpb246IGJvcmRlci1jb2xvciAwLjNzIGVhc2U7CiAgICB9CgogICAgLmN1c3RvbS1tb2RhbC1oZWFkZXIgaDMgewogICAgICBtYXJnaW46IDA7CiAgICAgIGZvbnQtc2l6ZTogMS4yNXJlbTsKICAgICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICB9CgogICAgLmN1c3RvbS1tb2RhbC1ib2R5IHsKICAgICAgcGFkZGluZzogMS41cmVtOwogICAgICBmbGV4OiAxOwogICAgICBvdmVyZmxvdy15OiBhdXRvOwogICAgfQoKICAgIC5jdXN0b20tbW9kYWwtYm9keSBwIHsKICAgICAgbWFyZ2luOiAwOwogICAgICBmb250LXNpemU6IDFyZW07CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7CiAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7CiAgICB9CgogICAgLmN1c3RvbS1tb2RhbC1mb290ZXIgewogICAgICBwYWRkaW5nOiAxcmVtIDEuNXJlbTsKICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGdhcDogMC43NXJlbTsKICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsKICAgICAgdHJhbnNpdGlvbjogYm9yZGVyLWNvbG9yIDAuM3MgZWFzZTsKICAgIH0KCiAgICAuY3VzdG9tLW1vZGFsLWJ0biB7CiAgICAgIHBhZGRpbmc6IDAuNjI1cmVtIDEuMjVyZW07CiAgICAgIGJvcmRlci1yYWRpdXM6IDAuNXJlbTsKICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzOwogICAgfQoKICAgIC5jdXN0b20tbW9kYWwtYnRuLWNhbmNlbCB7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsKICAgICAgY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UsIGNvbG9yIDAuM3MgZWFzZTsKICAgIH0KCiAgICAuY3VzdG9tLW1vZGFsLWJ0bi1jYW5jZWw6aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1ob3Zlcik7CiAgICB9CgogICAgLmN1c3RvbS1tb2RhbC1idG4tY29uZmlybSB7CiAgICAgIGJhY2tncm91bmQ6ICMyNTYzZWI7CiAgICAgIGNvbG9yOiB3aGl0ZTsKICAgIH0KCiAgICAuY3VzdG9tLW1vZGFsLWJ0bi1jb25maXJtOmhvdmVyIHsKICAgICAgYmFja2dyb3VuZDogIzFkNGVkODsKICAgIH0KCiAgICAvKiBNb2RhbCBkZSBQcmV2aWV3IGRvIFBERiAqLwogICAgLnByZXZpZXctbW9kYWwtY29udGVudCB7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmctc2Vjb25kYXJ5KTsKICAgICAgYm9yZGVyLXJhZGl1czogMC43NXJlbTsKICAgICAgYm94LXNoYWRvdzogMCAyMHB4IDI1cHggLTVweCB2YXIoLS1zaGFkb3cpLCAwIDEwcHggMTBweCAtNXB4IHZhcigtLXNoYWRvdyk7CiAgICAgIG1heC13aWR0aDogOTUlOwogICAgICB3aWR0aDogOTUlOwogICAgICBtYXgtaGVpZ2h0OiA5NXZoOwogICAgICBoZWlnaHQ6IDk1dmg7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgIHotaW5kZXg6IDEwMDAxOwogICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MgZWFzZSwgYm94LXNoYWRvdyAwLjNzIGVhc2U7CiAgICB9CgogICAgLnByZXZpZXctbW9kYWwtaGVhZGVyIHsKICAgICAgcGFkZGluZzogMS41cmVtOwogICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBmbGV4LXNocmluazogMDsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmctc2Vjb25kYXJ5KTsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UsIGJvcmRlci1jb2xvciAwLjNzIGVhc2U7CiAgICB9CgogICAgLnByZXZpZXctbW9kYWwtaGVhZGVyIGgzIHsKICAgICAgbWFyZ2luOiAwOwogICAgICBmb250LXNpemU6IDEuMjVyZW07CiAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgfQoKICAgIC5wcmV2aWV3LW1vZGFsLWNsb3NlIHsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmctdGVydGlhcnkpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGJvcmRlci1yYWRpdXM6IDAuNXJlbTsKICAgICAgcGFkZGluZzogMC41cmVtIDFyZW07CiAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07CiAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7CiAgICB9CgogICAgLnByZXZpZXctbW9kYWwtY2xvc2U6aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1ob3Zlcik7CiAgICB9CgogICAgLnByZXZpZXctbW9kYWwtYm9keSB7CiAgICAgIGZsZXg6IDE7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgcGFkZGluZzogMDsKICAgIH0KCiAgICAucHJldmlldy1tb2RhbC1pZnJhbWUgewogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgdG9wOiAwOwogICAgICBsZWZ0OiAwOwogICAgICByaWdodDogMDsKICAgICAgYm90dG9tOiAwOwogICAgfQoKICAgIC5jb2RlLWVkaXRvciB7CiAgICAgIGZsZXg6IDE7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXNlY29uZGFyeSk7CiAgICAgIGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtOwogICAgICBwYWRkaW5nOiAxcmVtOwogICAgICBvdmVyZmxvdzogYXV0bzsKICAgICAgbWFyZ2luOiAxcmVtOwogICAgICBtYXJnaW4tYm90dG9tOiAxcmVtOwogICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOwogICAgICBmb250LXNpemU6IDAuNzVyZW07CiAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7CiAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsKICAgICAgd29yZC13cmFwOiBicmVhay13b3JkOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgIH0KCiAgICAuY29kZS1pbnN0cnVjdGlvbnMgewogICAgICBwYWRkaW5nOiAwLjc1cmVtIDFyZW07CiAgICAgIG1hcmdpbjogMCAxcmVtIDFyZW0gMXJlbTsKICAgICAgZm9udC1zaXplOiAwLjc1cmVtOwogICAgICBiYWNrZ3JvdW5kOiAjZGJlYWZlOwogICAgICBib3JkZXItbGVmdDogM3B4IHNvbGlkICMyNTYzZWI7CiAgICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07CiAgICAgIGNvbG9yOiAjMDcxYzVmOwogICAgfQoKICAgIC5jb2RlLWluc3RydWN0aW9ucyBwIHsKICAgICAgY29sb3I6ICMxZTQwYWY7CiAgICAgIG1hcmdpbi1ib3R0b206IDAuNXJlbTsKICAgIH0KCiAgICAuY29kZS1pbnN0cnVjdGlvbnMgb2wgewogICAgICBsaXN0LXN0eWxlLXBvc2l0aW9uOiBpbnNpZGU7CiAgICAgIGNvbG9yOiAjMWU0MGFmOwogICAgfQoKICAgIC5jb2RlLWluc3RydWN0aW9ucyBsaSB7CiAgICAgIG1hcmdpbi1ib3R0b206IDAuMjVyZW07CiAgICB9CgogICAgLyogTW9kYWwgKi8KICAgIC5tb2RhbCB7CiAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgaW5zZXQ6IDA7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLW1vZGFsLW92ZXJsYXkpOwogICAgICB6LWluZGV4OiA1MDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICB9CgogICAgLm1vZGFsLmFjdGl2ZSB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICB9CgogICAgLm1vZGFsLWNvbnRlbnQgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1zZWNvbmRhcnkpOwogICAgICBib3JkZXItcmFkaXVzOiAwLjVyZW07CiAgICAgIGJveC1zaGFkb3c6IDAgMjBweCAyNXB4IHZhcigtLXNoYWRvdyk7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBtYXgtd2lkdGg6IDI4cmVtOwogICAgICBtYXgtaGVpZ2h0OiA4MHZoOwogICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MgZWFzZSwgYm94LXNoYWRvdyAwLjNzIGVhc2U7CiAgICB9CgogICAgLm1vZGFsLWhlYWRlciB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgcGFkZGluZzogMXJlbTsKICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICAgIHRyYW5zaXRpb246IGJvcmRlci1jb2xvciAwLjNzIGVhc2U7CiAgICB9CgogICAgLm1vZGFsLWhlYWRlciBoMyB7CiAgICAgIGZvbnQtc2l6ZTogMS4xMjVyZW07CiAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgfQoKICAgIC5idG4tY2xvc2UgewogICAgICBiYWNrZ3JvdW5kOiBub25lOwogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICBmb250LXNpemU6IDEuMjVyZW07CiAgICAgIHRyYW5zaXRpb246IGNvbG9yIDAuM3MgZWFzZTsKICAgICAgcGFkZGluZzogMDsKICAgICAgd2lkdGg6IGF1dG87CiAgICAgIGhlaWdodDogYXV0bzsKICAgIH0KCiAgICAuYnRuLWNsb3NlOmhvdmVyIHsKICAgICAgY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsKICAgIH0KCiAgICAubW9kYWwtYm9keSB7CiAgICAgIHBhZGRpbmc6IDFyZW07CiAgICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICAgIGZsZXg6IDE7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgfQoKICAgIC5mb3JtLWdyb3VwIHsKICAgICAgbWFyZ2luLWJvdHRvbTogMXJlbTsKICAgIH0KCiAgICAuZm9ybS1ncm91cCBsYWJlbCB7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICBmb250LXNpemU6IDAuODc1cmVtOwogICAgICBmb250LXdlaWdodDogNTAwOwogICAgICBtYXJnaW4tYm90dG9tOiAwLjI1cmVtOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpOwogICAgfQoKICAgIC5mb3JtLWdyb3VwIGlucHV0LAogICAgLmZvcm0tZ3JvdXAgc2VsZWN0LAogICAgLmZvcm0tZ3JvdXAgdGV4dGFyZWEgewogICAgICB3aWR0aDogMTAwJTsKICAgICAgcGFkZGluZzogMC41cmVtIDAuNzVyZW07CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICAgIGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtOwogICAgICBmb250LXNpemU6IDAuODc1cmVtOwogICAgICBmb250LWZhbWlseTogaW5oZXJpdDsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmctdGVydGlhcnkpOwogICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UsIGJvcmRlci1jb2xvciAwLjNzIGVhc2UsIGNvbG9yIDAuM3MgZWFzZTsKICAgIH0KCiAgICAuZm9ybS1ncm91cCB0ZXh0YXJlYSB7CiAgICAgIHJlc2l6ZTogdmVydGljYWw7CiAgICAgIG1pbi1oZWlnaHQ6IDEwMHB4OwogICAgfQoKICAgIC5mb3JtLWdyb3VwIGlucHV0OmZvY3VzLAogICAgLmZvcm0tZ3JvdXAgc2VsZWN0OmZvY3VzLAogICAgLmZvcm0tZ3JvdXAgdGV4dGFyZWE6Zm9jdXMgewogICAgICBvdXRsaW5lOiBub25lOwogICAgICBib3JkZXItY29sb3I6ICMyNTYzZWI7CiAgICAgIGJveC1zaGFkb3c6IDAgMCAwIDNweCByZ2JhKDM3LCA5OSwgMjM1LCAwLjEpOwogICAgfQoKICAgIC5jaGVja2JveC1ncm91cCB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGdhcDogMXJlbTsKICAgICAgbWFyZ2luLXRvcDogMC41cmVtOwogICAgfQoKICAgIC5jaGVja2JveC1pdGVtIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgZ2FwOiAwLjVyZW07CiAgICB9CgogICAgLmNoZWNrYm94LWl0ZW0gaW5wdXRbdHlwZT0iY2hlY2tib3giXSB7CiAgICAgIHdpZHRoOiBhdXRvOwogICAgICBtYXJnaW46IDA7CiAgICB9CgogICAgLmdyaWQtMiB7CiAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsKICAgICAgZ2FwOiAwLjc1cmVtOwogICAgfQoKICAgIC5pbWFnZS1wcmV2aWV3LWNvbnRhaW5lciB7CiAgICAgIG1hcmdpbi10b3A6IDFyZW07CiAgICAgIHBhZGRpbmc6IDFyZW07CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICAgIGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy10ZXJ0aWFyeSk7CiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UsIGJvcmRlci1jb2xvciAwLjNzIGVhc2U7CiAgICB9CgogICAgLmltYWdlLXByZXZpZXctY29udGFpbmVyIGltZyB7CiAgICAgIG1heC13aWR0aDogMTAwJTsKICAgICAgbWF4LWhlaWdodDogMjAwcHg7CiAgICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07CiAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCB2YXIoLS1zaGFkb3cpOwogICAgfQoKICAgIC5pbWFnZS1wcmV2aWV3LWNvbnRhaW5lciAubm8tcHJldmlldyB7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgcGFkZGluZzogMnJlbTsKICAgIH0KCiAgICAuZmlsZS1pbnB1dC13cmFwcGVyIHsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgfQoKICAgIC5maWxlLWlucHV0LXdyYXBwZXIgaW5wdXRbdHlwZT0iZmlsZSJdIHsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIHBhZGRpbmc6IDAuNXJlbSAwLjc1cmVtOwogICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOwogICAgICBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsKICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy10ZXJ0aWFyeSk7CiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MgZWFzZSwgYm9yZGVyLWNvbG9yIDAuM3MgZWFzZSwgY29sb3IgMC4zcyBlYXNlOwogICAgfQoKICAgIC5maWxlLWlucHV0LXdyYXBwZXIgaW5wdXRbdHlwZT0iZmlsZSJdOmZvY3VzIHsKICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgYm9yZGVyLWNvbG9yOiAjMjU2M2ViOwogICAgICBib3gtc2hhZG93OiAwIDAgMCAzcHggcmdiYSgzNywgOTksIDIzNSwgMC4xKTsKICAgIH0KCiAgICAuZGl2aWRlci10ZXh0IHsKICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICBtYXJnaW46IDFyZW0gMDsKICAgICAgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOwogICAgICBmb250LXNpemU6IDAuNzVyZW07CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIH0KCiAgICAuZGl2aWRlci10ZXh0OjpiZWZvcmUsCiAgICAuZGl2aWRlci10ZXh0OjphZnRlciB7CiAgICAgIGNvbnRlbnQ6ICcnOwogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIHRvcDogNTAlOwogICAgICB3aWR0aDogNDAlOwogICAgICBoZWlnaHQ6IDFweDsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYm9yZGVyLWNvbG9yKTsKICAgIH0KCiAgICAuZGl2aWRlci10ZXh0OjpiZWZvcmUgewogICAgICBsZWZ0OiAwOwogICAgfQoKICAgIC5kaXZpZGVyLXRleHQ6OmFmdGVyIHsKICAgICAgcmlnaHQ6IDA7CiAgICB9CgogICAgLm1vZGFsLWZvb3RlciB7CiAgICAgIHBhZGRpbmc6IDFyZW07CiAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOwogICAgICB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4zcyBlYXNlOwogICAgfQoKICAgIC5idG4tYXBwbHkgewogICAgICBiYWNrZ3JvdW5kOiAjMjU2M2ViOwogICAgICBjb2xvcjogd2hpdGU7CiAgICAgIHBhZGRpbmc6IDAuNXJlbSAxcmVtOwogICAgfQoKICAgIC5idG4tYXBwbHk6aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiAjMWQ0ZWQ4OwogICAgfQoKICAgIC8qIFV0aWxpdGllcyAqLwogICAgLmZsZXgtY2VudGVyIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICB9CgogICAgOjotd2Via2l0LXNjcm9sbGJhciB7CiAgICAgIHdpZHRoOiA4cHg7CiAgICAgIGhlaWdodDogOHB4OwogICAgfQoKICAgIDo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1wcmltYXJ5KTsKICAgIH0KCiAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYm9yZGVyLWhvdmVyKTsKICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgfQoKICAgIDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsKICAgIH0KCiAgICAvKiBSZXNwb25zaXZpZGFkZSAtIFNpZGViYXIgY29tcGFjdG8gcXVhbmRvIHdpZHRoIDw9IDEyNTBweCAqLwogICAgQG1lZGlhIChtYXgtd2lkdGg6IDEyNTBweCkgewogICAgICAuc2lkZWJhciB7CiAgICAgICAgd2lkdGg6IDRyZW07CiAgICAgICAgcGFkZGluZzogMC41cmVtOwogICAgICAgIG92ZXJmbG93LXg6IGhpZGRlbjsKICAgICAgfQoKICAgICAgLnNpZGViYXIgaDIgewogICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgIH0KCiAgICAgIC5lbGVtZW50LWJ0biB7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgcGFkZGluZzogMC41cmVtOwogICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICBtaW4taGVpZ2h0OiBhdXRvOwogICAgICB9CgogICAgICAuZWxlbWVudC1idG4gc3BhbiB7CiAgICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgfQoKICAgICAgLmVsZW1lbnQtaWNvbiB7CiAgICAgICAgbWFyZ2luOiAwIGF1dG87CiAgICAgICAgd2lkdGg6IDEuNXJlbTsKICAgICAgICBoZWlnaHQ6IDEuNXJlbTsKICAgICAgICBmb250LXNpemU6IDAuODc1cmVtOwogICAgICAgIGZsZXgtc2hyaW5rOiAwOwogICAgICB9CgogICAgICAuZWxlbWVudC1pY29uIHN2ZywKICAgICAgLmVsZW1lbnQtaWNvbiBzdmcgKiB7CiAgICAgICAgd2lkdGg6IDEuMXJlbSAhaW1wb3J0YW50OwogICAgICAgIGhlaWdodDogMS4xcmVtICFpbXBvcnRhbnQ7CiAgICAgICAgbWF4LXdpZHRoOiAxLjFyZW0gIWltcG9ydGFudDsKICAgICAgICBtYXgtaGVpZ2h0OiAxLjFyZW0gIWltcG9ydGFudDsKICAgICAgfQoKICAgICAgLyogQWp1c3RhciBTVkdzIGVzcGVjw61maWNvcyBxdWUgcG9kZW0gdGVyIHRhbWFuaG9zIGlubGluZSAqLwogICAgICAuZWxlbWVudC1pY29uIHN2Z1t3aWR0aF0sCiAgICAgIC5lbGVtZW50LWljb24gc3ZnW2hlaWdodF0gewogICAgICAgIHdpZHRoOiAxLjFyZW0gIWltcG9ydGFudDsKICAgICAgICBoZWlnaHQ6IDEuMXJlbSAhaW1wb3J0YW50OwogICAgICB9CgogICAgICAuaW5mby1ib3ggewogICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgIH0KCiAgICAgIC8qIFRvb2x0aXAgcGFyYSBtb3N0cmFyIG5vbWUgZG8gZWxlbWVudG8gbm8gaG92ZXIgKi8KICAgICAgLmVsZW1lbnQtYnRuOjphZnRlciB7CiAgICAgICAgY29udGVudDogYXR0cihkYXRhLXRvb2x0aXApOwogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICBsZWZ0OiBjYWxjKDEwMCUgKyAwLjVyZW0pOwogICAgICAgIHRvcDogNTAlOwogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsKICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1zZWNvbmRhcnkpOwogICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOwogICAgICAgIHBhZGRpbmc6IDAuNXJlbSAwLjc1cmVtOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtOwogICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07CiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgICBvcGFjaXR5OiAwOwogICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4yczsKICAgICAgICB6LWluZGV4OiAxMDAwOwogICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDZweCB2YXIoLS1zaGFkb3cpOwogICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7CiAgICAgIH0KCiAgICAgIC5lbGVtZW50LWJ0bjpob3Zlcjo6YWZ0ZXIgewogICAgICAgIG9wYWNpdHk6IDE7CiAgICAgIH0KCiAgICAgIC8qIEFqdXN0YXIgY2FudmFzIGFyZWEgcGFyYSBjb21wZW5zYXIgc2lkZWJhciBtZW5vciAqLwogICAgICAuY2FudmFzLWFyZWEgewogICAgICAgIGZsZXg6IDE7CiAgICAgIH0KICAgIH0KICA8L3N0eWxlPgo8L2hlYWQ+Cgo8Ym9keT4KICA8ZGl2IGNsYXNzPSJjb250YWluZXIiPgogICAgPCEtLSBIZWFkZXIgLS0+CiAgICA8ZGl2IGNsYXNzPSJoZWFkZXIiPgogICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItdG9wIj4KICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItbGVmdCI+CiAgICAgICAgICA8ZGl2IHN0eWxlPSJ3aWR0aDogODBweDsgaGVpZ2h0OiA4MHB4OyBmbGV4LXNocmluazogMDsiPgogICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjI3NSAxNDAgNTIwIDg5NSIgd2lkdGg9IjgwIiBoZWlnaHQ9IjgwIiBzdHlsZT0iZGlzcGxheTogYmxvY2s7IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0Ij48cGF0aCBmaWxsPSIjRkFGQ0ZEIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTQyOS44NTYgMTc1LjM1MUM0MTguMDA3IDE3NS40MzIgNDA0LjQzIDE3NS40MTYgNDA0Ljk0NCAxNTkuMDdDNDA1LjQ4NCAxNDEuODkzIDQyMi4wOSAxNDMuODEgNDM0LjI5OSAxNDMuNzYyTDQ2Mi45OSAxNDMuNjUyTDUxNy42OCAxNDMuNjAzQzUyOC4zNjcgMTQzLjYxNCA1NDcuNzE5IDE0Mi4zNDIgNTU4LjA0NCAxNDUuOTA1QzU2Mi43OCAxNDcuNTM5IDU2Ny4wOTggMTU2LjYwNCA1NjYuMTYxIDE2MS4yMzhDNTY0LjU0NCAxNzYuNDEgNTUxLjkyOCAxNzUuNjEgNTQwLjg0NiAxNzUuNDY0TDU0MS4wNzEgMjg5Ljg3MUw1NDEuMDkgMjkwLjc5TDU0MS41OTkgMjk4LjY5OEM1NDkuNzgxIDMzNC4yNjkgNTcxLjY0MyAzMzQuNzM0IDU5Ny43NTkgMzUzLjg4QzYzNy40NDggMzgyLjk3NSA2NjUuMTkyIDQyNS41NTMgNjc1LjY1NCA0NzMuNzA0QzY4My42NTcgNTA5LjQwMSA2ODEuOTc0IDU1MS42OTQgNjY4LjQ3MyA1ODUuOTA4QzY2NC45MjMgNTk4LjAzIDY1NS41NzcgNjE1LjU1NiA2NDguNzI1IDYyNi4xNzRDNjIxLjEwOSA2NjguOTY4IDU3OC41NjUgNzAwLjY4NiA1MjguODI1IDcxMS45OTVDNDc4LjAxOCA3MjMuNjk1IDQyNC42NDEgNzE0LjQyMSAzODAuNzU3IDY4Ni4yN0MyOTYuNzg4IDYzMy4zODkgMjY4LjUxNCA1MjIuODM0IDMwOC41NzQgNDMzLjgxOUMzMTEuMjMxIDQyNy45MTYgMzE0LjMxNyA0MjEuNTUzIDMxNy43NjMgNDE2LjA4NkMzMTkuOTEyIDQxMS42NjIgMzI0LjUxOCA0MDUuMDIzIDMyNy40NzMgNDAwLjkxNEMzNDMuMjE3IDM3OS4wMjYgMzYyLjc5NCAzNTkuODQxIDM4NS44MjkgMzQ1LjcyMkMzOTUuNDkxIDMzOS4zODEgNDA2LjY2OCAzMzYuMDU2IDQxNC45NjggMzI3Ljc5OUM0MzEuMzczIDMxMS40NzggNDI5LjQxNyAyOTIuNjMxIDQyOS41NDIgMjcxLjczNUM0MjkuNzMgMjU3LjQxNCA0MjkuNzk0IDI0My4wOTIgNDI5LjczNSAyMjguNzdDNDI5LjY5NiAyMTEuMTg0IDQyOS4zMDQgMTkyLjg1MyA0MjkuODU2IDE3NS4zNTFaIi8+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkaWVudF8wIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjQ4OS43OTE3NSIgeTE9IjUwNi45OTUwMyIgeDI9IjU2Ni44NjE2OSIgeTI9IjI4MC40OTExNSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMjE3NTk3Ii8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMkVDQUMxIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZmlsbD0idXJsKCNncmFkaWVudF8wKSIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik00MjkuODU2IDE3NS4zNTFDNDE4LjAwNyAxNzUuNDMyIDQwNC40MyAxNzUuNDE2IDQwNC45NDQgMTU5LjA3QzQwNS40ODQgMTQxLjg5MyA0MjIuMDkgMTQzLjgxIDQzNC4yOTkgMTQzLjc2Mkw0NjIuOTkgMTQzLjY1Mkw1MTcuNjggMTQzLjYwM0M1MjguMzY3IDE0My42MTQgNTQ3LjcxOSAxNDIuMzQyIDU1OC4wNDQgMTQ1LjkwNUM1NjIuNzggMTQ3LjUzOSA1NjcuMDk4IDE1Ni42MDQgNTY2LjE2MSAxNjEuMjM4QzU2NC41NDQgMTc2LjQxIDU1MS45MjggMTc1LjYxIDU0MC44NDYgMTc1LjQ2NEw1NDEuMDcxIDI4OS44NzFMNTQxLjA5IDI5MC43OUw1NDEuNTk5IDI5OC42OThDNTQ5Ljc4MSAzMzQuMjY5IDU3MS42NDMgMzM0LjczNCA1OTcuNzU5IDM1My44OEM2MzcuNDQ4IDM4Mi45NzUgNjY1LjE5MiA0MjUuNTUzIDY3NS42NTQgNDczLjcwNEM2ODMuNjU3IDUwOS40MDEgNjgxLjk3NCA1NTEuNjk0IDY2OC40NzMgNTg1LjkwOEM2NjcuNjc4IDU4Mi4zNTUgNjczLjQ3NSA1NjcuMDU5IDY3NC41MTcgNTYyLjQ2OEM2NzQuNjEyIDU2Mi4zMDEgNjc0LjcwNiA1NjIuMTM0IDY3NC44IDU2MS45NjdDNjc0LjQxOSA1NTkuNzMzIDY3NS43MDQgNTU4LjU4IDY3NS4zMzEgNTU1LjcyOUM2NjguODg2IDU0OS43NzUgNjUwLjYzMSA1NjQuMzYyIDY0MC45MTEgNTU4LjUyNEw2NDAuNTI5IDU1OC4zODlDNjQxLjM5MyA1NjUuMTMyIDYzOC4zMTggNTc0LjgwNyA2MzYuMjE2IDU4MS4xMTlMNjM1Ljg3NiA1ODAuODU0QzYzNS44MDggNTc4LjUzOSA2MzcuNzY0IDU3My41OTkgNjM4Ljc4MSA1NzEuNDAxQzYzNi43NzkgNTY5LjU1OSA2MjQuNTYxIDU3MC40OTcgNjIxLjAyNSA1NzAuNTc2QzYyMC45NzYgNTczLjUzOSA2MjEuMDg3IDU3OS45MjYgNjIwLjMwMyA1ODIuNDQ0QzYyMC4xOTMgNTg1Ljk4NiA2MjAuMTc0IDU4OS41MyA2MjAuMjQ3IDU5My4wNzNDNjEzLjUwMiA1OTMuNDQxIDU5NS4xNzMgNTkzLjgxMiA1ODguNzI4IDU5My4xMjNMNTg4LjcwOSA1OTAuODA4QzU4OC43NjYgNTgzLjY2OSA1ODguNzQxIDU3Ni41MjkgNTg4LjYzNCA1NjkuMzlDNTg4LjMwMiA1NjYuNjQ1IDU4OC41MzkgNTY0LjA5OCA1ODguNjk4IDU2MS4zNDlMNTg4LjcyNiA1NDUuODgyTDU4OC42MjYgNTQyLjk1N0w1ODguNzA0IDUzNi4zNkM1ODcuODgzIDUyOC4zOSA1ODguNDA1IDUxMy4wNSA1ODguNDk0IDUwNC42MjVMNTg4LjQ3OCA0ODkuNTAxTDU4OC4zNjUgNDQ4Ljg2NkM1ODguMjkzIDQ0MC4zNjYgNTg3LjkxMSA0MjguMTg1IDU4OC41ODMgNDE5LjkzQzU3Ny45OTQgNDA4LjM5OCA1NjYuMjM0IDM5Ny40NzcgNTU1LjI0OCAzODYuMjkxQzU1MS43NzQgMzgyLjc1MyA1NDcuOTcgMzc5LjExNSA1NDQuMjU5IDM3NS44NDlDNTI5LjQ2OCAzNzUuMDM2IDUwNi4zOTIgMzc1Ljg0IDQ5MC45MjIgMzc1Ljg1MkM0NTIuODY0IDM3Ni4wNSA0MTQuODA1IDM3NS44OTcgMzc2Ljc0OSAzNzUuMzkyQzM3Ni42NiAzODYuNDg0IDM3Ni42NDcgMzk3LjU3NyAzNzYuNzEgNDA4LjY2OUMzNzUuOTg2IDQwNS40NTQgMzc2LjY0NiA0MDEuNDU1IDM3NS45NzEgMzk5LjA3N0wzNzUuNTY2IDQwMC45MjhMMzc0LjkwOSA0MDEuMTA1QzM3My43NjIgNDAwLjEyMiAzNzMuODkzIDQwMC4wNTUgMzczLjQ1NiAzOTguNTY0QzM2OS4wODcgMzk5LjAwNCAzNTkuMjE1IDQxMC43ODYgMzU2Ljc1MiA0MTMuODM4QzM1My4zMSA0MTguMTAzIDMzOC44NDYgNDQyLjAyMSAzMzcuNzA0IDQ0Ni41NDFMMzM3LjExNSA0NDYuNjc0QzMzNy4zMDEgNDQzLjU0NCAzMzkuNDg4IDQ0My4wMTQgMzM5LjMzMyA0NDAuNjVDMzM4LjI1MSA0NDAuMTMyIDMzMi43MTEgNDM3LjU1NCAzMzIuMTYxIDQzNi45OTZDMzI2LjE3OCA0MzAuOTQyIDMxNy40MDMgNDI1LjUyOCAzMTcuNzYzIDQxNi4wODZDMzE5LjkxMiA0MTEuNjYyIDMyNC41MTggNDA1LjAyMyAzMjcuNDczIDQwMC45MTRDMzQzLjIxNyAzNzkuMDI2IDM2Mi43OTQgMzU5Ljg0MSAzODUuODI5IDM0NS43MjJDMzk1LjQ5MSAzMzkuMzgxIDQwNi42NjggMzM2LjA1NiA0MTQuOTY4IDMyNy43OTlDNDMxLjM3MyAzMTEuNDc4IDQyOS40MTcgMjkyLjYzMSA0MjkuNTQyIDI3MS43MzVDNDI5LjczIDI1Ny40MTQgNDI5Ljc5NCAyNDMuMDkyIDQyOS43MzUgMjI4Ljc3QzQyOS42OTYgMjExLjE4NCA0MjkuMzA0IDE5Mi44NTMgNDI5Ljg1NiAxNzUuMzUxWiIvPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnRfMSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI0NTguNzUxMzEiIHkxPSIyNzIuNzkzNjciIHgyPSI0OTkuMjIxOCIgeTI9IjEyOS43NTM3NyI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMkNDM0JGIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMzBGMUQ2Ii8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZmlsbD0idXJsKCNncmFkaWVudF8xKSIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik00MjkuODU2IDE3NS4zNTFDNDE4LjAwNyAxNzUuNDMyIDQwNC40MyAxNzUuNDE2IDQwNC45NDQgMTU5LjA3QzQwNS40ODQgMTQxLjg5MyA0MjIuMDkgMTQzLjgxIDQzNC4yOTkgMTQzLjc2Mkw0NjIuOTkgMTQzLjY1Mkw1MTcuNjggMTQzLjYwM0M1MjguMzY3IDE0My42MTQgNTQ3LjcxOSAxNDIuMzQyIDU1OC4wNDQgMTQ1LjkwNUM1NjIuNzggMTQ3LjUzOSA1NjcuMDk4IDE1Ni42MDQgNTY2LjE2MSAxNjEuMjM4QzU2NC41NDQgMTc2LjQxIDU1MS45MjggMTc1LjYxIDU0MC44NDYgMTc1LjQ2NEw1NDEuMDcxIDI4OS44NzFMNTQwLjgwMyAyOTAuNTVDNTM5LjQ2NCAyOTEuMzMyIDUzNy41NTcgMjkzLjU1MSA1MzYuMzc0IDI5NC43NTNMNTM1LjU3MyAyOTQuNjY2QzUzMy4yNjEgMjg1LjQ3MSA1MjUuMTMyIDI5My44MDEgNTE5Ljg1NSAyODUuODY2QzUxOS44MDcgMjg1Ljc5MyA1MDQuNTY3IDI4NC40MzkgNTA0LjA0OSAyNzguMDQzQzUwMy4yNzcgMjc4LjY2NCA1MDMuNjI1IDI3OC4zNDUgNTAzLjM0MyAyNzkuNzA1QzUwMi4xNjMgMjgwLjA1MyA0OTcuMTI2IDI3Ny4xMzQgNDk1LjU5OSAyNzYuNDU0QzQ4Ni43NDggMjcyLjUwOCA0NzcuMzkyIDI3Mi4zMTYgNDY4Ljk1OSAyNjcuMDk4QzQ2My41ODMgMjYzLjc3MSA0NjAuNTM0IDI1OC40NjIgNDU1LjU0IDI1NS4yMTFDNDQ4LjQyMSAyNTAuNTc3IDQzOS4zNSAyNDguNDg3IDQzMy43NzkgMjQxLjQ2NEM0MzAuMTQ1IDIzNy4wOTIgNDMyLjAyNSAyMzIuNTIzIDQyOS43MzUgMjI4Ljc3QzQyOS42OTYgMjExLjE4NCA0MjkuMzA0IDE5Mi44NTMgNDI5Ljg1NiAxNzUuMzUxWiIvPjxwYXRoIGZpbGw9IiM0OUMzRDIiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNNTg4LjU4MyA0MTkuOTNDNTg5LjEwNiA0MjguMTMyIDU4OC42ODQgNDM5LjE4MiA1ODguNzQxIDQ0Ny42MzFDNTk4LjY5MSA0NDcuNTkxIDYxMC4yOTQgNDQ3LjI4OCA2MjAuMTI4IDQ0Ny41NTlDNjIwLjE2IDQ1NS42NjQgNjIwLjE1IDQ2My43NjkgNjIwLjEgNDcxLjg3NEM2MjUuNzM4IDQ3MS44NDEgNjM2LjYzNCA0NzEuMDI5IDY0MS4xNjggNDcyLjcwOUM2NDIuNDI4IDQ3NC4wNDYgNjQyLjAyOCA0NzMuNzMyIDY0Mi4zMDEgNDc1Ljk4OEM2NDIuMzUzIDQ3OC42NjYgNjQyLjI3MiA0OTQuMDggNjQzLjA0NiA0OTUuMzQ1TDY0My45NTYgNDk1LjU1N0M2NDQuODk5IDQ5NS43OCA2NDUuMTY0IDQ5NS44NDggNjQ2LjA2MyA0OTYuMjcyQzY0Ni4xNjIgNDk3LjU2NyA2NDYuMzQ3IDQ5Ny4wMiA2NDUuODMxIDQ5OC4wNDlDNjQ1LjEwNSA0OTguMjQ3IDY0My4wNTIgNDk4LjYzMyA2NDIuOTUzIDQ5OS4wNzJDNjQyLjAzOCA1MDMuMTM0IDY0Mi4yMzUgNTE1LjQ3MyA2NDIuNDA1IDUxOS40ODVDNjQ1LjAwOCA1MTkuNzYzIDY0NC43NTggNTE5LjMyMiA2NDYuNDMzIDUyMC43MDdDNjQ1Ljc0OSA1MjIuNjA1IDY0NC4zMTUgNTIyLjMzOCA2NDIuNDcxIDUyMi40MjlDNjQyLjQyMyA1MjUuODA3IDY0MS43OSA1NDAuOTQ0IDY0My4wNTkgNTQyLjc1NEw2NDQuMDQzIDU0Mi45ODVDNjQ1LjQ4MyA1NDMuNzQgNjQ1LjU5NiA1NDMuNDggNjQ2LjE2MSA1NDQuNjYyQzY0NC4yNzcgNTQ2LjQ0NiA2NDIuNTk0IDU0NS41MzMgNjQyLjM2OSA1NDguMTg5QzY0Mi4xMjIgNTUxLjA5NyA2NDMuMjQ2IDU1Ni4zMzMgNjQwLjkxMSA1NTguNTI0TDY0MC41MjkgNTU4LjM4OUM2NDEuMzkzIDU2NS4xMzIgNjM4LjMxOCA1NzQuODA3IDYzNi4yMTYgNTgxLjExOUw2MzUuODc2IDU4MC44NTRDNjM1LjgwOCA1NzguNTM5IDYzNy43NjQgNTczLjU5OSA2MzguNzgxIDU3MS40MDFDNjM2Ljc3OSA1NjkuNTU5IDYyNC41NjEgNTcwLjQ5NyA2MjEuMDI1IDU3MC41NzZDNjIwLjk3NiA1NzMuNTM5IDYyMS4wODcgNTc5LjkyNiA2MjAuMzAzIDU4Mi40NDRDNjIwLjE5MyA1ODUuOTg2IDYyMC4xNzQgNTg5LjUzIDYyMC4yNDcgNTkzLjA3M0M2MTMuNTAyIDU5My40NDEgNTk1LjE3MyA1OTMuODEyIDU4OC43MjggNTkzLjEyM0w1ODguNzA5IDU5MC44MDhDNTg4Ljc2NiA1ODMuNjY5IDU4OC43NDEgNTc2LjUyOSA1ODguNjM0IDU2OS4zOUM1ODguMzAyIDU2Ni42NDUgNTg4LjUzOSA1NjQuMDk4IDU4OC42OTggNTYxLjM0OUw1ODguNzI2IDU0NS44ODJMNTg4LjYyNiA1NDIuOTU3TDU4OC43MDQgNTM2LjM2QzU4Ny44ODMgNTI4LjM5IDU4OC40MDUgNTEzLjA1IDU4OC40OTQgNTA0LjYyNUw1ODguNDc4IDQ4OS41MDFMNTg4LjM2NSA0NDguODY2QzU4OC4yOTMgNDQwLjM2NiA1ODcuOTExIDQyOC4xODUgNTg4LjU4MyA0MTkuOTNaIi8+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkaWVudF8yIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjYyOC4wMTMiIHkxPSI0ODUuNjI0NjMiIHgyPSI1OTEuMTA1ODMiIHkyPSI0NDYuODcwNDIiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzQxQkNDOSIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzVFRERFMCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxwYXRoIGZpbGw9InVybCgjZ3JhZGllbnRfMikiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNNTg4LjU4MyA0MTkuOTNDNTg5LjEwNiA0MjguMTMyIDU4OC42ODQgNDM5LjE4MiA1ODguNzQxIDQ0Ny42MzFDNTk4LjY5MSA0NDcuNTkxIDYxMC4yOTQgNDQ3LjI4OCA2MjAuMTI4IDQ0Ny41NTlDNjIwLjE2IDQ1NS42NjQgNjIwLjE1IDQ2My43NjkgNjIwLjEgNDcxLjg3NEM2MjUuNzM4IDQ3MS44NDEgNjM2LjYzNCA0NzEuMDI5IDY0MS4xNjggNDcyLjcwOUM2NDIuNDI4IDQ3NC4wNDYgNjQyLjAyOCA0NzMuNzMyIDY0Mi4zMDEgNDc1Ljk4OEw2MzkuODI0IDQ3NC40MDFDNjM0LjMxNCA0NzQuOTM4IDYyNS45ODkgNDc0Ljc1OCA2MjAuMjIzIDQ3NC43NzdDNjIwLjIxMSA0ODEuMzg3IDYyMC4zMzQgNDg4LjQ4MSA2MjAuMTcxIDQ5NS4wNDhDNjE4Ljk5OCA0OTQuNjY4IDYxOC44MTkgNDk0Ljg1OSA2MTcuNDU4IDQ5NC45OTVDNjE3LjEzOCA0ODguNTQyIDYxNy4yODMgNDgwLjk2NiA2MTcuMjY1IDQ3NC40MjFDNjEyLjI5MSA0NzMuODU4IDYwMi43NDQgNDc0LjE1NyA1OTcuNDM3IDQ3NC4yMjFDNTk3LjUxMyA0NzguOTg0IDU5Ny42OTMgNDgzLjgxNiA1OTcuMjk0IDQ4OC41NTdDNTk3LjExNyA0ODQuMTMgNTk3LjAyNiA0NzkuNyA1OTcuMDIgNDc1LjI3TDU5Ni4yNTcgNDc1LjQ1M0M1OTUuNzk1IDQ3OS4zNDggNTk1LjkwOSA0ODUuNzY2IDU5NS44NjIgNDg5Ljg2N0M1OTUuODA0IDQ4Ni45NCA1OTUuODYzIDQ3Ni45MjEgNTk1LjM1OCA0NzQuNzM5QzU5Mi44MzQgNDc0LjQ2OCA1OTEuMzI4IDQ3NC41MTcgNTg4LjgzNiA0NzQuNTg1QzU4OC44NCA0NzkuNCA1ODguOTM2IDQ4NC42MDYgNTg4LjgzNyA0ODkuMzlMNTg4LjQ3OCA0ODkuNTAxTDU4OC4zNjUgNDQ4Ljg2NkM1ODguMjkzIDQ0MC4zNjYgNTg3LjkxMSA0MjguMTg1IDU4OC41ODMgNDE5LjkzWiIvPjxwYXRoIGZpbGw9IiMyNDg3QTEiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNNTg4Ljc5OSA0NTAuMDNDNTk4LjMwNyA0NTAuMTMgNjA3LjgxNiA0NTAuMTgyIDYxNy4zMjQgNDUwLjE4Nkw2MTcuMzE4IDQ3MS43MzJMNTk3Ljk1NCA0NzEuNzY5QzU5OC4wMTggNDY4LjQ2NyA1OTguMzY4IDQ1NC45MzkgNTk3LjE4IDQ1Mi44MzlMNTk2LjI2OSA0NTIuNzUyQzU5My44NjkgNDU2LjAwMiA1OTYuODQgNDY5LjM1NyA1OTQuNzE2IDQ3MS43MjFDNTkyLjYzMyA0NzEuODgxIDU5MS42MTQgNDcyLjExNiA1ODkuNjQzIDQ3MS41N0M1ODguMDI4IDQ2OS4zMTEgNTg4LjgxMyA0NTMuOSA1ODguNzk5IDQ1MC4wM1oiLz48cGF0aCBmaWxsPSIjMjU3MTlDIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTU4OC42MzQgNTY5LjM5TDU5NC45ODUgNTY5LjMxOUM1OTQuOTg2IDU3My4xMzcgNTk0LjU2NyA1ODEuMyA1OTYuMzM5IDU4NC4zNTlMNTk2Ljk4IDU4NC4wMjJDNTk4LjM3NCA1NzkuMzg4IDU5OC4wNjYgNTc0LjQ5NiA1OTguMDQ1IDU2OS42NTJDNjA0LjM1NiA1NjkuNjQxIDYxMC45ODUgNTY5LjUyOSA2MTcuMjY4IDU2OS42NThMNjE3LjM1MiA1OTAuNDg4QzYwNy41NjYgNTkwLjg1OCA1OTguMjg4IDU5MC41NDcgNTg4LjcwOSA1OTAuODA4QzU4OC43NjYgNTgzLjY2OSA1ODguNzQxIDU3Ni41MjkgNTg4LjYzNCA1NjkuMzlaIi8+PHBhdGggZmlsbD0iIzI1NzE5QyIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik01OTguMDIgNDk4LjQ3MUw2MTcuNDE2IDQ5OC40NDhDNjE3LjM2NyA1MDIuMzYyIDYxNy4zNDIgNTA2LjI3NiA2MTcuMzQyIDUxMC4xOUM2MTcuOTA5IDUxMy44NzkgNjE3LjU2MiA1MTkuNDAxIDYxOC4xNzggNTIxLjk5N0w2MTcuNjYzIDUyMi4zNTVDNjExLjEyNCA1MjIuMzk2IDYwNC41ODUgNTIyLjM1NSA1OTguMDQ3IDUyMi4yMzJMNTk1LjExOCA1MjIuMDAzQzU5Mi45NTQgNTIyLjAzMiA1OTEuMiA1MjEuNzM5IDU4OS41ODEgNTIyLjk4OEM1ODcuNjk2IDUyNi4wMyA1ODkuMDAxIDUzMS40MjggNTg4LjcwNCA1MzYuMzZDNTg3Ljg4MyA1MjguMzkgNTg4LjQwNSA1MTMuMDUgNTg4LjQ5NCA1MDQuNjI1TDU4OC44NDggNTA0LjczNEM1ODguOTI2IDUwOS4wMjkgNTg3LjczNyA1MTYuMjc5IDU4OS42NjggNTE4LjY5NUM1OTEuMjg2IDUxOS43MDkgNTkzLjM3MSA1MTkuMzQ0IDU5NS4zNjMgNTE5LjI3Mkw1OTcuOTkgNTE5LjQxN0M1OTguMTk2IDUxMi43NTggNTk4LjAyMSA1MDUuMjAxIDU5OC4wMiA0OTguNDcxWiIvPjxwYXRoIGZpbGw9IiM0OUMzRDIiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNNTg4LjQ5NCA1MDQuNjI1TDU4OC44NDggNTA0LjczNEM1ODguOTI2IDUwOS4wMjkgNTg3LjczNyA1MTYuMjc5IDU4OS42NjggNTE4LjY5NUM1OTEuMjg2IDUxOS43MDkgNTkzLjM3MSA1MTkuMzQ0IDU5NS4zNjMgNTE5LjI3Mkw1OTcuOTkgNTE5LjQxN0M2MDEuMjc4IDUxOC45NTIgNjEzLjI4NSA1MTkuMTEyIDYxNy4yMjUgNTE5LjA4NEw2MTcuMzQyIDUxMC4xOUM2MTcuOTA5IDUxMy44NzkgNjE3LjU2MiA1MTkuNDAxIDYxOC4xNzggNTIxLjk5N0w2MTcuNjYzIDUyMi4zNTVDNjExLjEyNCA1MjIuMzk2IDYwNC41ODUgNTIyLjM1NSA1OTguMDQ3IDUyMi4yMzJMNTk1LjExOCA1MjIuMDAzQzU5Mi45NTQgNTIyLjAzMiA1OTEuMiA1MjEuNzM5IDU4OS41ODEgNTIyLjk4OEM1ODcuNjk2IDUyNi4wMyA1ODkuMDAxIDUzMS40MjggNTg4LjcwNCA1MzYuMzZDNTg3Ljg4MyA1MjguMzkgNTg4LjQwNSA1MTMuMDUgNTg4LjQ5NCA1MDQuNjI1WiIvPjxwYXRoIGZpbGw9IiMyNTcxOUMiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNNjIwLjIwMSA1NDYuMTA1TDYzOS44MTcgNTQ2LjA5OEM2MzkuODE0IDU1MC4wMzggNjM5LjYzOCA1NTQuNjI2IDY0MC41MjkgNTU4LjM4OUM2NDEuMzkzIDU2NS4xMzIgNjM4LjMxOCA1NzQuODA3IDYzNi4yMTYgNTgxLjExOUw2MzUuODc2IDU4MC44NTRDNjM1LjgwOCA1NzguNTM5IDYzNy43NjQgNTczLjU5OSA2MzguNzgxIDU3MS40MDFDNjM2Ljc3OSA1NjkuNTU5IDYyNC41NjEgNTcwLjQ5NyA2MjEuMDI1IDU3MC41NzZDNjIwLjk3NiA1NzMuNTM5IDYyMS4wODcgNTc5LjkyNiA2MjAuMzAzIDU4Mi40NDRMNjIwLjA4NSA1NjkuNjI2QzYyNC43MjcgNTY5LjU5MSA2MzIuNzM2IDU2OS44MTkgNjM2Ljg5NCA1NjguNDYzTDYzNy4xNDkgNTY3LjgzNUM2MzMuNTQxIDU2Ni4yMiA2MjQuNDI1IDU2Ni43MTcgNjIwLjE1NCA1NjYuNzYxQzYyMC4xMjMgNTU5Ljg3NSA2MjAuMTM5IDU1Mi45OSA2MjAuMjAxIDU0Ni4xMDVaIi8+PHBhdGggZmlsbD0iIzI1NzE5QyIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik02MjAuMjIzIDQ3NC43NzdDNjI1Ljk4OSA0NzQuNzU4IDYzNC4zMTQgNDc0LjkzOCA2MzkuODI0IDQ3NC40MDFMNjM5LjY5MSA0OTUuNDIzQzYzNi43NDEgNDk1LjQ0OCA2MjIuMzMxIDQ5NS43NzcgNjIwLjE3MSA0OTUuMDQ4QzYyMC4zMzQgNDg4LjQ4MSA2MjAuMjExIDQ4MS4zODcgNjIwLjIyMyA0NzQuNzc3WiIvPjxwYXRoIGZpbGw9IiMyNTcxOUMiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNNTk4LjA0NyA1MjIuMjMyQzYwNC41ODUgNTIyLjM1NSA2MTEuMTI0IDUyMi4zOTYgNjE3LjY2MyA1MjIuMzU1QzYxNi44NjkgNTI1LjgwMiA2MTcuMjUzIDUzOC45NDEgNjE3LjI5NyA1NDIuOTU5QzYxMC45NzkgNTQzLjA3MSA2MDQuMzUyIDU0Mi45NiA1OTguMDA5IDU0Mi45NDhMNTk4LjA0NyA1MjIuMjMyWiIvPjxwYXRoIGZpbGw9IiMyNTcxOUMiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNNTk4LjExNiA0NzQuNzg5QzYwMy44NTMgNDc0Ljc3IDYxMS43MzEgNDc0LjkzMSA2MTcuMjY1IDQ3NC40MjFDNjE3LjI4MyA0ODAuOTY2IDYxNy4xMzggNDg4LjU0MiA2MTcuNDU4IDQ5NC45OTVDNjE0LjQ0NCA0OTUuNzg3IDYwMS43NzYgNDk1LjIzOCA1OTguMDUzIDQ5NS4xMjFDNTk4LjE4MSA0ODguNDE5IDU5OC4xMDYgNDgxLjUwOCA1OTguMTE2IDQ3NC43ODlaIi8+PHBhdGggZmlsbD0iIzI1NzE5QyIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik01ODguNzI2IDU0NS44ODJDNTkwLjc4MyA1NDUuOTA3IDU5Mi45NjYgNTQ1Ljk4MSA1OTUuMDA5IDU0NS44NjJDNTk1LjE5MSA1NTIuOTA3IDU5NS4yMTEgNTU5Ljk1NyA1OTUuMDY4IDU2Ny4wMDNDNTkzLjE0OSA1NjcuMTA1IDU5MC45MTMgNTY3LjUxOSA1ODkuMzc1IDU2Ni41NTRDNTg4LjUzMyA1NjUuMDg3IDU4OC43MjIgNTYzLjExNSA1ODguNjk4IDU2MS4zNDlMNTg4LjcyNiA1NDUuODgyWiIvPjxwYXRoIGZpbGw9IiMyNTcxOUMiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNNTg4Ljg0OCA1MDQuNzM0QzU4OC44MTQgNTAyLjcyMSA1ODguNDU3IDUwMC40NzQgNTg5LjU3OCA0OTguOTM3QzU5MS4xOTQgNDk4LjA0MyA1OTMuMjI4IDQ5OC4yMjUgNTk1LjEzMyA0OTguMTgxQzU5NS4xODggNTA1LjAzIDU5NS4xMTggNTEyLjQ2MyA1OTUuMzYzIDUxOS4yNzJDNTkzLjM3MSA1MTkuMzQ0IDU5MS4yODYgNTE5LjcwOSA1ODkuNjY4IDUxOC42OTVDNTg3LjczNyA1MTYuMjc5IDU4OC45MjYgNTA5LjAyOSA1ODguODQ4IDUwNC43MzRaIi8+PHBhdGggZmlsbD0iIzI1NzE5QyIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik01ODguNzA0IDUzNi4zNkM1ODkuMDAxIDUzMS40MjggNTg3LjY5NiA1MjYuMDMgNTg5LjU4MSA1MjIuOTg4QzU5MS4yIDUyMS43MzkgNTkyLjk1NCA1MjIuMDMyIDU5NS4xMTggNTIyLjAwM0M1OTUuMTY5IDUyOC44MDQgNTk1LjM2MyA1MzYuMjUgNTk1LjA0MyA1NDIuOTg0TDU4OC42MjYgNTQyLjk1N0w1ODguNzA0IDUzNi4zNloiLz48cGF0aCBmaWxsPSIjMjU3MTlDIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTU4OC44MzYgNDc0LjU4NUM1OTEuMzI4IDQ3NC41MTcgNTkyLjgzNCA0NzQuNDY4IDU5NS4zNTggNDc0LjczOUM1OTQuOTA1IDQ4MC42OCA1OTUuMTcgNDg5LjA1NiA1OTUuMjU4IDQ5NS4xNzJDNTkzLjI1MiA0OTUuMjg5IDU5MS4yMTggNDk1LjY5MSA1ODkuNTQ0IDQ5NC43MjNDNTg4LjQ5MyA0OTMuMTY3IDU4OC43OTYgNDkxLjMzMyA1ODguODM3IDQ4OS4zOUM1ODguOTM2IDQ4NC42MDYgNTg4Ljg0IDQ3OS40IDU4OC44MzYgNDc0LjU4NVoiLz48cGF0aCBmaWxsPSIjMjU3MTlDIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTYyMC4xOTMgNDk4LjQ2NUw2MzkuNzEgNDk4LjU5N0M2MzkuODk0IDUwNS40MDQgNjM5LjgyMSA1MTIuNDUgNjM5LjgzIDUxOS4yNzlMNjIwLjI1NCA1MTkuMTQxTDYyMC4xOTMgNDk4LjQ2NVoiLz48cGF0aCBmaWxsPSIjMjU3MTlDIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTYyMC4yOTYgNTIyLjQyOUM2MjYuODIyIDUyMi4zMjcgNjMzLjM0OSA1MjIuMjcxIDYzOS44NzUgNTIyLjI2M0M2MzkuOTI3IDUyOS4wOTggNjM5LjgwNiA1MzYuMDc0IDYzOS43NTQgNTQyLjkyMkw2MjAuMjMgNTQyLjkxM0w2MjAuMjk2IDUyMi40MjlaIi8+PHBhdGggZmlsbD0iIzI1NzE5QyIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik01OTguMDkgNTQ2LjA3NUw2MTcuMjgyIDU0Ni4wNDdMNjE3LjMzMiA1NjYuNzQ3QzYxMS40NyA1NjcuMDI2IDYwNC4wMzggNTY2LjgwMyA1OTguMDYyIDU2Ni43NzZMNTk4LjA5IDU0Ni4wNzVaIi8+PHBhdGggZmlsbD0iIzI1NzE5QyIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik02NDIuNDcxIDUyMi40MjlDNjQ0LjMzIDUyMi42MyA2NDUuMzQ5IDUyMi4zNjEgNjQ2LjM3NSA1MjMuMzgyQzY0Ni43NDkgNTI2Ljg5OSA2NDYuNTkxIDUzOS4zODcgNjQ1LjE4NSA1NDIuMzE3TDY0NC4wNDMgNTQyLjk4NUw2NDMuMDU5IDU0Mi43NTRDNjQxLjc5IDU0MC45NDQgNjQyLjQyMyA1MjUuODA3IDY0Mi40NzEgNTIyLjQyOVoiLz48cGF0aCBmaWxsPSIjMjU3MTlDIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTY0Mi40MDUgNTE5LjQ4NUM2NDIuMjM1IDUxNS40NzMgNjQyLjAzOCA1MDMuMTM0IDY0Mi45NTMgNDk5LjA3MkM2NDMuMDUyIDQ5OC42MzMgNjQ1LjEwNSA0OTguMjQ3IDY0NS44MzEgNDk4LjA0OUM2NDUuOTI3IDUwMS44MzggNjQ2Ljk0OSA1MTYuNjM3IDY0NS43NjEgNTE4Ljg0N0M2NDQuNjM1IDUxOS4wODIgNjQzLjU0NSA1MTkuMzI4IDY0Mi40MDUgNTE5LjQ4NVoiLz48cGF0aCBmaWxsPSIjNTdFMEUzIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTU0MS41OTkgMjk4LjY5OEM1NDEuMzkyIDI5OS4zMDYgNTQxLjU1NSAyOTguOTMzIDU0MC45NzEgMjk5Ljc0NEM1MzguOTI5IDI5Ny4yNiA1MzkuMTIzIDI5My4xOTEgNTQxLjA5IDI5MC43OUw1NDEuNTk5IDI5OC42OThaIi8+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkaWVudF8zIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjQxMy44MjY2IiB5MT0iNzAyLjA4OTIzIiB4Mj0iNTEwLjIxMTg1IiB5Mj0iNDUyLjc0MzIzIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMxODI3NkYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMyMzgzOUYiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBmaWxsPSJ1cmwoI2dyYWRpZW50XzMpIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTMxNy43NjMgNDE2LjA4NkMzMTcuNDAzIDQyNS41MjggMzI2LjE3OCA0MzAuOTQyIDMzMi4xNjEgNDM2Ljk5NkMzMzIuNzExIDQzNy41NTQgMzM4LjI1MSA0NDAuMTMyIDMzOS4zMzMgNDQwLjY1QzMzOS40ODggNDQzLjAxNCAzMzcuMzAxIDQ0My41NDQgMzM3LjExNSA0NDYuNjc0TDMzNy43MDQgNDQ2LjU0MUMzMzguODQ2IDQ0Mi4wMjEgMzUzLjMxIDQxOC4xMDMgMzU2Ljc1MiA0MTMuODM4QzM1OS4yMTUgNDEwLjc4NiAzNjkuMDg3IDM5OS4wMDQgMzczLjQ1NiAzOTguNTY0QzM3My44OTMgNDAwLjA1NSAzNzMuNzYyIDQwMC4xMjIgMzc0LjkwOSA0MDEuMTA1TDM3NS41NjYgNDAwLjkyOEwzNzUuOTcxIDM5OS4wNzdDMzc2LjY0NiA0MDEuNDU1IDM3NS45ODYgNDA1LjQ1NCAzNzYuNzEgNDA4LjY2OUwzNzYuNzkyIDQ2My44MDFDMzc2Ljc5NyA0NzIuOTkxIDM3Ny4xODcgNDg1LjgyNiAzNzYuNzMzIDQ5NC43OTFDMzc3LjYxOSA1MjEuOTQ1IDM3Ni4zMzUgNTQ5LjY0NiAzNzYuODgyIDU3Ni44NDdDMzc2Ljk3NyA1ODEuNTg3IDM3Ni45OTQgNTg2Ljc1OCAzNzYuODAyIDU5MS40OTJMMzc2LjkyMiA1OTMuNTA0TDM3Ni44ODkgNTk2LjI3OEMzNzYuNzczIDYxMS4yMzggMzc2LjgxNCA2MjYuMTk4IDM3Ny4wMTQgNjQxLjE1N0MzODMuMzM4IDY0MS40MDcgMzg5Ljg4MSA2NDEuMjQ1IDM5Ni4yMjYgNjQxLjI5NkM0NjAuMzA3IDY0MS44MTMgNTI0LjU4OSA2NDAuNjQgNTg4LjY0NiA2NDEuMzE5QzU4OS4xNzcgNjI1LjQzOSA1ODguMjM5IDYwOS4xMjUgNTg4LjcyOCA1OTMuMTIzQzU5NS4xNzMgNTkzLjgxMiA2MTMuNTAyIDU5My40NDEgNjIwLjI0NyA1OTMuMDczQzYyMC4xNzQgNTg5LjUzIDYyMC4xOTMgNTg1Ljk4NiA2MjAuMzAzIDU4Mi40NDRDNjIxLjA4NyA1NzkuOTI2IDYyMC45NzYgNTczLjUzOSA2MjEuMDI1IDU3MC41NzZDNjI0LjU2MSA1NzAuNDk3IDYzNi43NzkgNTY5LjU1OSA2MzguNzgxIDU3MS40MDFDNjM3Ljc2NCA1NzMuNTk5IDYzNS44MDggNTc4LjUzOSA2MzUuODc2IDU4MC44NTRMNjM2LjIxNiA1ODEuMTE5QzYzOC4zMTggNTc0LjgwNyA2NDEuMzkzIDU2NS4xMzIgNjQwLjUyOSA1NTguMzg5TDY0MC45MTEgNTU4LjUyNEM2NTAuNjMxIDU2NC4zNjIgNjY4Ljg4NiA1NDkuNzc1IDY3NS4zMzEgNTU1LjcyOUM2NzUuNzA0IDU1OC41OCA2NzQuNDE5IDU1OS43MzMgNjc0LjggNTYxLjk2N0M2NzQuNzA2IDU2Mi4xMzQgNjc0LjYxMiA1NjIuMzAxIDY3NC41MTcgNTYyLjQ2OEM2NzMuNDc1IDU2Ny4wNTkgNjY3LjY3OCA1ODIuMzU1IDY2OC40NzMgNTg1LjkwOEM2NjQuOTIzIDU5OC4wMyA2NTUuNTc3IDYxNS41NTYgNjQ4LjcyNSA2MjYuMTc0QzYyMS4xMDkgNjY4Ljk2OCA1NzguNTY1IDcwMC42ODYgNTI4LjgyNSA3MTEuOTk1QzQ3OC4wMTggNzIzLjY5NSA0MjQuNjQxIDcxNC40MjEgMzgwLjc1NyA2ODYuMjdDMjk2Ljc4OCA2MzMuMzg5IDI2OC41MTQgNTIyLjgzNCAzMDguNTc0IDQzMy44MTlDMzExLjIzMSA0MjcuOTE2IDMxNC4zMTcgNDIxLjU1MyAzMTcuNzYzIDQxNi4wODZaIi8+PHBhdGggZmlsbD0iIzQ5QzNEMiIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik0zNzYuOTIyIDU5My41MDRMMzc2Ljg4OSA1OTYuMjc4QzM3My4xOTIgNTk2LjMwOSAzNTMuMTU4IDU5Ny4wMTggMzUxLjAwMSA1OTUuOTY5TDM1MC44MDcgNTk1LjE4MUMzNTMuNjUzIDU5My4yMiAzNzIuNTc4IDU5My41ODggMzc2LjkyMiA1OTMuNTA0WiIvPjxwYXRoIGZpbGw9IiM0OUMzRDIiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNMzc2LjU5NiA0OTcuMzA1QzM3NC4yMzkgNDk3LjQyNSAzNzEuMjczIDQ5OC4wNTIgMzY5LjY2IDQ5Ni4xMzFMMzcwLjIxNiA0OTUuMzM0QzM3Mi40MDQgNDk0LjI3MyAzNzQuMjQzIDQ5NC42NTggMzc2LjczMyA0OTQuNzkxQzM3Ny42MTkgNTIxLjk0NSAzNzYuMzM1IDU0OS42NDYgMzc2Ljg4MiA1NzYuODQ3QzM3Ni45NzcgNTgxLjU4NyAzNzYuOTk0IDU4Ni43NTggMzc2LjgwMiA1OTEuNDkyQzM3Ni4wNTMgNTg2LjQzNyAzNzYuNDM2IDU2NS4zODkgMzc2LjQ1IDU1OS40MDNMMzc2LjU5NiA0OTcuMzA1WiIvPjxwYXRoIGZpbGw9IiM0OUMzRDIiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNMzMzLjEzNiA1MzEuMzMzQzMzNy40NTMgNTMxLjA5NyAzNTkuNjYgNTMxLjA3MSAzNjIuNjM1IDUzMi40NTdMMzYyLjY3MyA1MzMuNDgyQzM1OC41NTYgNTM0LjA1MyAzMzguMDY4IDUzNC4yMDIgMzMzLjc3IDUzMy44ODJDMzMyLjY4NSA1MzIuNzQzIDMzMy4wOSA1MzMuNDQ2IDMzMy4xMzYgNTMxLjMzM1oiLz48cGF0aCBmaWxsPSIjNDlDM0QyIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTM0Ny42MjIgNDQyLjEyNEMzNTEuOTE0IDQ0MS44OSAzNjguMDQgNDQxLjM3NCAzNzEuMjM5IDQ0Mi40MTZDMzcxLjc0OCA0NDMuODI3IDM3MS43MDYgNDQzLjA5OSAzNzEuMTQyIDQ0NC42NzRDMzY2LjM4IDQ0NC40ODYgMzUwLjE1MSA0NDUuMjY2IDM0Ni45NTUgNDQzLjlMMzQ2LjY4OSA0NDIuOTA3TDM0Ny42MjIgNDQyLjEyNFoiLz48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50XzQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iNDY4LjcyNzcyIiB5MT0iNjMxLjAxNzMzIiB4Mj0iNTc1LjA5NTY0IiB5Mj0iNDAyLjQzOTU4Ij48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMxQTM4NzUiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMyQjlEQUEiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBmaWxsPSJ1cmwoI2dyYWRpZW50XzQpIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTQ3MC43OTcgMzgzLjA4QzQ5Mi45NDYgMzgzLjIwNSA1MTUuMDk2IDM4My4xODQgNTM3LjI0NCAzODMuMDE2QzUzNy4yMzcgMzg2LjIwMyA1MzcuMzY2IDM5MC42NjQgNTM3LjE3NCAzOTMuNzQ4QzUzNy4yMTggNDAyLjE2NCA1MzcuMiA0MTAuNTgxIDUzNy4xMjEgNDE4Ljk5N0w1MzcuMzE3IDQyNi4xNzFDNTUxLjg4NiA0MjYuMzUxIDU2Ni41OTQgNDI2LjAyNyA1ODEuMTI5IDQyNi4zNDlMNTgxLjE3MSA2MzQuMDgxQzU0NS40NTQgNjM0LjE3OSA1MDguNzIyIDYzMy42MzQgNDczLjExNSA2MzQuMjA0TDQ2OC4yNDggNjM0LjEyMkM0NTcuMjA0IDYzNC45MjUgNDM2Ljg1NiA2MzQuMDc1IDQyNS4xNTMgNjM0LjIzNEM0MTUuODc0IDYzNC4zNTkgMzkyLjc3NSA2MzQuODE0IDM4NC4zMDkgNjMzLjk4MUMzODQuNzc3IDYyMi45IDM4NC4yMjMgNjA4LjE0MSAzODQuMTggNTk2LjY1MkMzODMuOTU1IDU4Ni40MzQgMzg0LjAwNCA1NzEuNDcyIDM4NC4yMjUgNTYxLjI0OUwzODQuMjE2IDU1MC43NDFDMzgzLjk2MiA1NDYuMzQ2IDM4My45MzYgNTQwLjc3NSAzODQuMDkgNTM2LjMyOUMzODUuMDEyIDUwOS42MDIgMzgyLjkyNCA0ODEuMDI4IDM4NC41MjggNDU0LjUyMUMzODQuNDIgNDQwLjk0NSAzODQuMTcgNDI4LjA3OSAzODQuNDY0IDQxNC40OTZMMzg0LjU0MyA0MTIuNDc1QzM4NC42NTIgNDAyLjc1NyAzODQuMzI3IDM5Mi45MjkgMzg0LjQxNiAzODMuMTU0QzM5Ni4yODQgMzgyLjkxOSA0MDguNzQ4IDM4My4xMDkgNDIwLjY3MSAzODMuMDkxTDQyNC4wOCAzODMuMDk5QzQzOC4yOTggMzgzLjE4MSA0NTQuMDcgMzgzLjUxNSA0NjguMjIgMzgzLjA4Nkw0NzAuNzk3IDM4My4wOFoiLz48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50XzUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iNDA1LjQ0OTU1IiB5MT0iNTk5Ljk0MTY1IiB4Mj0iNDQ2LjcxODc4IiB5Mj0iNDkwLjg4NTU2Ij48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMxQjNFNzkiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMyMjZBOTEiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBmaWxsPSJ1cmwoI2dyYWRpZW50XzUpIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTM4NC4yMTYgNTUwLjc0MUMzODMuOTYyIDU0Ni4zNDYgMzgzLjkzNiA1NDAuNzc1IDM4NC4wOSA1MzYuMzI5QzM4NS4wMTIgNTA5LjYwMiAzODIuOTI0IDQ4MS4wMjggMzg0LjUyOCA0NTQuNTIxQzM4NS4xNTUgNDY3LjU1MiAzODQuNDE5IDQ4MS41ODIgMzg0LjY0NSA0OTQuNzAxQzM5Ni42NzEgNDk0LjU5OSA0MDguNjk3IDQ5NC41NTcgNDIwLjcyMyA0OTQuNTc2QzQyMC42NzYgNDg5LjE4OCA0MjAuMTEzIDQ3OS41MjcgNDIxLjg0MyA0NzQuNzM4TDQyMi40NjMgNDc0LjQ1NUM0MjQuNDM1IDQ3OC40ODEgNDIzLjgxMyA0ODkuNzI0IDQyMy43NTggNDk0LjY0TDQ1Mi4zNDggNDk0LjY1NkM0NTYuNDQ2IDQ5NC42NjEgNDYzLjgyMSA0OTQuNDgyIDQ2Ny43NjUgNDk0LjgyM0w0NjcuNDcyIDQ5Ni4wMjNDNDY4LjQ0OSA0OTcuNTc3IDQ2Ny43NzYgNDk2Ljk1NyA0NjkuODEzIDQ5Ny42MzFMNDcwLjc2IDQ5Ny4yMjlMNDcwLjg0NCA0OTcuNTQ5TDQ3MC44MjggNTYzLjI4NUM0NzAuODI2IDU2OC40OTQgNDcwLjQxNyA1ODkuODY1IDQ3MC45NCA1OTMuNzM5TDQ3MC41MDIgNTk2LjU3N0M0NzEuMTk5IDYwNC45MDggNDcwLjcxOSA2MTQuNDAxIDQ3MC45NCA2MjIuODI5QzQ3MS4wMDcgNjI1LjM3OCA0NzAuNjY1IDYzMS4xMzcgNDcxLjA2NSA2MzMuNDA1QzQ3MS45MDQgNjMzLjc3MyA0NzIuMjM2IDYzMy45NDUgNDczLjExNSA2MzQuMjA0TDQ2OC4yNDggNjM0LjEyMkM0NTcuMjA0IDYzNC45MjUgNDM2Ljg1NiA2MzQuMDc1IDQyNS4xNTMgNjM0LjIzNEM0MTUuODc0IDYzNC4zNTkgMzkyLjc3NSA2MzQuODE0IDM4NC4zMDkgNjMzLjk4MUMzODQuNzc3IDYyMi45IDM4NC4yMjMgNjA4LjE0MSAzODQuMTggNTk2LjY1MkMzODMuOTU1IDU4Ni40MzQgMzg0LjAwNCA1NzEuNDcyIDM4NC4yMjUgNTYxLjI0OUwzODQuMjE2IDU1MC43NDFaIi8+PHBhdGggZmlsbD0iIzFCM0Y3OCIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik00MjEuMTE2IDU5Ni41NzJMNDI0LjE2MyA1OTYuNjUxQzQzOC43MyA1OTYuMzQ0IDQ1My43MDIgNTk2LjY0IDQ2OC4zMzMgNTk2LjU2OEw0NjguNDAzIDYwNi4yMzlDNDY4LjM0MyA2MTAuNTc5IDQ2OC43NDkgNjMwLjY2NCA0NjguMzcxIDYzMy43OTJMNDY4LjI0OCA2MzQuMTIyQzQ1Ny4yMDQgNjM0LjkyNSA0MzYuODU2IDYzNC4wNzUgNDI1LjE1MyA2MzQuMjM0QzQxNS44NzQgNjM0LjM1OSAzOTIuNzc1IDYzNC44MTQgMzg0LjMwOSA2MzMuOTgxQzM4NC43NzcgNjIyLjkgMzg0LjIyMyA2MDguMTQxIDM4NC4xOCA1OTYuNjUyQzM4Ny4zMjEgNTk2LjMzMSAzOTMuNDIxIDU5Ni41MzkgMzk2LjgzMyA1OTYuNTQ1TDQyMS4xMTYgNTk2LjU3MloiLz48cGF0aCBmaWxsPSIjMUIzRjc4IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTM4NC4xOCA1OTYuNjUyQzM4Ny4zMjEgNTk2LjMzMSAzOTMuNDIxIDU5Ni41MzkgMzk2LjgzMyA1OTYuNTQ1TDQyMS4xMTYgNTk2LjU3MkM0MjEuMTYzIDYwOC4yMjIgNDIxLjU0NiA2MjIuMzU4IDQyMS4wMzIgNjMzLjg2OUM0MTAuMzc4IDYzMy43OTggMzk0LjY3MiA2MzMuMjIzIDM4NC4zMDkgNjMzLjk4MUMzODQuNzc3IDYyMi45IDM4NC4yMjMgNjA4LjE0MSAzODQuMTggNTk2LjY1MloiLz48cGF0aCBmaWxsPSIjNDhBQ0M5IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTQyMS4xMTYgNTk2LjU3Mkw0MjQuMTYzIDU5Ni42NTFDNDI0LjE0MiA2MDkuMDMzIDQyNC4zNjcgNjIxLjU4OCA0MjQuMjM4IDYzMy45MzJDNDM4LjM4NSA2MzMuODEzIDQ1NC40OTUgNjM0LjIyNiA0NjguMzcxIDYzMy43OTJMNDY4LjI0OCA2MzQuMTIyQzQ1Ny4yMDQgNjM0LjkyNSA0MzYuODU2IDYzNC4wNzUgNDI1LjE1MyA2MzQuMjM0QzQxNS44NzQgNjM0LjM1OSAzOTIuNzc1IDYzNC44MTQgMzg0LjMwOSA2MzMuOTgxQzM5NC42NzIgNjMzLjIyMyA0MTAuMzc4IDYzMy43OTggNDIxLjAzMiA2MzMuODY5QzQyMS41NDYgNjIyLjM1OCA0MjEuMTYzIDYwOC4yMjIgNDIxLjExNiA1OTYuNTcyWiIvPjxwYXRoIGZpbGw9IiM0OUMzRDIiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNMzg0LjIxNiA1NTAuNzQxQzM4My45NjIgNTQ2LjM0NiAzODMuOTM2IDU0MC43NzUgMzg0LjA5IDUzNi4zMjlDMzg1LjAxMiA1MDkuNjAyIDM4Mi45MjQgNDgxLjAyOCAzODQuNTI4IDQ1NC41MjFDMzg1LjE1NSA0NjcuNTUyIDM4NC40MTkgNDgxLjU4MiAzODQuNjQ1IDQ5NC43MDFDMzk2LjY3MSA0OTQuNTk5IDQwOC42OTcgNDk0LjU1NyA0MjAuNzIzIDQ5NC41NzZDNDIwLjY3NiA0ODkuMTg4IDQyMC4xMTMgNDc5LjUyNyA0MjEuODQzIDQ3NC43MzhMNDIyLjQ2MyA0NzQuNDU1QzQyNC40MzUgNDc4LjQ4MSA0MjMuODEzIDQ4OS43MjQgNDIzLjc1OCA0OTQuNjRMNDUyLjM0OCA0OTQuNjU2QzQ1Ni40NDYgNDk0LjY2MSA0NjMuODIxIDQ5NC40ODIgNDY3Ljc2NSA0OTQuODIzTDQ2Ny40NzIgNDk2LjAyM0M0NjguNDQ5IDQ5Ny41NzcgNDY3Ljc3NiA0OTYuOTU3IDQ2OS44MTMgNDk3LjYzMUw0NzAuNzYgNDk3LjIyOUw0NzAuODQ0IDQ5Ny41NDlMNDcwLjgyOCA1NjMuMjg1QzQ3MC44MjYgNTY4LjQ5NCA0NzAuNDE3IDU4OS44NjUgNDcwLjk0IDU5My43MzlMNDcwLjUwMiA1OTYuNTc3QzQ3MS4xOTkgNjA0LjkwOCA0NzAuNzE5IDYxNC40MDEgNDcwLjk0IDYyMi44MjlDNDcxLjAwNyA2MjUuMzc4IDQ3MC42NjUgNjMxLjEzNyA0NzEuMDY1IDYzMy40MDVDNDcxLjkwNCA2MzMuNzczIDQ3Mi4yMzYgNjMzLjk0NSA0NzMuMTE1IDYzNC4yMDRMNDY4LjI0OCA2MzQuMTIyTDQ2OC4zNzEgNjMzLjc5MkM0NjguNzQ5IDYzMC42NjQgNDY4LjM0MyA2MTAuNTc5IDQ2OC40MDMgNjA2LjIzOUM0NjkuODgyIDYwNC4zMDggNDY5LjA2NiA1ODkuODEzIDQ2OC4zMDcgNTg2Ljk5MkM0NjcuODQ0IDU3OC44MDIgNDY4LjIxNCA1NjUuODgzIDQ2OC4yMTkgNTU3LjQzMUM0NjguMzYgNTM3LjQ4OSA0NjguMzM4IDUxNy41NDUgNDY4LjE1NSA0OTcuNjAzTDQyMy43NzMgNDk3LjU5M0M0MjMuODM0IDUwMi4yMzEgNDI0LjIyMiA1MDguMTg2IDQyMi44MTkgNTEyLjQ5NUw0MjIuMTggNTEyLjc0OEM0MjAuMzI0IDUwOS40OTggNDIwLjczMSA1MDEuNTA2IDQyMC43MzUgNDk3LjUwOEM0MDguNjA0IDQ5Ny42ODYgMzk2LjQ3MSA0OTcuNjI2IDM4NC4zNDIgNDk3LjMyOUMzODQuODk2IDUxMS42NzcgMzg1LjAwMSA1MzYuMzQ5IDM4NC4yMTYgNTUwLjc0MVoiLz48cGF0aCBmaWxsPSIjNDhBQ0M5IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTM4NC4yMjUgNTYxLjI0OUMzODUuMTE4IDU3MC40MTIgMzg0LjY4NiA1ODQuMzYgMzg0LjYxMyA1OTMuODk5TDQyMS4yMTUgNTkzLjY5MUM0MjEuMTI2IDU4OC43NjUgNDIwLjUzMSA1ODAuMzcyIDQyMi4xNTQgNTc1Ljk4OEw0MjIuODM4IDU3NS45MzZDNDI0LjU2NCA1NzkuOTU4IDQyNC4wOTUgNTg4LjkzOCA0MjQuMTMzIDU5My42MzRDNDM3LjE4IDU5NC4xNTIgNDU1LjA0OSA1OTMuOTkgNDY4LjI4MyA1OTMuNzE3TDQ2OC4zMDcgNTg2Ljk5MkM0NjkuMDY2IDU4OS44MTMgNDY5Ljg4MiA2MDQuMzA4IDQ2OC40MDMgNjA2LjIzOUw0NjguMzMzIDU5Ni41NjhDNDUzLjcwMiA1OTYuNjQgNDM4LjczIDU5Ni4zNDQgNDI0LjE2MyA1OTYuNjUxTDQyMS4xMTYgNTk2LjU3MkwzOTYuODMzIDU5Ni41NDVDMzkzLjQyMSA1OTYuNTM5IDM4Ny4zMjEgNTk2LjMzMSAzODQuMTggNTk2LjY1MkMzODMuOTU1IDU4Ni40MzQgMzg0LjAwNCA1NzEuNDcyIDM4NC4yMjUgNTYxLjI0OVoiLz48cGF0aCBmaWxsPSIjRkFGQ0ZEIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTQwNC43NjMgNTQxLjY5QzQxNS41MzMgNTQxLjgxMiA0MjYuMzA0IDU0MS44NTMgNDM3LjA3NSA1NDEuODE0TDQzNy4wODkgNTcxLjY1QzQyNi4zMDIgNTcxLjgxNiA0MTUuNTEzIDU3MS43NDMgNDA0LjcyOSA1NzEuNDNDNDA0LjU0NyA1NjEuNTE3IDQwNC41NTggNTUxLjYwMiA0MDQuNzYzIDU0MS42OVoiLz48cGF0aCBmaWxsPSIjMUIzRjc4IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTQxMC4wMjcgNTQ3LjA0Mkw0MzEuNTI0IDU0Ni45NjdMNDMxLjU4OSA1NjYuMjI1TDQxMC4wMTUgNTY2LjIyOEM0MTAuMTMxIDU1OS44MzMgNDEwLjEzNSA1NTMuNDM3IDQxMC4wMjcgNTQ3LjA0MloiLz48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50XzYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iNDEyLjg0OTU1IiB5MT0iNTAxLjE1Nzc4IiB4Mj0iNDM5LjI4OTYxIiB5Mj0iNDA3Ljg1MDc3Ij48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMyMDYxOEEiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMyNDg1OUQiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBmaWxsPSJ1cmwoI2dyYWRpZW50XzYpIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTQyMC42NzEgMzgzLjA5MUw0MjQuMDggMzgzLjA5OUM0MjQuMTY0IDM5Mi45MDMgNDI0LjA2NCA0MDIuNzA4IDQyMy43NzggNDEyLjUwOUw0MzEuMzMyIDQxMi41NTNMNDMwLjgwMiA0MTIuNjcxQzQyOC4yMDMgNDEzLjIzIDQyNi4zNzUgNDEzLjM5IDQyMy43MzkgNDEzLjYzOEw0MjMuNTIzIDQxMy4wODhMNDIyLjA2OCA0MTMuNTE5TDQyMi4zMTIgNDEzLjQxN0w0MjIuNjk4IDQxMy44MzlMNDIyLjg4MSA0MTMuMzU3TDQyMy4xOSA0MTMuOTA5TDQyMy40NyA0MTMuMzYxTDQyMy42OTEgNDEzLjk1NUw0MjQuMDI1IDQxMy40MDVDNDI2Ljc1OSA0MTMuNjU0IDQyOC42OCA0MTMuNzUgNDMxLjM1NSA0MTQuNTA4QzQ0My40MTQgNDE0LjY4OCA0NTYuMzA2IDQxNC4yMzMgNDY4LjEyNiA0MTQuNTk3TDQ2OC4yMzkgNDY5LjU4M0M0NjguMjQ2IDQ3My41NCA0NjguNTM4IDQ5Mi4wNjYgNDY3Ljc2NSA0OTQuODIzQzQ2My44MjEgNDk0LjQ4MiA0NTYuNDQ2IDQ5NC42NjEgNDUyLjM0OCA0OTQuNjU2TDQyMy43NTggNDk0LjY0QzQyMy44MTMgNDg5LjcyNCA0MjQuNDM1IDQ3OC40ODEgNDIyLjQ2MyA0NzQuNDU1TDQyMS44NDMgNDc0LjczOEM0MjAuMTEzIDQ3OS41MjcgNDIwLjY3NiA0ODkuMTg4IDQyMC43MjMgNDk0LjU3NkM0MDguNjk3IDQ5NC41NTcgMzk2LjY3MSA0OTQuNTk5IDM4NC42NDUgNDk0LjcwMUMzODQuNDE5IDQ4MS41ODIgMzg1LjE1NSA0NjcuNTUyIDM4NC41MjggNDU0LjUyMUMzODQuNDIgNDQwLjk0NSAzODQuMTcgNDI4LjA3OSAzODQuNDY0IDQxNC40OTZMMzg0LjU0MyA0MTIuNDc1QzM4NC42NTIgNDAyLjc1NyAzODQuMzI3IDM5Mi45MjkgMzg0LjQxNiAzODMuMTU0QzM5Ni4yODQgMzgyLjkxOSA0MDguNzQ4IDM4My4xMDkgNDIwLjY3MSAzODMuMDkxWiIvPjxwYXRoIGZpbGw9IiMyNDg3QTEiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNNDIwLjY3MSAzODMuMDkxTDQyNC4wOCAzODMuMDk5QzQyNC4xNjQgMzkyLjkwMyA0MjQuMDY0IDQwMi43MDggNDIzLjc3OCA0MTIuNTA5TDQzMS4zMzIgNDEyLjU1M0w0MzAuODAyIDQxMi42NzFDNDI4LjIwMyA0MTMuMjMgNDI2LjM3NSA0MTMuMzkgNDIzLjczOSA0MTMuNjM4TDQyMy41MjMgNDEzLjA4OEw0MjIuMDY4IDQxMy41MTlMNDIyLjMxMiA0MTMuNDE3TDQyMi42OTggNDEzLjgzOUw0MjIuODgxIDQxMy4zNTdMNDIzLjE5IDQxMy45MDlMNDIzLjQ3IDQxMy4zNjFMNDIzLjY5MSA0MTMuOTU1TDQyNC4wMjUgNDEzLjQwNUM0MjYuNzU5IDQxMy42NTQgNDI4LjY4IDQxMy43NSA0MzEuMzU1IDQxNC41MDhMNDIzLjg0MSA0MTQuNjYyTDQyMS4wODYgNDE0LjcxQzQxOC4zMTEgNDE0LjUxMiA0MTQuNjY3IDQxNC41NzUgNDExLjgxNiA0MTQuNTQ0QzQwMi42OTkgNDE0LjU5OCAzOTMuNTgxIDQxNC41ODIgMzg0LjQ2NCA0MTQuNDk2TDM4NC41NDMgNDEyLjQ3NUMzODQuNjUyIDQwMi43NTcgMzg0LjMyNyAzOTIuOTI5IDM4NC40MTYgMzgzLjE1NEMzOTYuMjg0IDM4Mi45MTkgNDA4Ljc0OCAzODMuMTA5IDQyMC42NzEgMzgzLjA5MVoiLz48cGF0aCBmaWxsPSIjNDlDM0QyIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTQyMC42NzEgMzgzLjA5MUw0MjQuMDggMzgzLjA5OUM0MjQuMTY0IDM5Mi45MDMgNDI0LjA2NCA0MDIuNzA4IDQyMy43NzggNDEyLjUwOUw0MzEuMzMyIDQxMi41NTNMNDMwLjgwMiA0MTIuNjcxQzQyOC4yMDMgNDEzLjIzIDQyNi4zNzUgNDEzLjM5IDQyMy43MzkgNDEzLjYzOEw0MjMuNTIzIDQxMy4wODhMNDIyLjA2OCA0MTMuNTE5TDQyMi4zMTIgNDEzLjQxN0w0MjIuNjk4IDQxMy44MzlMNDIyLjg4MSA0MTMuMzU3TDQyMy4xOSA0MTMuOTA5TDQyMy40NyA0MTMuMzYxTDQyMy42OTEgNDEzLjk1NUw0MjQuMDI1IDQxMy40MDVDNDI2Ljc1OSA0MTMuNjU0IDQyOC42OCA0MTMuNzUgNDMxLjM1NSA0MTQuNTA4TDQyMy44NDEgNDE0LjY2Mkw0MjEuMDg2IDQxNC43MUM0MTguMzExIDQxNC41MTIgNDE0LjY2NyA0MTQuNTc1IDQxMS44MTYgNDE0LjU0NEM0MTQuMTM3IDQxMy45MyA0MTcuNTU5IDQxMy40NTUgNDE5Ljk3IDQxMy43NTZDNDE5LjI4NiA0MTMuMjUgNDE3LjI4NCA0MTMuMjIyIDQxNS45IDQxMi44MzZMNDE0Ljk2MSA0MTIuNTY4TDQyMS4yNzUgNDEyLjQxN0M0MjEuMjA1IDQwMy4zNjMgNDIxLjM3NiAzOTEuOTk2IDQyMC42NzEgMzgzLjA5MVoiLz48cGF0aCBmaWxsPSIjNTdFMEUzIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTM4NC41NDMgNDEyLjQ3NUMzOTQuMTg4IDQxMi40NjcgNDA1LjQ0MyA0MTIuMTc0IDQxNC45NjEgNDEyLjU2OEw0MTUuOSA0MTIuODM2QzQxNy4yODQgNDEzLjIyMiA0MTkuMjg2IDQxMy4yNSA0MTkuOTcgNDEzLjc1NkM0MTcuNTU5IDQxMy40NTUgNDE0LjEzNyA0MTMuOTMgNDExLjgxNiA0MTQuNTQ0QzQwMi42OTkgNDE0LjU5OCAzOTMuNTgxIDQxNC41ODIgMzg0LjQ2NCA0MTQuNDk2TDM4NC41NDMgNDEyLjQ3NVoiLz48cGF0aCBmaWxsPSIjNDlDM0QyIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTQyMS4wODYgNDE0LjcxTDQyMy44NDEgNDE0LjY2MkM0MjMuODY2IDQxOC4yOTcgNDI0LjQzNCA0MzAuODkgNDIyLjM5NyA0MzMuMjMyQzQyMC40ODIgNDMxLjEyNSA0MjEuMDU1IDQxOC4xMzIgNDIxLjA4NiA0MTQuNzFaIi8+PHBhdGggZmlsbD0iI0ZBRkNGRCIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik00MDQuNDM4IDQzOS44NTNDNDE1LjEzNCA0MzkuNjIzIDQyNS44MTkgNDM5Ljk0OSA0MzYuNTkgNDM5LjYzNEM0MzYuNzI3IDQ0OS45ODMgNDM2Ljc1NCA0NjAuMzMzIDQzNi42NzIgNDcwLjY4M0M0MjUuOTM1IDQ3MC41MzkgNDE1LjEzMyA0NzAuOTI4IDQwNC40MTIgNDcwLjM3NkM0MDQuMzA4IDQ2MC4yMDIgNDA0LjMxNyA0NTAuMDI3IDQwNC40MzggNDM5Ljg1M1oiLz48cGF0aCBmaWxsPSIjMjU3MTlDIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTQwOS45NDEgNDQ1LjI5NEM0MTYuOTg1IDQ0NS4zODYgNDI0LjE1OSA0NDUuMzIyIDQzMS4yMTUgNDQ1LjMyOUM0MzEuMDg1IDQ1MS44MzggNDMxLjE4IDQ1OC42MDYgNDMxLjE4NSA0NjUuMTM2TDQwOS44ODUgNDY1LjExMUw0MDkuOTQxIDQ0NS4yOTRaIi8+PHBhdGggZmlsbD0iIzI0ODdBMSIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik00MjQuMDggMzgzLjA5OUM0MzguMjk4IDM4My4xODEgNDU0LjA3IDM4My41MTUgNDY4LjIyIDM4My4wODZDNDY4LjQ4MiAzOTIuNzIyIDQ2Ny45MTIgNDAyLjkzMiA0NjguMjM1IDQxMi4xNzdDNDY1LjU0MiA0MTIuNzcyIDQzNi4yMjIgNDEyLjUxNiA0MzEuMzMyIDQxMi41NTNMNDIzLjc3OCA0MTIuNTA5QzQyNC4wNjQgNDAyLjcwOCA0MjQuMTY0IDM5Mi45MDMgNDI0LjA4IDM4My4wOTlaIi8+PHBhdGggZmlsbD0iIzQ5QzNEMiIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik00NjguMTI2IDQxNC41OTdMNDcwLjczMyA0MTQuNzU2TDQ3MC42ODcgNDY2LjczMUM0NzAuNjggNDc0LjEwOSA0NzAuMzUyIDQ4Ny43MzIgNDcwLjk2OSA0OTQuNTg4TDQ3MC43NiA0OTcuMjI5TDQ2OS44MTMgNDk3LjYzMUM0NjcuNzc2IDQ5Ni45NTcgNDY4LjQ0OSA0OTcuNTc3IDQ2Ny40NzIgNDk2LjAyM0w0NjcuNzY1IDQ5NC44MjNDNDY4LjUzOCA0OTIuMDY2IDQ2OC4yNDYgNDczLjU0IDQ2OC4yMzkgNDY5LjU4M0w0NjguMTI2IDQxNC41OTdaIi8+PHBhdGggZmlsbD0iIzU3RTBFMyIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik00NjguMjM1IDQxMi4xNzdDNDcwLjA5IDQxMS45OTQgNDY5LjMyOSA0MTEuNzUxIDQ3MC44MjIgNDEyLjQxQzQ3OS4wMDEgNDEyLjUzNiA0ODguMDkyIDQxMi4yODYgNDk2LjA5OSA0MTIuOEw0OTYuNDg3IDQxMy4yNUM0ODkuOTI5IDQxNi4zOCA0NzguMjcxIDQxMy40MTggNDcwLjczMyA0MTQuNzU2TDQ2OC4xMjYgNDE0LjU5N0M0NTYuMzA2IDQxNC4yMzMgNDQzLjQxNCA0MTQuNjg4IDQzMS4zNTUgNDE0LjUwOEM0MjguNjggNDEzLjc1IDQyNi43NTkgNDEzLjY1NCA0MjQuMDI1IDQxMy40MDVMNDIzLjY5MSA0MTMuOTU1TDQyMy40NyA0MTMuMzYxTDQyMy4xOSA0MTMuOTA5TDQyMi44ODEgNDEzLjM1N0w0MjIuNjk4IDQxMy44MzlMNDIyLjMxMiA0MTMuNDE3TDQyMi4wNjggNDEzLjUxOUw0MjMuNTIzIDQxMy4wODhMNDIzLjczOSA0MTMuNjM4QzQyNi4zNzUgNDEzLjM5IDQyOC4yMDMgNDEzLjIzIDQzMC44MDIgNDEyLjY3MUw0MzEuMzMyIDQxMi41NTNDNDM2LjIyMiA0MTIuNTE2IDQ2NS41NDIgNDEyLjc3MiA0NjguMjM1IDQxMi4xNzdaIi8+PHBhdGggZmlsbD0iIzQ5QzNEMiIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik00NjguMjIgMzgzLjA4Nkw0NzAuNzk3IDM4My4wOEM0NzAuNzIyIDM5Mi44NTYgNDcwLjczIDQwMi42MzMgNDcwLjgyMiA0MTIuNDFDNDY5LjMyOSA0MTEuNzUxIDQ3MC4wOSA0MTEuOTk0IDQ2OC4yMzUgNDEyLjE3N0M0NjcuOTEyIDQwMi45MzIgNDY4LjQ4MiAzOTIuNzIyIDQ2OC4yMiAzODMuMDg2WiIvPjxwYXRoIGZpbGw9IiM0OUMzRDIiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNNDcwLjk2OSA0OTQuNTg4QzQ3NS40ODUgNDk0LjYxOSA0ODQuODc4IDQ5NC4yNzkgNDg4LjcxNSA0OTUuOTE0TDQ4OC40ODQgNDk2LjUwNUM0ODMuOTE4IDQ5Ny44NzggNDc1Ljg1MSA0OTcuNTY0IDQ3MC44NDQgNDk3LjU0OUw0NzAuNzYgNDk3LjIyOUw0NzAuOTY5IDQ5NC41ODhaIi8+PHBhdGggZmlsbD0iIzQ4QUNDOSIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik00NzAuOTQgNTkzLjczOUM0NzUuMTE4IDU5My43MzcgNDgzLjQxMSA1OTMuMzM1IDQ4Ni44ODcgNTk1LjA3Nkw0ODYuNjU5IDU5NS42MzhDNDgyLjAwMiA1OTcuMTE1IDQ3NS40OTIgNTk2LjY5NSA0NzAuNTAyIDU5Ni41NzdMNDcwLjk0IDU5My43MzlaIi8+PHBhdGggZmlsbD0iIzQ4QUNDOSIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik01MzcuMTIxIDQxOC45OTdDNTM2LjEzIDQxNi4wMiA1MzYuNjY3IDQxMi40MzMgNTM2LjEwNyA0MDkuNDQ0QzUzNC44NjIgNDAyLjc5MiA1MzEuMzE3IDM5OS4zMDggNTM3LjE3NCAzOTMuNzQ4QzUzNy4yMTggNDAyLjE2NCA1MzcuMiA0MTAuNTgxIDUzNy4xMjEgNDE4Ljk5N1oiLz48cGF0aCBmaWxsPSIjRkFGQ0ZEIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTQ5NS40MjcgNTc5LjA0OEw1NjAuOTU5IDU3OS4wOThDNTYxLjA5MyA1OTEuNzg3IDU2MS4xMDIgNjA0LjQ3NiA1NjAuOTg2IDYxNy4xNjVMNDk1LjQ3NyA2MTcuMTYyQzQ5NS4zOTQgNjA0LjI4OSA0OTUuMjE3IDU5MS45MjggNDk1LjQyNyA1NzkuMDQ4WiIvPjxwYXRoIGZpbGw9IiMxQjNGNzgiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNNTAxLjU3NiA1ODQuNzcyQzUxOS4zMDYgNTg0LjY3OCA1MzcuMDM3IDU4NC43IDU1NC43NjcgNTg0LjgzOEw1NTQuNzUzIDYxMS4yNTFDNTM3LjUwMyA2MTEuNzQ4IDUxOC43NDcgNjExLjQ0IDUwMS40NDYgNjExLjE5N0w1MDEuNTc2IDU4NC43NzJaIi8+PHBhdGggZmlsbD0iI0ZBRkNGRCIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik00OTYuNTQ0IDQ5MS45NEM1MDguNTY2IDQ5Mi4wNzkgNTIwLjUwMyA0OTEuODkgNTMyLjU0OSA0OTIuMTU1TDUzMi42MTMgNTIxLjc0N0w0OTYuNTM3IDUyMS43MDZDNDk2LjQ2MiA1MTEuNzg0IDQ5Ni40NjQgNTAxLjg2MiA0OTYuNTQ0IDQ5MS45NFoiLz48cGF0aCBmaWxsPSIjMjU3MTlDIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTUwMi4wNTggNDk3LjU3QzUxMC4yMTYgNDk3Ljc2OSA1MTguNzEzIDQ5Ny42NjQgNTI2Ljg5OCA0OTcuNjc0TDUyNi44NDcgNTE1Ljk5NUM1MTguNjE3IDUxNi4wNzEgNTEwLjM4NyA1MTUuOTY1IDUwMi4xNjIgNTE1LjY3OEw1MDIuMDU4IDQ5Ny41N1oiLz48cGF0aCBmaWxsPSIjRkFGQ0ZEIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTQ5NC42NzQgNTQxLjk2Mkw1MzkuNTQ4IDU0MS45NkM1NDQuMDIzIDU0MS45NyA1NTYuNzE3IDU0MS42OSA1NjAuNDU0IDU0Mi4yODhDNTYxLjI1NiA1NDMuOTYyIDU2MC45OCA1NDYuMjIzIDU2MC45NDMgNTQ4LjE1Mkw0OTQuODIxIDU0OC4xMjZMNDk0LjY3NCA1NDEuOTYyWiIvPjxwYXRoIGZpbGw9IiNGQUZDRkQiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNNDk0LjU0OCA1NTcuODQ1QzUwMy4wMDcgNTU3LjgxMSA1NTUuMjg5IDU1Ni42NDUgNTYwLjY3MSA1NTguMjNDNTYxLjQxOSA1NjAuMjE2IDU2MS4wOTMgNTYxLjc5MiA1NjAuOTQyIDU2My45NEM1NDUuOTYzIDU2My4xNTIgNTI5LjgyNSA1NjQuMDUyIDUxNC43NjggNTYzLjc4M0M1MTAuNzE1IDU2My43MTEgNDk4LjE0NCA1NjQuMTk4IDQ5NS4xMDEgNTYzLjNDNDk0LjE5MSA1NjEuNjA5IDQ5NC40ODIgNTU5LjgwNCA0OTQuNTQ4IDU1Ny44NDVaIi8+PHBhdGggZmlsbD0iI0ZBRkNGRCIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik00OTYuNTQzIDQ1My43NzlMNTYwLjc2OCA0NTMuNzYxTDU2MC44MDEgNDU5LjgxNEw1MTkuOTE4IDQ1OS45MzZDNTEzLjc1IDQ1OS45NDIgNTAyLjc4MiA0NjAuMjU5IDQ5Ni45NSA0NTkuNjk5QzQ5Ni4xOTkgNDU4LjE4NSA0OTYuNSA0NTUuNTc5IDQ5Ni41NDMgNDUzLjc3OVoiLz48cGF0aCBmaWxsPSIjRkFGQ0ZEIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTQ5Ni43MDQgNDY4Ljk4OEM1MTcuNjI2IDQ2OS40NyA1MzkuNDYxIDQ2OS4xNDcgNTYwLjQ3OSA0NjkuMTI5QzU2MC42NzEgNDcxLjA0OSA1NjAuNzYyIDQ3My4xNDggNTYwLjg4NyA0NzUuMDg4QzU0NS41MjggNDc0LjYyMiA1MjkuNzQyIDQ3NS4yMDMgNTE0LjM2NiA0NzUuMDM0QzUxMS4xMTEgNDc0Ljk5OCA0OTkuMjM1IDQ3NS4zNzcgNDk2LjgyMiA0NzQuNzk3QzQ5Ni4xNzggNDczLjA5NiA0OTYuNTYyIDQ3MC44NyA0OTYuNzA0IDQ2OC45ODhaIi8+PHBhdGggZmlsbD0iI0ZBRkNGRCIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik00OTcuMjI2IDQzOC41MDVDNTA3Ljk0MiA0MzguNDUgNTIxLjAzMiA0MzguMDExIDUzMS41MyA0MzguNTE1QzUzMi41NDUgNDQwLjAyIDUzMi4yOTggNDQyLjM5NSA1MzIuMDA5IDQ0NC4xNjZMNTMxLjExOCA0NDQuNTE5QzUxOS41MzkgNDQ0LjU2NiA1MDcuOTU5IDQ0NC41MzYgNDk2LjM4MSA0NDQuNDI4QzQ5Ni4yMTkgNDQyLjM3MyA0OTUuNzkgNDQwLjAxNCA0OTcuMjI2IDQzOC41MDVaIi8+ICAgICAgICAgICAgICA8cGF0aCBmaWxsPSIjRjQ3ODE5IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTU0NC40NzQgMzg1Ljk2MUM1NDUuNzY2IDM4Ni45MzEgNTU0LjQxOCAzOTUuNjI3IDU1NS43MTUgMzk3LjAwMkM1NjEuOTIyIDQwMy41ODUgNTcxLjIzMyA0MTEuNzk5IDU3Ni43MjYgNDE4LjcxN0M1NjYuMDc1IDQxOS4zOTIgNTU1LjU2MyA0MTkuMzM3IDU0NC45MDUgNDE5LjM0OEM1NDQuNDE5IDQwOC41MDEgNTQ0LjUwNCAzOTYuODY2IDU0NC40NzQgMzg1Ljk2MVoiLz48cGF0aCBjbGFzcz0idGV4dF9sYWIiIGZpbGw9IiMwQTFCNDciIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNNDA2LjU1NiA3ODMuNDY2QzQxMS44MzUgNzgzLjQyMyA0MTcuMDE3IDc4My4zNSA0MjIuMjk3IDc4My41NDVDNDIyLjkzNiA3OTEuODI0IDQyMi40NTIgODA3LjM5NCA0MjIuNDY3IDgxNi40NTFDNDQxLjgwOSA3OTQuNDUxIDQ3NS4zNjUgODEzLjA1MSA0NzUuNDkyIDgzOS42ODNDNDc1LjU1MSA4NTEuOTk1IDQ3My4zNzMgODU5LjIwNCA0NjUuMTQyIDg2OC4zODRDNDUzLjA3OCA4NzguNzc1IDQzMi4zNDIgODgwLjk3MyA0MjIuMDg0IDg2Ny4xNDNDNDIyLjAxNiA4NjkuODI0IDQyMi4xMjEgODcyLjgyNSA0MjIuMTYzIDg3NS41MzZMNDAyLjU4MSA4NzUuNTYyQzQwMy41MTkgODUxLjI5OCA0MDIuMDY4IDgyNi4xNTMgNDAyLjY5MiA4MDEuODA2QzQwMi44NDQgNzk1Ljg0MSA0MDIuNjQ1IDc5MC4zMTYgNDAzLjIgNzg0LjMyNkM0MDQuMDgyIDc4My4zMjEgNDA0LjczOCA3ODMuNjM1IDQwNi41NTYgNzgzLjQ2NlpNNDQwLjkyIDg1OS44MUM0NjEuOTEyIDg1NC44NDYgNDU4Ljc5OCA4MjIuOTY1IDQzNi41MzggODI0LjA5N0M0MTQuODMzIDgyOC4zODEgNDE4LjE5OSA4NjAuOTkzIDQ0MC45MiA4NTkuODFaIi8+PHBhdGggZmlsbD0iI2Y0NzgxOSIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik01OTguODUzIDc5Ni4zNzNDNjA1Ljk1OCA3OTYuMjgxIDYxMy4xMzMgNzk2LjM2NiA2MjAuMzMzIDc5Ni4zODJDNjUwLjY1MSA3OTYuNDQ5IDY2OC4wMjIgODI3LjkyNSA2NTUuMDE3IDg1NC4zOTNDNjUyLjQxMSA4NTkuNjk3IDY0OC44MjkgODYzLjA0MSA2NDQuMzA2IDg2Ni45NjRDNjI4LjkxMiA4NzguMzc4IDYxMC4xNTcgODc0LjgyMyA1OTEuMzE5IDg3NS4zMjdDNTkwLjQ5MSA4NDkuODIxIDU5MS40ODUgODIyLjQ3NiA1OTEuMTMzIDc5Ni41ODNMNTk4Ljg1MyA3OTYuMzczWk01OTkuMzg3IDg2Ny4yMzZDNjE1LjEzOSA4NjcuMjE1IDYzMC4wNTggODY5LjQxNiA2NDEuODgxIDg1Ny45NzRDNjUzLjc0OCA4NDQuODYzIDY1My45NzMgODI1LjA3MSA2NDEuMDAyIDgxMi41NzVDNjMwLjEzOCA4MDIuMTA4IDYxMy42MzcgODAzLjg4MiA1OTkuNjA4IDgwMy45NzVMNTk5LjYgODQ1LjUyMkM1OTkuNTk3IDg1MC45MTYgNTk5Ljg4OCA4NjIuMDg2IDU5OS4zODcgODY3LjIzNloiLz48cGF0aCBjbGFzcz0idGV4dF9sYWIiIGZpbGw9IiMwQTFCNDciIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNMzQ5LjY2NSA4MDcuNjM0QzM2MC4xMzEgODA2LjU0MSAzNzAuODc0IDgwNy40NSAzNzguOTE1IDgxNC45MTdDMzg4LjkxNCA4MjQuMiAzODcuMjA0IDgzOS41NDcgMzg3LjIxMSA4NTEuOTI1QzM4Ny4xODggODU5Ljc2MSAzODcuMjMxIDg2Ny41OTggMzg3LjM0MSA4NzUuNDMzTDM2Ny43MzggODc1LjQyOEwzNjcuNjA3IDg2OC40MDdDMzU4LjEyMyA4NzguODM1IDM0Mi4zMzEgODc5LjQwNCAzMzEuMDAzIDg3MS42NTNDMzI3LjA0NSA4NjcuOTIxIDMyNC40MTUgODYzLjQ2NSAzMjQuMTc0IDg1OC4wNTZDMzIzLjA3OCA4MzMuNDYgMzQ3LjcxIDgzNS45NzEgMzY0LjY5OSA4MzYuMkMzNjYuMDU1IDgzNi4yMTggMzY2LjczOSA4MzUuODggMzY3LjQ5NSA4MzQuOTA2QzM2Ny40MjIgODMzLjQ1OCAzNjcuMTY3IDgzMS4xOTkgMzY2LjM2NyA4MjkuOTc1QzM1OS4wNjkgODE4LjgxOSAzNDMuMjEzIDgyNC42NDcgMzM0LjA3MSA4MjkuMzQ2QzMzMi40MjkgODI0LjUzOCAzMzAuMTk3IDgxOS44MDYgMzI4LjAwNSA4MTUuMjI4QzMzNC42MTUgODEwLjg0NSAzNDEuODkyIDgwOC43MTQgMzQ5LjY2NSA4MDcuNjM0Wk0zNTkuNDE0IDg2Mi4yODdDMzY2LjkyNSA4NTguNjIyIDM2OC4wMDEgODU1LjM4NyAzNjcuNTM0IDg0Ny4zOTdDMzYyLjAxIDg0Ny4yNDQgMzU1LjY2MSA4NDcuMDIzIDM1MC4xNDUgODQ3LjMxNkMzMzUuNzM2IDg1MS4yNCAzNDMuODU1IDg2Ni4xMjcgMzU5LjQxNCA4NjIuMjg3WiIvPjxwYXRoIGZpbGw9IiNmNDc4MTkiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNNTE5LjYwMSA3OTYuMzE2QzUyOS4xOTggNzk1LjgxMSA1NDAuMzM5IDc5NS44NTkgNTQ5LjkxOCA3OTYuMTk3QzU4NS41NDIgNzk3LjQ1NSA1ODYuNjE5IDg0NC43NzIgNTQ5LjIzNSA4NDcuNTI2TDUyNy40NzQgODQ3LjU4TDUyNy41MTcgODc1LjIxN0w1MTkuMzcyIDg3NS4yMjNDNTE4LjkzNiA4NjYuNTE2IDUxOC4wNiA4MDAuODA2IDUxOS42MDEgNzk2LjMxNlpNNTI3LjU4IDg0MC4wMTNDNTM5LjIwMSA4MzkuNzIzIDU1NC42MTggODQxLjczNyA1NjMuNDIzIDgzNC41MjNDNTY5Ljc1MiA4MjcuMzA0IDU3MC40NjQgODE0LjIxMyA1NjIuMzg0IDgwOC4xOTFDNTUzLjMyOSA4MDEuNDQ0IDUzOC40NDEgODA0Ljc5OCA1MjcuNzczIDgwNC4xNUM1MjYuODk5IDgxNC41MTUgNTI3Ljc0OSA4MjkuMjYgNTI3LjU4IDg0MC4wMTNaIi8+PHBhdGggY2xhc3M9InRleHRfbGFiIiBmaWxsPSIjMEExQjQ3IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NjY5IDAgMCAxLjA4NzEyIDAgLTMuMDUxNzZlLTA1KSIgZD0iTTI1Ni4yNDggNzg4LjYwMUMyNjIuMTEzIDc4OC41NzEgMjY3Ljc0NSA3ODguNTMxIDI3My42MDkgNzg4Ljc2N0MyNzQuMDM2IDc5NS45OTIgMjczLjc3MiA4MDUuNDc2IDI3My43ODQgODEyLjk3TDI3My44MTEgODU4LjUzN0MyODYuMzAyIDg1OC4wNTEgMzA2LjAwMyA4NTcuMzY0IDMxOC4xOTUgODU4LjUxM0MzMTguNTQxIDg2MS41IDMxOS4xMjEgODczLjAzNCAzMTguMDEyIDg3NS4yOTVMMzE2LjcwMyA4NzUuNTAzQzI5Ni42NzIgODc1LjQ5OSAyNzMuMjk1IDg3NC45NjYgMjUzLjUwNSA4NzUuOTA1TDI1My41NzYgODA5LjQ1NkMyNTMuNTc5IDgwNi4zMTggMjUzLjE0NCA3OTAuNDgyIDI1NC4yMDMgNzg4Ljg2NkwyNTYuMjQ4IDc4OC42MDFaIi8+PHBhdGggZmlsbD0iI2Y0NzgxOSIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wODY2OSAwIDAgMS4wODcxMiAwIC0zLjA1MTc2ZS0wNSkiIGQ9Ik02NzUuNTMgNzk2LjMzNUM2OTAuMDUgNzk1LjcxOCA3MTUuMDEyIDc5NS43MDQgNzI5LjUwMiA3OTYuMjU2TDcyOS40NzggODA0LjIxOEM3MTQuNjYxIDgwMy44MTcgNjk5LjIzNSA4MDMuOTMzIDY4NC4zNzEgODAzLjg1QzY4NC4zNzIgODEyLjg3NCA2ODQuMjM2IDgyMi4yOTMgNjg0LjY3OCA4MzEuMjczQzY5Ny4yNjcgODMxLjE3NSA3MTEuOTUyIDgzMC43NzMgNzI0LjM2OCA4MzEuMzI5QzcyNC40NjcgODMzLjY2NCA3MjQuMTk3IDgzNi45OTggNzI0LjA3NCA4MzkuNDA3QzcxMC45MDYgODM5LjQzMiA2OTcuNzM4IDgzOS4zNiA2ODQuNTcxIDgzOS4xOUM2ODQuNzU1IDg1MS4xNDYgNjg0LjYxNyA4NjMuNDg1IDY4NC42MzUgODc1LjQ3Mkw2NzUuODMyIDg3NS40OTNDNjc1LjQxOSA4NjQuNDYgNjc1LjczIDg1Mi42MDYgNjc1Ljc2MyA4NDEuNTA2TDY3NS41MyA3OTYuMzM1WiIvPjxwYXRoIGZpbGw9IiNmNDc4MTkiIHRyYW5zZm9ybT0ibWF0cml4KDEuMDg2NjkgMCAwIDEuMDg3MTIgMCAtMy4wNTE3NmUtMDUpIiBkPSJNNDkxLjM4MSA3NzkuMjQ2QzQ5NC45MiA3NzguNTQ1IDQ5OC41NzMgNzc5LjY3NyA1MDEuMDk3IDc4Mi4yNTZDNTAzLjgxMiA3ODUuMDMxIDUwNC44MSA3ODkuMDU5IDUwMy43MDMgNzkyLjc4MUM1MDIuNTk3IDc5Ni41MDIgNDk5LjU2IDc5OS4zMzEgNDk1Ljc3IDgwMC4xNzFDNDkyLjAxMyA4MDEuMDA0IDQ4OC4wOTggNzk5Ljc1MyA0ODUuNTIgNzk2Ljg5NkM0ODIuOTQxIDc5NC4wMzkgNDgyLjA5OCA3OTAuMDE2IDQ4My4zMTEgNzg2LjM2NEM0ODQuNTI0IDc4Mi43MTIgNDg3LjYwNiA3NzkuOTkzIDQ5MS4zODEgNzc5LjI0NloiLz48L3N2Zz4KICAgICAgICAgIDwvZGl2PiAKICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgIDxoMT5MYWIgUERGPC9oMT4KICAgICAgICAgICAgPHA+Q3JpZSBQREZzIGRlIGZvcm1hIHZpc3VhbCBlIGludHVpdGl2YTwvcD4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InRvb2xiYXIiPgogICAgICAgICAgPCEtLSBWMSAtIFJlcGxpY2HDp8OjbyBjb20gSUEgZGVzYWJpbGl0YWRhCiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biIgaWQ9ImFpUmVwbGljYXRlQnRuIiB0aXRsZT0iUmVwbGljYXIgUERGIGNvbSBJQSIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMC41cmVtOyBib3JkZXItY29sb3I6ICNlMjU3NGM7IGNvbG9yOiAjZTI1NzRjOyBiYWNrZ3JvdW5kOiB3aGl0ZTsiPgogICAgICAgICAgICAgIDxzdmcgd2lkdGg9IjIwcHgiIGhlaWdodD0iMjBweCIgdmlld0JveD0iMCAwIDEwIDEwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0yLjQ0NiAxLjM2N2MxLjk4NCAwLjEyMiAyLjg4IC0wLjA0MiAzLjUwNSAtMC4wNDIgMC41ODEgMCAwLjg1NSAxLjkxMiAwLjYxNiAyLjQ3NiAtMC4yMjUgMC41MzIgLTQuMDU5IDAuNTU0IC00LjIzNyAwLjM0MyAtMC4yMDYgLTAuMjQ0IC0wLjA4NyAtMS4yNjIgLTAuMDg3IC0xLjYxMiIgc3Ryb2tlPSIjZTI1NzRjIiBzdHJva2Utb3BhY2l0eT0iMC45IiBzdHJva2Utd2lkdGg9IjAuNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTTIuNDU4IDQuNzY3Yy0yLjcyNSAyLjUyIDAuNTczIDIuMDcgMS4yNDggMi42MSIgc3Ryb2tlPSIjZTI1NzRjIiBzdHJva2Utb3BhY2l0eT0iMC45IiBzdHJva2Utd2lkdGg9IjAuNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTTIuNDU4IDQuNzY3YzAuMDM3IDAuNTc1IDAuMDcxIDEuODc1IDAuMDQ4IDIuMDU1IiBzdHJva2U9IiNlMjU3NGMiIHN0cm9rZS1vcGFjaXR5PSIwLjkiIHN0cm9rZS13aWR0aD0iMC40IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNNS4yMDggMy40MDZ2LTAuMzIxIiBzdHJva2U9IiNlMjU3NGMiIHN0cm9rZS1vcGFjaXR5PSIwLjkiIHN0cm9rZS13aWR0aD0iMC40IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNNC40MzIgMy40MzJjLTAuMDA3IC0wLjA4NSAwIC0wLjI3OSAwIC0wLjM0NyIgc3Ryb2tlPSIjZTI1NzRjIiBzdHJva2Utb3BhY2l0eT0iMC45IiBzdHJva2Utd2lkdGg9IjAuNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTTUuMDg1IDYuMDQzYzMuNzE3IC0wLjA0NSA0LjI4NyAtMC4zNzUgMi43MjggMi41MDMiIHN0cm9rZT0iI2UyNTc0YyIgc3Ryb2tlLW9wYWNpdHk9IjAuOSIgc3Ryb2tlLXdpZHRoPSIwLjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik03LjEzOSA4LjYzNmMtMi4yMTkgLTAuMDkgLTMuNzE3IDAuNzIgLTIuNjgzIC0yLjAyNCIgc3Ryb2tlPSIjZTI1NzRjIiBzdHJva2Utb3BhY2l0eT0iMC45IiBzdHJva2Utd2lkdGg9IjAuNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTTQuNSA4LjYzNmMtMC40ODEgLTAuMzUyIC0xLjAxOCAtMC42MzEgLTEuNDg0IC0xLjAxOSIgc3Ryb2tlPSIjZTI1NzRjIiBzdHJva2Utb3BhY2l0eT0iMC45IiBzdHJva2Utd2lkdGg9IjAuNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTTUuNDYgNC43NTRjMC4wMTYgMC4zODUgMC4wMyAwLjc2OSAwLjAzIDEuMTU0IiBzdHJva2U9IiNlMjU3NGMiIHN0cm9rZS1vcGFjaXR5PSIwLjkiIHN0cm9rZS13aWR0aD0iMC40IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNNS40NiA0Ljc1NGMwLjE4OCAwLjI5NyAwLjM2NCAwLjQ5IDAuNTg1IDEuMDA0IiBzdHJva2U9IiNlMjU3NGMiIHN0cm9rZS1vcGFjaXR5PSIwLjkiIHN0cm9rZS13aWR0aD0iMC40IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNMi4wMDMgMi45NzZjLTAuMTEzIDAuMDMgLTAuMjI3IDAuMDI0IC0wLjM0MiAwLjAzNCIgc3Ryb2tlPSIjZTI1NzRjIiBzdHJva2Utb3BhY2l0eT0iMC45IiBzdHJva2Utd2lkdGg9IjAuNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTTEuNDkgMi43MzdjMC4wMDIgMC4yMDcgMCAwLjQxMSAtMC4wMTcgMC42MTUiIHN0cm9rZT0iI2UyNTc0YyIgc3Ryb2tlLW9wYWNpdHk9IjAuOSIgc3Ryb2tlLXdpZHRoPSIwLjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik02Ljk0NCAyLjg5MWMwLjA4NSAtMC4wMDkgMC4xNzEgLTAuMDIgMC4yNTYgLTAuMDM0IiBzdHJva2U9IiNlMjU3NGMiIHN0cm9rZS1vcGFjaXR5PSIwLjkiIHN0cm9rZS13aWR0aD0iMC40IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNNy4yODUgMi42MTdjMC4wMjQgMC4xMzYgMC4wMTcgMC4yNzMgMC4wMTcgMC40MSIgc3Ryb2tlPSIjZTI1NzRjIiBzdHJva2Utb3BhY2l0eT0iMC45IiBzdHJva2Utd2lkdGg9IjAuNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTTUuNjQ0IDIuOTEyYy0wLjU2IC0wLjA2MiAtMS4xMDMgLTAuMDMyIC0xLjY0MSAwLjA1MyIgc3Ryb2tlPSIjZTI1NzRjIiBzdHJva2Utb3BhY2l0eT0iMC45IiBzdHJva2Utd2lkdGg9IjAuNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+CiAgICAgICAgICAgICAgPHNwYW4+UmVwbGljYXIgY29tIElBPC9zcGFuPgogICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgLS0+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGlwIj4KICAgICAgICAgICAgPHNwYW4+Rm9ybWF0bzwvc3Bhbj4KICAgICAgICAgICAgPHNlbGVjdCBpZD0icGFnZVNpemUiPgogICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkE0IiBzZWxlY3RlZD5BNDwvb3B0aW9uPgogICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkEzIj5BMzwvb3B0aW9uPgogICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkE1Ij5BNTwvb3B0aW9uPgogICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkxFVFRFUiI+TEVUVEVSPC9vcHRpb24+CiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTEVHQUwiPkxFR0FMPC9vcHRpb24+CiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iVEFCTE9JRCI+VEFCTE9JRDwvb3B0aW9uPgogICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgIDxkaXYgY2xhc3M9ImNoaXAiPgogICAgICAgICAgICA8c3Bhbj5PcmllbnRhw6fDo288L3NwYW4+CiAgICAgICAgICAgIDxzZWxlY3QgaWQ9Im9yaWVudGF0aW9uIj4KICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJwb3J0cmFpdCIgc2VsZWN0ZWQ+UmV0cmF0bzwvb3B0aW9uPgogICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImxhbmRzY2FwZSI+UGFpc2FnZW08L29wdGlvbj4KICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGlwIiB0aXRsZT0icGFnZU1hcmdpbnM6IFtsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b21dIj4KICAgICAgICAgICAgPHNwYW4+TWFyZ2Vuczwvc3Bhbj4KICAgICAgICAgICAgPGlucHV0IGlkPSJtTCIgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iNDAiIG1pbj0iMCIgLz4KICAgICAgICAgICAgPGlucHV0IGlkPSJtVCIgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iNjAiIG1pbj0iMCIgLz4KICAgICAgICAgICAgPGlucHV0IGlkPSJtUiIgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iNDAiIG1pbj0iMCIgLz4KICAgICAgICAgICAgPGlucHV0IGlkPSJtQiIgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iNjAiIG1pbj0iMCIgLz4KICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgIDwhLS08YnV0dG9uIGNsYXNzPSJidG4gcHJpbWFyeSIgaWQ9InByZXZpZXdCdG4iPlByw6ktdmlzdWFsaXphciBQREY8L2J1dHRvbj4tLT4KICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biIgaWQ9ImxvYWRUZW1wbGF0ZUJ0biIgdGl0bGU9IkNhcnJlZ2FyIHRlbXBsYXRlIHNhbHZvIj7wn5OCIENhcnJlZ2FyIFRlbXBsYXRlPC9idXR0b24+CiAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4iIGlkPSJidWJibGVUZXN0QnRuIiB0aXRsZT0iUHLDqS12aXN1YWxpemFyIFBERiIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4KICAgICAgICAgICAgPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgICAgICAgICAgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiCiAgICAgICAgICAgICAgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+CiAgICAgICAgICAgICAgPHBhdGggc3R5bGU9ImZpbGw6I0Y0QjJCMDsiIHBvaW50cz0iMzM3LjM5MywxNS4zOTEgMzMzLjU4NSwxNS4zOTEgMzMzLjU4NSwxMjEuNTM2IDQ1MS4yMTUsMTIxLjUzNiAiCiAgICAgICAgICAgICAgICBkPSJNMTMuMTc5IDAuNjAxaC0wLjE0OXY0LjE0Nmg0LjU5NVoiIC8+CiAgICAgICAgICAgICAgPHBhdGggc3R5bGU9ImZpbGw6I0IzNDA0QTsiCiAgICAgICAgICAgICAgICBkPSJNMTcuNzI1IDcuOTQ5YTAuNiAwLjYgMCAwIDAgLTAuNjAxIDAuNjAxdjEwLjI0OEgyLjg3NVYxLjIwM2g5LjU1NHYzLjU0NWMwIDAuMzMyIDAuMjY5IDAuNjAxIDAuNjAxIDAuNjAxaDQuNTk1YTAuNjAxIDAuNjAxIDAgMCAwIDAuNDEgLTEuMDQxTDEzLjU4OSAwLjE2MWwtMC4wMTUgLTAuMDEyIC0wLjAyMSAtMC4wMTggLTAuMDIzIC0wLjAxNyAtMC4wMjQgLTAuMDE3IC0wLjAyMyAtMC4wMTQgLTAuMDI3IC0wLjAxNSAtMC4wMjIgLTAuMDExIC0wLjAzMSAtMC4wMTQgLTAuMDIxIC0wLjAwOCAtMC4wMzMgLTAuMDExIC0wLjAyMyAtMC4wMDYgLTAuMDMyIC0wLjAwOCAtMC4wMyAtMC4wMDUgLTAuMDI3IC0wLjAwNEEwLjY2NyAwLjY2NyAwIDAgMCAxMy4xNzkgMEgyLjI3NWEwLjYgMC42IDAgMCAwIC0wLjYwMSAwLjYwMXYxOC43OTdjMCAwLjMzMiAwLjI2OSAwLjYwMSAwLjYwMSAwLjYwMWgxNS40NTFhMC42IDAuNiAwIDAgMCAwLjYwMSAtMC42MDFWOC41NWEwLjYgMC42IDAgMCAwIC0wLjYwMSAtMC42MDFNMTMuNjMyIDQuMTQ3VjEuODQ1bDIuNDY3IDIuMzAxeiIgLz4KICAgICAgICAgICAgICA8cGF0aCBzdHlsZT0iZmlsbDojRjRCMkIwOyIgY3g9IjI1NS40NCIgY3k9IjI3MC43NTQiIHI9Ijk4LjUzMiIKICAgICAgICAgICAgICAgIGQ9Ik0xMy44MjcgMTAuNTc2YTMuODQ5IDMuODQ5IDAgMCAxIC0zLjg0OSAzLjg0OSAzLjg0OSAzLjg0OSAwIDAgMSAtMy44NDkgLTMuODQ5IDMuODQ5IDMuODQ5IDAgMCAxIDcuNjk4IDAiIC8+CiAgICAgICAgICAgICAgPGc+CiAgICAgICAgICAgICAgICA8cGF0aCBzdHlsZT0iZmlsbDojQjM0MDRBOyIKICAgICAgICAgICAgICAgICAgZD0iTTkuOTc4IDE1LjAyNWE0LjQ0IDQuNDQgMCAwIDEgLTMuMTQ3IC0xLjMwMWMtMS43MzUgLTEuNzM1IC0xLjczNSAtNC41NTkgMCAtNi4yOTNzNC41NTggLTEuNzM1IDYuMjkzIDBhNC40NTMgNC40NTMgMCAwIDEgMCA2LjI5MyA0LjQ0IDQuNDQgMCAwIDEgLTMuMTQ3IDEuMzAxbTAgLTcuNjk0YTMuMjQgMy4yNCAwIDAgMCAtMi4yOTcgMC45NWMtMS4yNjYgMS4yNjYgLTEuMjY2IDMuMzI3IDAgNC41OTNzMy4zMjcgMS4yNjYgNC41OTMgMGEzLjI1MyAzLjI1MyAwIDAgMCAwIC00LjU5MyAzLjI0IDMuMjQgMCAwIDAgLTIuMjk3IC0wLjk1IiAvPgogICAgICAgICAgICAgICAgPHBhdGggc3R5bGU9ImZpbGw6I0IzNDA0QTsiCiAgICAgICAgICAgICAgICAgIGQ9Ik0xNS4wOCAxNi4yOGEwLjYgMC42IDAgMCAxIC0wLjQyNSAtMC4xNzZsLTIuMzgxIC0yLjM4MWEwLjYwMSAwLjYwMSAwIDAgMSAwLjg1IC0wLjg1bDIuMzgxIDIuMzgxYTAuNiAwLjYgMCAwIDEgMCAwLjg1IDAuNiAwLjYgMCAwIDEgLTAuNDI1IDAuMTc2IiAvPgogICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24gaWQ9ImRhcmtNb2RlVG9nZ2xlIiBjbGFzcz0iZGFyay1tb2RlLXRvZ2dsZSIgdGl0bGU9IkFsdGVybmFyIG1vZG8gZXNjdXJvL2NsYXJvIj4KICAgICAgICAgICAgPHN2ZyBpZD0ic3VuSWNvbiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIgogICAgICAgICAgICAgIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPgogICAgICAgICAgICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiPjwvY2lyY2xlPgogICAgICAgICAgICAgIDxsaW5lIHgxPSIxMiIgeTE9IjEiIHgyPSIxMiIgeTI9IjMiPjwvbGluZT4KICAgICAgICAgICAgICA8bGluZSB4MT0iMTIiIHkxPSIyMSIgeDI9IjEyIiB5Mj0iMjMiPjwvbGluZT4KICAgICAgICAgICAgICA8bGluZSB4MT0iNC4yMiIgeTE9IjQuMjIiIHgyPSI1LjY0IiB5Mj0iNS42NCI+PC9saW5lPgogICAgICAgICAgICAgIDxsaW5lIHgxPSIxOC4zNiIgeTE9IjE4LjM2IiB4Mj0iMTkuNzgiIHkyPSIxOS43OCI+PC9saW5lPgogICAgICAgICAgICAgIDxsaW5lIHgxPSIxIiB5MT0iMTIiIHgyPSIzIiB5Mj0iMTIiPjwvbGluZT4KICAgICAgICAgICAgICA8bGluZSB4MT0iMjEiIHkxPSIxMiIgeDI9IjIzIiB5Mj0iMTIiPjwvbGluZT4KICAgICAgICAgICAgICA8bGluZSB4MT0iNC4yMiIgeTE9IjE5Ljc4IiB4Mj0iNS42NCIgeTI9IjE4LjM2Ij48L2xpbmU+CiAgICAgICAgICAgICAgPGxpbmUgeDE9IjE4LjM2IiB5MT0iNS42NCIgeDI9IjE5Ljc4IiB5Mj0iNC4yMiI+PC9saW5lPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgPHN2ZyBpZD0ibW9vbkljb24iIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIKICAgICAgICAgICAgICBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgICAgICAgPHBhdGggZD0iTTIxIDEyLjc5QTkgOSAwIDEgMSAxMS4yMSAzIDcgNyAwIDAgMCAyMSAxMi43OXoiPjwvcGF0aD4KICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8IS0tIE1haW4gQ29udGVudCAtLT4KICAgIDxkaXYgY2xhc3M9Im1haW4iPgogICAgICA8IS0tIFNpZGViYXIgLS0+CiAgICAgIDxkaXYgY2xhc3M9InNpZGViYXIiPgogICAgICAgIDxoMj5Db250YWluZXI8L2gyPgogICAgICAgIDxkaXYgY2xhc3M9ImVsZW1lbnRzLWdyaWQiPgogICAgICAgICAgPGRpdiBjbGFzcz0iZWxlbWVudC1idG4iIGRyYWdnYWJsZT0idHJ1ZSIgb25kcmFnc3RhcnQ9InN0YXJ0RHJhZygnZ3JvdXAnLCBldmVudCkiIGRhdGEtdG9vbHRpcD0iR3J1cG8iPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWljb24gaWNvbi1ncm91cCI+CiAgICAgICAgICAgICAgPHN2ZyBpZD0iZ3JvdXAtaWNvbi10ZW1wbGF0ZSIgd2lkdGg9IjI1IiBoZWlnaHQ9IjI1IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgICAgICAgICAgICAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTI4IDI4SDRhMiAyIDAgMCAxLTItMnYtNWgydjVoMjR2LTVoMnY1YTIgMiAwIDAgMS0yIDIiIC8+CiAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNNyAyMWgxOHYySDd6bTAtNWgxOHYySDd6bTAtNWgxOHYySDd6bTAtNWgxOHYySDd6IiAvPgogICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPHNwYW4+R3J1cG88L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWJ0biIgZHJhZ2dhYmxlPSJ0cnVlIiBvbmRyYWdzdGFydD0ic3RhcnREcmFnKCd0YWJsZScsIGV2ZW50KSIgZGF0YS10b29sdGlwPSJUYWJlbGEiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWljb24gaWNvbi10YWJsZSI+CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZWxlbWVudC1pY29uIGljb24tdGFibGUiPgogICAgICAgICAgICAgICAgPHN2ZyBpZD0idGFibGUtaWNvbi10ZW1wbGF0ZSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTEgMTZIM3Y1aDh6bTIgMHY1aDh2LTV6bS0yLTJWOUgzdjV6bTIgMGg4VjloLTh6TTMgN2gxOFYzSDN6IiAvPgogICAgICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8c3Bhbj5UYWJlbGE8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWJ0biIgZHJhZ2dhYmxlPSJ0cnVlIiBvbmRyYWdzdGFydD0ic3RhcnREcmFnKCdjb2x1bW5zJywgZXZlbnQpIiBkYXRhLXRvb2x0aXA9IkNvbHVuYXMiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWljb24gaWNvbi1jb2x1bW5zIj4KICAgICAgICAgICAgICA8c3ZnIGlkPSJjb2x1bW5zLWljb24tdGVtcGxhdGUiIHdpZHRoPSIyNSIgaGVpZ2h0PSIyNSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgICAgICAgICAgICAgIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0zIDE5VjVoNS4zMjV2MTR6bTYuMzI1IDBWNWg1LjMyNXYxNHptNi4zMjUgMFY1aDUuMzI1djE0eiIgLz4KICAgICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxzcGFuPkNvbHVuYXM8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9ImVsZW1lbnQtYnRuIiBkcmFnZ2FibGU9InRydWUiIG9uZHJhZ3N0YXJ0PSJzdGFydERyYWcoJ2xpc3QnLCBldmVudCkiIGRhdGEtdG9vbHRpcD0iTGlzdGEiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWljb24gaWNvbi1saXN0Ij4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWljb24gaWNvbi1saXN0Ij4KICAgICAgICAgICAgICAgIDxzdmcgaWQ9Imxpc3QtaWNvbi10ZW1wbGF0ZSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPSIjZmZmIgogICAgICAgICAgICAgICAgICAgIGQ9Ik0zIDhoMThWNS41cTAtLjYyNS0uNDM3LTEuMDYyVDE5LjUgNGgtMTVxLS42MjUgMC0xLjA2Mi40MzhUMyA1LjV6bTAgNmgxOHYtNEgzem0xLjUgNmgxNXEuNjI1IDAgMS4wNjMtLjQzN1QyMSAxOC41VjE2SDN2Mi41cTAgLjYyNS40MzggMS4wNjNUNC41IDIwTTUgN3EtLjQyNSAwLS43MTItLjI4OFQ0IDZ0LjI4OC0uNzEyVDUgNXQuNzEzLjI4OFQ2IDZ0LS4yODguNzEzVDUgN20wIDZxLS40MjUgMC0uNzEyLS4yODhUNCAxMnQuMjg4LS43MTJUNSAxMXQuNzEzLjI4OFQ2IDEydC0uMjg4LjcxM1Q1IDEzbTAgNnEtLjQyNSAwLS43MTItLjI4OFQ0IDE4dC4yODgtLjcxMlQ1IDE3dC43MTMuMjg4VDYgMTh0LS4yODguNzEzVDUgMTkiIC8+CiAgICAgICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxzcGFuPkxpc3RhPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxoMiBzdHlsZT0ibWFyZ2luLXRvcDogMnJlbTsiPkVsZW1lbnRvczwvaDI+CiAgICAgICAgPGRpdiBjbGFzcz0iZWxlbWVudHMtZ3JpZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWJ0biIgZHJhZ2dhYmxlPSJ0cnVlIiBvbmRyYWdzdGFydD0ic3RhcnREcmFnKCdoZWFkZXInLCBldmVudCkiIGRhdGEtdG9vbHRpcD0iQ2FiZcOnYWxobyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVsZW1lbnQtaWNvbiBpY29uLWhlYWRlciI+SDwvZGl2PgogICAgICAgICAgICA8c3Bhbj5DYWJlw6dhbGhvPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWJ0biIgZHJhZ2dhYmxlPSJ0cnVlIiBvbmRyYWdzdGFydD0ic3RhcnREcmFnKCd0ZXh0JywgZXZlbnQpIiBkYXRhLXRvb2x0aXA9IlRleHRvIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZWxlbWVudC1pY29uIGljb24tdGV4dCI+VDwvZGl2PgogICAgICAgICAgICA8c3Bhbj5UZXh0bzwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iZWxlbWVudC1idG4iIGRyYWdnYWJsZT0idHJ1ZSIgb25kcmFnc3RhcnQ9InN0YXJ0RHJhZygnaW1hZ2UnLCBldmVudCkiIGRhdGEtdG9vbHRpcD0iSW1hZ2VtIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZWxlbWVudC1pY29uIGljb24taW1hZ2UiPvCfj57vuI88L2Rpdj4KICAgICAgICAgICAgPHNwYW4+SW1hZ2VtPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWJ0biIgZHJhZ2dhYmxlPSJ0cnVlIiBvbmRyYWdzdGFydD0ic3RhcnREcmFnKCdtYXJnaW4nLCBldmVudCkiIGRhdGEtdG9vbHRpcD0iRXNwYcOnbyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVsZW1lbnQtaWNvbiBpY29uLW1hcmdpbiI+CiAgICAgICAgICAgICAgPHN2ZyBpZD0ibWFyZ2luLWljb24tdGVtcGxhdGUiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgICAgICAgICAgICAgIDxwYXRoIGZpbGw9IiNmZmYiCiAgICAgICAgICAgICAgICAgIGQ9Ik0zIDIycS0uNDI1IDAtLjcxMi0uMjg4VDIgMjF0LjI4OC0uNzEyVDMgMjBoNHYtMnEwLS40MjUuMjg4LS43MTJUOCAxN2g4cS40MjUgMCAuNzEzLjI4OFQxNyAxOHYyaDRxLjQyNSAwIC43MTMuMjg4VDIyIDIxdC0uMjg4LjcxM1QyMSAyMnpNOCA3cS0uNDI1IDAtLjcxMi0uMjg4VDcgNlY0SDNxLS40MjUgMC0uNzEyLS4yODhUMiAzdC4yODgtLjcxMlQzIDJoMThxLjQyNSAwIC43MTMuMjg4VDIyIDN0LS4yODguNzEzVDIxIDRoLTR2MnEwIC40MjUtLjI4OC43MTNUMTYgN3oiIC8+CiAgICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8c3Bhbj5Fc3Bhw6dvPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWJ0biIgZHJhZ2dhYmxlPSJ0cnVlIiBvbmRyYWdzdGFydD0ic3RhcnREcmFnKCdwYWdlQnJlYWsnLCBldmVudCkiCiAgICAgICAgICAgIGRhdGEtdG9vbHRpcD0iUXVlYnJhIFDDoWdpbmEiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWljb24gaWNvbi1wYWdlYnJlYWsiPuKkte+4jzwvZGl2PgogICAgICAgICAgICA8c3Bhbj5RdWVicmEgUMOhZ2luYTwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iZWxlbWVudC1idG4iIGRyYWdnYWJsZT0idHJ1ZSIgb25kcmFnc3RhcnQ9InN0YXJ0RHJhZygncXInLCBldmVudCkiIGRhdGEtdG9vbHRpcD0iUVIgQ29kZSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVsZW1lbnQtaWNvbiBpY29uLXFyIj4KICAgICAgICAgICAgICA8c3ZnIGlkPSJxci1pY29uLXRlbXBsYXRlIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPSIjZmZmIgogICAgICAgICAgICAgICAgICBkPSJNMyA3cS0uNDI1IDAtLjcxMi0uMjg4VDIgNlYzcTAtLjQyNS4yODgtLjcxMlQzIDJoM3EuNDI1IDAgLjcxMy4yODhUNyAzdC0uMjg4LjcxM1Q2IDRINHYycTAgLjQyNS0uMjg4LjcxM1QzIDdtMCAxNXEtLjQyNSAwLS43MTItLjI4OFQyIDIxdi0zcTAtLjQyNS4yODgtLjcxMlQzIDE3dC43MTMuMjg4VDQgMTh2MmgycS40MjUgMCAuNzEzLjI4OFQ3IDIxdC0uMjg4LjcxM1Q2IDIyem0xNSAwcS0uNDI1IDAtLjcxMi0uMjg4VDE3IDIxdC4yODgtLjcxMlQxOCAyMGgydi0ycTAtLjQyNS4yODgtLjcxMlQyMSAxN3QuNzEzLjI4OFQyMiAxOHYzcTAgLjQyNS0uMjg4LjcxM1QyMSAyMnptMy0xNXEtLjQyNSAwLS43MTItLjI4OFQyMCA2VjRoLTJxLS40MjUgMC0uNzEyLS4yODhUMTcgM3QuMjg4LS43MTJUMTggMmgzcS40MjUgMCAuNzEzLjI4OFQyMiAzdjNxMCAuNDI1LS4yODguNzEzVDIxIDdtLTMuNSAxMnYtMS41SDE5VjE5em0wLTN2LTEuNUgxOVYxNnpNMTYgMTcuNVYxNmgxLjV2MS41ek0xNC41IDE5di0xLjVIMTZWMTl6TTEzIDE3LjVWMTZoMS41djEuNXptMy0zVjEzaDEuNXYxLjV6TTE0LjUgMTZ2LTEuNUgxNlYxNnpNMTMgMTQuNVYxM2gxLjV2MS41em0xLTMuNXEtLjQyNSAwLS43MTItLjI4OFQxMyAxMFY2cTAtLjQyNS4yODgtLjcxMlQxNCA1aDRxLjQyNSAwIC43MTMuMjg4VDE5IDZ2NHEwIC40MjUtLjI4OC43MTNUMTggMTF6bS04IDhxLS40MjUgMC0uNzEyLS4yODhUNSAxOHYtNHEwLS40MjUuMjg4LS43MTJUNiAxM2g0cS40MjUgMCAuNzEzLjI4OFQxMSAxNHY0cTAgLjQyNS0uMjg4LjcxM1QxMCAxOXptMC04cS0uNDI1IDAtLjcxMi0uMjg4VDUgMTBWNnEwLS40MjUuMjg4LS43MTJUNiA1aDRxLjQyNSAwIC43MTMuMjg4VDExIDZ2NHEwIC40MjUtLjI4OC43MTNUMTAgMTF6bS41IDYuNWgzdi0zaC0zem0wLThoM3YtM2gtM3ptOCAwaDN2LTNoLTN6IiAvPgogICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPHNwYW4+UVIgQ29kZTwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iZWxlbWVudC1idG4iIGRyYWdnYWJsZT0idHJ1ZSIgb25kcmFnc3RhcnQ9InN0YXJ0RHJhZygnc3ZnJywgZXZlbnQpIiBkYXRhLXRvb2x0aXA9IlNWRyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVsZW1lbnQtaWNvbiBpY29uLXN2ZyI+8J+nqTwvZGl2PgogICAgICAgICAgICA8c3Bhbj5TVkc8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9ImVsZW1lbnQtYnRuIiBkcmFnZ2FibGU9InRydWUiIG9uZHJhZ3N0YXJ0PSJzdGFydERyYWcoJ2JhcmNvZGUnLCBldmVudCkiIGRhdGEtdG9vbHRpcD0iQmFyY29kZSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVsZW1lbnQtaWNvbiBpY29uLWJhcmNvZGUiPgogICAgICAgICAgICAgIDxzdmcgaWQ9ImJhcmNvZGUtaWNvbi10ZW1wbGF0ZSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgICAgICAgICAgICAgPHBhdGggZmlsbD0iI2ZmZiIKICAgICAgICAgICAgICAgICAgZD0iTTYgMjBxMCAuNDI1LS4yODguNzEzVDUgMjFIMnEtLjQyNSAwLS43MTItLjI4OFQxIDIwdi0zcTAtLjQyNS4yODgtLjcxMlQyIDE2dC43MTMuMjg4VDMgMTd2MmgycS40MjUgMCAuNzEzLjI4OFQ2IDIwbTE2LTRxLjQyNSAwIC43MTMuMjg4VDIzIDE3djNxMCAuNDI1LS4yODguNzEzVDIyIDIxaC0zcS0uNDI1IDAtLjcxMi0uMjg4VDE4IDIwdC4yODgtLjcxMlQxOSAxOWgydi0ycTAtLjQyNS4yODgtLjcxMlQyMiAxNk00LjUgMThxLS4yIDAtLjM1LS4xNVQ0IDE3LjV2LTExcTAtLjIuMTUtLjM1VDQuNSA2aDFxLjIgMCAuMzUuMTVUNiA2LjV2MTFxMCAuMi0uMTUuMzVUNS41IDE4em0zIDBxLS4yIDAtLjM1LS4xNVQ3IDE3LjV2LTExcTAtLjIuMTUtLjM1VDcuNSA2dC4zNS4xNXQuMTUuMzV2MTFxMCAuMi0uMTUuMzVUNy41IDE4bTMgMHEtLjIgMC0uMzUtLjE1VDEwIDE3LjV2LTExcTAtLjIuMTUtLjM1VDEwLjUgNmgxcS4yIDAgLjM1LjE1dC4xNS4zNXYxMXEwIC4yLS4xNS4zNXQtLjM1LjE1em0zIDBxLS4yIDAtLjM1LS4xNVQxMyAxNy41di0xMXEwLS4yLjE1LS4zNVQxMy41IDZoMnEuMiAwIC4zNS4xNXQuMTUuMzV2MTFxMCAuMi0uMTUuMzV0LS4zNS4xNXptNCAwcS0uMiAwLS4zNS0uMTVUMTcgMTcuNXYtMTFxMC0uMi4xNS0uMzVUMTcuNSA2dC4zNS4xNXQuMTUuMzV2MTFxMCAuMi0uMTUuMzV0LS4zNS4xNW0yIDBxLS4yIDAtLjM1LS4xNVQxOSAxNy41di0xMXEwLS4yLjE1LS4zNVQxOS41IDZ0LjM1LjE1dC4xNS4zNXYxMXEwIC4yLS4xNS4zNXQtLjM1LjE1TTYgNHEwIC40MjUtLjI4OC43MTNUNSA1SDN2MnEwIC40MjUtLjI4OC43MTNUMiA4dC0uNzEyLS4yODhUMSA3VjRxMC0uNDI1LjI4OC0uNzEyVDIgM2gzcS40MjUgMCAuNzEzLjI4OFQ2IDRtMTIgMHEwLS40MjUuMjg4LS43MTJUMTkgM2gzcS40MjUgMCAuNzEzLjI4OFQyMyA0djNxMCAuNDI1LS4yODguNzEzVDIyIDh0LS43MTItLjI4OFQyMSA3VjVoLTJxLS40MjUgMC0uNzEyLS4yODhUMTggNCIgLz4KICAgICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxzcGFuPkJhcmNvZGU8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9ImVsZW1lbnQtYnRuIiBkcmFnZ2FibGU9InRydWUiIG9uZHJhZ3N0YXJ0PSJzdGFydERyYWcoJ3N0YW1wJywgZXZlbnQpIgogICAgICAgICAgICBkYXRhLXRvb2x0aXA9IkNhcmltYm8gLyBTZWxvIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZWxlbWVudC1pY29uIGljb24tc3RhbXAiPvCfqqo8L2Rpdj4KICAgICAgICAgICAgPHNwYW4+Q2FyaW1ibyAvIFNlbG88L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9ImVsZW1lbnQtYnRuIiBkcmFnZ2FibGU9InRydWUiIG9uZHJhZ3N0YXJ0PSJzdGFydERyYWcoJ2NoZWNrYm94JywgZXZlbnQpIiBkYXRhLXRvb2x0aXA9IkNoZWNrYm94Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZWxlbWVudC1pY29uIGljb24tY2hlY2tib3giPuKchTwvZGl2PgogICAgICAgICAgICA8c3Bhbj5DaGVja2JveDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iZWxlbWVudC1idG4iIGRyYWdnYWJsZT0idHJ1ZSIgb25kcmFnc3RhcnQ9InN0YXJ0RHJhZygncmFkaW8nLCBldmVudCkiIGRhdGEtdG9vbHRpcD0iUmFkaW8iPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWljb24gaWNvbi1yYWRpbyI+4peJPC9kaXY+CiAgICAgICAgICAgIDxzcGFuPlJhZGlvPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWJ0biIgZHJhZ2dhYmxlPSJ0cnVlIiBvbmRyYWdzdGFydD0ic3RhcnREcmFnKCdmaWxsTGluZScsIGV2ZW50KSIKICAgICAgICAgICAgZGF0YS10b29sdGlwPSJMaW5oYSAocHJlZW5jaGltZW50bykiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWljb24gaWNvbi1saW5lIj7inI3vuI88L2Rpdj4KICAgICAgICAgICAgPHNwYW4+TGluaGEgKHByZWVuY2hpbWVudG8pPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50LWJ0biIgZHJhZ2dhYmxlPSJ0cnVlIiBvbmRyYWdzdGFydD0ic3RhcnREcmFnKCdjaGFydCcsIGV2ZW50KSIKICAgICAgICAgICAgZGF0YS10b29sdGlwPSJHcsOhZmljbyAoQ2hhcnQuanMpIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZWxlbWVudC1pY29uIGljb24tY2hhcnQiPvCfk4g8L2Rpdj4KICAgICAgICAgICAgPHNwYW4+R3LDoWZpY28gKENoYXJ0LmpzKTwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGNsYXNzPSJpbmZvLWJveCI+CiAgICAgICAgICA8aDM+Q29tbyB1c2FyOjwvaDM+CiAgICAgICAgICA8b2w+CiAgICAgICAgICAgIDxsaT5BcnJhc3RlIG9zIGVsZW1lbnRvczwvbGk+CiAgICAgICAgICAgIDxsaT5Db25maWd1cmUgYXMgcHJvcHJpZWRhZGVzPC9saT4KICAgICAgICAgICAgPGxpPkNvcGllIGUgdXNlPC9saT4KICAgICAgICAgIDwvb2w+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgoKICAgICAgPCEtLSBDYW52YXMgLS0+CiAgICAgIDxkaXYgY2xhc3M9ImNhbnZhcy1hcmVhIj4KICAgICAgICA8ZGl2IGNsYXNzPSJjYW52YXMtdG9vbHMiPgogICAgICAgICAgPGRpdiBjbGFzcz0iem9vbSI+CiAgICAgICAgICAgIDxzcGFuPlpvb208L3NwYW4+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Inpvb20tYnRuIiBpZD0iem9vbURlY3JlYXNlIiB0aXRsZT0iRGltaW51aXIgem9vbSI+4oiSPC9idXR0b24+CiAgICAgICAgICAgIDxpbnB1dCBpZD0iem9vbVJhbmdlIiB0eXBlPSJyYW5nZSIgbWluPSI1NSIgbWF4PSIxNDAiIHZhbHVlPSIxMDAiIC8+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Inpvb20tYnRuIiBpZD0iem9vbUluY3JlYXNlIiB0aXRsZT0iQXVtZW50YXIgem9vbSI+KzwvYnV0dG9uPgogICAgICAgICAgICA8c3BhbiBpZD0iem9vbUxhYmVsIj4xMDAlPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJjYW52YXMtdG9vbHMtcmlnaHQiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4iIGlkPSJzYXZlVGVtcGxhdGVCdG4iIHRpdGxlPSJTYWx2YXIgdGVtcGxhdGUgYXR1YWwiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+8J+SviBTYWx2YXIKICAgICAgICAgICAgICBUZW1wbGF0ZTwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4iIGlkPSJjbGVhckJ0biIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij5MaW1wYXI8L2J1dHRvbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImNhbnZhcy13cmFwcGVyIj4KICAgICAgICAgIDxkaXYgY2xhc3M9ImNhbnZhcyIgaWQ9ImNhbnZhcyIgb25kcm9wPSJoYW5kbGVEcm9wKGV2ZW50KSIgb25kcmFnb3Zlcj0iaGFuZGxlRHJhZ092ZXIoZXZlbnQpIgogICAgICAgICAgICBvbmRyYWdsZWF2ZT0iaGFuZGxlRHJhZ0xlYXZlKGV2ZW50KSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhbnZhcy1lbXB0eSIgaWQ9ImNhbnZhc0VtcHR5Ij4KICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPHA+QXJyYXN0ZSB1bSBncnVwbyBhcXVpPC9wPgogICAgICAgICAgICAgICAgPHA+cGFyYSBjb21lw6dhciBhIGNyaWFyIHNldSBQREY8L3A+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbGVtZW50cy1saXN0IiBpZD0iZWxlbWVudHNMaXN0IiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPjwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPCEtLSBDb2RlIFBhbmVsIC0gRm9yYSBkbyAubWFpbiBwYXJhIHNlciBpbmRlcGVuZGVudGUgLS0+CiAgICA8ZGl2IGNsYXNzPSJjb2RlLXBhbmVsIiBpZD0iY29kZVBhbmVsIj4KICAgICAgPGRpdiBjbGFzcz0iY29kZS1oZWFkZXIiIGlkPSJjb2RlUGFuZWxIZWFkZXIiPgogICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci10b3AiPgogICAgICAgICAgPGRpdiBjbGFzcz0iZWxlbWVudC10eXBlLXRpdGxlIiBpZD0iZWxlbWVudFR5cGVUaXRsZSI+VGlwbzwvZGl2PgogICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iY2xvc2UtcGFuZWwtYnRuIiBpZD0iY2xvc2VQYW5lbEJ0biIgb25jbGljaz0iY2xvc2VQYW5lbCgpIiB0aXRsZT0iRmVjaGFyIHBhaW5lbCI+CiAgICAgICAgICAgIDxzdmcgd2lkdGg9IjEyIiBoZWlnaHQ9IjE1IiB2aWV3Qm94PSIwIDAgMC43MiAwLjcyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgICAgICAgICAgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIKICAgICAgICAgICAgICBzdHlsZT0iZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgZmlsbDogI2VmNDQ0NCAhaW1wb3J0YW50OyB2aXNpYmlsaXR5OiB2aXNpYmxlICFpbXBvcnRhbnQ7IG9wYWNpdHk6IDEgIWltcG9ydGFudDsgd2lkdGg6IDI0cHggIWltcG9ydGFudDsgaGVpZ2h0OiAyNHB4ICFpbXBvcnRhbnQ7IG92ZXJmbG93OiB2aXNpYmxlICFpbXBvcnRhbnQ7Ij4KICAgICAgICAgICAgICA8cGF0aAogICAgICAgICAgICAgICAgZD0iTTAuNjE0IDAuMTA1YTAuMzU5IDAuMzU5IDAgMCAwIC0wLjI1NSAtMC4xMDVDMC4xNjEgMCAwIDAuMTYxIDAgMC4zNmMwIDAuMDk5IDAuMDQgMC4xODkgMC4xMDUgMC4yNTVBMC4zNTkgMC4zNTkgMCAwIDAgMC4zNiAwLjcyYzAuMTk5IDAgMC4zNiAtMC4xNjEgMC4zNiAtMC4zNiAwIC0wLjA5OSAtMC4wNCAtMC4xODkgLTAuMTA1IC0wLjI1NW0tMC4wNDYgMC40NjNhMC4yOTQgMC4yOTQgMCAwIDEgLTAuMjA4IDAuMDg2Yy0wLjE2MyAwIC0wLjI5NSAtMC4xMzIgLTAuMjk1IC0wLjI5NWEwLjI5NCAwLjI5NCAwIDAgMSAwLjA4NiAtMC4yMDggMC4yOTQgMC4yOTQgMCAwIDEgMC4yMDggLTAuMDg2YzAuMTYzIDAgMC4yOTUgMC4xMzIgMC4yOTUgMC4yOTVhMC4yOTQgMC4yOTQgMCAwIDEgLTAuMDg2IDAuMjA4eiIKICAgICAgICAgICAgICAgIGZpbGw9IiNlZjQ0NDQiCiAgICAgICAgICAgICAgICBzdHlsZT0iZmlsbDogI2VmNDQ0NCAhaW1wb3J0YW50OyB2aXNpYmlsaXR5OiB2aXNpYmxlICFpbXBvcnRhbnQ7IG9wYWNpdHk6IDEgIWltcG9ydGFudDsgc3Ryb2tlOiBub25lICFpbXBvcnRhbnQ7IiAvPgogICAgICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgICAgICBkPSJtMC40MDYgMC4zNiAwLjExNiAtMC4xMTZhMC4wMzMgMC4wMzMgMCAwIDAgLTAuMDQ2IC0wLjA0NmwwIDAgLTAuMTE2IDAuMTE2IC0wLjExNiAtMC4xMTZBMC4wMzMgMC4wMzMgMCAwIDAgMC4xOTggMC4yNDRsMCAwIDAuMTE2IDAuMTE2IC0wLjExNiAwLjExNmEwLjAzMyAwLjAzMyAwIDEgMCAwLjA0NiAwLjA0NmwwIDAgMC4xMTYgLTAuMTE2IDAuMTE2IDAuMTE2YTAuMDMzIDAuMDMzIDAgMSAwIDAuMDQ2IC0wLjA0NmwwIDB6IgogICAgICAgICAgICAgICAgZmlsbD0iI2VmNDQ0NCIKICAgICAgICAgICAgICAgIHN0eWxlPSJmaWxsOiAjZWY0NDQ0ICFpbXBvcnRhbnQ7IHZpc2liaWxpdHk6IHZpc2libGUgIWltcG9ydGFudDsgb3BhY2l0eTogMSAhaW1wb3J0YW50OyBzdHJva2U6IG5vbmUgIWltcG9ydGFudDsiIC8+CiAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgPC9idXR0b24+CgoKICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJ0YWJzIj4KICAgICAgICAgIDxidXR0b24gY2xhc3M9InRhYi1idG4gYWN0aXZlIiBpZD0idGFiRWRpdG9yIiBvbmNsaWNrPSJzd2l0Y2hUYWIoJ2VkaXRvcicpIj7impnvuI8gRWRpdG9yPC9idXR0b24+CiAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0YWItYnRuIiBpZD0idGFiUGFnZSIgb25jbGljaz0ic3dpdGNoVGFiKCdwYWdlJykiPvCfk4QgUMOhZ2luYTwvYnV0dG9uPgogICAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiLWJ0biIgaWQ9InRhYkNvZGUiIG9uY2xpY2s9InN3aXRjaFRhYignY29kZScpIj7wn5K7IEPDs2RpZ288L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CgogICAgICA8IS0tIEVkaXRvciBUYWIgLS0+CiAgICAgIDxkaXYgY2xhc3M9InRhYi1jb250ZW50IGFjdGl2ZSIgaWQ9InRhYkNvbnRlbnRFZGl0b3IiPgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3RvciIgaWQ9Imluc3BlY3RvciI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJtdXRlZCIgc3R5bGU9InBhZGRpbmc6IDFyZW07IHRleHQtYWxpZ246IGNlbnRlcjsiPgogICAgICAgICAgICBTZWxlY2lvbmUgdW0gZWxlbWVudG8gbm8gY2FudmFzIHBhcmEgZWRpdGFyIHN1YXMgcHJvcHJpZWRhZGVzLgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgoKICAgICAgPCEtLSBQYWdlIFRhYiAoY29tYmluZXMgVE9DLCBIZWFkZXIvRm9vdGVyLCBhbmQgV2F0ZXJtYXJrKSAtLT4KICAgICAgPGRpdiBjbGFzcz0idGFiLWNvbnRlbnQiIGlkPSJ0YWJDb250ZW50UGFnZSI+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yIiBpZD0icGFnZUluc3BlY3RvciIgc3R5bGU9InBhZGRpbmc6IDFyZW07Ij4KICAgICAgICAgIDwhLS0gU2Vyw6EgcHJlZW5jaGlkbyBkaW5hbWljYW1lbnRlIHBlbGEgZnVuw6fDo28gcmVuZGVyUGFnZUluc3BlY3RvciAtLT4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CgogICAgICA8IS0tIENvZGUgVGFiIC0tPgogICAgICA8ZGl2IGNsYXNzPSJ0YWItY29udGVudCIgaWQ9InRhYkNvbnRlbnRDb2RlIj4KICAgICAgICA8ZGl2IHN0eWxlPSJwYWRkaW5nOiAxcmVtOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2U1ZTdlYjsiPgogICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWNvcHkiIGlkPSJjb3B5QnRuIiBvbmNsaWNrPSJjb3B5Q29kZSgpIgogICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMCU7IHBhZGRpbmc6IDAuNzVyZW0gMXJlbTsgZm9udC1zaXplOiAxcmVtOyBib3JkZXItcmFkaXVzOiAwLjVyZW07Ij7wn5OLIENvcGlhcjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImNvZGUtZWRpdG9yIiBpZD0iY29kZUVkaXRvciI+Ly8gQWRpY2lvbmUgZWxlbWVudG9zIHBhcmEgZ2VyYXIgbyBjw7NkaWdvPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iY29kZS1pbnN0cnVjdGlvbnMiPgogICAgICAgICAgPHA+UGFyYSB1c2FyIGVzdGUgY8OzZGlnbzo8L3A+CiAgICAgICAgICA8b2w+CiAgICAgICAgICAgIDxsaT5Db3BpZSBvIGPDs2RpZ28gYWNpbWE8L2xpPgogICAgICAgICAgICA8bGk+Q29sZSBlbSBzZXUgcHJvamV0bzwvbGk+CiAgICAgICAgICAgIDxsaT5FeGVjdXRlIHBhcmEgZ2VyYXI8L2xpPgogICAgICAgICAgPC9vbD4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPCEtLSBNb2RhbCAtLT4KICA8ZGl2IGNsYXNzPSJtb2RhbCIgaWQ9Im1vZGFsIj4KICAgIDxkaXYgY2xhc3M9Im1vZGFsLWNvbnRlbnQiPgogICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1oZWFkZXIiPgogICAgICAgIDxoMz5Db25maWd1cmFyIEVsZW1lbnRvPC9oMz4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tY2xvc2UiIG9uY2xpY2s9ImNsb3NlTW9kYWwoKSI+4pyVPC9idXR0b24+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1ib2R5IiBpZD0ibW9kYWxCb2R5Ij48L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtZm9vdGVyIj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYXBwbHkiIG9uY2xpY2s9ImNsb3NlTW9kYWwoKSI+QXBsaWNhcjwvYnV0dG9uPgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2PgoKCiAgPHNjcmlwdD4KICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICAgKiBQREZNYWtlIFZpc3VhbCBFZGl0b3IgKE5lc3RlZCBjb250YWluZXJzKQogICAgICogLSBNYW50w6ltIG8gbGF5b3V0IGRvIGdlcmFkb3JfYXR1YWxpemFkby5odG1sCiAgICAgKiAtIEFkaWNpb25hIHN1cG9ydGUgYSAiZWxlbWVudG9zIGRlbnRybyBkZSBlbGVtZW50b3MiCiAgICAgKiAgIChHcm91cCAvIENvbHVtbnMgLyBMaXN0IC8gVGFibGUpIGNvbW8gbm8gaW5kZXguaHRtbAogICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIFN0YXRlCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgbGV0IGRyYWdnZWRUeXBlID0gbnVsbDsKCiAgICAvLyBFc3RydXR1cmEgZW0gw6Fydm9yZToKICAgIC8vIGVsZW1lbnRzID0gWyByb290R3JvdXAgXQogICAgbGV0IGVsZW1lbnRzID0gW107CiAgICBsZXQgc2VsZWN0ZWRFbGVtZW50SWQgPSBudWxsOwoKICAgIGxldCBvcmllbnRhdGlvbiA9ICdwb3J0cmFpdCc7CiAgICBsZXQgcGFnZVNpemUgPSAnQTQnOwogICAgbGV0IHBhZ2VNYXJnaW5zID0gWzQwLCA2MCwgNDAsIDYwXTsKICAgIGxldCB6b29tID0gMC45NTsKCiAgICAvLyBIZWFkZXJzICYgRm9vdGVycyAtIEFnb3JhIGNvbW8gY29udGFpbmVycyB2aXN1YWlzIG5vIGNhbnZhcwogICAgbGV0IGRvY3VtZW50SGVhZGVyID0gewogICAgICBlbmFibGVkOiBmYWxzZSwKICAgICAgcm9vdDogbnVsbCwgLy8gQ29udGFpbmVyIGdyb3VwIGNvbSBjaGlsZHJlbiAoY29tbyBlbGVtZW50cykKICAgICAgaGVpZ2h0OiA2MCAvLyBBbHR1cmEgZXN0aW1hZGEgcGFyYSBjw6FsY3VsbyBkZSBtYXJnaW5zCiAgICB9OwogICAgbGV0IGRvY3VtZW50Rm9vdGVyID0gewogICAgICBlbmFibGVkOiBmYWxzZSwKICAgICAgcm9vdDogbnVsbCwgLy8gQ29udGFpbmVyIGdyb3VwIGNvbSBjaGlsZHJlbiAoY29tbyBlbGVtZW50cykKICAgICAgaGVpZ2h0OiA2MCAvLyBBbHR1cmEgZXN0aW1hZGEgcGFyYSBjw6FsY3VsbyBkZSBtYXJnaW5zCiAgICB9OwoKICAgIC8vIFdhdGVybWFyayAoYXBlbmFzIHRleHRvIC0gUERGTWFrZSBuw6NvIHN1cG9ydGEgaW1hZ2VucykKICAgIGxldCBkb2N1bWVudFdhdGVybWFyayA9IG51bGw7IC8vIHsgdGV4dDogJycsIGZvbnRTaXplOiA0OCwgY29sb3I6ICcjY2NjY2NjJywgb3BhY2l0eTogMC4zLCBhbmdsZTogLTQ1IH0KCiAgICAvLyBUT0MgKFRhYmxlIG9mIENvbnRlbnRzKQogICAgbGV0IGRvY3VtZW50VE9DID0gbnVsbDsgLy8geyB0aXRsZTogJ8ONbmRpY2UnLCB0aXRsZVN0eWxlOiB7fSwgaXRlbVN0eWxlOiB7fSwgdGV4dFN0eWxlOiB7fSwgbnVtYmVyU3R5bGU6IHt9IH0KCiAgICAvLyBTZWN1cml0eQogICAgbGV0IGRvY3VtZW50U2VjdXJpdHkgPSBudWxsOyAvLyB7IHVzZXJQYXNzd29yZDogJycsIG93bmVyUGFzc3dvcmQ6ICcnLCBwZXJtaXNzaW9uczogeyBwcmludGluZzogdHJ1ZSwgbW9kaWZ5aW5nOiB0cnVlLCBjb3B5aW5nOiB0cnVlLCBhbm5vdGF0aW5nOiB0cnVlIH0gfQoKICAgIC8vIFBhZ2UgSW5mbyAoTWV0YWRhZG9zKSBlIENvbXByZXNzCiAgICBsZXQgZG9jdW1lbnRQYWdlSW5mbyA9IG51bGw7IC8vIHsgYXV0aG9yOiAnJywgdGl0bGU6ICcnLCBzdWJqZWN0OiAnJywga2V5d29yZHM6ICcnIH0KICAgIGxldCBkb2N1bWVudENvbXByZXNzID0gZmFsc2U7IC8vIHRydWUvZmFsc2UKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gU3VwYWJhc2UgLSBDb25maWd1cmHDp8OjbyBlIEF1dGVudGljYcOnw6NvCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgY29uc3QgU1VQQUJBU0VfVVJMID0gImh0dHBzOi8vY2tocWNvb3Vsa3VjeHBiY2NlYXQuc3VwYWJhc2UuY28iOwogICAgY29uc3QgU1VQQUJBU0VfQU5PTl9LRVkgPSAiZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlNJc0luSmxaaUk2SW1OcmFIRmpiMjkxYkd0MVkzaHdZbU5qWldGMElpd2ljbTlzWlNJNkltRnViMjRpTENKcFlYUWlPakUzTmpZNU5UUTNPVFFzSW1WNGNDSTZNakE0TWpVek1EYzVOSDAuT21kTHA1TmYyNjFCcVVkWlA2aWQtUXB5ZFByVHRQVUR0cWkzWWkyUFZYdyI7CgogICAgbGV0IHN1cGFiYXNlQ2xpZW50ID0gbnVsbDsgLy8gVXNhbmRvIG5vbWUgZGlmZXJlbnRlIHBhcmEgZXZpdGFyIGNvbmZsaXRvIGNvbSB2YXJpw6F2ZWwgZ2xvYmFsIGRvIFN1cGFiYXNlCiAgICBsZXQgY3VycmVudFVzZXIgPSBudWxsOwogICAgbGV0IGN1cnJlbnRQcm9maWxlID0gbnVsbDsKICAgIGxldCBjdXJyZW50SW5zdGFsbGF0aW9uID0gbnVsbDsKICAgIGxldCBjdXJyZW50VGVtcGxhdGVJZCA9IG51bGw7IC8vIElEIGRvIHRlbXBsYXRlIGNhcnJlZ2FkbyAobnVsbCA9IG5vdm8gdGVtcGxhdGUpCgogICAgLy8gSW5pY2lhbGl6YXIgU3VwYWJhc2UgcXVhbmRvIG8gc2NyaXB0IGNhcnJlZ2FyCiAgICBmdW5jdGlvbiBpbml0U3VwYWJhc2UoKSB7CiAgICAgIC8vIE8gU3VwYWJhc2UgSlMgdjIgZXhww7VlIGNyZWF0ZUNsaWVudCBubyBvYmpldG8gd2luZG93LnN1cGFiYXNlCiAgICAgIGlmICh0eXBlb2Ygd2luZG93LnN1cGFiYXNlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LnN1cGFiYXNlLmNyZWF0ZUNsaWVudCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHRyeSB7CiAgICAgICAgICBzdXBhYmFzZUNsaWVudCA9IHdpbmRvdy5zdXBhYmFzZS5jcmVhdGVDbGllbnQoU1VQQUJBU0VfVVJMLCBTVVBBQkFTRV9BTk9OX0tFWSk7CiAgICAgICAgICBjaGVja0F1dGgoKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBpbmljaWFsaXphciBTdXBhYmFzZTonLCBlcnJvcik7CiAgICAgICAgICBzaG93TG9naW5Nb2RhbCgpOyAvLyBNb3N0cmFyIG1vZGFsIG1lc21vIGNvbSBlcnJvCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlbnRhciBub3ZhbWVudGUgYXDDs3MgdW0gcGVxdWVubyBkZWxheSAobcOheGltbyAxMCB0ZW50YXRpdmFzKQogICAgICAgIGlmICh0eXBlb2YgaW5pdFN1cGFiYXNlLmF0dGVtcHRzID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgaW5pdFN1cGFiYXNlLmF0dGVtcHRzID0gMDsKICAgICAgICB9CiAgICAgICAgaW5pdFN1cGFiYXNlLmF0dGVtcHRzKys7CiAgICAgICAgaWYgKGluaXRTdXBhYmFzZS5hdHRlbXB0cyA8IDUwKSB7IC8vIDUgc2VndW5kb3MgbcOheGltbwogICAgICAgICAgc2V0VGltZW91dChpbml0U3VwYWJhc2UsIDEwMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RpbWVvdXQgYW8gY2FycmVnYXIgU3VwYWJhc2UnKTsKICAgICAgICAgIHNob3dMb2dpbk1vZGFsKCk7IC8vIE1vc3RyYXIgbW9kYWwgbWVzbW8gc2UgbsOjbyBjb25zZWd1aXIgY2FycmVnYXIKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICAvLyBBZ3VhcmRhciBjYXJyZWdhbWVudG8gZG8gc2NyaXB0IGRvIFN1cGFiYXNlCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHsKICAgICAgc2V0VGltZW91dChpbml0U3VwYWJhc2UsIDMwMCk7CiAgICB9KTsKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gTG9jYWxTdG9yYWdlIC0gQXV0by1zYXZlCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgY29uc3QgU1RPUkFHRV9LRVkgPSAncGRmbWFrZV9lZGl0b3Jfc3RhdGUnOwogICAgY29uc3QgU1RPUkFHRV9DT0RFX0tFWSA9ICdwZGZtYWtlX2VkaXRvcl9jb2RlJzsKCiAgICAvLyBTYWx2YXIgZXN0YWRvIGNvbXBsZXRvIG5vIGxvY2FsU3RvcmFnZQogICAgLy8gRnVuw6fDo28gcGFyYSByZW1vdmVyIHByb3ByaWVkYWRlcyBpbnRlcm5hcyAoY29tbyBfYmFzZTY0UHJldmlldykgYW50ZXMgZGUgc2FsdmFyCiAgICBmdW5jdGlvbiBjbGVhbkVsZW1lbnRzRm9yU3RvcmFnZShlbGVtZW50cykgewogICAgICBpZiAoIWVsZW1lbnRzIHx8ICFBcnJheS5pc0FycmF5KGVsZW1lbnRzKSkgcmV0dXJuIGVsZW1lbnRzOwoKICAgICAgcmV0dXJuIGVsZW1lbnRzLm1hcChlbCA9PiB7CiAgICAgICAgY29uc3QgY2xlYW5lZCA9IHsgLi4uZWwgfTsKICAgICAgICBpZiAoY2xlYW5lZC5wcm9wZXJ0aWVzKSB7CiAgICAgICAgICBjbGVhbmVkLnByb3BlcnRpZXMgPSB7IC4uLmNsZWFuZWQucHJvcGVydGllcyB9OwogICAgICAgICAgLy8gUmVtb3ZlciBfYmFzZTY0UHJldmlldyAoYXBlbmFzIHBhcmEgcHJldmlldyB2aXN1YWwpCiAgICAgICAgICBkZWxldGUgY2xlYW5lZC5wcm9wZXJ0aWVzLl9iYXNlNjRQcmV2aWV3OwoKICAgICAgICAgIC8vIExpbXBhciByZWN1cnNpdmFtZW50ZSBzZSBob3V2ZXIgY2hpbGRyZW4KICAgICAgICAgIGlmIChjbGVhbmVkLnByb3BlcnRpZXMuY2hpbGRyZW4gJiYgQXJyYXkuaXNBcnJheShjbGVhbmVkLnByb3BlcnRpZXMuY2hpbGRyZW4pKSB7CiAgICAgICAgICAgIGNsZWFuZWQucHJvcGVydGllcy5jaGlsZHJlbiA9IGNsZWFuRWxlbWVudHNGb3JTdG9yYWdlKGNsZWFuZWQucHJvcGVydGllcy5jaGlsZHJlbik7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gTGltcGFyIHJlY3Vyc2l2YW1lbnRlIHNlIGhvdXZlciBjb2x1bW5zCiAgICAgICAgICBpZiAoY2xlYW5lZC5wcm9wZXJ0aWVzLmNvbHVtbnMgJiYgQXJyYXkuaXNBcnJheShjbGVhbmVkLnByb3BlcnRpZXMuY29sdW1ucykpIHsKICAgICAgICAgICAgY2xlYW5lZC5wcm9wZXJ0aWVzLmNvbHVtbnMgPSBjbGVhbmVkLnByb3BlcnRpZXMuY29sdW1ucy5tYXAoY29sID0+IHsKICAgICAgICAgICAgICBpZiAoY29sLmNoaWxkcmVuICYmIEFycmF5LmlzQXJyYXkoY29sLmNoaWxkcmVuKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uY29sLCBjaGlsZHJlbjogY2xlYW5FbGVtZW50c0ZvclN0b3JhZ2UoY29sLmNoaWxkcmVuKSB9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gY29sOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBMaW1wYXIgcmVjdXJzaXZhbWVudGUgc2UgaG91dmVyIGl0ZW1zIChsaXN0YXMpCiAgICAgICAgICBpZiAoY2xlYW5lZC5wcm9wZXJ0aWVzLml0ZW1zICYmIEFycmF5LmlzQXJyYXkoY2xlYW5lZC5wcm9wZXJ0aWVzLml0ZW1zKSkgewogICAgICAgICAgICBjbGVhbmVkLnByb3BlcnRpZXMuaXRlbXMgPSBjbGVhbmVkLnByb3BlcnRpZXMuaXRlbXMubWFwKGl0ZW0gPT4gewogICAgICAgICAgICAgIGlmIChpdGVtLmtpbmQgPT09ICdub2RlJyAmJiBpdGVtLm5vZGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLml0ZW0sIG5vZGU6IGNsZWFuRWxlbWVudHNGb3JTdG9yYWdlKFtpdGVtLm5vZGVdKVswXSB9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gTGltcGFyIHJlY3Vyc2l2YW1lbnRlIHNlIGhvdXZlciBib2R5ICh0YWJlbGFzKQogICAgICAgICAgaWYgKGNsZWFuZWQucHJvcGVydGllcy5ib2R5ICYmIEFycmF5LmlzQXJyYXkoY2xlYW5lZC5wcm9wZXJ0aWVzLmJvZHkpKSB7CiAgICAgICAgICAgIGNsZWFuZWQucHJvcGVydGllcy5ib2R5ID0gY2xlYW5lZC5wcm9wZXJ0aWVzLmJvZHkubWFwKHJvdyA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIHJvdy5tYXAoY2VsbCA9PiB7CiAgICAgICAgICAgICAgICBpZiAoY2VsbCAmJiBjZWxsLmNoaWxkcmVuICYmIEFycmF5LmlzQXJyYXkoY2VsbC5jaGlsZHJlbikpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uY2VsbCwgY2hpbGRyZW46IGNsZWFuRWxlbWVudHNGb3JTdG9yYWdlKGNlbGwuY2hpbGRyZW4pIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gY2VsbDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBjbGVhbmVkOwogICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYXZlU3RhdGUoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgLy8gTGltcGFyIGVsZW1lbnRvcyByZW1vdmVuZG8gcHJvcHJpZWRhZGVzIGludGVybmFzIGFudGVzIGRlIHNhbHZhcgogICAgICAgIGNvbnN0IGNsZWFuZWRFbGVtZW50cyA9IGNsZWFuRWxlbWVudHNGb3JTdG9yYWdlKGVsZW1lbnRzKTsKCiAgICAgICAgY29uc3Qgc3RhdGUgPSB7CiAgICAgICAgICBlbGVtZW50czogY2xlYW5lZEVsZW1lbnRzLAogICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWQ6IHNlbGVjdGVkRWxlbWVudElkLAogICAgICAgICAgb3JpZW50YXRpb246IG9yaWVudGF0aW9uLAogICAgICAgICAgcGFnZVNpemU6IHBhZ2VTaXplLAogICAgICAgICAgcGFnZU1hcmdpbnM6IHBhZ2VNYXJnaW5zLAogICAgICAgICAgem9vbTogem9vbSwKICAgICAgICAgIGRvY3VtZW50SGVhZGVyOiBkb2N1bWVudEhlYWRlciwKICAgICAgICAgIGRvY3VtZW50Rm9vdGVyOiBkb2N1bWVudEZvb3RlciwKICAgICAgICAgIGRvY3VtZW50V2F0ZXJtYXJrOiBkb2N1bWVudFdhdGVybWFyaywKICAgICAgICAgIGRvY3VtZW50VE9DOiBkb2N1bWVudFRPQywKICAgICAgICAgIGRvY3VtZW50U2VjdXJpdHk6IGRvY3VtZW50U2VjdXJpdHksCiAgICAgICAgICBkb2N1bWVudFBhZ2VJbmZvOiBkb2N1bWVudFBhZ2VJbmZvLAogICAgICAgICAgZG9jdW1lbnRDb21wcmVzczogZG9jdW1lbnRDb21wcmVzcywKICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKQogICAgICAgIH07CgogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeShzdGF0ZSkpOwoKICAgICAgICAvLyBTYWx2YXIgdGFtYsOpbSBvIGPDs2RpZ28gZ2VyYWRvCiAgICAgICAgaWYgKGNvZGVFZGl0b3IgJiYgY29kZUVkaXRvci50ZXh0Q29udGVudCkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9DT0RFX0tFWSwgY29kZUVkaXRvci50ZXh0Q29udGVudCk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS53YXJuKCdFcnJvIGFvIHNhbHZhciBlc3RhZG8gbm8gbG9jYWxTdG9yYWdlOicsIGUpOwogICAgICB9CiAgICB9CgogICAgLy8gQ2FycmVnYXIgZXN0YWRvIGRvIGxvY2FsU3RvcmFnZQogICAgZnVuY3Rpb24gbG9hZFN0YXRlKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHNhdmVkU3RhdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSk7CiAgICAgICAgaWYgKCFzYXZlZFN0YXRlKSByZXR1cm4gZmFsc2U7CgogICAgICAgIGNvbnN0IHN0YXRlID0gSlNPTi5wYXJzZShzYXZlZFN0YXRlKTsKCiAgICAgICAgLy8gVmVyaWZpY2FyIHNlIG8gZXN0YWRvIGZvaSBsaW1wbyAoZWxlbWVudG9zIHZhemlvcykKICAgICAgICBpZiAoIXN0YXRlLmVsZW1lbnRzIHx8ICFBcnJheS5pc0FycmF5KHN0YXRlLmVsZW1lbnRzKSB8fCBzdGF0ZS5lbGVtZW50cy5sZW5ndGggPT09IDApIHsKICAgICAgICAgIC8vIFNlIGVsZW1lbnRvcyBlc3TDo28gdmF6aW9zLCBsaW1wYXIgZXN0YWRvIHNhbHZvIGUgbsOjbyBjYXJyZWdhcgogICAgICAgICAgY2xlYXJTYXZlZFN0YXRlKCk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAvLyBSZXN0YXVyYXIgZWxlbWVudG9zIChkZWVwIGNsb25lIHBhcmEgZXZpdGFyIHJlZmVyw6puY2lhcyBjb21wYXJ0aWxoYWRhcykKICAgICAgICBlbGVtZW50cyA9IGRlZXBDbG9uZShzdGF0ZS5lbGVtZW50cyk7CgogICAgICAgIC8vIFJlc3RhdXJhciBjb25maWd1cmHDp8O1ZXMgZ2xvYmFpcwogICAgICAgIGlmIChzdGF0ZS5zZWxlY3RlZEVsZW1lbnRJZCkgc2VsZWN0ZWRFbGVtZW50SWQgPSBzdGF0ZS5zZWxlY3RlZEVsZW1lbnRJZDsKICAgICAgICBlbHNlIHNlbGVjdGVkRWxlbWVudElkID0gbnVsbDsKICAgICAgICBpZiAoc3RhdGUub3JpZW50YXRpb24pIG9yaWVudGF0aW9uID0gc3RhdGUub3JpZW50YXRpb247CiAgICAgICAgaWYgKHN0YXRlLnBhZ2VTaXplKSBwYWdlU2l6ZSA9IHN0YXRlLnBhZ2VTaXplOwogICAgICAgIGlmIChzdGF0ZS5wYWdlTWFyZ2lucykgcGFnZU1hcmdpbnMgPSBzdGF0ZS5wYWdlTWFyZ2luczsKICAgICAgICBpZiAoc3RhdGUuem9vbSAhPT0gdW5kZWZpbmVkKSB6b29tID0gc3RhdGUuem9vbTsKCiAgICAgICAgLy8gUmVzdGF1cmFyIGhlYWRlci9mb290ZXIKICAgICAgICBpZiAoc3RhdGUuZG9jdW1lbnRIZWFkZXIpIHsKICAgICAgICAgIGRvY3VtZW50SGVhZGVyID0gc3RhdGUuZG9jdW1lbnRIZWFkZXI7CiAgICAgICAgICAvLyBHYXJhbnRpciBxdWUgcm9vdCBleGlzdGUKICAgICAgICAgIGlmICghZG9jdW1lbnRIZWFkZXIucm9vdCkgewogICAgICAgICAgICBkb2N1bWVudEhlYWRlci5yb290ID0gY3JlYXRlSGVhZGVyRm9vdGVyUm9vdCgpOwogICAgICAgICAgfQogICAgICAgICAgLy8gU2UgZW5hYmxlZCBtYXMgbsOjbyB0ZW0gY2hpbGRyZW4sIGRlc2FiaWxpdGFyCiAgICAgICAgICBpZiAoZG9jdW1lbnRIZWFkZXIuZW5hYmxlZCAmJiAoIWRvY3VtZW50SGVhZGVyLnJvb3QucHJvcGVydGllcy5jaGlsZHJlbiB8fCBkb2N1bWVudEhlYWRlci5yb290LnByb3BlcnRpZXMuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSkgewogICAgICAgICAgICBkb2N1bWVudEhlYWRlci5lbmFibGVkID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChzdGF0ZS5kb2N1bWVudEZvb3RlcikgewogICAgICAgICAgZG9jdW1lbnRGb290ZXIgPSBzdGF0ZS5kb2N1bWVudEZvb3RlcjsKICAgICAgICAgIC8vIEdhcmFudGlyIHF1ZSByb290IGV4aXN0ZQogICAgICAgICAgaWYgKCFkb2N1bWVudEZvb3Rlci5yb290KSB7CiAgICAgICAgICAgIGRvY3VtZW50Rm9vdGVyLnJvb3QgPSBjcmVhdGVIZWFkZXJGb290ZXJSb290KCk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBTZSBlbmFibGVkIG1hcyBuw6NvIHRlbSBjaGlsZHJlbiwgZGVzYWJpbGl0YXIKICAgICAgICAgIGlmIChkb2N1bWVudEZvb3Rlci5lbmFibGVkICYmICghZG9jdW1lbnRGb290ZXIucm9vdC5wcm9wZXJ0aWVzLmNoaWxkcmVuIHx8IGRvY3VtZW50Rm9vdGVyLnJvb3QucHJvcGVydGllcy5jaGlsZHJlbi5sZW5ndGggPT09IDApKSB7CiAgICAgICAgICAgIGRvY3VtZW50Rm9vdGVyLmVuYWJsZWQgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIFJlc3RhdXJhciB3YXRlcm1hcmsKICAgICAgICBpZiAoc3RhdGUuZG9jdW1lbnRXYXRlcm1hcmspIGRvY3VtZW50V2F0ZXJtYXJrID0gc3RhdGUuZG9jdW1lbnRXYXRlcm1hcms7CgogICAgICAgIC8vIFJlc3RhdXJhciBUT0MKICAgICAgICBpZiAoc3RhdGUuZG9jdW1lbnRUT0MpIGRvY3VtZW50VE9DID0gc3RhdGUuZG9jdW1lbnRUT0M7CgogICAgICAgIC8vIFJlc3RhdXJhciBTZWN1cml0eQogICAgICAgIGlmIChzdGF0ZS5kb2N1bWVudFNlY3VyaXR5KSBkb2N1bWVudFNlY3VyaXR5ID0gc3RhdGUuZG9jdW1lbnRTZWN1cml0eTsKCiAgICAgICAgLy8gUmVzdGF1cmFyIFBhZ2UgSW5mbwogICAgICAgIGlmIChzdGF0ZS5kb2N1bWVudFBhZ2VJbmZvKSBkb2N1bWVudFBhZ2VJbmZvID0gc3RhdGUuZG9jdW1lbnRQYWdlSW5mbzsKCiAgICAgICAgLy8gUmVzdGF1cmFyIENvbXByZXNzCiAgICAgICAgaWYgKHN0YXRlLmRvY3VtZW50Q29tcHJlc3MgIT09IHVuZGVmaW5lZCkgZG9jdW1lbnRDb21wcmVzcyA9IHN0YXRlLmRvY3VtZW50Q29tcHJlc3M7CgogICAgICAgIC8vIFJlc3RhdXJhciB2YWxvcmVzIG5vcyBpbnB1dHMgZG8gRE9NCiAgICAgICAgaWYgKHBhZ2VTaXplU2VsICYmIHN0YXRlLnBhZ2VTaXplKSBwYWdlU2l6ZVNlbC52YWx1ZSA9IHN0YXRlLnBhZ2VTaXplOwogICAgICAgIGlmIChvcmllbnRhdGlvblNlbCAmJiBzdGF0ZS5vcmllbnRhdGlvbikgb3JpZW50YXRpb25TZWwudmFsdWUgPSBzdGF0ZS5vcmllbnRhdGlvbjsKICAgICAgICBpZiAobUwgJiYgc3RhdGUucGFnZU1hcmdpbnMpIG1MLnZhbHVlID0gc3RhdGUucGFnZU1hcmdpbnNbMF07CiAgICAgICAgaWYgKG1UICYmIHN0YXRlLnBhZ2VNYXJnaW5zKSBtVC52YWx1ZSA9IHN0YXRlLnBhZ2VNYXJnaW5zWzFdOwogICAgICAgIGlmIChtUiAmJiBzdGF0ZS5wYWdlTWFyZ2lucykgbVIudmFsdWUgPSBzdGF0ZS5wYWdlTWFyZ2luc1syXTsKICAgICAgICBpZiAobUIgJiYgc3RhdGUucGFnZU1hcmdpbnMpIG1CLnZhbHVlID0gc3RhdGUucGFnZU1hcmdpbnNbM107CiAgICAgICAgaWYgKHpvb21SYW5nZSAmJiBzdGF0ZS56b29tICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHpvb21SYW5nZS52YWx1ZSA9IE1hdGgucm91bmQoc3RhdGUuem9vbSAqIDEwMCk7CiAgICAgICAgICBpZiAoem9vbUxhYmVsKSB6b29tTGFiZWwudGV4dENvbnRlbnQgPSBNYXRoLnJvdW5kKHN0YXRlLnpvb20gKiAxMDApICsgJyUnOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm8gYW8gY2FycmVnYXIgZXN0YWRvIGRvIGxvY2FsU3RvcmFnZTonLCBlKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KCiAgICAvLyBMaW1wYXIgZXN0YWRvIHNhbHZvCiAgICBmdW5jdGlvbiBjbGVhclNhdmVkU3RhdGUoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9LRVkpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfQ09ERV9LRVkpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS53YXJuKCdFcnJvIGFvIGxpbXBhciBlc3RhZG8gZG8gbG9jYWxTdG9yYWdlOicsIGUpOwogICAgICB9CiAgICB9CgogICAgLy8gR2V0IERPTSBlbGVtZW50cwogICAgY29uc3QgcGFnZVNpemVTZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGFnZVNpemUiKTsKICAgIGNvbnN0IG9yaWVudGF0aW9uU2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm9yaWVudGF0aW9uIik7CiAgICBjb25zdCBtTCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtTCIpOwogICAgY29uc3QgbVQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibVQiKTsKICAgIGNvbnN0IG1SID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1SIik7CiAgICBjb25zdCBtQiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtQiIpOwogICAgY29uc3Qgem9vbVJhbmdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInpvb21SYW5nZSIpOwogICAgY29uc3Qgem9vbUxhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInpvb21MYWJlbCIpOwogICAgLy8gY29uc3QgcHJldmlld0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwcmV2aWV3QnRuIik7CiAgICBjb25zdCBidWJibGVUZXN0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJ1YmJsZVRlc3RCdG4iKTsKICAgIGNvbnN0IGNsZWFyQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNsZWFyQnRuIik7CiAgICBjb25zdCBzYXZlVGVtcGxhdGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2F2ZVRlbXBsYXRlQnRuIik7CiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FudmFzIik7CiAgICBjb25zdCBjYW52YXNFbXB0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYW52YXNFbXB0eSIpOwogICAgY29uc3QgZWxlbWVudHNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVsZW1lbnRzTGlzdCIpOwoKICAgIC8vIENvZGUgcGFuZWwKICAgIGNvbnN0IGNvZGVFZGl0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29kZUVkaXRvciIpOwogICAgY29uc3QgY29weUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb3B5QnRuIik7CiAgICBjb25zdCBpbnNwZWN0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW5zcGVjdG9yIik7CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIEhlbHBlcnMKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBjb25zdCB1aWQgPSAoKSA9PiAiaWRfIiArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnNsaWNlKDIpICsgIl8iICsgRGF0ZS5ub3coKS50b1N0cmluZygxNik7CgogICAgLy8gRnVuw6fDo28gcGFyYSBjcmlhciByb290IGNvbnRhaW5lciBkZSBoZWFkZXIvZm9vdGVyCiAgICBmdW5jdGlvbiBjcmVhdGVIZWFkZXJGb290ZXJSb290KCkgewogICAgICByZXR1cm4gewogICAgICAgIGlkOiB1aWQoKSwKICAgICAgICB0eXBlOiAnZ3JvdXAnLAogICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgIG9yaWVudGF0aW9uOiAncm93JywKICAgICAgICAgIGNoaWxkcmVuOiBbXQogICAgICAgIH0sCiAgICAgICAgX3VpOiB7fQogICAgICB9OwogICAgfQoKICAgIC8vIEluaWNpYWxpemFyIHJvb3RzIGRlIGhlYWRlci9mb290ZXIgc2UgbsOjbyBleGlzdGlyZW0KICAgIGlmICghZG9jdW1lbnRIZWFkZXIucm9vdCkgewogICAgICBkb2N1bWVudEhlYWRlci5yb290ID0gY3JlYXRlSGVhZGVyRm9vdGVyUm9vdCgpOwogICAgfQogICAgaWYgKCFkb2N1bWVudEZvb3Rlci5yb290KSB7CiAgICAgIGRvY3VtZW50Rm9vdGVyLnJvb3QgPSBjcmVhdGVIZWFkZXJGb290ZXJSb290KCk7CiAgICB9CgogICAgZnVuY3Rpb24gZGVlcENsb25lKG9iaikgewogICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjbGFtcChuLCBhLCBiKSB7CiAgICAgIHJldHVybiBNYXRoLm1heChhLCBNYXRoLm1pbihiLCBuKSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Um9vdEdyb3VwKCkgewogICAgICByZXR1cm4gZWxlbWVudHMuZmluZChlID0+IGUudHlwZSA9PT0gJ2dyb3VwJykgfHwgbnVsbDsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0NvbnRhaW5lclR5cGUodHlwZSkgewogICAgICByZXR1cm4gWydncm91cCcsICdjb2x1bW5zJywgJ2xpc3QnLCAndGFibGUnXS5pbmNsdWRlcyh0eXBlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWZhdWx0RWxlbWVudCh0eXBlKSB7CiAgICAgIGNvbnN0IGlkID0gdWlkKCk7CiAgICAgIGNvbnN0IGJhc2UgPSB7IGlkLCB0eXBlLCBwcm9wZXJ0aWVzOiB7fSwgX3VpOiB7fSB9OwoKICAgICAgaWYgKHR5cGUgPT09ICdncm91cCcpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uYmFzZSwKICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgb3JpZW50YXRpb246ICdjb2x1bW4nLCAvLyBubyBlZGl0b3IgdmlzdWFsIChsYXlvdXQpCiAgICAgICAgICAgIGdhcDogMTAsCiAgICAgICAgICAgIGNoaWxkcmVuOiBbXQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGlmICh0eXBlID09PSAnaGVhZGVyJykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5iYXNlLAogICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICB0ZXh0OiAnQ2FiZcOnYWxobycsCiAgICAgICAgICAgIGZvbnRTaXplOiAxOCwKICAgICAgICAgICAgYm9sZDogdHJ1ZSwKICAgICAgICAgICAgYWxpZ25tZW50OiAnY2VudGVyJywKICAgICAgICAgICAgbWFyZ2luOiBbMCwgMCwgMCwgMTBdCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKHR5cGUgPT09ICd0ZXh0JykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5iYXNlLAogICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICB0ZXh0OiAnVGV4dG8uLi4nLAogICAgICAgICAgICBmb250U2l6ZTogMTQsCiAgICAgICAgICAgIGFsaWdubWVudDogJ2xlZnQnLAogICAgICAgICAgICBtYXJnaW46IFswLCAwLCAwLCAxMF0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAodHlwZSA9PT0gJ2ltYWdlJykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5iYXNlLAogICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICB1cmw6ICcnLAogICAgICAgICAgICB3aWR0aDogMjAwLAogICAgICAgICAgICBoZWlnaHQ6IDE1MCwKICAgICAgICAgICAgbWFyZ2luOiBbMCwgMCwgMCwgMTBdCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKHR5cGUgPT09ICdjb2x1bW5zJykgewogICAgICAgIGNvbnN0IGNvdW50ID0gMzsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uYmFzZSwKICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgY29sdW1uc0NvdW50OiBjb3VudCwKICAgICAgICAgICAgZ2FwOiAxMCwKICAgICAgICAgICAgLy8gY2FkYSBjb2x1bmEgdGVtIGNoaWxkcmVuCiAgICAgICAgICAgIGNvbHVtbnM6IEFycmF5LmZyb20oeyBsZW5ndGg6IGNvdW50IH0pLm1hcCgoKSA9PiAoeyB3aWR0aDogJyonLCBjaGlsZHJlbjogW10gfSkpLAogICAgICAgICAgICBtYXJnaW46IFswLCAwLCAwLCAxMF0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAodHlwZSA9PT0gJ2xpc3QnKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmJhc2UsCiAgICAgICAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgICAgIGxpc3RUeXBlOiAndWwnLCAvLyB1bHxvbAogICAgICAgICAgICAvLyBpdGVtczogYXJyYXkgZGUge2tpbmQ6J3RleHQnLCB0ZXh0fSBPVSB7a2luZDonbm9kZScsIG5vZGU6PGVsZW1lbnQ+fQogICAgICAgICAgICBpdGVtczogWwogICAgICAgICAgICAgIHsga2luZDogJ3RleHQnLCB0ZXh0OiAnSXRlbSAxJyB9LAogICAgICAgICAgICAgIHsga2luZDogJ3RleHQnLCB0ZXh0OiAnSXRlbSAyJyB9CiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIG1hcmdpbjogWzAsIDAsIDAsIDEwXQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGlmICh0eXBlID09PSAndGFibGUnKSB7CiAgICAgICAgLy8gVGVtcGxhdGUgb2ZpY2lhbDogNCBjb2x1bmFzLCAxIGhlYWRlclJvd3MsIDEgbGluaGEgZGUgZGFkb3MKICAgICAgICBjb25zdCBjb2xzID0gNDsKICAgICAgICBjb25zdCBoZWFkZXJSb3dzID0gMTsKCiAgICAgICAgLy8gQ3JpYXIgYm9keSBjb20gMiBsaW5oYXM6IGhlYWRlciArIGRhZG9zCiAgICAgICAgY29uc3QgYm9keSA9IFsKICAgICAgICAgIC8vIExpbmhhIDAgKGhlYWRlcik6IDQgY8OpbHVsYXMgY29tIHRleHQ6ICdDb2x1bmEgWCcsIGJvbGQ6IHRydWUsIGFsaWdubWVudDogJ2NlbnRlcicsIGZvbnRTaXplOiAxMAogICAgICAgICAgQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5tYXAoKF8sIGNvbElkeCkgPT4gKHsKICAgICAgICAgICAgY2hpbGRyZW46IFt7CiAgICAgICAgICAgICAgaWQ6IHVpZCgpLAogICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgICAgICAgICB0ZXh0OiBgQ29sdW5hICR7Y29sSWR4ICsgMX1gLAogICAgICAgICAgICAgICAgZm9udFNpemU6IDEwLAogICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSwKICAgICAgICAgICAgICAgIGFsaWdubWVudDogJ2NlbnRlcicKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIF91aToge30KICAgICAgICAgICAgfV0sCiAgICAgICAgICAgIGZvbnRTaXplOiAxMCwKICAgICAgICAgICAgYWxpZ25tZW50OiAnY2VudGVyJywKICAgICAgICAgICAgYm9sZDogdHJ1ZQogICAgICAgICAgfSkpLAogICAgICAgICAgLy8gTGluaGEgMSAoZGFkb3MpOiA0IGPDqWx1bGFzIGNvbSB0ZXh0OiAndGV4dG8gWCcsIGFsaWdubWVudDogJ2NlbnRlcicsIHZlcnRpY2FsQWxpZ25tZW50OiAnbWlkZGxlJywgZm9udFNpemU6IDkKICAgICAgICAgIEFycmF5LmZyb20oeyBsZW5ndGg6IGNvbHMgfSkubWFwKChfLCBjb2xJZHgpID0+ICh7CiAgICAgICAgICAgIGNoaWxkcmVuOiBbewogICAgICAgICAgICAgIGlkOiB1aWQoKSwKICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICAgICAgdGV4dDogYHRleHRvICR7Y29sSWR4ICsgMX1gLAogICAgICAgICAgICAgICAgZm9udFNpemU6IDksCiAgICAgICAgICAgICAgICBib2xkOiBmYWxzZSwKICAgICAgICAgICAgICAgIGFsaWdubWVudDogJ2NlbnRlcicKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIF91aToge30KICAgICAgICAgICAgfV0sCiAgICAgICAgICAgIGZvbnRTaXplOiA5LAogICAgICAgICAgICBhbGlnbm1lbnQ6ICdjZW50ZXInLAogICAgICAgICAgICB2ZXJ0aWNhbEFsaWdubWVudDogJ21pZGRsZScsCiAgICAgICAgICAgIGJvbGQ6IGZhbHNlCiAgICAgICAgICB9KSkKICAgICAgICBdOwoKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uYmFzZSwKICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgaGVhZGVyUm93czogaGVhZGVyUm93cywKICAgICAgICAgICAgd2lkdGhzOiBbNDAsICcqJywgNDAsICcqJ10sIC8vIFRlbXBsYXRlIG9maWNpYWw6IFs0MCwgJyonLCA0MCwgJyonXQogICAgICAgICAgICBib2R5OiBib2R5LAogICAgICAgICAgICBsYXlvdXQ6ICdjdXN0b20nLAogICAgICAgICAgICBjdXN0b21MYXlvdXQ6IHsKICAgICAgICAgICAgICAvLyBUZW1wbGF0ZSBvZmljaWFsOiBoTGluZVdpZHRoL3ZMaW5lV2lkdGg6IDAuNgogICAgICAgICAgICAgIGhMaW5lV2lkdGg6IDAuNiwKICAgICAgICAgICAgICB2TGluZVdpZHRoOiAwLjYsCiAgICAgICAgICAgICAgLy8gVGVtcGxhdGUgb2ZpY2lhbDogaExpbmVDb2xvci92TGluZUNvbG9yOiAnIzAwMCcKICAgICAgICAgICAgICBoTGluZUNvbG9yOiAnIzAwMCcsCiAgICAgICAgICAgICAgdkxpbmVDb2xvcjogJyMwMDAnLAogICAgICAgICAgICAgIC8vIFRlbXBsYXRlIG9maWNpYWw6IHBhZGRpbmdMZWZ0L1JpZ2h0ID0gNCwgcGFkZGluZ1RvcC9Cb3R0b20gPSAzCiAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6IDQsCiAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiA0LAogICAgICAgICAgICAgIHBhZGRpbmdUb3A6IDMsCiAgICAgICAgICAgICAgcGFkZGluZ0JvdHRvbTogMywKICAgICAgICAgICAgICAvLyBUZW1wbGF0ZSBvZmljaWFsOiBmaWxsQ29sb3Iocm93SW5kZXgpIGNvbSBjaW56YSAjRURFREVEIHNvbWVudGUgbm8gaGVhZGVyIChyb3dJbmRleCA9PT0gMCkKICAgICAgICAgICAgICBmaWxsQ29sb3I6IHRydWUgLy8gU2Vyw6EgdHJhdGFkbyBjb21vIGZ1bsOnw6NvIG5hIGdlcmHDp8OjbwogICAgICAgICAgICB9LAogICAgICAgICAgICBtYXJnaW46IFswLCAwLCAwLCAxMF0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAodHlwZSA9PT0gJ21hcmdpbicpIHsKICAgICAgICByZXR1cm4geyAuLi5iYXNlLCBwcm9wZXJ0aWVzOiB7IHNpemU6IDIwIH0gfTsKICAgICAgfQoKICAgICAgaWYgKHR5cGUgPT09ICdwYWdlQnJlYWsnKSB7CiAgICAgICAgcmV0dXJuIHsgLi4uYmFzZSwgcHJvcGVydGllczoge30gfTsKICAgICAgfQoKICAgICAgaWYgKHR5cGUgPT09ICdxcicpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uYmFzZSwKICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgdGV4dDogJ2h0dHBzOi8vZXhlbXBsby5jb20nLAogICAgICAgICAgICBmaXQ6IDEwMCwKICAgICAgICAgICAgZWNjTGV2ZWw6ICdNJywKICAgICAgICAgICAgZm9yZWdyb3VuZDogJyMwMDAwMDAnLAogICAgICAgICAgICBiYWNrZ3JvdW5kOiAnI2ZmZmZmZicsCiAgICAgICAgICAgIGFsaWdubWVudDogJ2NlbnRlcicsCiAgICAgICAgICAgIG1hcmdpbjogWzAsIDAsIDAsIDEwXQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGlmICh0eXBlID09PSAnc3ZnJykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5iYXNlLAogICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICBzdmc6ICc8c3ZnIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIj48Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSI0MCIgZmlsbD0iYmx1ZSIvPjwvc3ZnPicsCiAgICAgICAgICAgIHdpZHRoOiAxMDAsCiAgICAgICAgICAgIGhlaWdodDogMTAwLAogICAgICAgICAgICBjb2xvcjogJyMwMDAwMDAnLAogICAgICAgICAgICBhbGlnbm1lbnQ6ICdjZW50ZXInLAogICAgICAgICAgICBtYXJnaW46IFswLCAwLCAwLCAxMF0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAodHlwZSA9PT0gJ3N0YW1wJykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5iYXNlLAogICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICBzb3VyY2VUeXBlOiAnaW1hZ2UnLAogICAgICAgICAgICB2YWx1ZTogJycsCiAgICAgICAgICAgIGZpdDogWzEyMCwgMTIwXSwKICAgICAgICAgICAgYWxpZ25tZW50OiAnY2VudGVyJywKICAgICAgICAgICAgbWFyZ2luOiBbMCwgMCwgMCwgMTBdLAogICAgICAgICAgICBvcGFjaXR5OiAxCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKHR5cGUgPT09ICdjaGVja2JveCcpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uYmFzZSwKICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgY2hvaWNlVHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgY2hvaWNlVGV4dDogJ1RleHRvLi4uJywKICAgICAgICAgICAgY2hvaWNlQ2hlY2tlZDogZmFsc2UsCiAgICAgICAgICAgIGNob2ljZUljb25Qb3NpdGlvbjogJ2JlZm9yZScsCiAgICAgICAgICAgIGNob2ljZUdhcDogOCwKICAgICAgICAgICAgY2hvaWNlSWNvblNpemU6IDEyLAogICAgICAgICAgICBhbGlnbm1lbnQ6ICdsZWZ0JywKICAgICAgICAgICAgbWFyZ2luOiBbMCwgMCwgMCwgMTBdCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKHR5cGUgPT09ICdyYWRpbycpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uYmFzZSwKICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgY2hvaWNlVHlwZTogJ3JhZGlvJywKICAgICAgICAgICAgY2hvaWNlVGV4dDogJ1RleHRvLi4uJywKICAgICAgICAgICAgY2hvaWNlQ2hlY2tlZDogZmFsc2UsCiAgICAgICAgICAgIGNob2ljZUljb25Qb3NpdGlvbjogJ2JlZm9yZScsCiAgICAgICAgICAgIGNob2ljZUdhcDogOCwKICAgICAgICAgICAgY2hvaWNlSWNvblNpemU6IDEyLAogICAgICAgICAgICBhbGlnbm1lbnQ6ICdsZWZ0JywKICAgICAgICAgICAgbWFyZ2luOiBbMCwgMCwgMCwgMTBdCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKHR5cGUgPT09ICdmaWxsTGluZScpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uYmFzZSwKICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgbGluZVdpZHRoOiAyMDAsCiAgICAgICAgICAgIHRoaWNrbmVzczogMC44LAogICAgICAgICAgICBjb2xvcjogJyMwMDAwMDAnLAogICAgICAgICAgICBhbGlnbm1lbnQ6ICdsZWZ0JywKICAgICAgICAgICAgbWFyZ2luOiBbMCwgMCwgMCwgMTBdCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKHR5cGUgPT09ICdjaGFydCcpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uYmFzZSwKICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgY2hhcnRUeXBlOiAnYmFyJywKICAgICAgICAgICAgY2hhcnRXaWR0aDogNDAwLAogICAgICAgICAgICBjaGFydEhlaWdodDogMjAwLAogICAgICAgICAgICBjaGFydEZpdDogWzQwMCwgMjAwXSwKICAgICAgICAgICAgY2hhcnRCYWNrZ3JvdW5kQ29sb3I6ICcjRkZGRkZGJywKICAgICAgICAgICAgY2hhcnREZXZpY2VQaXhlbFJhdGlvOiAyLAogICAgICAgICAgICBjaGFydERhdGE6IHsKICAgICAgICAgICAgICBsYWJlbHM6IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heSddLAogICAgICAgICAgICAgIGRhdGFzZXRzOiBbewogICAgICAgICAgICAgICAgbGFiZWw6ICdEYXRhc2V0IDEnLAogICAgICAgICAgICAgICAgZGF0YTogWzEwLCAyMCwgMzAsIDQwLCA1MF0sCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDU0LCAxNjIsIDIzNSwgMC41KScsCiAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogJ3JnYmEoNTQsIDE2MiwgMjM1LCAxKScsCiAgICAgICAgICAgICAgICBib3JkZXJXaWR0aDogMQogICAgICAgICAgICAgIH1dCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNoYXJ0T3B0aW9uczogewogICAgICAgICAgICAgIHJlc3BvbnNpdmU6IGZhbHNlLAogICAgICAgICAgICAgIGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMCB9LAogICAgICAgICAgICAgIHNjYWxlczogewogICAgICAgICAgICAgICAgeTogeyBiZWdpbkF0WmVybzogdHJ1ZSB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBhbGlnbm1lbnQ6ICdjZW50ZXInLAogICAgICAgICAgICBtYXJnaW46IFswLCAwLCAwLCAxMF0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAodHlwZSA9PT0gJ2JhcmNvZGUnKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmJhc2UsCiAgICAgICAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgICAgIGJhcmNvZGVWYWx1ZTogJ0FCQzEyMzQ1Njc4OScsCiAgICAgICAgICAgIGZvcm1hdDogJ0NPREUxMjgnLAogICAgICAgICAgICBsaW5lV2lkdGg6IDEuNSwKICAgICAgICAgICAgYmFySGVpZ2h0OiAzMCwKICAgICAgICAgICAgZGlzcGxheVZhbHVlOiB0cnVlLAogICAgICAgICAgICBmb250U2l6ZTogMTAsCiAgICAgICAgICAgIGZpdDogWzIwMSwgNDJdLAogICAgICAgICAgICBhbGlnbm1lbnQ6ICdjZW50ZXInLAogICAgICAgICAgICB2ZXJ0aWNhbEFsaWdubWVudDogJ21pZGRsZScsCiAgICAgICAgICAgIG1hcmdpbjogWzAsIDAsIDAsIDEwXQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiBiYXNlOwogICAgfQoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBUcmVlIHRyYXZlcnNhbAogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHdhbGsobm9kZSwgZm4pIHsKICAgICAgaWYgKCFub2RlKSByZXR1cm47CiAgICAgIGZuKG5vZGUpOwoKICAgICAgaWYgKG5vZGUudHlwZSA9PT0gJ2dyb3VwJykgewogICAgICAgIChub2RlLnByb3BlcnRpZXMuY2hpbGRyZW4gfHwgW10pLmZvckVhY2goY2ggPT4gd2FsayhjaCwgZm4pKTsKICAgICAgfQoKICAgICAgaWYgKG5vZGUudHlwZSA9PT0gJ2NvbHVtbnMnKSB7CiAgICAgICAgKG5vZGUucHJvcGVydGllcy5jb2x1bW5zIHx8IFtdKS5mb3JFYWNoKGNvbCA9PiAoY29sLmNoaWxkcmVuIHx8IFtdKS5mb3JFYWNoKGNoID0+IHdhbGsoY2gsIGZuKSkpOwogICAgICB9CgogICAgICBpZiAobm9kZS50eXBlID09PSAnbGlzdCcpIHsKICAgICAgICAobm9kZS5wcm9wZXJ0aWVzLml0ZW1zIHx8IFtdKS5mb3JFYWNoKGl0ID0+IHsKICAgICAgICAgIGlmIChpdCAmJiBpdC5raW5kID09PSAnbm9kZScgJiYgaXQubm9kZSkgd2FsayhpdC5ub2RlLCBmbik7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChub2RlLnR5cGUgPT09ICd0YWJsZScpIHsKICAgICAgICAobm9kZS5wcm9wZXJ0aWVzLmJvZHkgfHwgW10pLmZvckVhY2gocm93ID0+IHJvdy5mb3JFYWNoKGNlbGwgPT4gKGNlbGwuY2hpbGRyZW4gfHwgW10pLmZvckVhY2goY2ggPT4gd2FsayhjaCwgZm4pKSkpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZmluZE5vZGVCeUlkKGlkKSB7CiAgICAgIC8vIFZlcmlmaWNhciBoZWFkZXIvZm9vdGVyIHByaW1laXJvCiAgICAgIGlmIChkb2N1bWVudEhlYWRlci5yb290ICYmIGRvY3VtZW50SGVhZGVyLnJvb3QuaWQgPT09IGlkKSByZXR1cm4gZG9jdW1lbnRIZWFkZXIucm9vdDsKICAgICAgaWYgKGRvY3VtZW50Rm9vdGVyLnJvb3QgJiYgZG9jdW1lbnRGb290ZXIucm9vdC5pZCA9PT0gaWQpIHJldHVybiBkb2N1bWVudEZvb3Rlci5yb290OwoKICAgICAgLy8gVmVyaWZpY2FyIGZpbGhvcyBkbyBoZWFkZXIKICAgICAgaWYgKGRvY3VtZW50SGVhZGVyLnJvb3QpIHsKICAgICAgICBsZXQgZm91bmQgPSBudWxsOwogICAgICAgIHdhbGsoZG9jdW1lbnRIZWFkZXIucm9vdCwgKG4pID0+IHsKICAgICAgICAgIGlmIChuLmlkID09PSBpZCkgZm91bmQgPSBuOwogICAgICAgIH0pOwogICAgICAgIGlmIChmb3VuZCkgcmV0dXJuIGZvdW5kOwogICAgICB9CgogICAgICAvLyBWZXJpZmljYXIgZmlsaG9zIGRvIGZvb3RlcgogICAgICBpZiAoZG9jdW1lbnRGb290ZXIucm9vdCkgewogICAgICAgIGxldCBmb3VuZCA9IG51bGw7CiAgICAgICAgd2Fsayhkb2N1bWVudEZvb3Rlci5yb290LCAobikgPT4gewogICAgICAgICAgaWYgKG4uaWQgPT09IGlkKSBmb3VuZCA9IG47CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGZvdW5kKSByZXR1cm4gZm91bmQ7CiAgICAgIH0KCiAgICAgIC8vIFZlcmlmaWNhciBjb250ZcO6ZG8gcHJpbmNpcGFsCiAgICAgIGNvbnN0IHJvb3QgPSBnZXRSb290R3JvdXAoKTsKICAgICAgaWYgKCFyb290KSByZXR1cm4gbnVsbDsKICAgICAgbGV0IGZvdW5kID0gbnVsbDsKICAgICAgd2Fsayhyb290LCAobikgPT4gewogICAgICAgIGlmIChuLmlkID09PSBpZCkgZm91bmQgPSBuOwogICAgICB9KTsKICAgICAgcmV0dXJuIGZvdW5kOwogICAgfQoKICAgIC8vIFJldG9ybmE6IHsgbm9kZSwgcGFyZW50LCBjdHggfQogICAgLy8gY3R4IGRlc2NyZXZlIG9uZGUgbyBub2RlIHZpdmUgbm8gcGFyZW50OgogICAgLy8gLSB7IGtpbmQ6J2dyb3VwQ2hpbGRyZW4nLCBpbmRleCB9CiAgICAvLyAtIHsga2luZDonY29sdW1ucycsIGNvbEluZGV4LCBpbmRleCB9CiAgICAvLyAtIHsga2luZDonbGlzdEl0ZW1zJywgaW5kZXggfQogICAgLy8gLSB7IGtpbmQ6J3RhYmxlQ2VsbCcsIHJvdywgY29sLCBpbmRleCB9CiAgICBmdW5jdGlvbiBmaW5kTm9kZVdpdGhQYXJlbnQoaWQpIHsKICAgICAgZnVuY3Rpb24gcmVjKG5vZGUsIHBhcmVudCkgewogICAgICAgIGlmICghbm9kZSkgcmV0dXJuIG51bGw7CgogICAgICAgIC8vIGdyb3VwIGNoaWxkcmVuCiAgICAgICAgaWYgKG5vZGUudHlwZSA9PT0gJ2dyb3VwJykgewogICAgICAgICAgY29uc3QgYXJyID0gbm9kZS5wcm9wZXJ0aWVzLmNoaWxkcmVuIHx8IFtdOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY29uc3QgY2ggPSBhcnJbaV07CiAgICAgICAgICAgIGlmIChjaC5pZCA9PT0gaWQpIHJldHVybiB7IG5vZGU6IGNoLCBwYXJlbnQ6IG5vZGUsIGN0eDogeyBraW5kOiAnZ3JvdXBDaGlsZHJlbicsIGluZGV4OiBpIH0gfTsKICAgICAgICAgICAgY29uc3QgciA9IHJlYyhjaCwgbm9kZSk7CiAgICAgICAgICAgIGlmIChyKSByZXR1cm4gcjsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIGNvbHVtbnMKICAgICAgICBpZiAobm9kZS50eXBlID09PSAnY29sdW1ucycpIHsKICAgICAgICAgIGNvbnN0IGNvbHMgPSBub2RlLnByb3BlcnRpZXMuY29sdW1ucyB8fCBbXTsKICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgY29scy5sZW5ndGg7IGMrKykgewogICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGNvbHNbY10uY2hpbGRyZW4gfHwgW107CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBjb25zdCBjaCA9IGNoaWxkcmVuW2ldOwogICAgICAgICAgICAgIGlmIChjaC5pZCA9PT0gaWQpIHJldHVybiB7IG5vZGU6IGNoLCBwYXJlbnQ6IG5vZGUsIGN0eDogeyBraW5kOiAnY29sdW1ucycsIGNvbEluZGV4OiBjLCBpbmRleDogaSB9IH07CiAgICAgICAgICAgICAgY29uc3QgciA9IHJlYyhjaCwgbm9kZSk7CiAgICAgICAgICAgICAgaWYgKHIpIHJldHVybiByOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBsaXN0CiAgICAgICAgaWYgKG5vZGUudHlwZSA9PT0gJ2xpc3QnKSB7CiAgICAgICAgICBjb25zdCBpdGVtcyA9IG5vZGUucHJvcGVydGllcy5pdGVtcyB8fCBbXTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY29uc3QgaXQgPSBpdGVtc1tpXTsKICAgICAgICAgICAgaWYgKGl0ICYmIGl0LmtpbmQgPT09ICdub2RlJyAmJiBpdC5ub2RlKSB7CiAgICAgICAgICAgICAgaWYgKGl0Lm5vZGUuaWQgPT09IGlkKSByZXR1cm4geyBub2RlOiBpdC5ub2RlLCBwYXJlbnQ6IG5vZGUsIGN0eDogeyBraW5kOiAnbGlzdEl0ZW1zJywgaW5kZXg6IGkgfSB9OwogICAgICAgICAgICAgIGNvbnN0IHIgPSByZWMoaXQubm9kZSwgbm9kZSk7CiAgICAgICAgICAgICAgaWYgKHIpIHJldHVybiByOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyB0YWJsZQogICAgICAgIGlmIChub2RlLnR5cGUgPT09ICd0YWJsZScpIHsKICAgICAgICAgIGNvbnN0IGJvZHkgPSBub2RlLnByb3BlcnRpZXMuYm9keSB8fCBbXTsKICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgYm9keS5sZW5ndGg7IHIrKykgewogICAgICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IGJvZHlbcl0ubGVuZ3RoOyBjKyspIHsKICAgICAgICAgICAgICBjb25zdCBjZWxsID0gYm9keVtyXVtjXTsKICAgICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IChjZWxsICYmIGNlbGwuY2hpbGRyZW4pID8gY2VsbC5jaGlsZHJlbiA6IFtdOwogICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IGNoID0gY2hpbGRyZW5baV07CiAgICAgICAgICAgICAgICBpZiAoY2guaWQgPT09IGlkKSByZXR1cm4geyBub2RlOiBjaCwgcGFyZW50OiBub2RlLCBjdHg6IHsga2luZDogJ3RhYmxlQ2VsbCcsIHJvdzogciwgY29sOiBjLCBpbmRleDogaSB9IH07CiAgICAgICAgICAgICAgICBjb25zdCByciA9IHJlYyhjaCwgbm9kZSk7CiAgICAgICAgICAgICAgICBpZiAocnIpIHJldHVybiBycjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICAvLyBWZXJpZmljYXIgaGVhZGVyCiAgICAgIGlmIChkb2N1bWVudEhlYWRlci5yb290KSB7CiAgICAgICAgaWYgKGRvY3VtZW50SGVhZGVyLnJvb3QuaWQgPT09IGlkKSB7CiAgICAgICAgICByZXR1cm4geyBub2RlOiBkb2N1bWVudEhlYWRlci5yb290LCBwYXJlbnQ6IG51bGwsIGN0eDogeyBraW5kOiAnaGVhZGVyUm9vdCcgfSB9OwogICAgICAgIH0KICAgICAgICBjb25zdCBoZWFkZXJSZXN1bHQgPSByZWMoZG9jdW1lbnRIZWFkZXIucm9vdCwgbnVsbCk7CiAgICAgICAgaWYgKGhlYWRlclJlc3VsdCkgcmV0dXJuIGhlYWRlclJlc3VsdDsKICAgICAgfQoKICAgICAgLy8gVmVyaWZpY2FyIGZvb3RlcgogICAgICBpZiAoZG9jdW1lbnRGb290ZXIucm9vdCkgewogICAgICAgIGlmIChkb2N1bWVudEZvb3Rlci5yb290LmlkID09PSBpZCkgewogICAgICAgICAgcmV0dXJuIHsgbm9kZTogZG9jdW1lbnRGb290ZXIucm9vdCwgcGFyZW50OiBudWxsLCBjdHg6IHsga2luZDogJ2Zvb3RlclJvb3QnIH0gfTsKICAgICAgICB9CiAgICAgICAgY29uc3QgZm9vdGVyUmVzdWx0ID0gcmVjKGRvY3VtZW50Rm9vdGVyLnJvb3QsIG51bGwpOwogICAgICAgIGlmIChmb290ZXJSZXN1bHQpIHJldHVybiBmb290ZXJSZXN1bHQ7CiAgICAgIH0KCiAgICAgIC8vIFZlcmlmaWNhciBjb250ZcO6ZG8gcHJpbmNpcGFsCiAgICAgIGNvbnN0IHJvb3QgPSBnZXRSb290R3JvdXAoKTsKICAgICAgaWYgKCFyb290KSByZXR1cm4gbnVsbDsKICAgICAgaWYgKHJvb3QuaWQgPT09IGlkKSByZXR1cm4geyBub2RlOiByb290LCBwYXJlbnQ6IG51bGwsIGN0eDogbnVsbCB9OwoKICAgICAgcmV0dXJuIHJlYyhyb290LCBudWxsKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWxldGVTZWxlY3RlZCgpIHsKICAgICAgaWYgKCFzZWxlY3RlZEVsZW1lbnRJZCkgcmV0dXJuOwogICAgICAvLyBJTVBPUlRBTlRFOiBSZXNldGFyIGNhY2hlIGUgcGVybWl0aXIgYWp1c3RlIGRlIHRhbWFuaG8gYXBlbmFzIHF1YW5kbyByZWFsbWVudGUgZGVsZXRhbW9zIHVtIGVsZW1lbnRvCiAgICAgIHJlc2V0Q2FudmFzU2l6ZUNhY2hlKCk7CiAgICAgIGFsbG93Q2FudmFzU2l6ZUFkanVzdCA9IHRydWU7IC8vIFBlcm1pdGlyIGFqdXN0ZSBhbyBkZWxldGFyIGVsZW1lbnRvCiAgICAgIGNvbnN0IGluZm8gPSBmaW5kTm9kZVdpdGhQYXJlbnQoc2VsZWN0ZWRFbGVtZW50SWQpOwogICAgICBpZiAoIWluZm8gfHwgIWluZm8ucGFyZW50KSB7CiAgICAgICAgLy8gTsOjbyBkZWxldGEgcm9vdCBkbyBoZWFkZXIvZm9vdGVyIG5lbSByb290IHByaW5jaXBhbAogICAgICAgIGlmIChpbmZvICYmIChpbmZvLmN0eD8ua2luZCA9PT0gJ2hlYWRlclJvb3QnIHx8IGluZm8uY3R4Py5raW5kID09PSAnZm9vdGVyUm9vdCcpKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgeyBwYXJlbnQsIGN0eCB9ID0gaW5mbzsKICAgICAgaWYgKCFjdHgpIHJldHVybjsKCiAgICAgIGlmIChjdHgua2luZCA9PT0gJ2dyb3VwQ2hpbGRyZW4nKSB7CiAgICAgICAgcGFyZW50LnByb3BlcnRpZXMuY2hpbGRyZW4uc3BsaWNlKGN0eC5pbmRleCwgMSk7CiAgICAgIH0gZWxzZSBpZiAoY3R4LmtpbmQgPT09ICdjb2x1bW5zJykgewogICAgICAgIHBhcmVudC5wcm9wZXJ0aWVzLmNvbHVtbnNbY3R4LmNvbEluZGV4XS5jaGlsZHJlbi5zcGxpY2UoY3R4LmluZGV4LCAxKTsKICAgICAgfSBlbHNlIGlmIChjdHgua2luZCA9PT0gJ2xpc3RJdGVtcycpIHsKICAgICAgICBwYXJlbnQucHJvcGVydGllcy5pdGVtcy5zcGxpY2UoY3R4LmluZGV4LCAxKTsKICAgICAgfSBlbHNlIGlmIChjdHgua2luZCA9PT0gJ3RhYmxlQ2VsbCcpIHsKICAgICAgICBwYXJlbnQucHJvcGVydGllcy5ib2R5W2N0eC5yb3ddW2N0eC5jb2xdLmNoaWxkcmVuLnNwbGljZShjdHguaW5kZXgsIDEpOwogICAgICB9CgogICAgICBzZWxlY3RlZEVsZW1lbnRJZCA9IHBhcmVudC5pZDsKICAgICAgcmVzZXRDYW52YXNTaXplQ2FjaGUoKTsKICAgICAgLy8gUmVuZGVyaXphciBwcmltZWlybyBzZW0gYWp1c3RhciB0YW1hbmhvCiAgICAgIHJlbmRlckFsbChmYWxzZSk7CiAgICAgIC8vIERlcG9pcywgcGVybWl0aXIgYWp1c3RlIGUgZmF6ZXIgYWp1c3RlIMO6bmljbyBhcMOzcyB1bSBkZWxheQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBhbGxvd0NhbnZhc1NpemVBZGp1c3QgPSB0cnVlOwogICAgICAgIHJlbmRlckFsbCh0cnVlKTsKICAgICAgICBhbGxvd0NhbnZhc1NpemVBZGp1c3QgPSBmYWxzZTsKICAgICAgICAvLyBBdHVhbGl6YXIgdmlzaWJpbGlkYWRlIGRvIGJvdMOjbyAiU2FsdmFyIFRlbXBsYXRlIgogICAgICAgIHVwZGF0ZVNhdmVUZW1wbGF0ZUJ1dHRvblZpc2liaWxpdHkoKTsKICAgICAgfSwgMTAwKTsKICAgICAgc2F2ZVN0YXRlKCk7CiAgICB9CgogICAgZnVuY3Rpb24gbW92ZU5vZGVVcERvd24obm9kZUlkLCBkaXIpIHsKICAgICAgY29uc3QgaW5mbyA9IGZpbmROb2RlV2l0aFBhcmVudChub2RlSWQpOwogICAgICBpZiAoIWluZm8gfHwgIWluZm8ucGFyZW50IHx8ICFpbmZvLmN0eCkgcmV0dXJuOwogICAgICBjb25zdCBjdHggPSBpbmZvLmN0eDsKCiAgICAgIGZ1bmN0aW9uIHN3YXAoYXJyLCBpLCBqKSB7CiAgICAgICAgaWYgKGkgPCAwIHx8IGogPCAwIHx8IGkgPj0gYXJyLmxlbmd0aCB8fCBqID49IGFyci5sZW5ndGgpIHJldHVybjsKICAgICAgICBjb25zdCB0bXAgPSBhcnJbaV07CiAgICAgICAgYXJyW2ldID0gYXJyW2pdOwogICAgICAgIGFycltqXSA9IHRtcDsKICAgICAgfQoKICAgICAgaWYgKGN0eC5raW5kID09PSAnZ3JvdXBDaGlsZHJlbicpIHsKICAgICAgICBzd2FwKGluZm8ucGFyZW50LnByb3BlcnRpZXMuY2hpbGRyZW4sIGN0eC5pbmRleCwgY3R4LmluZGV4ICsgZGlyKTsKICAgICAgfSBlbHNlIGlmIChjdHgua2luZCA9PT0gJ2NvbHVtbnMnKSB7CiAgICAgICAgc3dhcChpbmZvLnBhcmVudC5wcm9wZXJ0aWVzLmNvbHVtbnNbY3R4LmNvbEluZGV4XS5jaGlsZHJlbiwgY3R4LmluZGV4LCBjdHguaW5kZXggKyBkaXIpOwogICAgICB9IGVsc2UgaWYgKGN0eC5raW5kID09PSAnbGlzdEl0ZW1zJykgewogICAgICAgIHN3YXAoaW5mby5wYXJlbnQucHJvcGVydGllcy5pdGVtcywgY3R4LmluZGV4LCBjdHguaW5kZXggKyBkaXIpOwogICAgICB9IGVsc2UgaWYgKGN0eC5raW5kID09PSAndGFibGVDZWxsJykgewogICAgICAgIHN3YXAoaW5mby5wYXJlbnQucHJvcGVydGllcy5ib2R5W2N0eC5yb3ddW2N0eC5jb2xdLmNoaWxkcmVuLCBjdHguaW5kZXgsIGN0eC5pbmRleCArIGRpcik7CiAgICAgIH0KCiAgICAgIHJlc2V0Q2FudmFzU2l6ZUNhY2hlKCk7CiAgICAgIC8vIFJlbmRlcml6YXIgcHJpbWVpcm8gc2VtIGFqdXN0YXIgdGFtYW5obwogICAgICByZW5kZXJBbGwoZmFsc2UpOwogICAgICAvLyBEZXBvaXMsIHBlcm1pdGlyIGFqdXN0ZSBlIGZhemVyIGFqdXN0ZSDDum5pY28gYXDDs3MgdW0gZGVsYXkKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgYWxsb3dDYW52YXNTaXplQWRqdXN0ID0gdHJ1ZTsKICAgICAgICByZW5kZXJBbGwodHJ1ZSk7CiAgICAgICAgYWxsb3dDYW52YXNTaXplQWRqdXN0ID0gZmFsc2U7CiAgICAgIH0sIDEwMCk7CiAgICB9CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIERyYWcgYW5kIERyb3AKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBGdW7Dp8O1ZXMgZGUgZHJhZy1hbmQtZHJvcCAtIGRldmVtIGVzdGFyIGRpc3BvbsOtdmVpcyBnbG9iYWxtZW50ZSBBTlRFUyBkbyBIVE1MCiAgICAvLyBEZWZpbmlyIGltZWRpYXRhbWVudGUgbm8gd2luZG93IHBhcmEgZ2FyYW50aXIgZGlzcG9uaWJpbGlkYWRlCiAgICB3aW5kb3cuc3RhcnREcmFnID0gZnVuY3Rpb24gKHR5cGUsIGV2ZW50KSB7CiAgICAgIGlmICh0eXBlb2YgZHJhZ2dlZFR5cGUgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgZHJhZ2dlZFR5cGUgPSB0eXBlOwogICAgICB9CiAgICAgIGlmIChldmVudCAmJiBldmVudC5kYXRhVHJhbnNmZXIpIHsKICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgidGV4dC9wbGFpbiIsIHR5cGUpOwogICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gIm1vdmUiOwogICAgICB9CiAgICB9OwoKICAgIHdpbmRvdy5oYW5kbGVEcmFnT3ZlciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgY29uc3QgY2FudmFzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FudmFzIik7CiAgICAgIGlmIChjYW52YXNFbCkgY2FudmFzRWwuY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyJyk7CiAgICB9OwoKICAgIHdpbmRvdy5oYW5kbGVEcmFnTGVhdmUgPSBmdW5jdGlvbiAoZSkgewogICAgICBjb25zdCBjYW52YXNFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYW52YXMiKTsKICAgICAgaWYgKGNhbnZhc0VsICYmIGUudGFyZ2V0ID09PSBjYW52YXNFbCkgY2FudmFzRWwuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJyk7CiAgICB9OwoKICAgIC8vIE1hbnRlciByZWZlcsOqbmNpYXMgbG9jYWlzIHRhbWLDqW0KICAgIGZ1bmN0aW9uIHN0YXJ0RHJhZyh0eXBlLCBldmVudCkgewogICAgICB3aW5kb3cuc3RhcnREcmFnKHR5cGUsIGV2ZW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBoYW5kbGVEcmFnT3ZlcihlKSB7CiAgICAgIHdpbmRvdy5oYW5kbGVEcmFnT3ZlcihlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBoYW5kbGVEcmFnTGVhdmUoZSkgewogICAgICB3aW5kb3cuaGFuZGxlRHJhZ0xlYXZlKGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGhhbmRsZURyb3AoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIGlmIChjYW52YXMpIGNhbnZhcy5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLW92ZXInKTsKCiAgICAgIGNvbnN0IHR5cGUgPSAoZS5kYXRhVHJhbnNmZXIgJiYgZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgidGV4dC9wbGFpbiIpKSB8fCBkcmFnZ2VkVHlwZTsKICAgICAgaWYgKCF0eXBlKSByZXR1cm47CgogICAgICAvLyBQcmltZWlybyBlbGVtZW50byBURU0gcXVlIHNlciBncm91cCwgY29tbyBhbnRlcwogICAgICBpZiAoIWdldFJvb3RHcm91cCgpKSB7CiAgICAgICAgaWYgKHR5cGUgIT09ICdncm91cCcpIHsKICAgICAgICAgIGlmICh0eXBlb2Ygc2hvd0FsZXJ0TW9kYWwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgc2hvd0FsZXJ0TW9kYWwoCiAgICAgICAgICAgICAgJ0Vycm8gYW8gQWRpY2lvbmFyIEVsZW1lbnRvJywKICAgICAgICAgICAgICAnTyBwcmltZWlybyBlbGVtZW50byBubyBjYW52YXMgZGV2ZSBzZXIgdW0gR3J1cG8uXG5cblBvciBmYXZvciwgYXJyYXN0ZSB1bSBHcnVwbyBwcmltZWlybyBwYXJhIGNvbWXDp2FyIGEgY3JpYXIgc2V1IFBERi4nCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHJlc2V0Q2FudmFzU2l6ZUNhY2hlKCk7IC8vIFJlc2V0YXIgY2FjaGUgcXVhbmRvIGNvbnRlw7pkbyBtdWRhCiAgICAgICAgY29uc3QgZyA9IGRlZmF1bHRFbGVtZW50KCdncm91cCcpOwogICAgICAgIGVsZW1lbnRzID0gW2ddOwogICAgICAgIHNlbGVjdGVkRWxlbWVudElkID0gZy5pZDsKICAgICAgICAvLyBSZW5kZXJpemFyIHByaW1laXJvIHNlbSBhanVzdGFyIHRhbWFuaG8KICAgICAgICByZW5kZXJBbGwoZmFsc2UpOwogICAgICAgIC8vIERlcG9pcywgcGVybWl0aXIgYWp1c3RlIGUgZmF6ZXIgYWp1c3RlIMO6bmljbyBhcMOzcyB1bSBkZWxheQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgYWxsb3dDYW52YXNTaXplQWRqdXN0ID0gdHJ1ZTsKICAgICAgICAgIHJlbmRlckFsbCh0cnVlKTsKICAgICAgICAgIGFsbG93Q2FudmFzU2l6ZUFkanVzdCA9IGZhbHNlOwogICAgICAgIH0sIDEwMCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAvLyBTZSBjYWl1IG5vIGNhbnZhcyAoZm9yYSBkZSBxdWFscXVlciBkcm9wem9uZSksIGluc2VyZSBubyBncm91cCByb290CiAgICAgIGluc2VydEludG9UYXJnZXQoeyBraW5kOiAnZ3JvdXBDaGlsZHJlbicsIHRhcmdldElkOiBnZXRSb290R3JvdXAoKS5pZCB9LCB0eXBlKTsKICAgIH0KICAgIHdpbmRvdy5oYW5kbGVEcm9wID0gaGFuZGxlRHJvcDsKCiAgICBmdW5jdGlvbiBpbnNlcnRJbnRvVGFyZ2V0KHRhcmdldCwgdHlwZSkgewogICAgICByZXNldENhbnZhc1NpemVDYWNoZSgpOyAvLyBSZXNldGFyIGNhY2hlIHF1YW5kbyBjb250ZcO6ZG8gbXVkYQogICAgICBjb25zdCByb290ID0gZ2V0Um9vdEdyb3VwKCk7CiAgICAgIGNvbnN0IG5ld0VsID0gZGVmYXVsdEVsZW1lbnQodHlwZSk7CgogICAgICAvLyBWZXJpZmljYXIgc2Ugw6kgaGVhZGVyIG91IGZvb3RlcgogICAgICBpZiAodGFyZ2V0LnRhcmdldElkID09PSBkb2N1bWVudEhlYWRlci5yb290Py5pZCkgewogICAgICAgIGlmICghZG9jdW1lbnRIZWFkZXIucm9vdC5wcm9wZXJ0aWVzLmNoaWxkcmVuKSB7CiAgICAgICAgICBkb2N1bWVudEhlYWRlci5yb290LnByb3BlcnRpZXMuY2hpbGRyZW4gPSBbXTsKICAgICAgICB9CiAgICAgICAgZG9jdW1lbnRIZWFkZXIucm9vdC5wcm9wZXJ0aWVzLmNoaWxkcmVuLnB1c2gobmV3RWwpOwogICAgICAgIHNlbGVjdGVkRWxlbWVudElkID0gbmV3RWwuaWQ7CiAgICAgICAgLy8gUmVuZGVyaXphciBwcmltZWlybyBzZW0gYWp1c3RhciB0YW1hbmhvCiAgICAgICAgcmVuZGVyQWxsKGZhbHNlKTsKICAgICAgICAvLyBEZXBvaXMsIHBlcm1pdGlyIGFqdXN0ZSBlIGZhemVyIGFqdXN0ZSDDum5pY28gYXDDs3MgdW0gZGVsYXkKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIGFsbG93Q2FudmFzU2l6ZUFkanVzdCA9IHRydWU7CiAgICAgICAgICByZW5kZXJBbGwodHJ1ZSk7CiAgICAgICAgICBhbGxvd0NhbnZhc1NpemVBZGp1c3QgPSBmYWxzZTsKICAgICAgICB9LCAxMDApOwogICAgICAgIHNhdmVTdGF0ZSgpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRhcmdldC50YXJnZXRJZCA9PT0gZG9jdW1lbnRGb290ZXIucm9vdD8uaWQpIHsKICAgICAgICBpZiAoIWRvY3VtZW50Rm9vdGVyLnJvb3QucHJvcGVydGllcy5jaGlsZHJlbikgewogICAgICAgICAgZG9jdW1lbnRGb290ZXIucm9vdC5wcm9wZXJ0aWVzLmNoaWxkcmVuID0gW107CiAgICAgICAgfQogICAgICAgIGRvY3VtZW50Rm9vdGVyLnJvb3QucHJvcGVydGllcy5jaGlsZHJlbi5wdXNoKG5ld0VsKTsKICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZCA9IG5ld0VsLmlkOwogICAgICAgIC8vIFJlbmRlcml6YXIgcHJpbWVpcm8gc2VtIGFqdXN0YXIgdGFtYW5obwogICAgICAgIHJlbmRlckFsbChmYWxzZSk7CiAgICAgICAgLy8gRGVwb2lzLCBwZXJtaXRpciBhanVzdGUgZSBmYXplciBhanVzdGUgw7puaWNvIGFww7NzIHVtIGRlbGF5CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICBhbGxvd0NhbnZhc1NpemVBZGp1c3QgPSB0cnVlOwogICAgICAgICAgcmVuZGVyQWxsKHRydWUpOwogICAgICAgICAgYWxsb3dDYW52YXNTaXplQWRqdXN0ID0gZmFsc2U7CiAgICAgICAgfSwgMTAwKTsKICAgICAgICBzYXZlU3RhdGUoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIFJlZ3Jhczogc2UgdGFyZ2V0IGZvciB1bSBlbGVtZW50byBuw6NvLWNvbnRhaW5lciwgdGVudGEgdXNhciBvIHBhaSBkZWxlIGNvbW8gY29udGFpbmVyCiAgICAgIC8vIEFxdWkgdGFyZ2V0IGrDoSB2ZW0gY29tbyAiZHJvcHpvbmUiIGRlIGNvbnRhaW5lciwgZW50w6NvIMOpIHNlZ3Vyby4KICAgICAgaWYgKCFyb290KSByZXR1cm47CgogICAgICBpZiAodGFyZ2V0LmtpbmQgPT09ICdncm91cENoaWxkcmVuJykgewogICAgICAgIGNvbnN0IGdyb3VwID0gZmluZE5vZGVCeUlkKHRhcmdldC50YXJnZXRJZCk7CiAgICAgICAgaWYgKCFncm91cCB8fCBncm91cC50eXBlICE9PSAnZ3JvdXAnKSByZXR1cm47CiAgICAgICAgZ3JvdXAucHJvcGVydGllcy5jaGlsZHJlbi5wdXNoKG5ld0VsKTsKICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZCA9IG5ld0VsLmlkOwogICAgICB9CgogICAgICBpZiAodGFyZ2V0LmtpbmQgPT09ICdjb2x1bW5zQ29sJykgewogICAgICAgIGNvbnN0IGNvbHVtbnNOb2RlID0gZmluZE5vZGVCeUlkKHRhcmdldC50YXJnZXRJZCk7CiAgICAgICAgaWYgKCFjb2x1bW5zTm9kZSB8fCBjb2x1bW5zTm9kZS50eXBlICE9PSAnY29sdW1ucycpIHJldHVybjsKICAgICAgICBjb25zdCBjb2xJbmRleCA9IGNsYW1wKE51bWJlcih0YXJnZXQuY29sSW5kZXggfHwgMCksIDAsIChjb2x1bW5zTm9kZS5wcm9wZXJ0aWVzLmNvbHVtbnMgfHwgW10pLmxlbmd0aCAtIDEpOwogICAgICAgIGNvbHVtbnNOb2RlLnByb3BlcnRpZXMuY29sdW1uc1tjb2xJbmRleF0uY2hpbGRyZW4ucHVzaChuZXdFbCk7CiAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWQgPSBuZXdFbC5pZDsKICAgICAgfQoKICAgICAgaWYgKHRhcmdldC5raW5kID09PSAnbGlzdEl0ZW1zJykgewogICAgICAgIC8vIEFkaWNpb25hciBub3ZvIGl0ZW0gw6AgbGlzdGEgKHF1YW5kbyBzb2x0byBubyBjb250YWluZXIsIG7Do28gZW0gdW0gaXRlbSBlc3BlY8OtZmljbykKICAgICAgICBjb25zdCBsaXN0Tm9kZSA9IGZpbmROb2RlQnlJZCh0YXJnZXQudGFyZ2V0SWQpOwogICAgICAgIGlmICghbGlzdE5vZGUgfHwgbGlzdE5vZGUudHlwZSAhPT0gJ2xpc3QnKSByZXR1cm47CiAgICAgICAgbGlzdE5vZGUucHJvcGVydGllcy5pdGVtcy5wdXNoKHsga2luZDogJ25vZGUnLCBub2RlOiBuZXdFbCB9KTsKICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZCA9IG5ld0VsLmlkOwogICAgICB9CgogICAgICBpZiAodGFyZ2V0LmtpbmQgPT09ICdsaXN0SXRlbVJlcGxhY2UnKSB7CiAgICAgICAgLy8gU3Vic3RpdHVpciBpdGVtIGV4aXN0ZW50ZSBuYSBsaXN0YSAocXVhbmRvIHNvbHRvIGVtIHVtIGl0ZW0gZXNwZWPDrWZpY28pCiAgICAgICAgY29uc3QgbGlzdE5vZGUgPSBmaW5kTm9kZUJ5SWQodGFyZ2V0LnRhcmdldElkKTsKICAgICAgICBpZiAoIWxpc3ROb2RlIHx8IGxpc3ROb2RlLnR5cGUgIT09ICdsaXN0JykgcmV0dXJuOwogICAgICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRhcmdldC5pdGVtSW5kZXggIT09IHVuZGVmaW5lZCA/IE51bWJlcih0YXJnZXQuaXRlbUluZGV4KSA6IC0xOwogICAgICAgIGlmIChpdGVtSW5kZXggPj0gMCAmJiBpdGVtSW5kZXggPCBsaXN0Tm9kZS5wcm9wZXJ0aWVzLml0ZW1zLmxlbmd0aCkgewogICAgICAgICAgLy8gU3Vic3RpdHVpciBvIGl0ZW0gZXhpc3RlbnRlCiAgICAgICAgICBsaXN0Tm9kZS5wcm9wZXJ0aWVzLml0ZW1zW2l0ZW1JbmRleF0gPSB7IGtpbmQ6ICdub2RlJywgbm9kZTogbmV3RWwgfTsKICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkID0gbmV3RWwuaWQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIEZhbGxiYWNrOiBhZGljaW9uYXIgbm92byBpdGVtIHNlIMOtbmRpY2UgaW52w6FsaWRvCiAgICAgICAgICBsaXN0Tm9kZS5wcm9wZXJ0aWVzLml0ZW1zLnB1c2goeyBraW5kOiAnbm9kZScsIG5vZGU6IG5ld0VsIH0pOwogICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWQgPSBuZXdFbC5pZDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0YXJnZXQua2luZCA9PT0gJ3RhYmxlQ2VsbCcpIHsKICAgICAgICBjb25zdCB0YWJsZU5vZGUgPSBmaW5kTm9kZUJ5SWQodGFyZ2V0LnRhcmdldElkKTsKICAgICAgICBpZiAoIXRhYmxlTm9kZSB8fCB0YWJsZU5vZGUudHlwZSAhPT0gJ3RhYmxlJykgcmV0dXJuOwogICAgICAgIGNvbnN0IHIgPSBjbGFtcChOdW1iZXIodGFyZ2V0LnJvdyB8fCAwKSwgMCwgKHRhYmxlTm9kZS5wcm9wZXJ0aWVzLmJvZHkgfHwgW10pLmxlbmd0aCAtIDEpOwogICAgICAgIGNvbnN0IGMgPSBjbGFtcChOdW1iZXIodGFyZ2V0LmNvbCB8fCAwKSwgMCwgKHRhYmxlTm9kZS5wcm9wZXJ0aWVzLmJvZHlbcl0gfHwgW10pLmxlbmd0aCAtIDEpOwoKICAgICAgICAvLyBWZXJpZmljYXIgc2Ugw6kgaGVhZGVyIG91IGJvZHkgKGJhc2VhZG8gZW0gaGVhZGVyUm93cykKICAgICAgICBjb25zdCBoZWFkZXJSb3dzID0gdGFibGVOb2RlLnByb3BlcnRpZXMuaGVhZGVyUm93cyB8fCAxOwogICAgICAgIGNvbnN0IGlzSGVhZGVyUm93ID0gciA8IGhlYWRlclJvd3M7CgogICAgICAgIC8vIFNlIG8gZWxlbWVudG8gaW5zZXJpZG8gw6kgdGV4dG8sIGFwbGljYXIgcHJvcHJpZWRhZGVzIGVzcGVjw61maWNhcyBkYSB0YWJlbGEKICAgICAgICBpZiAobmV3RWwudHlwZSA9PT0gJ3RleHQnKSB7CiAgICAgICAgICBpZiAoaXNIZWFkZXJSb3cpIHsKICAgICAgICAgICAgLy8gSGVhZGVyOiBmb250U2l6ZTogMTAsIGJvbGQ6IHRydWUsIGFsaWdubWVudDogJ2NlbnRlcicKICAgICAgICAgICAgbmV3RWwucHJvcGVydGllcy5mb250U2l6ZSA9IDEwOwogICAgICAgICAgICBuZXdFbC5wcm9wZXJ0aWVzLmJvbGQgPSB0cnVlOwogICAgICAgICAgICBuZXdFbC5wcm9wZXJ0aWVzLmFsaWdubWVudCA9ICdjZW50ZXInOwogICAgICAgICAgICAvLyBBcGxpY2FyIHRhbWLDqW0gbmEgY8OpbHVsYQogICAgICAgICAgICBpZiAoIXRhYmxlTm9kZS5wcm9wZXJ0aWVzLmJvZHlbcl1bY10uZm9udFNpemUpIHsKICAgICAgICAgICAgICB0YWJsZU5vZGUucHJvcGVydGllcy5ib2R5W3JdW2NdLmZvbnRTaXplID0gMTA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRhYmxlTm9kZS5wcm9wZXJ0aWVzLmJvZHlbcl1bY10uYm9sZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgdGFibGVOb2RlLnByb3BlcnRpZXMuYm9keVtyXVtjXS5ib2xkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXRhYmxlTm9kZS5wcm9wZXJ0aWVzLmJvZHlbcl1bY10uYWxpZ25tZW50KSB7CiAgICAgICAgICAgICAgdGFibGVOb2RlLnByb3BlcnRpZXMuYm9keVtyXVtjXS5hbGlnbm1lbnQgPSAnY2VudGVyJzsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gQm9keTogZm9udFNpemU6IDksIGJvbGQ6IGZhbHNlLCBhbGlnbm1lbnQ6ICdjZW50ZXInLCB2ZXJ0aWNhbEFsaWdubWVudDogJ21pZGRsZScKICAgICAgICAgICAgbmV3RWwucHJvcGVydGllcy5mb250U2l6ZSA9IDk7CiAgICAgICAgICAgIG5ld0VsLnByb3BlcnRpZXMuYm9sZCA9IGZhbHNlOwogICAgICAgICAgICBuZXdFbC5wcm9wZXJ0aWVzLmFsaWdubWVudCA9ICdjZW50ZXInOwogICAgICAgICAgICAvLyBBcGxpY2FyIHRhbWLDqW0gbmEgY8OpbHVsYQogICAgICAgICAgICBpZiAoIXRhYmxlTm9kZS5wcm9wZXJ0aWVzLmJvZHlbcl1bY10uZm9udFNpemUpIHsKICAgICAgICAgICAgICB0YWJsZU5vZGUucHJvcGVydGllcy5ib2R5W3JdW2NdLmZvbnRTaXplID0gOTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGFibGVOb2RlLnByb3BlcnRpZXMuYm9keVtyXVtjXS5ib2xkID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICB0YWJsZU5vZGUucHJvcGVydGllcy5ib2R5W3JdW2NdLmJvbGQgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXRhYmxlTm9kZS5wcm9wZXJ0aWVzLmJvZHlbcl1bY10uYWxpZ25tZW50KSB7CiAgICAgICAgICAgICAgdGFibGVOb2RlLnByb3BlcnRpZXMuYm9keVtyXVtjXS5hbGlnbm1lbnQgPSAnY2VudGVyJzsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyB2ZXJ0aWNhbEFsaWdubWVudCBkZXZlIGVzdGFyIG5hIGPDqWx1bGEsIG7Do28gbm8gdGV4dG8KICAgICAgICAgICAgaWYgKCF0YWJsZU5vZGUucHJvcGVydGllcy5ib2R5W3JdW2NdLnZlcnRpY2FsQWxpZ25tZW50KSB7CiAgICAgICAgICAgICAgdGFibGVOb2RlLnByb3BlcnRpZXMuYm9keVtyXVtjXS52ZXJ0aWNhbEFsaWdubWVudCA9ICdtaWRkbGUnOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB0YWJsZU5vZGUucHJvcGVydGllcy5ib2R5W3JdW2NdLmNoaWxkcmVuLnB1c2gobmV3RWwpOwogICAgICAgIHNlbGVjdGVkRWxlbWVudElkID0gbmV3RWwuaWQ7CiAgICAgIH0KCiAgICAgIC8vIFJlbmRlcml6YXIgcHJpbWVpcm8gc2VtIGFqdXN0YXIgdGFtYW5obwogICAgICByZW5kZXJBbGwoZmFsc2UpOwogICAgICAvLyBEZXBvaXMsIHBlcm1pdGlyIGFqdXN0ZSBlIGZhemVyIGFqdXN0ZSDDum5pY28gYXDDs3MgdW0gZGVsYXkgcGFyYSBnYXJhbnRpciBxdWUgRE9NIGVzdMOhIHByb250bwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBhbGxvd0NhbnZhc1NpemVBZGp1c3QgPSB0cnVlOwogICAgICAgIHJlbmRlckFsbCh0cnVlKTsKICAgICAgICBhbGxvd0NhbnZhc1NpemVBZGp1c3QgPSBmYWxzZTsKICAgICAgfSwgMTAwKTsKICAgICAgc2F2ZVN0YXRlKCk7CiAgICB9CgogICAgLy8gZHJvcHpvbmUgaGFuZGxlcnMgKGRlbGVnYcOnw6NvKQogICAgZnVuY3Rpb24gb25Ecm9wWm9uZU92ZXIoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIGNvbnN0IGR6ID0gZS5jdXJyZW50VGFyZ2V0OwogICAgICBkei5jbGFzc0xpc3QuYWRkKCdkcmFnLW92ZXInKTsKICAgIH0KICAgIGZ1bmN0aW9uIG9uRHJvcFpvbmVMZWF2ZShlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgY29uc3QgZHogPSBlLmN1cnJlbnRUYXJnZXQ7CiAgICAgIGR6LmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3ZlcicpOwogICAgfQogICAgZnVuY3Rpb24gb25Ecm9wWm9uZURyb3AoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIGNvbnN0IGR6ID0gZS5jdXJyZW50VGFyZ2V0OwogICAgICBkei5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLW92ZXInKTsKCiAgICAgIC8vIFJlbW92ZXIgZmVlZGJhY2sgdmlzdWFsIHNlIGZvciB1bSBpdGVtIGRlIGxpc3RhCiAgICAgIGlmIChkei50YWdOYW1lID09PSAnTEknICYmIGR6LnN0eWxlLmJhY2tncm91bmRDb2xvcikgewogICAgICAgIGR6LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcnOwogICAgICAgIGR6LnN0eWxlLmJvcmRlckNvbG9yID0gJyM5Y2EzYWYnOwogICAgICB9CgogICAgICBjb25zdCB0eXBlID0gKGUuZGF0YVRyYW5zZmVyICYmIGUuZGF0YVRyYW5zZmVyLmdldERhdGEoInRleHQvcGxhaW4iKSkgfHwgZHJhZ2dlZFR5cGU7CiAgICAgIGlmICghdHlwZSkgcmV0dXJuOwoKICAgICAgY29uc3Qga2luZCA9IGR6LmdldEF0dHJpYnV0ZSgnZGF0YS1kcm9wLWtpbmQnKTsKICAgICAgY29uc3QgdGFyZ2V0SWQgPSBkei5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFyZ2V0LWlkJyk7CiAgICAgIGNvbnN0IGNvbEluZGV4ID0gZHouZ2V0QXR0cmlidXRlKCdkYXRhLWNvbC1pbmRleCcpOwogICAgICBjb25zdCByb3cgPSBkei5nZXRBdHRyaWJ1dGUoJ2RhdGEtcm93Jyk7CiAgICAgIGNvbnN0IGNvbCA9IGR6LmdldEF0dHJpYnV0ZSgnZGF0YS1jb2wnKTsKICAgICAgY29uc3QgaXRlbUluZGV4ID0gZHouZ2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0taW5kZXgnKTsgLy8gUGFyYSBzdWJzdGl0dWlyIGl0ZW0gZGUgbGlzdGEKCiAgICAgIGluc2VydEludG9UYXJnZXQoeyBraW5kLCB0YXJnZXRJZCwgY29sSW5kZXgsIHJvdywgY29sLCBpdGVtSW5kZXggfSwgdHlwZSk7CiAgICB9CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIFJlbmRlcmluZwogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAvLyBGdW7Dp8OjbyBwYXJhIGNvbnZlcnRlciBVUkwgZGUgaW1hZ2VtIHBhcmEgYmFzZTY0IChhcGVuYXMgcGFyYSBwcmV2aWV3IHZpc3VhbCkKICAgIGFzeW5jIGZ1bmN0aW9uIGNvbnZlcnRJbWFnZVVybFRvQmFzZTY0KHVybCkgewogICAgICB0cnkgewogICAgICAgIC8vIFNlIGrDoSBmb3IgYmFzZTY0LCByZXRvcm5hciBjb21vIGVzdMOhCiAgICAgICAgaWYgKHVybC5zdGFydHNXaXRoKCdkYXRhOmltYWdlLycpKSB7CiAgICAgICAgICByZXR1cm4gdXJsOwogICAgICAgIH0KCiAgICAgICAgLy8gRmF6ZXIgZmV0Y2ggZGEgaW1hZ2VtCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpOwogICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCBlcnJvciEgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7CgogICAgICAgIC8vIENvbnZlcnRlciBibG9iIHBhcmEgYmFzZTY0CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICByZWFkZXIub25sb2FkZW5kID0gKCkgPT4gewogICAgICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpOwogICAgICAgICAgfTsKICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gcmVqZWN0OwogICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS53YXJuKCdFcnJvIGFvIGNvbnZlcnRlciBpbWFnZW0gcGFyYSBiYXNlNjQ6JywgZXJyb3IpOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYXBwbHlab29tKCkgewogICAgICBjb25zdCB6ID0gem9vbTsKICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpOwogICAgICBpZiAoY2FudmFzKSB7CiAgICAgICAgY2FudmFzLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9ICd0b3AgY2VudGVyJzsKICAgICAgICBjYW52YXMuc3R5bGUudHJhbnNmb3JtID0gYHNjYWxlKCR7en0pYDsKICAgICAgfQogICAgICAvLyBSZW1vdmVyIHRyYW5zZm9ybSBkbyBlbGVtZW50c0xpc3QgcGFyYSBldml0YXIgZHVwbGljYcOnw6NvCiAgICAgIGlmIChlbGVtZW50c0xpc3QpIHsKICAgICAgICBlbGVtZW50c0xpc3Quc3R5bGUudHJhbnNmb3JtID0gJyc7CiAgICAgICAgZWxlbWVudHNMaXN0LnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9ICcnOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZWxlbWVudExhYmVsKGVsKSB7CiAgICAgIGNvbnN0IG1hcCA9IHsKICAgICAgICBncm91cDogJ0dydXBvJywKICAgICAgICBoZWFkZXI6ICdDYWJlw6dhbGhvJywKICAgICAgICB0ZXh0OiAnVGV4dG8nLAogICAgICAgIGltYWdlOiAnSW1hZ2VtJywKICAgICAgICB0YWJsZTogJ1RhYmVsYScsCiAgICAgICAgY29sdW1uczogJ0NvbHVuYXMnLAogICAgICAgIGxpc3Q6ICdMaXN0YScsCiAgICAgICAgbWFyZ2luOiAnRXNwYcOnbycsCiAgICAgICAgcGFnZUJyZWFrOiAnUXVlYnJhIFDDoWdpbmEnCiAgICAgIH07CiAgICAgIHJldHVybiBtYXBbZWwudHlwZV0gfHwgZWwudHlwZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVDb250cm9scyhlbCkgewogICAgICBjb25zdCBjb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBjb250cm9scy5jbGFzc05hbWUgPSAnZWxlbWVudC1jb250cm9scyc7CiAgICAgIGNvbnRyb2xzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIHJldHVybiBjb250cm9sczsKICAgIH0KICAgIGZ1bmN0aW9uIHJlbmRlckVsZW1lbnRSZWN1cnNpdmUoZWwpIHsKICAgICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICB3cmFwcGVyLmNsYXNzTmFtZSA9ICdlbGVtZW50LWl0ZW0nOwogICAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGVsLmlkKTsKICAgICAgd3JhcHBlci5kcmFnZ2FibGUgPSBmYWxzZTsKCiAgICAgIGlmIChlbC50eXBlID09PSAnZ3JvdXAnKSB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnQtZ3JvdXAnKTsKICAgICAgaWYgKGVsLnR5cGUgPT09ICdpbWFnZScpIHsKICAgICAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnQtaW1hZ2UnKTsKICAgICAgICAvLyBBcGxpY2FyIHBvc2ljaW9uYW1lbnRvIGFic29sdXRvL3JlbGF0aXZvIG5vIHdyYXBwZXIgcHJpbmNpcGFsIHNlIGV4aXN0aXIKICAgICAgICBpZiAoZWwucHJvcGVydGllcy5hYnNvbHV0ZVBvc2l0aW9uKSB7CiAgICAgICAgICB3cmFwcGVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJzsKICAgICAgICAgIHdyYXBwZXIuc3R5bGUubGVmdCA9IGAke2VsLnByb3BlcnRpZXMuYWJzb2x1dGVQb3NpdGlvbi54IHx8IDB9cHhgOwogICAgICAgICAgd3JhcHBlci5zdHlsZS50b3AgPSBgJHtlbC5wcm9wZXJ0aWVzLmFic29sdXRlUG9zaXRpb24ueSB8fCAwfXB4YDsKICAgICAgICAgIHdyYXBwZXIuc3R5bGUuekluZGV4ID0gJzEwJzsKICAgICAgICB9IGVsc2UgaWYgKGVsLnByb3BlcnRpZXMucmVsYXRpdmVQb3NpdGlvbikgewogICAgICAgICAgd3JhcHBlci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7CiAgICAgICAgICB3cmFwcGVyLnN0eWxlLmxlZnQgPSBgJHtlbC5wcm9wZXJ0aWVzLnJlbGF0aXZlUG9zaXRpb24ueCB8fCAwfXB4YDsKICAgICAgICAgIHdyYXBwZXIuc3R5bGUudG9wID0gYCR7ZWwucHJvcGVydGllcy5yZWxhdGl2ZVBvc2l0aW9uLnkgfHwgMH1weGA7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoZWwuaWQgPT09IHNlbGVjdGVkRWxlbWVudElkKSB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7CgogICAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2KSA9PiB7CiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgc2VsZWN0RWxlbWVudChlbC5pZCk7CiAgICAgIH0pOwoKICAgICAgLy8gKFVJKSBjb250cm9sZXMgaW5saW5lIGRlc2FiaWxpdGFkb3M6IGVkacOnw6NvL3JlbW/Dp8OjbyBhcGVuYXMgdmlhIHBhaW5lbCBFZGl0b3IKICAgICAgLy8gUHJldmlldyBjb250ZW50CiAgICAgIGNvbnN0IHByZXZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgcHJldmlldy5jbGFzc05hbWUgPSAnZWxlbWVudC1wcmV2aWV3JzsKCiAgICAgIC8vIC0tLSBUeXBlcyAtLS0KICAgICAgaWYgKGVsLnR5cGUgPT09ICdncm91cCcpIHsKICAgICAgICBjb25zdCBjaGlsZFdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBjaGlsZFdyYXAuY2xhc3NOYW1lID0gJ2dyb3VwLWNoaWxkcmVuICcgKyAoZWwucHJvcGVydGllcy5vcmllbnRhdGlvbiA9PT0gJ3JvdycgPyAnb3JpZW50YXRpb24tcm93JyA6ICdvcmllbnRhdGlvbi1jb2x1bW4nKTsKCiAgICAgICAgLy8gZHJvcHpvbmUgZG8gZ3JvdXAgKGNoaWxkcmVuKQogICAgICAgIGNoaWxkV3JhcC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZHJvcC1raW5kJywgJ2dyb3VwQ2hpbGRyZW4nKTsKICAgICAgICBjaGlsZFdyYXAuc2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldC1pZCcsIGVsLmlkKTsKICAgICAgICBjaGlsZFdyYXAuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBvbkRyb3Bab25lT3Zlcik7CiAgICAgICAgY2hpbGRXcmFwLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIG9uRHJvcFpvbmVMZWF2ZSk7CiAgICAgICAgY2hpbGRXcmFwLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBvbkRyb3Bab25lRHJvcCk7CgogICAgICAgIGNvbnN0IGNoaWxkcmVuID0gZWwucHJvcGVydGllcy5jaGlsZHJlbiB8fCBbXTsKICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBjb25zdCBwaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgcGguY2xhc3NOYW1lID0gJ2dyb3VwLXBsYWNlaG9sZGVyJzsKICAgICAgICAgIHBoLnRleHRDb250ZW50ID0gJ0FycmFzdGUgZWxlbWVudG9zIGFxdWknOwogICAgICAgICAgY2hpbGRXcmFwLmFwcGVuZENoaWxkKHBoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChjaCA9PiB7CiAgICAgICAgICAgIGNvbnN0IGNoaWxkQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIC8vY2hpbGRCb3guY2xhc3NOYW1lID0gJ2dyb3VwLWNoaWxkLWl0ZW0nOwoKICAgICAgICAgICAgY2hpbGRCb3guY2xhc3NOYW1lID0gJ2dyb3VwLWNoaWxkLXNlbS1hYmFzJzsKICAgICAgICAgICAgLy8gbm8gbW9kbyByb3csIGV2aXRhICJlc3RvdXJhciIgZSByZXNwZWl0YSBhIHDDoWdpbmEKICAgICAgICAgICAgaWYgKGVsLnByb3BlcnRpZXMub3JpZW50YXRpb24gPT09ICdyb3cnKSB7CiAgICAgICAgICAgICAgY2hpbGRCb3guc3R5bGUuZmxleCA9ICcxIDEgMCc7CiAgICAgICAgICAgICAgY2hpbGRCb3guc3R5bGUubWluV2lkdGggPSAnMCc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY2hpbGRCb3guc3R5bGUud2lkdGggPSAnMTAwJSc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2hpbGRCb3guYXBwZW5kQ2hpbGQocmVuZGVyRWxlbWVudFJlY3Vyc2l2ZShjaCkpOwogICAgICAgICAgICBjaGlsZFdyYXAuYXBwZW5kQ2hpbGQoY2hpbGRCb3gpOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBwcmV2aWV3LmFwcGVuZENoaWxkKGNoaWxkV3JhcCk7CiAgICAgIH0KICAgICAgZWxzZSBpZiAoZWwudHlwZSA9PT0gJ2hlYWRlcicpIHsKICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ3ByZXZpZXctaGVhZGVyJzsKICAgICAgICBkaXYudGV4dENvbnRlbnQgPSBlbC5wcm9wZXJ0aWVzLnRleHQgfHwgJ0NhYmXDp2FsaG8nOwogICAgICAgIGRpdi5zdHlsZS50ZXh0QWxpZ24gPSAoZWwucHJvcGVydGllcy5hbGlnbm1lbnQgfHwgJ2NlbnRlcicpOwogICAgICAgIGlmIChlbC5wcm9wZXJ0aWVzLmNvbG9yKSBkaXYuc3R5bGUuY29sb3IgPSBlbC5wcm9wZXJ0aWVzLmNvbG9yOwogICAgICAgIGlmIChlbC5wcm9wZXJ0aWVzLmJhY2tncm91bmQpIGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBlbC5wcm9wZXJ0aWVzLmJhY2tncm91bmQ7CiAgICAgICAgaWYgKGVsLnByb3BlcnRpZXMuZm9udFNpemUpIGRpdi5zdHlsZS5mb250U2l6ZSA9IGAke2VsLnByb3BlcnRpZXMuZm9udFNpemV9cHhgOwogICAgICAgIGlmIChlbC5wcm9wZXJ0aWVzLmJvbGQpIGRpdi5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnOwogICAgICAgIGlmIChlbC5wcm9wZXJ0aWVzLmRlY29yYXRpb24gPT09ICd1bmRlcmxpbmUnKSBkaXYuc3R5bGUudGV4dERlY29yYXRpb24gPSAndW5kZXJsaW5lJzsKICAgICAgICBpZiAoZWwucHJvcGVydGllcy5kZWNvcmF0aW9uID09PSAnbGluZVRocm91Z2gnKSBkaXYuc3R5bGUudGV4dERlY29yYXRpb24gPSAnbGluZS10aHJvdWdoJzsKICAgICAgICBpZiAoZWwucHJvcGVydGllcy5kZWNvcmF0aW9uID09PSAnb3ZlcmxpbmUnKSBkaXYuc3R5bGUudGV4dERlY29yYXRpb24gPSAnb3ZlcmxpbmUnOwogICAgICAgIGlmIChlbC5wcm9wZXJ0aWVzLmxpbmspIHsKICAgICAgICAgIGRpdi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7CiAgICAgICAgICBkaXYuc3R5bGUudGV4dERlY29yYXRpb24gPSAndW5kZXJsaW5lJzsKICAgICAgICAgIGRpdi5zdHlsZS5jb2xvciA9IGVsLnByb3BlcnRpZXMuY29sb3IgfHwgJyMwMDY2Y2MnOwogICAgICAgICAgZGl2LnRpdGxlID0gYExpbms6ICR7ZWwucHJvcGVydGllcy5saW5rfWA7CiAgICAgICAgfQogICAgICAgIHByZXZpZXcuYXBwZW5kQ2hpbGQoZGl2KTsKICAgICAgfQogICAgICBlbHNlIGlmIChlbC50eXBlID09PSAndGV4dCcpIHsKICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ3ByZXZpZXctdGV4dCc7CiAgICAgICAgbGV0IHRleHRDb250ZW50ID0gZWwucHJvcGVydGllcy50ZXh0IHx8ICdUZXh0by4uLic7CiAgICAgICAgLy8gU2UgZXN0aXZlciBlbSBoZWFkZXIvZm9vdGVyIGUgdGl2ZXIgcGxhY2Vob2xkZXJzLCBtb3N0cmFyIGV4ZW1wbG8gbm8gcHJldmlldwogICAgICAgIGNvbnN0IGlzSW5IZWFkZXIgPSBpc0VsZW1lbnRJbkhlYWRlcihlbC5pZCk7CiAgICAgICAgY29uc3QgaXNJbkZvb3RlciA9IGlzRWxlbWVudEluRm9vdGVyKGVsLmlkKTsKICAgICAgICBpZiAoKGlzSW5IZWFkZXIgfHwgaXNJbkZvb3RlcikgJiYgdGV4dENvbnRlbnQuaW5jbHVkZXMoJ3t7JykpIHsKICAgICAgICAgIHRleHRDb250ZW50ID0gdGV4dENvbnRlbnQKICAgICAgICAgICAgLnJlcGxhY2UoL1x7XHtwYWdlTnVtYmVyXH1cfS9nLCAnMScpCiAgICAgICAgICAgIC5yZXBsYWNlKC9ce1x7dG90YWxQYWdlc1x9XH0vZywgJzEwJyk7CiAgICAgICAgfQogICAgICAgIGRpdi50ZXh0Q29udGVudCA9IHRleHRDb250ZW50OwogICAgICAgIGRpdi5zdHlsZS50ZXh0QWxpZ24gPSAoZWwucHJvcGVydGllcy5hbGlnbm1lbnQgfHwgJ2xlZnQnKTsKICAgICAgICBpZiAoZWwucHJvcGVydGllcy5jb2xvcikgZGl2LnN0eWxlLmNvbG9yID0gZWwucHJvcGVydGllcy5jb2xvcjsKICAgICAgICBpZiAoZWwucHJvcGVydGllcy5iYWNrZ3JvdW5kKSBkaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZWwucHJvcGVydGllcy5iYWNrZ3JvdW5kOwogICAgICAgIGlmIChlbC5wcm9wZXJ0aWVzLmZvbnRTaXplKSBkaXYuc3R5bGUuZm9udFNpemUgPSBgJHtlbC5wcm9wZXJ0aWVzLmZvbnRTaXplfXB4YDsKICAgICAgICBpZiAoZWwucHJvcGVydGllcy5ib2xkKSBkaXYuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJzsKICAgICAgICBpZiAoZWwucHJvcGVydGllcy5pdGFsaWNzKSBkaXYuc3R5bGUuZm9udFN0eWxlID0gJ2l0YWxpYyc7CiAgICAgICAgaWYgKGVsLnByb3BlcnRpZXMuZGVjb3JhdGlvbiA9PT0gJ3VuZGVybGluZScpIGRpdi5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICd1bmRlcmxpbmUnOwogICAgICAgIGlmIChlbC5wcm9wZXJ0aWVzLmRlY29yYXRpb24gPT09ICdsaW5lVGhyb3VnaCcpIGRpdi5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdsaW5lLXRocm91Z2gnOwogICAgICAgIGlmIChlbC5wcm9wZXJ0aWVzLmRlY29yYXRpb24gPT09ICdvdmVybGluZScpIGRpdi5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdvdmVybGluZSc7CiAgICAgICAgaWYgKGVsLnByb3BlcnRpZXMubGluaykgewogICAgICAgICAgZGl2LnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJzsKICAgICAgICAgIGRpdi5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICd1bmRlcmxpbmUnOwogICAgICAgICAgZGl2LnN0eWxlLmNvbG9yID0gZWwucHJvcGVydGllcy5jb2xvciB8fCAnIzAwNjZjYyc7CiAgICAgICAgICBkaXYudGl0bGUgPSBgTGluazogJHtlbC5wcm9wZXJ0aWVzLmxpbmt9YDsKICAgICAgICB9CiAgICAgICAgcHJldmlldy5hcHBlbmRDaGlsZChkaXYpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKGVsLnR5cGUgPT09ICdpbWFnZScpIHsKICAgICAgICBjb25zdCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBib3guY2xhc3NOYW1lID0gJ3ByZXZpZXctaW1hZ2UnOwogICAgICAgIGNvbnN0IHVybCA9IGVsLnByb3BlcnRpZXMudXJsIHx8ICcnOwogICAgICAgIGNvbnN0IGJvcmRlclJhZGl1cyA9IGVsLnByb3BlcnRpZXMuYm9yZGVyUmFkaXVzIHx8IDA7CiAgICAgICAgY29uc3Qgb3BhY2l0eSA9IGVsLnByb3BlcnRpZXMub3BhY2l0eSAhPT0gdW5kZWZpbmVkID8gZWwucHJvcGVydGllcy5vcGFjaXR5IDogMTsKCiAgICAgICAgLy8gRGV0ZXJtaW5hciBkaW1lbnPDtWVzIHBhcmEgcHJldmlldwogICAgICAgIGxldCBwcmV2aWV3V2lkdGggPSAnMjAwcHgnOwogICAgICAgIGxldCBwcmV2aWV3SGVpZ2h0ID0gJ2F1dG8nOwogICAgICAgIGlmIChlbC5wcm9wZXJ0aWVzLmZpdCAmJiBBcnJheS5pc0FycmF5KGVsLnByb3BlcnRpZXMuZml0KSkgewogICAgICAgICAgcHJldmlld1dpZHRoID0gYCR7ZWwucHJvcGVydGllcy5maXRbMF19cHhgOwogICAgICAgICAgcHJldmlld0hlaWdodCA9IGAke2VsLnByb3BlcnRpZXMuZml0WzFdfXB4YDsKICAgICAgICB9IGVsc2UgaWYgKGVsLnByb3BlcnRpZXMuY292ZXIpIHsKICAgICAgICAgIHByZXZpZXdXaWR0aCA9IGAke2VsLnByb3BlcnRpZXMuY292ZXIud2lkdGggfHwgMzAwfXB4YDsKICAgICAgICAgIHByZXZpZXdIZWlnaHQgPSBgJHtlbC5wcm9wZXJ0aWVzLmNvdmVyLmhlaWdodCB8fCAxNTB9cHhgOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoZWwucHJvcGVydGllcy53aWR0aCkgcHJldmlld1dpZHRoID0gYCR7ZWwucHJvcGVydGllcy53aWR0aH1weGA7CiAgICAgICAgICBpZiAoZWwucHJvcGVydGllcy5oZWlnaHQpIHByZXZpZXdIZWlnaHQgPSBgJHtlbC5wcm9wZXJ0aWVzLmhlaWdodH1weGA7CiAgICAgICAgfQoKICAgICAgICAvLyBBcGxpY2FyIGRpbWVuc8O1ZXMgYW8gYm94IHRhbWLDqW0gcGFyYSBnYXJhbnRpciBxdWUgbyB3cmFwcGVyIHRlbmhhIG8gdGFtYW5obyBjb3JyZXRvCiAgICAgICAgYm94LnN0eWxlLndpZHRoID0gcHJldmlld1dpZHRoOwogICAgICAgIGlmIChwcmV2aWV3SGVpZ2h0ICE9PSAnYXV0bycpIHsKICAgICAgICAgIGJveC5zdHlsZS5oZWlnaHQgPSBwcmV2aWV3SGVpZ2h0OwogICAgICAgIH0KCiAgICAgICAgaWYgKHVybCkgewogICAgICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7CiAgICAgICAgICAvLyBVc2FyIGJhc2U2NCBwYXJhIHByZXZpZXcgc2UgZGlzcG9uw612ZWwsIHNlbsOjbyB1c2FyIFVSTCBvcmlnaW5hbAogICAgICAgICAgY29uc3QgaW1hZ2VTcmMgPSBlbC5wcm9wZXJ0aWVzLl9iYXNlNjRQcmV2aWV3IHx8IHVybDsKICAgICAgICAgIGltZy5zcmMgPSBpbWFnZVNyYzsKICAgICAgICAgIGltZy5zdHlsZS53aWR0aCA9IHByZXZpZXdXaWR0aDsKICAgICAgICAgIGltZy5zdHlsZS5oZWlnaHQgPSBwcmV2aWV3SGVpZ2h0OwogICAgICAgICAgaW1nLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5OwoKICAgICAgICAgIC8vIEFwbGljYXIgb2JqZWN0LWZpdCBiYXNlYWRvIG5vIG1vZG8KICAgICAgICAgIGlmIChlbC5wcm9wZXJ0aWVzLmZpdCkgewogICAgICAgICAgICBpbWcuc3R5bGUub2JqZWN0Rml0ID0gJ2NvbnRhaW4nOwogICAgICAgICAgfSBlbHNlIGlmIChlbC5wcm9wZXJ0aWVzLmNvdmVyKSB7CiAgICAgICAgICAgIGltZy5zdHlsZS5vYmplY3RGaXQgPSAnY292ZXInOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaW1nLnN0eWxlLm9iamVjdEZpdCA9ICdjb250YWluJzsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoYm9yZGVyUmFkaXVzID4gMCkgewogICAgICAgICAgICBpbWcuc3R5bGUuYm9yZGVyUmFkaXVzID0gYCR7Ym9yZGVyUmFkaXVzfXB4YDsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBTZSBuw6NvIGjDoSBiYXNlNjQgZSDDqSB1bWEgVVJMIEhUVFAvSFRUUFMsIHRlbnRhciBjb252ZXJ0ZXIgZW0gYmFja2dyb3VuZAogICAgICAgICAgaWYgKCFlbC5wcm9wZXJ0aWVzLl9iYXNlNjRQcmV2aWV3ICYmICh1cmwuc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8IHVybC5zdGFydHNXaXRoKCdodHRwczovLycpKSkgewogICAgICAgICAgICAvLyBUZW50YXIgY29udmVydGVyIHBhcmEgYmFzZTY0IGVtIGJhY2tncm91bmQgKG7Do28gYmxvcXVlaWEgYSByZW5kZXJpemHDp8OjbykKICAgICAgICAgICAgY29udmVydEltYWdlVXJsVG9CYXNlNjQodXJsKS50aGVuKGJhc2U2NCA9PiB7CiAgICAgICAgICAgICAgaWYgKGJhc2U2NCAmJiBlbC5wcm9wZXJ0aWVzLnVybCA9PT0gdXJsKSB7CiAgICAgICAgICAgICAgICBlbC5wcm9wZXJ0aWVzLl9iYXNlNjRQcmV2aWV3ID0gYmFzZTY0OwogICAgICAgICAgICAgICAgaW1nLnNyYyA9IGJhc2U2NDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICAvLyBTaWxlbmNpb3NhbWVudGUgZmFsaGFyIC0gbWFudGVyIFVSTCBvcmlnaW5hbAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpbWcub25lcnJvciA9ICgpID0+IHsKICAgICAgICAgICAgaW1nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIGNvbnN0IHBoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHBoLmNsYXNzTmFtZSA9ICdwcmV2aWV3LWltYWdlLWJveCc7CiAgICAgICAgICAgIHBoLnN0eWxlLndpZHRoID0gcHJldmlld1dpZHRoOwogICAgICAgICAgICBwaC5zdHlsZS5oZWlnaHQgPSBwcmV2aWV3SGVpZ2h0ID09PSAnYXV0bycgPyAnMTUwcHgnIDogcHJldmlld0hlaWdodDsKICAgICAgICAgICAgcGgudGV4dENvbnRlbnQgPSAnRXJybyBhbyBjYXJyZWdhcic7CiAgICAgICAgICAgIGJveC5hcHBlbmRDaGlsZChwaCk7CiAgICAgICAgICB9OwogICAgICAgICAgYm94LmFwcGVuZENoaWxkKGltZyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IHBoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICBwaC5jbGFzc05hbWUgPSAncHJldmlldy1pbWFnZS1ib3gnOwogICAgICAgICAgcGguc3R5bGUud2lkdGggPSBwcmV2aWV3V2lkdGg7CiAgICAgICAgICBwaC5zdHlsZS5oZWlnaHQgPSBwcmV2aWV3SGVpZ2h0ID09PSAnYXV0bycgPyAnMTUwcHgnIDogcHJldmlld0hlaWdodDsKICAgICAgICAgIHBoLnRleHRDb250ZW50ID0gJ0ltYWdlbSc7CiAgICAgICAgICBib3guYXBwZW5kQ2hpbGQocGgpOwogICAgICAgIH0KCiAgICAgICAgLy8gUG9zaWNpb25hbWVudG8gasOhIGFwbGljYWRvIG5vIHdyYXBwZXIgcHJpbmNpcGFsLCBuw6NvIHByZWNpc2EgYXBsaWNhciBhcXVpIG5vdmFtZW50ZQogICAgICAgIC8vIEFwZW5hcyBnYXJhbnRpciBxdWUgbyBib3ggbsOjbyB0ZW5oYSBwb3NpY2lvbmFtZW50byBwcsOzcHJpbwogICAgICAgIGJveC5zdHlsZS5wb3NpdGlvbiA9ICdzdGF0aWMnOwoKICAgICAgICBwcmV2aWV3LmFwcGVuZENoaWxkKGJveCk7CiAgICAgIH0KICAgICAgZWxzZSBpZiAoZWwudHlwZSA9PT0gJ2NvbHVtbnMnKSB7CiAgICAgICAgY29uc3QgY29sc1dyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBjb2xzV3JhcC5jbGFzc05hbWUgPSAncHJldmlldy1jb2x1bW5zJzsKICAgICAgICBjb2xzV3JhcC5zdHlsZS5nYXAgPSAoTnVtYmVyKGVsLnByb3BlcnRpZXMuZ2FwIHx8IDEwKSkgKyAncHgnOwoKICAgICAgICAvLyBBcGxpY2FyIGFsaW5oYW1lbnRvIHZlcnRpY2FsIHNlIGNvbmZpZ3VyYWRvCiAgICAgICAgaWYgKGVsLnByb3BlcnRpZXMudmFsaWduKSB7CiAgICAgICAgICBpZiAoZWwucHJvcGVydGllcy52YWxpZ24gPT09ICdjZW50ZXInKSB7CiAgICAgICAgICAgIGNvbHNXcmFwLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZWwucHJvcGVydGllcy52YWxpZ24gPT09ICdib3R0b20nKSB7CiAgICAgICAgICAgIGNvbHNXcmFwLnN0eWxlLmFsaWduSXRlbXMgPSAnZmxleC1lbmQnOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29sc1dyYXAuc3R5bGUuYWxpZ25JdGVtcyA9ICdmbGV4LXN0YXJ0JzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvbnN0IGNvbHMgPSBlbC5wcm9wZXJ0aWVzLmNvbHVtbnMgfHwgW107CiAgICAgICAgY29scy5mb3JFYWNoKChjb2wsIGlkeCkgPT4gewogICAgICAgICAgY29uc3QgY29sRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICBjb2xEaXYuY2xhc3NOYW1lID0gJ3ByZXZpZXctY29sdW1uJzsKCiAgICAgICAgICAvLyBBcGxpY2FyIGxhcmd1cmEgZGEgY29sdW5hCiAgICAgICAgICBjb25zdCB3aWR0aCA9IGNvbC53aWR0aCB8fCAnKic7CiAgICAgICAgICBpZiAod2lkdGggPT09ICcqJyB8fCB3aWR0aCA9PT0gJ2F1dG8nKSB7CiAgICAgICAgICAgIGNvbERpdi5zdHlsZS5mbGV4ID0gJzEgMSAwJzsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpZHRoID09PSAnbnVtYmVyJykgewogICAgICAgICAgICBjb2xEaXYuc3R5bGUud2lkdGggPSBgJHt3aWR0aH1weGA7CiAgICAgICAgICAgIGNvbERpdi5zdHlsZS5mbGV4ID0gJzAgMCBhdXRvJzsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpZHRoID09PSAnc3RyaW5nJyAmJiB3aWR0aC5lbmRzV2l0aCgnJScpKSB7CiAgICAgICAgICAgIGNvbnN0IHBlcmNlbnQgPSBwYXJzZUZsb2F0KHdpZHRoLnJlcGxhY2UoJyUnLCAnJykpIHx8IDA7CiAgICAgICAgICAgIGNvbERpdi5zdHlsZS53aWR0aCA9IGAke3BlcmNlbnR9JWA7CiAgICAgICAgICAgIGNvbERpdi5zdHlsZS5mbGV4ID0gJzAgMCBhdXRvJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbERpdi5zdHlsZS5mbGV4ID0gJzEgMSAwJzsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBkcm9wem9uZSBwb3IgY29sdW5hCiAgICAgICAgICBjb2xEaXYuc2V0QXR0cmlidXRlKCdkYXRhLWRyb3Ata2luZCcsICdjb2x1bW5zQ29sJyk7CiAgICAgICAgICBjb2xEaXYuc2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldC1pZCcsIGVsLmlkKTsKICAgICAgICAgIGNvbERpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29sLWluZGV4JywgU3RyaW5nKGlkeCkpOwogICAgICAgICAgY29sRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgb25Ecm9wWm9uZU92ZXIpOwogICAgICAgICAgY29sRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIG9uRHJvcFpvbmVMZWF2ZSk7CiAgICAgICAgICBjb2xEaXYuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIG9uRHJvcFpvbmVEcm9wKTsKCiAgICAgICAgICBjb25zdCBraWRzID0gY29sLmNoaWxkcmVuIHx8IFtdOwogICAgICAgICAgaWYgKGtpZHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIGNvbnN0IHBoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHBoLmNsYXNzTmFtZSA9ICdzbWFsbE5vdGUnOwogICAgICAgICAgICBwaC50ZXh0Q29udGVudCA9IGBDb2x1bmEgJHtpZHggKyAxfTogYXJyYXN0ZSBhcXVpYDsKICAgICAgICAgICAgY29sRGl2LmFwcGVuZENoaWxkKHBoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGtpZHMuZm9yRWFjaChrID0+IGNvbERpdi5hcHBlbmRDaGlsZChyZW5kZXJFbGVtZW50UmVjdXJzaXZlKGspKSk7CiAgICAgICAgICB9CiAgICAgICAgICBjb2xzV3JhcC5hcHBlbmRDaGlsZChjb2xEaXYpOwogICAgICAgIH0pOwoKICAgICAgICBwcmV2aWV3LmFwcGVuZENoaWxkKGNvbHNXcmFwKTsKICAgICAgfQogICAgICBlbHNlIGlmIChlbC50eXBlID09PSAnbGlzdCcpIHsKICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbC5wcm9wZXJ0aWVzLmxpc3RUeXBlID09PSAnb2wnID8gJ29sJyA6ICd1bCcpOwogICAgICAgIGxpc3QuY2xhc3NOYW1lID0gJ3ByZXZpZXctbGlzdCc7CgogICAgICAgIC8vIGRyb3B6b25lIG5vIGNvbnRhaW5lciBkYSBsaXN0YSAocGFyYSBhZGljaW9uYXIgbm92b3MgaXRlbnMgcXVhbmRvIHNvbHRvIGZvcmEgZG9zIGl0ZW5zIGV4aXN0ZW50ZXMpCiAgICAgICAgbGlzdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZHJvcC1raW5kJywgJ2xpc3RJdGVtcycpOwogICAgICAgIGxpc3Quc2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldC1pZCcsIGVsLmlkKTsKICAgICAgICBsaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgb25Ecm9wWm9uZU92ZXIpOwogICAgICAgIGxpc3QuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgb25Ecm9wWm9uZUxlYXZlKTsKICAgICAgICBsaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBvbkRyb3Bab25lRHJvcCk7CgogICAgICAgIGNvbnN0IGl0ZW1zID0gZWwucHJvcGVydGllcy5pdGVtcyB8fCBbXTsKICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgICBsaS50ZXh0Q29udGVudCA9ICdBcnJhc3RlIGFxdWkgcGFyYSBhZGljaW9uYXIgaXRlbSc7CiAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGxpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXQsIGlkeCkgPT4gewogICAgICAgICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgICAgIGxpLnN0eWxlLmJvcmRlciA9ICcxcHggZGFzaGVkICM5Y2EzYWYnOwogICAgICAgICAgICBsaS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnMC41cmVtJzsKICAgICAgICAgICAgbGkuc3R5bGUucGFkZGluZyA9ICcwLjVyZW0nOwogICAgICAgICAgICBsaS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMC41cmVtJzsKICAgICAgICAgICAgbGkuc3R5bGUubWluSGVpZ2h0ID0gJzJyZW0nOwogICAgICAgICAgICBsaS5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7CgogICAgICAgICAgICAvLyBEcm9wem9uZSBpbmRpdmlkdWFsIHBhcmEgY2FkYSBpdGVtIChwZXJtaXRlIHN1YnN0aXR1aXIgbyBjb250ZcO6ZG8pCiAgICAgICAgICAgIGxpLnNldEF0dHJpYnV0ZSgnZGF0YS1kcm9wLWtpbmQnLCAnbGlzdEl0ZW1SZXBsYWNlJyk7CiAgICAgICAgICAgIGxpLnNldEF0dHJpYnV0ZSgnZGF0YS10YXJnZXQtaWQnLCBlbC5pZCk7CiAgICAgICAgICAgIGxpLnNldEF0dHJpYnV0ZSgnZGF0YS1pdGVtLWluZGV4JywgU3RyaW5nKGlkeCkpOwoKICAgICAgICAgICAgLy8gSGFuZGxlcnMgc2VwYXJhZG9zIHBhcmEgZ2FyYW50aXIgcXVlIG8gaXRlbSB0ZW5oYSBwcmlvcmlkYWRlIHNvYnJlIG8gY29udGFpbmVyCiAgICAgICAgICAgIGxpLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGUpID0+IHsKICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gSW1wZWRlIHF1ZSBvIGV2ZW50byBjaGVndWUgYW8gY29udGFpbmVyIGRhIGxpc3RhCiAgICAgICAgICAgICAgbGkuY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyJyk7CiAgICAgICAgICAgICAgbGkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNlMGYyZmUnOwogICAgICAgICAgICAgIGxpLnN0eWxlLmJvcmRlckNvbG9yID0gJyMwMjg0YzcnOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGxpLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIChlKSA9PiB7CiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICBsaS5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLW92ZXInKTsKICAgICAgICAgICAgICBsaS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnJzsKICAgICAgICAgICAgICBsaS5zdHlsZS5ib3JkZXJDb2xvciA9ICcjOWNhM2FmJzsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBsaS5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgKGUpID0+IHsKICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gQ1LDjVRJQ086IGltcGVkZSBxdWUgbyBldmVudG8gY2hlZ3VlIGFvIGNvbnRhaW5lciBkYSBsaXN0YQogICAgICAgICAgICAgIGxpLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3ZlcicpOwogICAgICAgICAgICAgIGxpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcnOwogICAgICAgICAgICAgIGxpLnN0eWxlLmJvcmRlckNvbG9yID0gJyM5Y2EzYWYnOwoKICAgICAgICAgICAgICBjb25zdCB0eXBlID0gKGUuZGF0YVRyYW5zZmVyICYmIGUuZGF0YVRyYW5zZmVyLmdldERhdGEoInRleHQvcGxhaW4iKSkgfHwgZHJhZ2dlZFR5cGU7CiAgICAgICAgICAgICAgaWYgKCF0eXBlKSByZXR1cm47CgogICAgICAgICAgICAgIC8vIENoYW1hciBpbnNlcnRJbnRvVGFyZ2V0IGRpcmV0YW1lbnRlIHBhcmEgc3Vic3RpdHVpciBvIGl0ZW0KICAgICAgICAgICAgICBpbnNlcnRJbnRvVGFyZ2V0KHsKICAgICAgICAgICAgICAgIGtpbmQ6ICdsaXN0SXRlbVJlcGxhY2UnLAogICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IGVsLmlkLAogICAgICAgICAgICAgICAgaXRlbUluZGV4OiBpZHgKICAgICAgICAgICAgICB9LCB0eXBlKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoaXQua2luZCA9PT0gJ3RleHQnKSB7CiAgICAgICAgICAgICAgbGkudGV4dENvbnRlbnQgPSBpdC50ZXh0IHx8ICcnOwogICAgICAgICAgICB9IGVsc2UgaWYgKGl0LmtpbmQgPT09ICdub2RlJyAmJiBpdC5ub2RlKSB7CiAgICAgICAgICAgICAgbGkuYXBwZW5kQ2hpbGQocmVuZGVyRWxlbWVudFJlY3Vyc2l2ZShpdC5ub2RlKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChsaSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgcHJldmlldy5hcHBlbmRDaGlsZChsaXN0KTsKICAgICAgfQogICAgICBlbHNlIGlmIChlbC50eXBlID09PSAndGFibGUnKSB7CiAgICAgICAgY29uc3QgdGJsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTsKICAgICAgICB0YmwuY2xhc3NOYW1lID0gJ3ByZXZpZXctdGFibGUnOwoKICAgICAgICBjb25zdCBib2R5ID0gZWwucHJvcGVydGllcy5ib2R5IHx8IFtdOwogICAgICAgIGNvbnN0IGhlaWdodHMgPSBlbC5wcm9wZXJ0aWVzLmhlaWdodHM7CiAgICAgICAgY29uc3QgY3VzdG9tTGF5b3V0ID0gZWwucHJvcGVydGllcy5jdXN0b21MYXlvdXQgfHwge307CgogICAgICAgIC8vIEFwbGljYXIgYm9yZGFzIGRhIHRhYmVsYSBiYXNlYWRvIG5vIGxheW91dCBjdXN0b21pemFkbwogICAgICAgIC8vIFNlIGhMaW5lV2lkdGggb3UgdkxpbmVXaWR0aCBlc3RpdmVyZW0gZGVmaW5pZG9zLCBhcGxpY2FyIGJvcmRhcwogICAgICAgIGNvbnN0IGhMaW5lV2lkdGggPSBjdXN0b21MYXlvdXQuaExpbmVXaWR0aCAhPT0gdW5kZWZpbmVkID8gTnVtYmVyKGN1c3RvbUxheW91dC5oTGluZVdpZHRoKSA6IG51bGw7CiAgICAgICAgY29uc3QgdkxpbmVXaWR0aCA9IGN1c3RvbUxheW91dC52TGluZVdpZHRoICE9PSB1bmRlZmluZWQgPyBOdW1iZXIoY3VzdG9tTGF5b3V0LnZMaW5lV2lkdGgpIDogbnVsbDsKICAgICAgICBjb25zdCBoTGluZUNvbG9yID0gY3VzdG9tTGF5b3V0LmhMaW5lQ29sb3IgfHwgJyMwMDAwMDAnOwogICAgICAgIGNvbnN0IHZMaW5lQ29sb3IgPSBjdXN0b21MYXlvdXQudkxpbmVDb2xvciB8fCAnIzAwMDAwMCc7CgogICAgICAgIC8vIFNlIGxheW91dCBmb3IgY3VzdG9taXphZG8sIGFwbGljYXIgYm9yZGFzIGRpbmFtaWNhbWVudGUKICAgICAgICBpZiAoZWwucHJvcGVydGllcy5sYXlvdXQgPT09ICdjdXN0b20nICYmIChoTGluZVdpZHRoICE9PSBudWxsIHx8IHZMaW5lV2lkdGggIT09IG51bGwpKSB7CiAgICAgICAgICAvLyBBcGxpY2FyIGJvcmRhcyBiYXNlYWRhcyBuYXMgY29uZmlndXJhw6fDtWVzCiAgICAgICAgICBpZiAoaExpbmVXaWR0aCAhPT0gbnVsbCAmJiBoTGluZVdpZHRoID4gMCkgewogICAgICAgICAgICB0Ymwuc3R5bGUuYm9yZGVyVG9wID0gYCR7aExpbmVXaWR0aH1weCBzb2xpZCAke2hMaW5lQ29sb3J9YDsKICAgICAgICAgICAgdGJsLnN0eWxlLmJvcmRlckJvdHRvbSA9IGAke2hMaW5lV2lkdGh9cHggc29saWQgJHtoTGluZUNvbG9yfWA7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodkxpbmVXaWR0aCAhPT0gbnVsbCAmJiB2TGluZVdpZHRoID4gMCkgewogICAgICAgICAgICB0Ymwuc3R5bGUuYm9yZGVyTGVmdCA9IGAke3ZMaW5lV2lkdGh9cHggc29saWQgJHt2TGluZUNvbG9yfWA7CiAgICAgICAgICAgIHRibC5zdHlsZS5ib3JkZXJSaWdodCA9IGAke3ZMaW5lV2lkdGh9cHggc29saWQgJHt2TGluZUNvbG9yfWA7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGJvZHkubGVuZ3RoOyByKyspIHsKICAgICAgICAgIGNvbnN0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsKICAgICAgICAgIGNvbnN0IGlzSGVhZGVyUm93ID0gciA9PT0gMDsgLy8gUHJpbWVpcmEgbGluaGEgw6kgbyBjYWJlw6dhbGhvCgogICAgICAgICAgLy8gQXBsaWNhciBhbHR1cmEgZGEgbGluaGEgKGhlaWdodHMpCiAgICAgICAgICBpZiAoaGVpZ2h0cykgewogICAgICAgICAgICBpZiAodHlwZW9mIGhlaWdodHMgPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgICAgdHIuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0cyArICdweCc7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShoZWlnaHRzKSAmJiBoZWlnaHRzW3JdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICB0ci5zdHlsZS5oZWlnaHQgPSBoZWlnaHRzW3JdICsgJ3B4JzsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIEFwbGljYXIgYm9yZGFzIGhvcml6b250YWlzIGJhc2VhZGFzIG5vIGxheW91dCBjdXN0b21pemFkbwogICAgICAgICAgaWYgKGVsLnByb3BlcnRpZXMubGF5b3V0ID09PSAnY3VzdG9tJyAmJiBoTGluZVdpZHRoICE9PSBudWxsICYmIGhMaW5lV2lkdGggPiAwKSB7CiAgICAgICAgICAgIC8vIEFwbGljYXIgYm9yZGEgaW5mZXJpb3IgZW0gdG9kYXMgYXMgbGluaGFzCiAgICAgICAgICAgIHRyLnN0eWxlLmJvcmRlckJvdHRvbSA9IGAke2hMaW5lV2lkdGh9cHggc29saWQgJHtoTGluZUNvbG9yfWA7CiAgICAgICAgICAgIC8vIEFwbGljYXIgYm9yZGEgc3VwZXJpb3IgbmEgcHJpbWVpcmEgbGluaGEKICAgICAgICAgICAgaWYgKHIgPT09IDApIHsKICAgICAgICAgICAgICB0ci5zdHlsZS5ib3JkZXJUb3AgPSBgJHtoTGluZVdpZHRofXB4IHNvbGlkICR7aExpbmVDb2xvcn1gOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKGlzSGVhZGVyUm93KSB7CiAgICAgICAgICAgIC8vIExheW91dCBwYWRyw6NvIC0gYXBlbmFzIGJvcmRhIG5vIGNhYmXDp2FsaG8KICAgICAgICAgICAgdHIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNmM2Y0ZjYnOwogICAgICAgICAgICB0ci5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnOwogICAgICAgICAgICB0ci5zdHlsZS5ib3JkZXJCb3R0b20gPSAnMnB4IHNvbGlkICNkMWQ1ZGInOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIFJhc3RyZWFyIGPDqWx1bGFzIGrDoSBjb2JlcnRhcyBwb3Igcm93U3Bhbi9jb2xTcGFuCiAgICAgICAgICBjb25zdCBjb3ZlcmVkQ2VsbHMgPSBuZXcgU2V0KCk7CgogICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBib2R5W3JdLmxlbmd0aDsgYysrKSB7CiAgICAgICAgICAgIC8vIFB1bGFyIGPDqWx1bGFzIGrDoSBjb2JlcnRhcyBwb3IgY29sU3BhbgogICAgICAgICAgICBpZiAoY292ZXJlZENlbGxzLmhhcyhgJHtyfS0ke2N9YCkpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICB0ZC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ3RvcCc7CiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBib2R5W3JdW2NdOwoKICAgICAgICAgICAgLy8gU2UgbGF5b3V0IGN1c3RvbWl6YWRvIGVzdGl2ZXIgYXRpdm8sIHJlbW92ZXIgYm9yZGFzIHBhZHLDo28gZG8gQ1NTCiAgICAgICAgICAgIGlmIChlbC5wcm9wZXJ0aWVzLmxheW91dCA9PT0gJ2N1c3RvbScpIHsKICAgICAgICAgICAgICB0ZC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7IC8vIFJlbW92ZXIgYm9yZGEgcGFkcsOjbwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBBcGxpY2FyIGJvcmRhcyB2ZXJ0aWNhaXMgYmFzZWFkYXMgbm8gbGF5b3V0IGN1c3RvbWl6YWRvCiAgICAgICAgICAgIGlmIChlbC5wcm9wZXJ0aWVzLmxheW91dCA9PT0gJ2N1c3RvbScgJiYgdkxpbmVXaWR0aCAhPT0gbnVsbCAmJiB2TGluZVdpZHRoID4gMCkgewogICAgICAgICAgICAgIC8vIEFwbGljYXIgYm9yZGEgZGlyZWl0YSBlbSB0b2RhcyBhcyBjw6lsdWxhcyAoZXhjZXRvIGEgw7psdGltYSBjb2x1bmEpCiAgICAgICAgICAgICAgaWYgKGMgPCBib2R5W3JdLmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgICAgIHRkLnN0eWxlLmJvcmRlclJpZ2h0ID0gYCR7dkxpbmVXaWR0aH1weCBzb2xpZCAke3ZMaW5lQ29sb3J9YDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gQXBsaWNhciBib3JkYSBlc3F1ZXJkYSBuYSBwcmltZWlyYSBjb2x1bmEKICAgICAgICAgICAgICBpZiAoYyA9PT0gMCkgewogICAgICAgICAgICAgICAgdGQuc3R5bGUuYm9yZGVyTGVmdCA9IGAke3ZMaW5lV2lkdGh9cHggc29saWQgJHt2TGluZUNvbG9yfWA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBBcGxpY2FyIGJvcmRhcyBob3Jpem9udGFpcyBiYXNlYWRhcyBubyBsYXlvdXQgY3VzdG9taXphZG8gKG5hcyBjw6lsdWxhcykKICAgICAgICAgICAgaWYgKGVsLnByb3BlcnRpZXMubGF5b3V0ID09PSAnY3VzdG9tJyAmJiBoTGluZVdpZHRoICE9PSBudWxsICYmIGhMaW5lV2lkdGggPiAwKSB7CiAgICAgICAgICAgICAgLy8gQXBsaWNhciBib3JkYSBzdXBlcmlvciBuYSBwcmltZWlyYSBsaW5oYQogICAgICAgICAgICAgIGlmIChyID09PSAwKSB7CiAgICAgICAgICAgICAgICB0ZC5zdHlsZS5ib3JkZXJUb3AgPSBgJHtoTGluZVdpZHRofXB4IHNvbGlkICR7aExpbmVDb2xvcn1gOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBBcGxpY2FyIGJvcmRhIGluZmVyaW9yIGVtIHRvZGFzIGFzIGxpbmhhcwogICAgICAgICAgICAgIHRkLnN0eWxlLmJvcmRlckJvdHRvbSA9IGAke2hMaW5lV2lkdGh9cHggc29saWQgJHtoTGluZUNvbG9yfWA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzZSBlc3RhIGPDqWx1bGEgZXN0w6EgdmF6aWEgKHN0cmluZyB2YXppYSBvdSBudWxsKQogICAgICAgICAgICBpZiAoIWNlbGwgfHwgKHR5cGVvZiBjZWxsID09PSAnc3RyaW5nJyAmJiBjZWxsID09PSAnJykpIHsKICAgICAgICAgICAgICAvLyBDw6lsdWxhIHZhemlhIC0gcmVuZGVyaXphciBjb21vIHZhemlhIG1hcyBhaW5kYSBhZGljaW9uYXIgw6AgbGluaGEKICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZCk7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFNlIG7Do28gZm9yIG9iamV0bywgdHJhdGFyIGNvbW8gc3RyaW5nIHNpbXBsZXMKICAgICAgICAgICAgY29uc3QgY2VsbE9iaiA9ICh0eXBlb2YgY2VsbCA9PT0gJ29iamVjdCcgJiYgY2VsbCAhPT0gbnVsbCkgPyBjZWxsIDogeyBjaGlsZHJlbjogW10gfTsKCiAgICAgICAgICAgIC8vIEFwbGljYXIgcm93U3BhbiBlIGNvbFNwYW4KICAgICAgICAgICAgaWYgKGNlbGxPYmoucm93U3BhbiAmJiBjZWxsT2JqLnJvd1NwYW4gPiAxKSB7CiAgICAgICAgICAgICAgdGQuc2V0QXR0cmlidXRlKCdyb3dzcGFuJywgY2VsbE9iai5yb3dTcGFuKTsKICAgICAgICAgICAgICAvLyBNYXJjYXIgY8OpbHVsYXMgYWJhaXhvIGNvbW8gY29iZXJ0YXMKICAgICAgICAgICAgICBmb3IgKGxldCBzciA9IDE7IHNyIDwgY2VsbE9iai5yb3dTcGFuOyBzcisrKSB7CiAgICAgICAgICAgICAgICBjb3ZlcmVkQ2VsbHMuYWRkKGAke3IgKyBzcn0tJHtjfWApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY2VsbE9iai5jb2xTcGFuICYmIGNlbGxPYmouY29sU3BhbiA+IDEpIHsKICAgICAgICAgICAgICB0ZC5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjZWxsT2JqLmNvbFNwYW4pOwogICAgICAgICAgICAgIC8vIE1hcmNhciBjw6lsdWxhcyDDoCBkaXJlaXRhIGNvbW8gY29iZXJ0YXMKICAgICAgICAgICAgICBmb3IgKGxldCBzYyA9IDE7IHNjIDwgY2VsbE9iai5jb2xTcGFuOyBzYysrKSB7CiAgICAgICAgICAgICAgICBjb3ZlcmVkQ2VsbHMuYWRkKGAke3J9LSR7YyArIHNjfWApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQXBsaWNhciBib3JkZXIgKGFycmF5IGRlIDQgYm9vbGVhbm9zKSAtIHNvYnJlc2NyZXZlIGJvcmRhcyBkbyBsYXlvdXQgY3VzdG9taXphZG8gc2UgZGVmaW5pZG8KICAgICAgICAgICAgaWYgKGNlbGxPYmouYm9yZGVyICYmIEFycmF5LmlzQXJyYXkoY2VsbE9iai5ib3JkZXIpKSB7CiAgICAgICAgICAgICAgaWYgKCFjZWxsT2JqLmJvcmRlclswXSkgdGQuc3R5bGUuYm9yZGVyTGVmdCA9ICdub25lJzsKICAgICAgICAgICAgICBpZiAoIWNlbGxPYmouYm9yZGVyWzFdKSB0ZC5zdHlsZS5ib3JkZXJUb3AgPSAnbm9uZSc7CiAgICAgICAgICAgICAgaWYgKCFjZWxsT2JqLmJvcmRlclsyXSkgdGQuc3R5bGUuYm9yZGVyUmlnaHQgPSAnbm9uZSc7CiAgICAgICAgICAgICAgaWYgKCFjZWxsT2JqLmJvcmRlclszXSkgdGQuc3R5bGUuYm9yZGVyQm90dG9tID0gJ25vbmUnOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBBcGxpY2FyIGJvcmRlckNvbG9yIChhcnJheSBkZSA0IGNvcmVzKSAtIHNvYnJlc2NyZXZlIGNvcmVzIGRvIGxheW91dCBjdXN0b21pemFkbyBzZSBkZWZpbmlkbwogICAgICAgICAgICBpZiAoY2VsbE9iai5ib3JkZXJDb2xvciAmJiBBcnJheS5pc0FycmF5KGNlbGxPYmouYm9yZGVyQ29sb3IpKSB7CiAgICAgICAgICAgICAgaWYgKGNlbGxPYmouYm9yZGVyQ29sb3JbMF0pIHRkLnN0eWxlLmJvcmRlckxlZnRDb2xvciA9IGNlbGxPYmouYm9yZGVyQ29sb3JbMF07CiAgICAgICAgICAgICAgaWYgKGNlbGxPYmouYm9yZGVyQ29sb3JbMV0pIHRkLnN0eWxlLmJvcmRlclRvcENvbG9yID0gY2VsbE9iai5ib3JkZXJDb2xvclsxXTsKICAgICAgICAgICAgICBpZiAoY2VsbE9iai5ib3JkZXJDb2xvclsyXSkgdGQuc3R5bGUuYm9yZGVyUmlnaHRDb2xvciA9IGNlbGxPYmouYm9yZGVyQ29sb3JbMl07CiAgICAgICAgICAgICAgaWYgKGNlbGxPYmouYm9yZGVyQ29sb3JbM10pIHRkLnN0eWxlLmJvcmRlckJvdHRvbUNvbG9yID0gY2VsbE9iai5ib3JkZXJDb2xvclszXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQXBsaWNhciBlc3RpbG9zIGRhIGPDqWx1bGEgKGZpbGxDb2xvciwgY29sb3IsIGZpbGxPcGFjaXR5KQogICAgICAgICAgICAvLyBUYWJlbGEgemVicmFkYSB0ZW0gcHJpb3JpZGFkZSBzb2JyZSBmaWxsQ29sb3IgaW5kaXZpZHVhbAogICAgICAgICAgICBpZiAoZWwucHJvcGVydGllcy56ZWJyYUVuYWJsZWQgJiYgZWwucHJvcGVydGllcy56ZWJyYUNvbG9yKSB7CiAgICAgICAgICAgICAgLy8gQXBsaWNhciB6ZWJyYSBzZWd1aW5kbyBvIHBhZHLDo28gZG8gZXhlbXBsbzogbGluaGFzIHBhcmVzICgwLCAyLCA0Li4uKSA9IGNvciwgbGluaGFzIMOtbXBhcmVzICgxLCAzLCA1Li4uKSA9IG51bGwKICAgICAgICAgICAgICAvLyBNYXMgY2FiZcOnYWxobyAocj0wKSBuw6NvIHJlY2ViZSB6ZWJyYQogICAgICAgICAgICAgIGlmICghaXNIZWFkZXJSb3cgJiYgciAlIDIgPT09IDApIHsKICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VDb2xvciA9IGVsLnByb3BlcnRpZXMuemVicmFDb2xvcjsKICAgICAgICAgICAgICAgIHRkLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGJhc2VDb2xvcjsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFpc0hlYWRlclJvdykgewogICAgICAgICAgICAgICAgLy8gTGluaGFzIMOtbXBhcmVzID0gdHJhbnNwYXJlbnRlIChudWxsIG5vIFBERikKICAgICAgICAgICAgICAgIHRkLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGNlbGxPYmouZmlsbENvbG9yKSB7CiAgICAgICAgICAgICAgY29uc3Qgb3BhY2l0eSA9IGNlbGxPYmouZmlsbE9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IGNlbGxPYmouZmlsbE9wYWNpdHkgOiAxOwogICAgICAgICAgICAgIHRkLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNlbGxPYmouZmlsbENvbG9yOwogICAgICAgICAgICAgIHRkLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5OwogICAgICAgICAgICB9IGVsc2UgaWYgKGlzSGVhZGVyUm93KSB7CiAgICAgICAgICAgICAgdGQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNmOWZhZmInOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoY2VsbE9iai5jb2xvcikgewogICAgICAgICAgICAgIHRkLnN0eWxlLmNvbG9yID0gY2VsbE9iai5jb2xvcjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gUGFkZGluZyBwYWRyw6NvIG91IGN1c3RvbWl6YWRvCiAgICAgICAgICAgIGlmIChlbC5wcm9wZXJ0aWVzLmN1c3RvbUxheW91dCkgewogICAgICAgICAgICAgIGNvbnN0IGNsID0gZWwucHJvcGVydGllcy5jdXN0b21MYXlvdXQ7CiAgICAgICAgICAgICAgdGQuc3R5bGUucGFkZGluZ0xlZnQgPSAoY2wucGFkZGluZ0xlZnQgfHwgNSkgKyAncHgnOwogICAgICAgICAgICAgIHRkLnN0eWxlLnBhZGRpbmdSaWdodCA9IChjbC5wYWRkaW5nUmlnaHQgfHwgNSkgKyAncHgnOwogICAgICAgICAgICAgIHRkLnN0eWxlLnBhZGRpbmdUb3AgPSAoY2wucGFkZGluZ1RvcCB8fCA1KSArICdweCc7CiAgICAgICAgICAgICAgdGQuc3R5bGUucGFkZGluZ0JvdHRvbSA9IChjbC5wYWRkaW5nQm90dG9tIHx8IDUpICsgJ3B4JzsKICAgICAgICAgICAgfSBlbHNlIGlmIChpc0hlYWRlclJvdykgewogICAgICAgICAgICAgIHRkLnN0eWxlLnBhZGRpbmcgPSAnMC41cmVtJzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gZHJvcHpvbmUgcG9yIGPDqWx1bGEKICAgICAgICAgICAgdGQuc2V0QXR0cmlidXRlKCdkYXRhLWRyb3Ata2luZCcsICd0YWJsZUNlbGwnKTsKICAgICAgICAgICAgdGQuc2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldC1pZCcsIGVsLmlkKTsKICAgICAgICAgICAgdGQuc2V0QXR0cmlidXRlKCdkYXRhLXJvdycsIFN0cmluZyhyKSk7CiAgICAgICAgICAgIHRkLnNldEF0dHJpYnV0ZSgnZGF0YS1jb2wnLCBTdHJpbmcoYykpOwogICAgICAgICAgICB0ZC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIG9uRHJvcFpvbmVPdmVyKTsKICAgICAgICAgICAgdGQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgb25Ecm9wWm9uZUxlYXZlKTsKICAgICAgICAgICAgdGQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIG9uRHJvcFpvbmVEcm9wKTsKCiAgICAgICAgICAgIGNvbnN0IGtpZHMgPSAoY2VsbE9iai5jaGlsZHJlbiB8fCBbXSk7CiAgICAgICAgICAgIGlmIChraWRzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyQ29sb3IgPSBjZWxsT2JqLmNvbG9yIHx8IChpc0hlYWRlclJvdyA/ICcjNmI3MjgwJyA6ICcjOWNhM2FmJyk7CiAgICAgICAgICAgICAgaWYgKGlzSGVhZGVyUm93KSB7CiAgICAgICAgICAgICAgICB0ZC5pbm5lckhUTUwgPSBgPHNwYW4gc3R5bGU9ImNvbG9yOiR7cGxhY2Vob2xkZXJDb2xvcn07Zm9udC1zaXplOjEycHg7Zm9udC13ZWlnaHQ6Ym9sZDsiPkNhYmXDp2FsaG8gJHtjICsgMX0gLSBBcnJhc3RlIGFxdWk8L3NwYW4+YDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGQuaW5uZXJIVE1MID0gYDxzcGFuIHN0eWxlPSJjb2xvcjoke3BsYWNlaG9sZGVyQ29sb3J9O2ZvbnQtc2l6ZToxMnB4Ij5BcnJhc3RlIGFxdWk8L3NwYW4+YDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAga2lkcy5mb3JFYWNoKGsgPT4gdGQuYXBwZW5kQ2hpbGQocmVuZGVyRWxlbWVudFJlY3Vyc2l2ZShrKSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTsKICAgICAgICAgIH0KICAgICAgICAgIHRibC5hcHBlbmRDaGlsZCh0cik7CiAgICAgICAgfQogICAgICAgIHByZXZpZXcuYXBwZW5kQ2hpbGQodGJsKTsKICAgICAgfQogICAgICBlbHNlIGlmIChlbC50eXBlID09PSAnbWFyZ2luJykgewogICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGRpdi5jbGFzc05hbWUgPSAncHJldmlldy1tYXJnaW4nOwogICAgICAgIGNvbnN0IG1hcmdpblNpemUgPSBOdW1iZXIoZWwucHJvcGVydGllcy5zaXplIHx8IDIwKTsKICAgICAgICBkaXYuc3R5bGUuaGVpZ2h0ID0gYCR7bWFyZ2luU2l6ZX1weGA7CiAgICAgICAgZGl2LnN0eWxlLm1pbkhlaWdodCA9IGAke21hcmdpblNpemV9cHhgOwogICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICAgIGRpdi5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7CiAgICAgICAgZGl2LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7CiAgICAgICAgZGl2LnRleHRDb250ZW50ID0gYEVzcGHDp28gKCR7bWFyZ2luU2l6ZX1weClgOwogICAgICAgIHByZXZpZXcuYXBwZW5kQ2hpbGQoZGl2KTsKICAgICAgfQogICAgICBlbHNlIGlmIChlbC50eXBlID09PSAncGFnZUJyZWFrJykgewogICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGRpdi5jbGFzc05hbWUgPSAncHJldmlldy1wYWdlYnJlYWsnOwogICAgICAgIGRpdi50ZXh0Q29udGVudCA9ICdRdWVicmEgZGUgcMOhZ2luYSc7CiAgICAgICAgcHJldmlldy5hcHBlbmRDaGlsZChkaXYpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKGVsLnR5cGUgPT09ICdxcicpIHsKICAgICAgICBjb25zdCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBib3guY2xhc3NOYW1lID0gJ3ByZXZpZXctcXInOwogICAgICAgIGJveC5zdHlsZS53aWR0aCA9IGAke2VsLnByb3BlcnRpZXMuZml0IHx8IDEwMH1weGA7CiAgICAgICAgYm94LnN0eWxlLmhlaWdodCA9IGAke2VsLnByb3BlcnRpZXMuZml0IHx8IDEwMH1weGA7CiAgICAgICAgYm94LnN0eWxlLmJvcmRlciA9IGAycHggc29saWQgJHtlbC5wcm9wZXJ0aWVzLmZvcmVncm91bmQgfHwgJyMwMDAwMDAnfWA7CiAgICAgICAgYm94LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICAgICAgYm94LnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJzsKICAgICAgICBib3guc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJzsKICAgICAgICBib3guc3R5bGUuYmFja2dyb3VuZCA9IGVsLnByb3BlcnRpZXMuYmFja2dyb3VuZCB8fCAnI2ZmZmZmZic7CiAgICAgICAgY29uc3QgZm9yZWdyb3VuZENvbG9yID0gZWwucHJvcGVydGllcy5mb3JlZ3JvdW5kIHx8ICcjMDAwMDAwJzsKICAgICAgICBib3guaW5uZXJIVE1MID0gYDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTogMC43NXJlbTsgY29sb3I6ICR7Zm9yZWdyb3VuZENvbG9yfTsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij5RUiBDb2RlPC9kaXY+YDsKICAgICAgICBwcmV2aWV3LmFwcGVuZENoaWxkKGJveCk7CiAgICAgIH0KICAgICAgZWxzZSBpZiAoZWwudHlwZSA9PT0gJ3N2ZycpIHsKICAgICAgICBjb25zdCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBib3guY2xhc3NOYW1lID0gJ3ByZXZpZXctc3ZnJzsKICAgICAgICBib3guc3R5bGUud2lkdGggPSBgJHtlbC5wcm9wZXJ0aWVzLndpZHRoIHx8IDEwMH1weGA7CiAgICAgICAgYm94LnN0eWxlLmhlaWdodCA9IGAke2VsLnByb3BlcnRpZXMuaGVpZ2h0IHx8IDEwMH1weGA7CiAgICAgICAgYm94LnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgI2QxZDVkYic7CiAgICAgICAgYm94LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICAgICAgYm94LnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJzsKICAgICAgICBib3guc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJzsKICAgICAgICB0cnkgewogICAgICAgICAgLy8gVGVudGFyIHJlbmRlcml6YXIgbyBTVkcKICAgICAgICAgIGNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTsKICAgICAgICAgIGNvbnN0IHN2Z0RvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoZWwucHJvcGVydGllcy5zdmcgfHwgJycsICdpbWFnZS9zdmcreG1sJyk7CiAgICAgICAgICBjb25zdCBzdmdFbGVtZW50ID0gc3ZnRG9jLmRvY3VtZW50RWxlbWVudDsKICAgICAgICAgIGlmIChzdmdFbGVtZW50ICYmIHN2Z0VsZW1lbnQudGFnTmFtZSA9PT0gJ3N2ZycpIHsKICAgICAgICAgICAgc3ZnRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgZWwucHJvcGVydGllcy53aWR0aCB8fCAxMDApOwogICAgICAgICAgICBzdmdFbGVtZW50LnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgZWwucHJvcGVydGllcy5oZWlnaHQgfHwgMTAwKTsKICAgICAgICAgICAgaWYgKGVsLnByb3BlcnRpZXMuY29sb3IpIHsKICAgICAgICAgICAgICBzdmdFbGVtZW50LnNldEF0dHJpYnV0ZSgnZmlsbCcsIGVsLnByb3BlcnRpZXMuY29sb3IpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJveC5hcHBlbmRDaGlsZChzdmdFbGVtZW50KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJveC5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT0iZm9udC1zaXplOiAwLjc1cmVtOyBjb2xvcjogIzZiNzI4MDsiPlNWRzwvZGl2Pic7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgYm94LmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiAjZWY0NDQ0OyI+RXJybyBubyBTVkc8L2Rpdj4nOwogICAgICAgIH0KICAgICAgICBwcmV2aWV3LmFwcGVuZENoaWxkKGJveCk7CiAgICAgIH0KICAgICAgZWxzZSBpZiAoZWwudHlwZSA9PT0gJ2JhcmNvZGUnKSB7CiAgICAgICAgY29uc3QgYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgYm94LmNsYXNzTmFtZSA9ICdwcmV2aWV3LWJhcmNvZGUnOwogICAgICAgIGJveC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICAgIGJveC5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7CiAgICAgICAgYm94LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7CiAgICAgICAgYm94LnN0eWxlLnBhZGRpbmcgPSAnMXJlbSc7CiAgICAgICAgYm94LnN0eWxlLm1pbkhlaWdodCA9ICc2MHB4JzsKICAgICAgICBib3guc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCAjZDFkNWRiJzsKICAgICAgICBib3guc3R5bGUuYm9yZGVyUmFkaXVzID0gJzAuMzc1cmVtJzsKICAgICAgICBib3guc3R5bGUuYmFja2dyb3VuZCA9ICcjZmZmZmZmJzsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIC8vIEdlcmFyIFNWRyBkbyBiYXJjb2RlIHVzYW5kbyBKc0JhcmNvZGUKICAgICAgICAgIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCAic3ZnIik7CiAgICAgICAgICBjb25zdCBwID0gZWwucHJvcGVydGllcyB8fCB7fTsKCiAgICAgICAgICBpZiAodHlwZW9mIEpzQmFyY29kZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgSnNCYXJjb2RlKHN2ZywgcC5iYXJjb2RlVmFsdWUgfHwgIiIsIHsKICAgICAgICAgICAgICBmb3JtYXQ6IHAuZm9ybWF0IHx8ICJDT0RFMTI4IiwKICAgICAgICAgICAgICB3aWR0aDogTnVtYmVyKHAubGluZVdpZHRoKSB8fCAxLjUsCiAgICAgICAgICAgICAgaGVpZ2h0OiBOdW1iZXIocC5iYXJIZWlnaHQpIHx8IDMwLAogICAgICAgICAgICAgIGRpc3BsYXlWYWx1ZTogcC5kaXNwbGF5VmFsdWUgIT09IGZhbHNlLAogICAgICAgICAgICAgIGZvbnRTaXplOiBOdW1iZXIocC5mb250U2l6ZSkgfHwgMTAsCiAgICAgICAgICAgICAgbWFyZ2luOiBOdW1iZXIocC5tYXJnaW4pIHx8IDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGJveC5hcHBlbmRDaGlsZChzdmcpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYm94LmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiAjNmI3MjgwOyI+QmFyY29kZTogJyArIGVzY2FwZUh0bWwocC5iYXJjb2RlVmFsdWUgfHwgJycpICsgJzwvZGl2Pic7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgYm94LmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiAjZWY0NDQ0OyI+QmFyY29kZSBpbnbDoWxpZG88L2Rpdj4nOwogICAgICAgIH0KCiAgICAgICAgcHJldmlldy5hcHBlbmRDaGlsZChib3gpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKGVsLnR5cGUgPT09ICdzdGFtcCcpIHsKICAgICAgICBjb25zdCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBib3guY2xhc3NOYW1lID0gJ3ByZXZpZXctc3RhbXAnOwogICAgICAgIGNvbnN0IHAgPSBlbC5wcm9wZXJ0aWVzIHx8IHt9OwogICAgICAgIGNvbnN0IGZpdCA9IEFycmF5LmlzQXJyYXkocC5maXQpID8gcC5maXQgOiBbcC5maXQgfHwgMTIwLCBwLmZpdCB8fCAxMjBdOwogICAgICAgIGJveC5zdHlsZS53aWR0aCA9IGAke2ZpdFswXX1weGA7CiAgICAgICAgYm94LnN0eWxlLmhlaWdodCA9IGAke2ZpdFsxXX1weGA7CiAgICAgICAgYm94LnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgI2QxZDVkYic7CiAgICAgICAgYm94LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICAgICAgYm94LnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJzsKICAgICAgICBib3guc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJzsKICAgICAgICBib3guc3R5bGUuYmFja2dyb3VuZCA9ICcjZjlmYWZiJzsKICAgICAgICBib3guc3R5bGUub3BhY2l0eSA9IHAub3BhY2l0eSAhPT0gdW5kZWZpbmVkID8gcC5vcGFjaXR5IDogMTsKCiAgICAgICAgaWYgKHAuc291cmNlVHlwZSA9PT0gJ2ltYWdlJyAmJiBwLnZhbHVlKSB7CiAgICAgICAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgICAgIGltZy5zcmMgPSBwLnZhbHVlOwogICAgICAgICAgaW1nLnN0eWxlLm1heFdpZHRoID0gJzEwMCUnOwogICAgICAgICAgaW1nLnN0eWxlLm1heEhlaWdodCA9ICcxMDAlJzsKICAgICAgICAgIGltZy5zdHlsZS5vYmplY3RGaXQgPSAnY29udGFpbic7CiAgICAgICAgICBpbWcub25lcnJvciA9ICgpID0+IHsKICAgICAgICAgICAgYm94LmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiAjZWY0NDQ0OyI+RXJybyBhbyBjYXJyZWdhciBpbWFnZW08L2Rpdj4nOwogICAgICAgICAgfTsKICAgICAgICAgIGJveC5hcHBlbmRDaGlsZChpbWcpOwogICAgICAgIH0gZWxzZSBpZiAocC5zb3VyY2VUeXBlID09PSAnc3ZnJyAmJiBwLnZhbHVlKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7CiAgICAgICAgICAgIGNvbnN0IHN2Z0RvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcocC52YWx1ZSwgJ2ltYWdlL3N2Zyt4bWwnKTsKICAgICAgICAgICAgY29uc3Qgc3ZnRWxlbWVudCA9IHN2Z0RvYy5kb2N1bWVudEVsZW1lbnQ7CiAgICAgICAgICAgIGlmIChzdmdFbGVtZW50ICYmIHN2Z0VsZW1lbnQudGFnTmFtZSA9PT0gJ3N2ZycpIHsKICAgICAgICAgICAgICBzdmdFbGVtZW50LnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBmaXRbMF0pOwogICAgICAgICAgICAgIHN2Z0VsZW1lbnQuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBmaXRbMV0pOwogICAgICAgICAgICAgIGJveC5hcHBlbmRDaGlsZChzdmdFbGVtZW50KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBib3guaW5uZXJIVE1MID0gJzxkaXYgc3R5bGU9ImZvbnQtc2l6ZTogMC43NXJlbTsgY29sb3I6ICM2YjcyODA7Ij5DYXJpbWJvIC8gU2VsbzwvZGl2Pic7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgYm94LmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiAjZWY0NDQ0OyI+RXJybyBubyBTVkc8L2Rpdj4nOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBib3guaW5uZXJIVE1MID0gJzxkaXYgc3R5bGU9ImZvbnQtc2l6ZTogMC43NXJlbTsgY29sb3I6ICM2YjcyODA7Ij5DYXJpbWJvIC8gU2VsbzwvZGl2Pic7CiAgICAgICAgfQogICAgICAgIHByZXZpZXcuYXBwZW5kQ2hpbGQoYm94KTsKICAgICAgfQogICAgICBlbHNlIGlmIChlbC50eXBlID09PSAnY2hlY2tib3gnIHx8IGVsLnR5cGUgPT09ICdyYWRpbycpIHsKICAgICAgICBjb25zdCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBib3guY2xhc3NOYW1lID0gYHByZXZpZXctJHtlbC50eXBlfWA7CiAgICAgICAgY29uc3QgcCA9IGVsLnByb3BlcnRpZXMgfHwge307CiAgICAgICAgY29uc3QgY2hvaWNlVHlwZSA9IHAuY2hvaWNlVHlwZSB8fCBlbC50eXBlOwogICAgICAgIGNvbnN0IGNob2ljZVRleHQgPSBwLmNob2ljZVRleHQgfHwgJ1RleHRvLi4uJzsKICAgICAgICBjb25zdCBjaG9pY2VDaGVja2VkID0gcC5jaG9pY2VDaGVja2VkID09PSB0cnVlOwogICAgICAgIGNvbnN0IGNob2ljZUljb25Qb3NpdGlvbiA9IHAuY2hvaWNlSWNvblBvc2l0aW9uIHx8ICdiZWZvcmUnOwogICAgICAgIGNvbnN0IGNob2ljZUdhcCA9IE51bWJlcihwLmNob2ljZUdhcCB8fCA4KTsKICAgICAgICBjb25zdCBjaG9pY2VJY29uU2l6ZSA9IE51bWJlcihwLmNob2ljZUljb25TaXplIHx8IDEyKTsKCiAgICAgICAgYm94LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICAgICAgYm94LnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93JzsKICAgICAgICBib3guc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInOwogICAgICAgIGJveC5zdHlsZS5nYXAgPSBgJHtjaG9pY2VHYXB9cHhgOwogICAgICAgIGJveC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IHAuYWxpZ25tZW50ID09PSAnY2VudGVyJyA/ICdjZW50ZXInIDogcC5hbGlnbm1lbnQgPT09ICdyaWdodCcgPyAnZmxleC1lbmQnIDogJ2ZsZXgtc3RhcnQnOwogICAgICAgIGJveC5zdHlsZS53aWR0aCA9ICcxMDAlJzsKICAgICAgICBib3guc3R5bGUubWluSGVpZ2h0ID0gYCR7Y2hvaWNlSWNvblNpemUgKyA0fXB4YDsKCiAgICAgICAgLy8gRnVuw6fDo28gcGFyYSBnZXJhciBTVkcgZG8gw61jb25lCiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVJY29uU1ZHKHR5cGUsIGNoZWNrZWQsIHNpemUpIHsKICAgICAgICAgIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCAic3ZnIik7CiAgICAgICAgICBzdmcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIHNpemUpOwogICAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZSgnaGVpZ2h0Jywgc2l6ZSk7CiAgICAgICAgICBzdmcuc2V0QXR0cmlidXRlKCd2aWV3Qm94JywgYDAgMCAke3NpemV9ICR7c2l6ZX1gKTsKICAgICAgICAgIHN2Zy5zdHlsZS5mbGV4U2hyaW5rID0gJzAnOwoKICAgICAgICAgIGlmICh0eXBlID09PSAnY2hlY2tib3gnKSB7CiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgInJlY3QiKTsKICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3gnLCAnMScpOwogICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZSgneScsICcxJyk7CiAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCd3aWR0aCcsIHNpemUgLSAyKTsKICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHNpemUgLSAyKTsKICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnbm9uZScpOwogICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMwMDAnKTsKICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcxJyk7CiAgICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChyZWN0KTsKCiAgICAgICAgICAgIGlmIChjaGVja2VkKSB7CiAgICAgICAgICAgICAgY29uc3QgY2hlY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgInBhdGgiKTsKICAgICAgICAgICAgICBjaGVjay5zZXRBdHRyaWJ1dGUoJ2QnLCBgTSAzICR7c2l6ZSAqIDAuNX0gTCAke3NpemUgKiAwLjR9ICR7c2l6ZSAqIDAuN30gTCAke3NpemUgKiAwLjh9ICR7c2l6ZSAqIDAuM31gKTsKICAgICAgICAgICAgICBjaGVjay5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnbm9uZScpOwogICAgICAgICAgICAgIGNoZWNrLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMwMDAnKTsKICAgICAgICAgICAgICBjaGVjay5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcxLjMnKTsKICAgICAgICAgICAgICBjaGVjay5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1saW5lY2FwJywgJ3JvdW5kJyk7CiAgICAgICAgICAgICAgY2hlY2suc2V0QXR0cmlidXRlKCdzdHJva2UtbGluZWpvaW4nLCAncm91bmQnKTsKICAgICAgICAgICAgICBzdmcuYXBwZW5kQ2hpbGQoY2hlY2spOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdyYWRpbycpIHsKICAgICAgICAgICAgY29uc3QgY2lyY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsICJjaXJjbGUiKTsKICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnY3gnLCBzaXplIC8gMik7CiAgICAgICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ2N5Jywgc2l6ZSAvIDIpOwogICAgICAgICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdyJywgc2l6ZSAvIDIgLSAxKTsKICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdub25lJyk7CiAgICAgICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICcjMDAwJyk7CiAgICAgICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcxJyk7CiAgICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChjaXJjbGUpOwoKICAgICAgICAgICAgaWYgKGNoZWNrZWQpIHsKICAgICAgICAgICAgICBjb25zdCBkb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgImNpcmNsZSIpOwogICAgICAgICAgICAgIGRvdC5zZXRBdHRyaWJ1dGUoJ2N4Jywgc2l6ZSAvIDIpOwogICAgICAgICAgICAgIGRvdC5zZXRBdHRyaWJ1dGUoJ2N5Jywgc2l6ZSAvIDIpOwogICAgICAgICAgICAgIGRvdC5zZXRBdHRyaWJ1dGUoJ3InLCBzaXplIC8gNCk7CiAgICAgICAgICAgICAgZG90LnNldEF0dHJpYnV0ZSgnZmlsbCcsICcjMDAwJyk7CiAgICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGRvdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gc3ZnOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgaWNvblNWRyA9IGdlbmVyYXRlSWNvblNWRyhjaG9pY2VUeXBlLCBjaG9pY2VDaGVja2VkLCBjaG9pY2VJY29uU2l6ZSk7CiAgICAgICAgY29uc3QgdGV4dERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHRleHREaXYudGV4dENvbnRlbnQgPSBjaG9pY2VUZXh0OwogICAgICAgIHRleHREaXYuc3R5bGUuZmxleCA9ICcxJzsKICAgICAgICB0ZXh0RGl2LnN0eWxlLmZvbnRTaXplID0gJzE0cHgnOwogICAgICAgIHRleHREaXYuc3R5bGUuY29sb3IgPSAnIzExMTgyNyc7CgogICAgICAgIGlmIChjaG9pY2VJY29uUG9zaXRpb24gPT09ICdiZWZvcmUnKSB7CiAgICAgICAgICBib3guYXBwZW5kQ2hpbGQoaWNvblNWRyk7CiAgICAgICAgICBib3guYXBwZW5kQ2hpbGQodGV4dERpdik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGJveC5hcHBlbmRDaGlsZCh0ZXh0RGl2KTsKICAgICAgICAgIGJveC5hcHBlbmRDaGlsZChpY29uU1ZHKTsKICAgICAgICB9CgogICAgICAgIHByZXZpZXcuYXBwZW5kQ2hpbGQoYm94KTsKICAgICAgfQogICAgICBlbHNlIGlmIChlbC50eXBlID09PSAnZmlsbExpbmUnKSB7CiAgICAgICAgY29uc3QgYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgYm94LmNsYXNzTmFtZSA9ICdwcmV2aWV3LWZpbGxsaW5lJzsKICAgICAgICBjb25zdCBwID0gZWwucHJvcGVydGllcyB8fCB7fTsKICAgICAgICBjb25zdCBsaW5lV2lkdGggPSBOdW1iZXIocC5saW5lV2lkdGggfHwgMjAwKTsKICAgICAgICBjb25zdCB0aGlja25lc3MgPSBOdW1iZXIocC50aGlja25lc3MgfHwgMC44KTsKICAgICAgICBjb25zdCBjb2xvciA9IHAuY29sb3IgfHwgJyMwMDAwMDAnOwoKICAgICAgICBib3guc3R5bGUud2lkdGggPSBgJHtsaW5lV2lkdGh9cHhgOwogICAgICAgIGJveC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlja25lc3MgKyA0fXB4YDsKICAgICAgICBib3guc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgICAgICBib3guc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInOwogICAgICAgIGJveC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IHAuYWxpZ25tZW50ID09PSAnY2VudGVyJyA/ICdjZW50ZXInIDogcC5hbGlnbm1lbnQgPT09ICdyaWdodCcgPyAnZmxleC1lbmQnIDogJ2ZsZXgtc3RhcnQnOwoKICAgICAgICBjb25zdCBsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgbGluZS5zdHlsZS53aWR0aCA9IGAke2xpbmVXaWR0aH1weGA7CiAgICAgICAgbGluZS5zdHlsZS5oZWlnaHQgPSBgJHt0aGlja25lc3N9cHhgOwogICAgICAgIGxpbmUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3I7CiAgICAgICAgbGluZS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnMXB4JzsKICAgICAgICBib3guYXBwZW5kQ2hpbGQobGluZSk7CiAgICAgICAgcHJldmlldy5hcHBlbmRDaGlsZChib3gpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKGVsLnR5cGUgPT09ICdjaGFydCcpIHsKICAgICAgICBjb25zdCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBib3guY2xhc3NOYW1lID0gJ3ByZXZpZXctY2hhcnQnOwogICAgICAgIGNvbnN0IHAgPSBlbC5wcm9wZXJ0aWVzIHx8IHt9OwogICAgICAgIGNvbnN0IHdpZHRoID0gTnVtYmVyKHAuY2hhcnRXaWR0aCB8fCA0MDApOwogICAgICAgIGNvbnN0IGhlaWdodCA9IE51bWJlcihwLmNoYXJ0SGVpZ2h0IHx8IDIwMCk7CgogICAgICAgIGJveC5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDsKICAgICAgICBib3guc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDsKICAgICAgICBib3guc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCAjZDFkNWRiJzsKICAgICAgICBib3guc3R5bGUuYm9yZGVyUmFkaXVzID0gJzAuMzc1cmVtJzsKICAgICAgICBib3guc3R5bGUuYmFja2dyb3VuZCA9IHAuY2hhcnRCYWNrZ3JvdW5kQ29sb3IgfHwgJyNGRkZGRkYnOwogICAgICAgIGJveC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7CiAgICAgICAgYm94LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICAgICAgYm94LnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJzsKICAgICAgICBib3guc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJzsKCiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7CiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDsKICAgICAgICBjYW52YXMuc3R5bGUubWF4V2lkdGggPSAnMTAwJSc7CiAgICAgICAgY2FudmFzLnN0eWxlLm1heEhlaWdodCA9ICcxMDAlJzsKICAgICAgICBib3guYXBwZW5kQ2hpbGQoY2FudmFzKTsKCiAgICAgICAgLy8gUmVuZGVyaXphciBncsOhZmljbyB1c2FuZG8gQ2hhcnQuanMgc2UgZGlzcG9uw612ZWwKICAgICAgICBpZiAodHlwZW9mIENoYXJ0ICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgIGNvbnN0IGNoYXJ0RGF0YSA9IHAuY2hhcnREYXRhIHx8IHsgbGFiZWxzOiBbXSwgZGF0YXNldHM6IFtdIH07CiAgICAgICAgICAgIGNvbnN0IGNoYXJ0T3B0aW9ucyA9IHsKICAgICAgICAgICAgICAuLi4ocC5jaGFydE9wdGlvbnMgfHwge30pLAogICAgICAgICAgICAgIHJlc3BvbnNpdmU6IGZhbHNlLAogICAgICAgICAgICAgIGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMCB9LAogICAgICAgICAgICAgIG1haW50YWluQXNwZWN0UmF0aW86IGZhbHNlCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBjaGFydCA9IG5ldyBDaGFydChjdHgsIHsKICAgICAgICAgICAgICB0eXBlOiBwLmNoYXJ0VHlwZSB8fCAnYmFyJywKICAgICAgICAgICAgICBkYXRhOiBjaGFydERhdGEsCiAgICAgICAgICAgICAgb3B0aW9uczogY2hhcnRPcHRpb25zCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gQXJtYXplbmFyIHJlZmVyw6puY2lhIGRvIGNoYXJ0IHBhcmEgZGVzdHJ1aXIgZGVwb2lzCiAgICAgICAgICAgIGJveC5fY2hhcnQgPSBjaGFydDsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgYm94LmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiAjZWY0NDQ0OyI+RXJybyBhbyByZW5kZXJpemFyIGdyw6FmaWNvPC9kaXY+JzsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgYm94LmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiAjNmI3MjgwOyI+Q2hhcnQuanMgbsOjbyBjYXJyZWdhZG88L2Rpdj4nOwogICAgICAgIH0KCiAgICAgICAgcHJldmlldy5hcHBlbmRDaGlsZChib3gpOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHByZXZpZXcudGV4dENvbnRlbnQgPSBlbGVtZW50TGFiZWwoZWwpOwogICAgICB9CgogICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHByZXZpZXcpOwogICAgICByZXR1cm4gd3JhcHBlcjsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJDYW52YXMoc2hvdWxkQWRqdXN0U2l6ZSA9IHRydWUpIHsKICAgICAgY29uc3Qgcm9vdCA9IGdldFJvb3RHcm91cCgpOwoKICAgICAgLy8gTGltcGFyIGNhbnZhcwogICAgICBlbGVtZW50c0xpc3QuaW5uZXJIVE1MID0gJyc7CgogICAgICAvLyBSZW5kZXJpemFyIEhlYWRlciBzZSBhdGl2YWRvCiAgICAgIGlmIChkb2N1bWVudEhlYWRlci5lbmFibGVkICYmIGRvY3VtZW50SGVhZGVyLnJvb3QpIHsKICAgICAgICBjb25zdCBoZWFkZXJDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBoZWFkZXJDb250YWluZXIuY2xhc3NOYW1lID0gJ2hlYWRlci1jb250YWluZXInOwogICAgICAgIGhlYWRlckNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtaGVhZGVyLWNvbnRhaW5lcicsICd0cnVlJyk7CiAgICAgICAgLy8gUmVtb3ZpZG8gcG9zaXRpb246IHN0aWNreSBwYXJhIHF1ZSByb2xlIGp1bnRvIGNvbSBvIGNvbnRlw7pkbwogICAgICAgIC8vIE1hbnTDqW0gYXBlbmFzIG8gZXN0aWxvIHZpc3VhbCwgc2VtIGZpeGHDp8OjbyBkdXJhbnRlIHNjcm9sbAogICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kID0gJyNmOWZhZmInOwogICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5ib3JkZXJCb3R0b20gPSAnMnB4IHNvbGlkICMyNTYzZWInOwogICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzFyZW0nOwogICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMXJlbSc7CiAgICAgICAgaGVhZGVyQ29udGFpbmVyLnN0eWxlLm1pbkhlaWdodCA9IGAke2RvY3VtZW50SGVhZGVyLmhlaWdodH1weGA7CgogICAgICAgIGNvbnN0IGhlYWRlckxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgaGVhZGVyTGFiZWwuc3R5bGUuZm9udFNpemUgPSAnMC43NXJlbSc7CiAgICAgICAgaGVhZGVyTGFiZWwuc3R5bGUuZm9udFdlaWdodCA9ICc2MDAnOwogICAgICAgIGhlYWRlckxhYmVsLnN0eWxlLmNvbG9yID0gJyMyNTYzZWInOwogICAgICAgIGhlYWRlckxhYmVsLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwLjVyZW0nOwogICAgICAgIGhlYWRlckxhYmVsLnRleHRDb250ZW50ID0gJ/Cfk4QgQ0FCRcOHQUxITyc7CiAgICAgICAgaGVhZGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKGhlYWRlckxhYmVsKTsKCiAgICAgICAgY29uc3QgaGVhZGVyQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGhlYWRlckNvbnRlbnQuY2xhc3NOYW1lID0gJ2hlYWRlci1jb250ZW50JzsKICAgICAgICBoZWFkZXJDb250ZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1kcm9wLWtpbmQnLCAnZ3JvdXBDaGlsZHJlbicpOwogICAgICAgIGhlYWRlckNvbnRlbnQuc2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldC1pZCcsIGRvY3VtZW50SGVhZGVyLnJvb3QuaWQpOwogICAgICAgIGhlYWRlckNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBvbkRyb3Bab25lT3Zlcik7CiAgICAgICAgaGVhZGVyQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCBvbkRyb3Bab25lTGVhdmUpOwogICAgICAgIGhlYWRlckNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIG9uRHJvcFpvbmVEcm9wKTsKCiAgICAgICAgY29uc3QgaGVhZGVyQ2hpbGRyZW4gPSBkb2N1bWVudEhlYWRlci5yb290LnByb3BlcnRpZXMuY2hpbGRyZW4gfHwgW107CiAgICAgICAgaWYgKGhlYWRlckNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgY29uc3QgcGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgIHBoLmNsYXNzTmFtZSA9ICdncm91cC1wbGFjZWhvbGRlcic7CiAgICAgICAgICBwaC50ZXh0Q29udGVudCA9ICdBcnJhc3RlIGVsZW1lbnRvcyBhcXVpIHBhcmEgbyBjYWJlw6dhbGhvJzsKICAgICAgICAgIGhlYWRlckNvbnRlbnQuYXBwZW5kQ2hpbGQocGgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBoZWFkZXJDaGlsZHJlbi5mb3JFYWNoKGNoID0+IHsKICAgICAgICAgICAgaGVhZGVyQ29udGVudC5hcHBlbmRDaGlsZChyZW5kZXJFbGVtZW50UmVjdXJzaXZlKGNoKSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGhlYWRlckNvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkZXJDb250ZW50KTsKICAgICAgICBlbGVtZW50c0xpc3QuYXBwZW5kQ2hpbGQoaGVhZGVyQ29udGFpbmVyKTsKICAgICAgfQoKICAgICAgLy8gUmVuZGVyaXphciBjb250ZcO6ZG8gcHJpbmNpcGFsCiAgICAgIGlmICghcm9vdCkgewogICAgICAgIGNhbnZhc0VtcHR5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICAgICAgZWxlbWVudHNMaXN0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgLy8gUmVzZXRhciBhbHR1cmEgZG8gY2FudmFzIHF1YW5kbyB2YXppbwogICAgICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSAnYXV0byc7CiAgICAgICAgY2FudmFzLnN0eWxlLm1pbkhlaWdodCA9ICc4NDJweCc7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNhbnZhc0VtcHR5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIGVsZW1lbnRzTGlzdC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwoKICAgICAgZWxlbWVudHNMaXN0LmFwcGVuZENoaWxkKHJlbmRlckVsZW1lbnRSZWN1cnNpdmUocm9vdCkpOwoKICAgICAgLy8gUmVuZGVyaXphciBGb290ZXIgc2UgYXRpdmFkbwogICAgICBpZiAoZG9jdW1lbnRGb290ZXIuZW5hYmxlZCAmJiBkb2N1bWVudEZvb3Rlci5yb290KSB7CiAgICAgICAgY29uc3QgZm9vdGVyQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgZm9vdGVyQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdmb290ZXItY29udGFpbmVyJzsKICAgICAgICBmb290ZXJDb250YWluZXIuc2V0QXR0cmlidXRlKCdkYXRhLWZvb3Rlci1jb250YWluZXInLCAndHJ1ZScpOwogICAgICAgIC8vIFJlbW92aWRvIHBvc2l0aW9uOiBzdGlja3kgcGFyYSBxdWUgcm9sZSBqdW50byBjb20gbyBjb250ZcO6ZG8KICAgICAgICAvLyBNYW50w6ltIGFwZW5hcyBvIGVzdGlsbyB2aXN1YWwsIHNlbSBmaXhhw6fDo28gZHVyYW50ZSBzY3JvbGwKICAgICAgICBmb290ZXJDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZCA9ICcjZjlmYWZiJzsKICAgICAgICBmb290ZXJDb250YWluZXIuc3R5bGUuYm9yZGVyVG9wID0gJzJweCBzb2xpZCAjMjU2M2ViJzsKICAgICAgICBmb290ZXJDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICcxcmVtJzsKICAgICAgICBmb290ZXJDb250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzFyZW0nOwogICAgICAgIGZvb3RlckNvbnRhaW5lci5zdHlsZS5taW5IZWlnaHQgPSBgJHtkb2N1bWVudEZvb3Rlci5oZWlnaHR9cHhgOwoKICAgICAgICBjb25zdCBmb290ZXJMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGZvb3RlckxhYmVsLnN0eWxlLmZvbnRTaXplID0gJzAuNzVyZW0nOwogICAgICAgIGZvb3RlckxhYmVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnNjAwJzsKICAgICAgICBmb290ZXJMYWJlbC5zdHlsZS5jb2xvciA9ICcjMjU2M2ViJzsKICAgICAgICBmb290ZXJMYWJlbC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMC41cmVtJzsKICAgICAgICBmb290ZXJMYWJlbC50ZXh0Q29udGVudCA9ICfwn5OEIFJPREFQw4knOwogICAgICAgIGZvb3RlckNvbnRhaW5lci5hcHBlbmRDaGlsZChmb290ZXJMYWJlbCk7CgogICAgICAgIGNvbnN0IGZvb3RlckNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBmb290ZXJDb250ZW50LmNsYXNzTmFtZSA9ICdmb290ZXItY29udGVudCc7CiAgICAgICAgZm9vdGVyQ29udGVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZHJvcC1raW5kJywgJ2dyb3VwQ2hpbGRyZW4nKTsKICAgICAgICBmb290ZXJDb250ZW50LnNldEF0dHJpYnV0ZSgnZGF0YS10YXJnZXQtaWQnLCBkb2N1bWVudEZvb3Rlci5yb290LmlkKTsKICAgICAgICBmb290ZXJDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgb25Ecm9wWm9uZU92ZXIpOwogICAgICAgIGZvb3RlckNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgb25Ecm9wWm9uZUxlYXZlKTsKICAgICAgICBmb290ZXJDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBvbkRyb3Bab25lRHJvcCk7CgogICAgICAgIGNvbnN0IGZvb3RlckNoaWxkcmVuID0gZG9jdW1lbnRGb290ZXIucm9vdC5wcm9wZXJ0aWVzLmNoaWxkcmVuIHx8IFtdOwogICAgICAgIGlmIChmb290ZXJDaGlsZHJlbi5sZW5ndGggPT09IDApIHsKICAgICAgICAgIGNvbnN0IHBoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICBwaC5jbGFzc05hbWUgPSAnZ3JvdXAtcGxhY2Vob2xkZXInOwogICAgICAgICAgcGgudGV4dENvbnRlbnQgPSAnQXJyYXN0ZSBlbGVtZW50b3MgYXF1aSBwYXJhIG8gcm9kYXDDqSc7CiAgICAgICAgICBmb290ZXJDb250ZW50LmFwcGVuZENoaWxkKHBoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZm9vdGVyQ2hpbGRyZW4uZm9yRWFjaChjaCA9PiB7CiAgICAgICAgICAgIGZvb3RlckNvbnRlbnQuYXBwZW5kQ2hpbGQocmVuZGVyRWxlbWVudFJlY3Vyc2l2ZShjaCkpOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmb290ZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoZm9vdGVyQ29udGVudCk7CiAgICAgICAgZWxlbWVudHNMaXN0LmFwcGVuZENoaWxkKGZvb3RlckNvbnRhaW5lcik7CiAgICAgIH0KCiAgICAgIGFwcGx5Wm9vbSgpOwoKICAgICAgLy8gQWp1c3RhciBhbHR1cmEgZSBsYXJndXJhIGRvIGNhbnZhcyBkaW5hbWljYW1lbnRlIGJhc2VhZG8gbm8gY29udGXDumRvCiAgICAgIC8vIElNUE9SVEFOVEU6IFPDsyBhanVzdGFyIHNlIHNvbGljaXRhZG8gRSBzZSBwZXJtaXRpZG8gKGFwZW5hcyBxdWFuZG8gZWxlbWVudG9zIHPDo28gYWRpY2lvbmFkb3MvcmVtb3ZpZG9zKQogICAgICBpZiAoc2hvdWxkQWRqdXN0U2l6ZSAmJiBhbGxvd0NhbnZhc1NpemVBZGp1c3QpIHsKICAgICAgICAvLyBVc2FyIHNldFRpbWVvdXQgcGFyYSBnYXJhbnRpciBxdWUgbyBET00gZXN0w6EgY29tcGxldGFtZW50ZSByZW5kZXJpemFkbwogICAgICAgIC8vIElzc28gZXZpdGEgbWVkacOnw7VlcyBpbmNvcnJldGFzIHF1ZSBjYXVzYW0gY3Jlc2NpbWVudG8gaW5maW5pdG8KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIGlmIChhbGxvd0NhbnZhc1NpemVBZGp1c3QpIHsKICAgICAgICAgICAgYWRqdXN0Q2FudmFzU2l6ZSgpOwogICAgICAgICAgICAvLyBEZXNhdGl2YXIgaW1lZGlhdGFtZW50ZSBhcMOzcyBhanVzdGFyIHBhcmEgZXZpdGFyIGFqdXN0ZXMgZW0gY2xpcXVlcyBzdWJzZXF1ZW50ZXMKICAgICAgICAgICAgYWxsb3dDYW52YXNTaXplQWRqdXN0ID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSwgNTApOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBGdW7Dp8OjbyBjZW50cmFsIHBhcmEgYXV0by1yZWRpbWVuc2lvbmFyIGEgcMOhZ2luYS9jYW52YXMgYmFzZWFkbyBubyBjb250ZcO6ZG8gcmVhbAogICAgICogQWp1c3RhIHRhbnRvIEFMVFVSQSBxdWFudG8gTEFSR1VSQSBkaW5hbWljYW1lbnRlLCBzZW0gaW1wb3IgbGltaXRlcyBhcnRpZmljaWFpcwogICAgICogCiAgICAgKiBDb21wb3J0YW1lbnRvOgogICAgICogLSBNZWRlIG8gY29udGXDumRvIFJFQUwgdXNhbmRvIHNjcm9sbFdpZHRoL3Njcm9sbEhlaWdodAogICAgICogLSBBcGxpY2EgbyB0YW1hbmhvIGNhbGN1bGFkbyBubyBjYW52YXMKICAgICAqIC0gTsOjbyBhbHRlcmEgbGF5b3V0IHZpc3VhbCwgYXBlbmFzIHRhbWFuaG8gZG8gY29udGFpbmVyCiAgICAgKiAtIE7Do28gYWZldGEgbyBvdXRwdXQgZG8gUERGIChhcGVuYXMgdmlzdWFsIGRvIGVkaXRvcikKICAgICAqLwogICAgbGV0IGlzQWRqdXN0aW5nQ2FudmFzU2l6ZSA9IGZhbHNlOyAvLyBGbGFnIHBhcmEgZXZpdGFyIGNoYW1hZGFzIHJlY3Vyc2l2YXMKICAgIGxldCBsYXN0Q2FudmFzV2lkdGggPSAwOyAvLyBBcm1hemVuYXIgw7psdGltYSBsYXJndXJhIGFwbGljYWRhIHBhcmEgZXZpdGFyIHJlY8OhbGN1bG9zIGRlc25lY2Vzc8OhcmlvcwogICAgbGV0IGxhc3RDYW52YXNIZWlnaHQgPSAwOyAvLyBBcm1hemVuYXIgw7psdGltYSBhbHR1cmEgYXBsaWNhZGEgcGFyYSBldml0YXIgcmVjw6FsY3Vsb3MgZGVzbmVjZXNzw6FyaW9zCgogICAgLy8gRnVuw6fDo28gYXV4aWxpYXIgcGFyYSByZXNldGFyIGNhY2hlIGRlIHRhbWFuaG8gZG8gY2FudmFzIHF1YW5kbyBjb250ZcO6ZG8gbXVkYQogICAgLy8gSU1QT1JUQU5URTogU8OzIHJlc2V0YXIgcXVhbmRvIGjDoSBtdWRhbsOnYXMgZXN0cnV0dXJhaXMgcmVhaXMgKGFkaWNpb25hci9yZW1vdmVyIGVsZW1lbnRvcykKICAgIC8vIE7Dg08gcmVzZXRhciBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMgKHRleHRvLCBjb3JlcywgZXRjLikKICAgIGZ1bmN0aW9uIHJlc2V0Q2FudmFzU2l6ZUNhY2hlKCkgewogICAgICBsYXN0Q2FudmFzV2lkdGggPSAwOwogICAgICBsYXN0Q2FudmFzSGVpZ2h0ID0gMDsKICAgIH0KCiAgICAvLyBGbGFnIHBhcmEgaW5kaWNhciBzZSBlc3RhbW9zIGVtIG1vZG8gZGUgZWRpw6fDo28gKG7Do28gYWp1c3RhciB0YW1hbmhvKQogICAgbGV0IGlzRWRpdGluZ01vZGUgPSBmYWxzZTsKCiAgICAvLyBGbGFnIHBhcmEgcGVybWl0aXIgYWp1c3RlIGRlIHRhbWFuaG8gYXBlbmFzIHF1YW5kbyBlbGVtZW50b3Mgc8OjbyBhZGljaW9uYWRvcy9yZW1vdmlkb3MKICAgIGxldCBhbGxvd0NhbnZhc1NpemVBZGp1c3QgPSBmYWxzZTsKCiAgICBmdW5jdGlvbiBhZGp1c3RDYW52YXNTaXplKCkgewogICAgICAvLyBFdml0YXIgY2hhbWFkYXMgcmVjdXJzaXZhcyBxdWUgcG9kZW0gY2F1c2FyIGNyZXNjaW1lbnRvIGluZmluaXRvCiAgICAgIGlmIChpc0FkanVzdGluZ0NhbnZhc1NpemUpIHJldHVybjsKCiAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAvLyBJc3NvIGV2aXRhIGNyZXNjaW1lbnRvIGluZmluaXRvIGFvIGVkaXRhciB0ZXh0bywgY29yZXMsIHBvc2nDp8O1ZXMsIGV0Yy4KICAgICAgaWYgKGlzRWRpdGluZ01vZGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIElNUE9SVEFOVEU6IFPDsyBhanVzdGFyIHRhbWFuaG8gcXVhbmRvIGV4cGxpY2l0YW1lbnRlIHBlcm1pdGlkbyAoYWRpY2lvbmFyL3JlbW92ZXIgZWxlbWVudG9zKQogICAgICAvLyBJc3NvIGV2aXRhIGNyZXNjaW1lbnRvIGluZmluaXRvIGFvIGNsaWNhciBlbSBlbGVtZW50b3Mgb3Ugbm8gY2FudmFzCiAgICAgIGlmICghYWxsb3dDYW52YXNTaXplQWRqdXN0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpc0FkanVzdGluZ0NhbnZhc1NpemUgPSB0cnVlOwoKICAgICAgLy8gSU1QT1JUQU5URTogRGVzYXRpdmFyIGFsbG93Q2FudmFzU2l6ZUFkanVzdCBpbWVkaWF0YW1lbnRlIHBhcmEgZXZpdGFyIG3Dumx0aXBsYXMgY2hhbWFkYXMKICAgICAgYWxsb3dDYW52YXNTaXplQWRqdXN0ID0gZmFsc2U7CgogICAgICAvLyBBZ3VhcmRhciBtw7psdGlwbG9zIGZyYW1lcyBwYXJhIGdhcmFudGlyIHF1ZSBvIERPTSBmb2kgY29tcGxldGFtZW50ZSBhdHVhbGl6YWRvCiAgICAgIC8vIElzc28gw6kgaW1wb3J0YW50ZSBwYXJhIGVsZW1lbnRvcyBhbmluaGFkb3MgZSB0cmFuc2nDp8O1ZXMgQ1NTCiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7CiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHsKICAgICAgICAgIGlmICghZWxlbWVudHNMaXN0IHx8ICFjYW52YXMpIHsKICAgICAgICAgICAgaXNBZGp1c3RpbmdDYW52YXNTaXplID0gZmFsc2U7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAgIC8vIEFKVVNUQVIgQUxUVVJBIChqw6EgZnVuY2lvbmFuZG8sIG1hbnRlciBsw7NnaWNhKQogICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgICBpZiAoZWxlbWVudHNMaXN0LmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAvLyBTZSBuw6NvIGjDoSBlbGVtZW50b3MsIG1hbnRlciBhbHR1cmEgbcOtbmltYQogICAgICAgICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nOwogICAgICAgICAgICBjYW52YXMuc3R5bGUubWluSGVpZ2h0ID0gJzg0MnB4JzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIENhbGN1bGFyIGFsdHVyYSB0b3RhbCBkbyBjb250ZcO6ZG8KICAgICAgICAgICAgLy8gUGFkZGluZyBkbyBjYW52YXM6IDJyZW0gdG9wICsgMnJlbSBib3R0b20gPSA2NHB4IHRvdGFsCiAgICAgICAgICAgIGNvbnN0IGNhbnZhc1BhZGRpbmdUb3AgPSAzMjsgLy8gMnJlbQogICAgICAgICAgICBjb25zdCBjYW52YXNQYWRkaW5nQm90dG9tID0gMzI7IC8vIDJyZW0KCiAgICAgICAgICAgIC8vIE9idGVyIGFsdHVyYSB0b3RhbCBkYSBsaXN0YSBkZSBlbGVtZW50b3MKICAgICAgICAgICAgLy8gVXNhciBzY3JvbGxIZWlnaHQgcGFyYSBwZWdhciBhIGFsdHVyYSByZWFsIGluY2x1aW5kbyBlbGVtZW50b3MgcXVlIHBvZGVtIGVzdGFyIGZvcmEgZGEgdmlld3BvcnQKICAgICAgICAgICAgY29uc3QgZWxlbWVudHNMaXN0SGVpZ2h0ID0gZWxlbWVudHNMaXN0LnNjcm9sbEhlaWdodDsKCiAgICAgICAgICAgIC8vIENhbGN1bGFyIGFsdHVyYSB0b3RhbDogYWx0dXJhIGRvcyBlbGVtZW50b3MgKyBwYWRkaW5nIGRvIGNhbnZhcwogICAgICAgICAgICBjb25zdCB0b3RhbEhlaWdodCA9IGVsZW1lbnRzTGlzdEhlaWdodCArIGNhbnZhc1BhZGRpbmdUb3AgKyBjYW52YXNQYWRkaW5nQm90dG9tOwoKICAgICAgICAgICAgLy8gQWx0dXJhIG3DrW5pbWEgw6kgODQycHggKHRhbWFuaG8gQTQgcG9ydHJhaXQgZW0gcGl4ZWxzIGEgOTZkcGkpCiAgICAgICAgICAgIGNvbnN0IG1pbkhlaWdodCA9IDg0MjsKCiAgICAgICAgICAgIC8vIERlZmluaXIgYWx0dXJhIGRvIGNhbnZhcyAobcOtbmltbyBvdSBhbHR1cmEgY2FsY3VsYWRhLCBvIHF1ZSBmb3IgbWFpb3IpCiAgICAgICAgICAgIC8vIEFkaWNpb25hciB1bWEgcGVxdWVuYSBtYXJnZW0gZGUgc2VndXJhbsOnYSAoMjBweCkgcGFyYSBldml0YXIgY29ydGVzCiAgICAgICAgICAgIGNvbnN0IG5ld0hlaWdodCA9IE1hdGgubWF4KG1pbkhlaWdodCwgdG90YWxIZWlnaHQgKyAyMCk7CgogICAgICAgICAgICAvLyBTw7MgYXBsaWNhciBzZSBhIGRpZmVyZW7Dp2EgZm9yIHNpZ25pZmljYXRpdmEgKG1haXMgZGUgMTVweCkKICAgICAgICAgICAgY29uc3QgY3VycmVudEhlaWdodCA9IGxhc3RDYW52YXNIZWlnaHQgPiAwID8gbGFzdENhbnZhc0hlaWdodCA6IChwYXJzZUludChjYW52YXMuc3R5bGUuaGVpZ2h0KSB8fCBjYW52YXMub2Zmc2V0SGVpZ2h0IHx8IG1pbkhlaWdodCk7CiAgICAgICAgICAgIGNvbnN0IGhlaWdodERpZmZlcmVuY2UgPSBNYXRoLmFicyhuZXdIZWlnaHQgLSBjdXJyZW50SGVpZ2h0KTsKCiAgICAgICAgICAgIGlmIChoZWlnaHREaWZmZXJlbmNlID4gMTUpIHsKICAgICAgICAgICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gbmV3SGVpZ2h0ICsgJ3B4JzsKICAgICAgICAgICAgICBjYW52YXMuc3R5bGUubWluSGVpZ2h0ID0gbWluSGVpZ2h0ICsgJ3B4JzsKICAgICAgICAgICAgICBsYXN0Q2FudmFzSGVpZ2h0ID0gbmV3SGVpZ2h0OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmIChsYXN0Q2FudmFzSGVpZ2h0ID09PSAwKSB7CiAgICAgICAgICAgICAgICBsYXN0Q2FudmFzSGVpZ2h0ID0gY3VycmVudEhlaWdodDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAgIC8vIEFKVVNUQVIgTEFSR1VSQSAobm92YSBpbXBsZW1lbnRhw6fDo28pCiAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAgIC8vIElNUE9SVEFOVEU6IEZhemVyIFRPREFTIGFzIG1lZGnDp8O1ZXMgQU5URVMgZGUgYWx0ZXJhciBxdWFscXVlciBlc3RpbG8KICAgICAgICAgIC8vIElzc28gZXZpdGEgcmVmbG93cyBxdWUgY2F1c2FtIGNyZXNjaW1lbnRvIGluY3JlbWVudGFsCgogICAgICAgICAgY29uc3QgY2FudmFzUGFkZGluZ0xlZnQgPSAzMjsgLy8gMnJlbQogICAgICAgICAgY29uc3QgY2FudmFzUGFkZGluZ1JpZ2h0ID0gMzI7IC8vIDJyZW0KICAgICAgICAgIGNvbnN0IG1pbldpZHRoID0gNTk1OyAvLyBMYXJndXJhIG3DrW5pbWEgQTQgcG9ydHJhaXQKCiAgICAgICAgICAvLyAxLiBPYnRlciBsYXJndXJhIGF0dWFsIGRvIGNhbnZhcyBBTlRFUyBkZSBxdWFscXVlciBtZWRpw6fDo28KICAgICAgICAgIC8vIElzc28gZ2FyYW50ZSBxdWUgbsOjbyBlc3RhbW9zIGNvbXBhcmFuZG8gY29tIHZhbG9yZXMgasOhIGFsdGVyYWRvcwogICAgICAgICAgLy8gVXNhciBhIMO6bHRpbWEgbGFyZ3VyYSBhcGxpY2FkYSBzZSBkaXNwb27DrXZlbCwgc2Vuw6NvIHVzYXIgbyB2YWxvciBhdHVhbAogICAgICAgICAgY29uc3QgY3VycmVudENhbnZhc1dpZHRoID0gbGFzdENhbnZhc1dpZHRoID4gMCA/IGxhc3RDYW52YXNXaWR0aCA6IChwYXJzZUludChjYW52YXMuc3R5bGUud2lkdGgpIHx8IGNhbnZhcy5vZmZzZXRXaWR0aCB8fCBtaW5XaWR0aCk7CgogICAgICAgICAgLy8gMi4gTWVkaXIgbyBzY3JvbGxXaWR0aCBkbyBlbGVtZW50c0xpc3QgU0VNIGFsdGVyYXIgbyBET00KICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWx0ZXJhciB0ZW1wb3JhcmlhbWVudGUgbyB3aWR0aCBkbyBlbGVtZW50c0xpc3QgcGFyYSBldml0YXIgcmVmbG93cyBxdWUgY2F1c2FtIGxvb3BzCiAgICAgICAgICBsZXQgY29udGVudFdpZHRoID0gZWxlbWVudHNMaXN0LnNjcm9sbFdpZHRoIHx8IGVsZW1lbnRzTGlzdC5vZmZzZXRXaWR0aCB8fCAwOwoKICAgICAgICAgIC8vIDMuIFZlcmlmaWNhciBlbGVtZW50b3MgcmFpeiBkaXJldGFtZW50ZSBwYXJhIGdhcmFudGlyIHF1ZSBjYXB0dXJhbW9zIHR1ZG8KICAgICAgICAgIC8vIEVsZW1lbnRvcyByYWl6IHPDo28gb3MgLmVsZW1lbnQtaXRlbSBxdWUgZXN0w6NvIGRpcmV0YW1lbnRlIGRlbnRybyBkZSAuZWxlbWVudHMtbGlzdAogICAgICAgICAgY29uc3Qgcm9vdEVsZW1lbnRzID0gQXJyYXkuZnJvbShlbGVtZW50c0xpc3QuY2hpbGRyZW4pLmZpbHRlcigKICAgICAgICAgICAgY2hpbGQgPT4gY2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbGVtZW50LWl0ZW0nKSB8fAogICAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5jb250YWlucygnaGVhZGVyLWNvbnRhaW5lcicpIHx8CiAgICAgICAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmb290ZXItY29udGFpbmVyJykKICAgICAgICAgICk7CgogICAgICAgICAgcm9vdEVsZW1lbnRzLmZvckVhY2gocm9vdEVsID0+IHsKICAgICAgICAgICAgLy8gUGFyYSBjYWRhIGVsZW1lbnRvIHJhaXosIG1lZGlyIHN1YSBsYXJndXJhIHJlYWwKICAgICAgICAgICAgY29uc3Qgcm9vdFNjcm9sbFdpZHRoID0gcm9vdEVsLnNjcm9sbFdpZHRoIHx8IDA7CiAgICAgICAgICAgIGNvbnN0IHJvb3RPZmZzZXRXaWR0aCA9IHJvb3RFbC5vZmZzZXRXaWR0aCB8fCAwOwogICAgICAgICAgICBjb25zdCByb290V2lkdGggPSBNYXRoLm1heChyb290U2Nyb2xsV2lkdGgsIHJvb3RPZmZzZXRXaWR0aCk7CgogICAgICAgICAgICBpZiAocm9vdFdpZHRoID4gY29udGVudFdpZHRoKSB7CiAgICAgICAgICAgICAgY29udGVudFdpZHRoID0gcm9vdFdpZHRoOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBWZXJpZmljYXIgdGFtYsOpbSBlbGVtZW50b3MgZGVudHJvIGRlc3RlIHJvb3QgKHRhYmVsYXMsIGdydXBvcywgZXRjLikKICAgICAgICAgICAgLy8gQnVzY2FyIHRvZGFzIGFzIHRhYmVsYXMgZGVudHJvIGRlc3RlIGVsZW1lbnRvCiAgICAgICAgICAgIGNvbnN0IHRhYmxlc0luUm9vdCA9IHJvb3RFbC5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZSwgLnByZXZpZXctdGFibGUnKTsKICAgICAgICAgICAgdGFibGVzSW5Sb290LmZvckVhY2godGFibGUgPT4gewogICAgICAgICAgICAgIC8vIFBhcmEgdGFiZWxhcywgY2FsY3VsYXIgbGFyZ3VyYSByZWFsIHNvbWFuZG8gY8OpbHVsYXMKICAgICAgICAgICAgICAvLyBFc3RyYXTDqWdpYTogc29tYXIgYSBsYXJndXJhIGRlIHRvZGFzIGFzIGPDqWx1bGFzIGRhIHByaW1laXJhIGxpbmhhCiAgICAgICAgICAgICAgbGV0IHRhYmxlV2lkdGggPSAwOwogICAgICAgICAgICAgIGNvbnN0IGZpcnN0Um93ID0gdGFibGUucXVlcnlTZWxlY3RvcigndHInKTsKCiAgICAgICAgICAgICAgaWYgKGZpcnN0Um93KSB7CiAgICAgICAgICAgICAgICBjb25zdCBjZWxscyA9IGZpcnN0Um93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpOwogICAgICAgICAgICAgICAgY2VsbHMuZm9yRWFjaChjZWxsID0+IHsKICAgICAgICAgICAgICAgICAgLy8gc2Nyb2xsV2lkdGggY2FwdHVyYSBhIGxhcmd1cmEgcmVhbCBkbyBjb250ZcO6ZG8sIG1lc21vIHF1ZSBlc3RlamEgY29ydGFkbwogICAgICAgICAgICAgICAgICBjb25zdCBjZWxsU2Nyb2xsV2lkdGggPSBjZWxsLnNjcm9sbFdpZHRoIHx8IDA7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxPZmZzZXRXaWR0aCA9IGNlbGwub2Zmc2V0V2lkdGggfHwgMDsKICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbFJlY3QgPSBjZWxsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICAgICAgICAvLyBVc2FyIG8gbWFpb3IgdmFsb3IgcGFyYSBnYXJhbnRpciBxdWUgY2FwdHVyYW1vcyBhIGxhcmd1cmEgcmVhbAogICAgICAgICAgICAgICAgICBjb25zdCBjZWxsV2lkdGggPSBNYXRoLm1heChjZWxsU2Nyb2xsV2lkdGgsIGNlbGxPZmZzZXRXaWR0aCwgY2VsbFJlY3Qud2lkdGgpOwogICAgICAgICAgICAgICAgICB0YWJsZVdpZHRoICs9IGNlbGxXaWR0aDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8gU2UgbsOjbyBjb25zZWd1aXUgY2FsY3VsYXIgcGVsYXMgY8OpbHVsYXMsIHVzYXIgc2Nyb2xsV2lkdGggZGEgdGFiZWxhCiAgICAgICAgICAgICAgaWYgKHRhYmxlV2lkdGggPT09IDApIHsKICAgICAgICAgICAgICAgIHRhYmxlV2lkdGggPSB0YWJsZS5zY3JvbGxXaWR0aCB8fCB0YWJsZS5vZmZzZXRXaWR0aCB8fCB0YWJsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIC8vIENvbnNpZGVyYXIgcGFkZGluZyBlIGJvcmRhcyBkYSB0YWJlbGEgKGdldEJvdW5kaW5nQ2xpZW50UmVjdCBpbmNsdWkgaXNzbykKICAgICAgICAgICAgICBjb25zdCB0YWJsZVJlY3QgPSB0YWJsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICBpZiAodGFibGVSZWN0LndpZHRoID4gdGFibGVXaWR0aCkgewogICAgICAgICAgICAgICAgdGFibGVXaWR0aCA9IHRhYmxlUmVjdC53aWR0aDsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICh0YWJsZVdpZHRoID4gY29udGVudFdpZHRoKSB7CiAgICAgICAgICAgICAgICBjb250ZW50V2lkdGggPSB0YWJsZVdpZHRoOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICAvLyA0LiBDYWxjdWxhciBsYXJndXJhIHRvdGFsIG5lY2Vzc8OhcmlhOiBsYXJndXJhIGRvIGNvbnRlw7pkbyArIHBhZGRpbmcgZG8gY2FudmFzCiAgICAgICAgICBjb25zdCB0b3RhbFdpZHRoID0gY29udGVudFdpZHRoICsgY2FudmFzUGFkZGluZ0xlZnQgKyBjYW52YXNQYWRkaW5nUmlnaHQ7CgogICAgICAgICAgLy8gNS4gRGVmaW5pciBsYXJndXJhIGRvIGNhbnZhcyAobcOtbmltbyBvdSBsYXJndXJhIGNhbGN1bGFkYSwgbyBxdWUgZm9yIG1haW9yKQogICAgICAgICAgLy8gQWRpY2lvbmFyIG1hcmdlbSBkZSBzZWd1cmFuw6dhICgzMHB4KSBwYXJhIGV2aXRhciBjb3J0ZXMgZGUgYm9yZGFzL3BhZGRpbmcKICAgICAgICAgIGNvbnN0IG5ld1dpZHRoID0gTWF0aC5tYXgobWluV2lkdGgsIHRvdGFsV2lkdGggKyAzMCk7CgogICAgICAgICAgLy8gNi4gQ29tcGFyYXIgY29tIGEgbGFyZ3VyYSBhdHVhbCBBTlRFUyBkZSBhcGxpY2FyIHF1YWxxdWVyIGFsdGVyYcOnw6NvCiAgICAgICAgICAvLyBTw7MgYXBsaWNhciBzZSBhIGRpZmVyZW7Dp2EgZm9yIHNpZ25pZmljYXRpdmEgKG1haXMgZGUgMTVweCBwYXJhIGV2aXRhciBhanVzdGVzIGluZmluaXRvcykKICAgICAgICAgIC8vIElzc28gZXZpdGEgYWp1c3RlcyBpbmZpbml0b3MgcG9yIGRpZmVyZW7Dp2FzIG3DrW5pbWFzIGRlIGFycmVkb25kYW1lbnRvIG91IG1lZGnDp8O1ZXMgaW5jb25zaXN0ZW50ZXMKICAgICAgICAgIGNvbnN0IHdpZHRoRGlmZmVyZW5jZSA9IE1hdGguYWJzKG5ld1dpZHRoIC0gY3VycmVudENhbnZhc1dpZHRoKTsKCiAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBMaW1pdGFyIG8gY3Jlc2NpbWVudG8gbcOheGltbyBwYXJhIGV2aXRhciBjcmVzY2ltZW50byBpbmZpbml0bwogICAgICAgICAgLy8gU2UgYSBub3ZhIGxhcmd1cmEgZm9yIG11aXRvIG1haW9yIHF1ZSBhIGF0dWFsIChtYWlzIGRlIDIwMHB4KSwgcG9kZSBzZXIgdW0gZXJybyBkZSBtZWRpw6fDo28KICAgICAgICAgIGNvbnN0IG1heFdpZHRoSW5jcmVhc2UgPSAyMDA7IC8vIE3DoXhpbW8gZGUgYXVtZW50byBwZXJtaXRpZG8gcG9yIHZlegogICAgICAgICAgY29uc3Qgc2hvdWxkQXBwbHlXaWR0aCA9IHdpZHRoRGlmZmVyZW5jZSA+IDE1ICYmIChuZXdXaWR0aCA8PSBjdXJyZW50Q2FudmFzV2lkdGggKyBtYXhXaWR0aEluY3JlYXNlKTsKCiAgICAgICAgICBpZiAoc2hvdWxkQXBwbHlXaWR0aCkgewogICAgICAgICAgICAvLyA3LiBBcGxpY2FyIGxhcmd1cmEgbm8gY2FudmFzIEFQRU5BUyBzZSByZWFsbWVudGUgbmVjZXNzw6FyaW8KICAgICAgICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gbmV3V2lkdGggKyAncHgnOwogICAgICAgICAgICBjYW52YXMuc3R5bGUubWluV2lkdGggPSBtaW5XaWR0aCArICdweCc7CiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5tYXhXaWR0aCA9ICdub25lJzsgLy8gUmVtb3ZlciBxdWFscXVlciBsaW1pdGUgbcOheGltbwoKICAgICAgICAgICAgLy8gQXJtYXplbmFyIGEgbGFyZ3VyYSBhcGxpY2FkYSBwYXJhIGV2aXRhciByZWPDoWxjdWxvcyBkZXNuZWNlc3PDoXJpb3MKICAgICAgICAgICAgbGFzdENhbnZhc1dpZHRoID0gbmV3V2lkdGg7CgogICAgICAgICAgICAvLyA4LiBHYXJhbnRpciBxdWUgY29udGFpbmVycyBwYWlzIG7Do28gbGltaXRlbSBvIGNyZXNjaW1lbnRvCiAgICAgICAgICAgIC8vIE8gY2FudmFzLXdyYXBwZXIgZGV2ZSBwZXJtaXRpciBxdWUgbyBjYW52YXMgY3Jlc8OnYQogICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBTw7MgYWx0ZXJhciBzZSByZWFsbWVudGUgbmVjZXNzw6FyaW8gcGFyYSBldml0YXIgcmVmbG93cyBkZXNuZWNlc3PDoXJpb3MKICAgICAgICAgICAgY29uc3QgY2FudmFzV3JhcHBlciA9IGNhbnZhcy5wYXJlbnRFbGVtZW50OwogICAgICAgICAgICBpZiAoY2FudmFzV3JhcHBlciAmJiBjYW52YXNXcmFwcGVyLmNsYXNzTGlzdC5jb250YWlucygnY2FudmFzLXdyYXBwZXInKSkgewogICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzZSBqw6EgZXN0w6EgY29uZmlndXJhZG8gY29ycmV0YW1lbnRlIGFudGVzIGRlIGFsdGVyYXIKICAgICAgICAgICAgICBpZiAoY2FudmFzV3JhcHBlci5zdHlsZS5tYXhXaWR0aCAhPT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgICBjYW52YXNXcmFwcGVyLnN0eWxlLndpZHRoID0gJ2F1dG8nOwogICAgICAgICAgICAgICAgY2FudmFzV3JhcHBlci5zdHlsZS5taW5XaWR0aCA9ICcwJzsKICAgICAgICAgICAgICAgIGNhbnZhc1dyYXBwZXIuc3R5bGUubWF4V2lkdGggPSAnbm9uZSc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyA5LiBHYXJhbnRpciBxdWUgZWxlbWVudHMtbGlzdCB0YW1iw6ltIG7Do28gbGltaXRlIG8gY3Jlc2NpbWVudG8KICAgICAgICAgICAgLy8gZWxlbWVudHMtbGlzdCBkZXZlIHBvZGVyIGNyZXNjZXIgaG9yaXpvbnRhbG1lbnRlCiAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IFPDsyBhbHRlcmFyIHNlIHJlYWxtZW50ZSBuZWNlc3PDoXJpbyBwYXJhIGV2aXRhciByZWZsb3dzIGRlc25lY2Vzc8OhcmlvcwogICAgICAgICAgICBpZiAoZWxlbWVudHNMaXN0ICYmIGVsZW1lbnRzTGlzdC5zdHlsZS5tYXhXaWR0aCAhPT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgZWxlbWVudHNMaXN0LnN0eWxlLndpZHRoID0gJ2F1dG8nOwogICAgICAgICAgICAgIGVsZW1lbnRzTGlzdC5zdHlsZS5taW5XaWR0aCA9ICcwJzsKICAgICAgICAgICAgICBlbGVtZW50c0xpc3Quc3R5bGUubWF4V2lkdGggPSAnbm9uZSc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFNlIG7Do28gaG91dmUgYWx0ZXJhw6fDo28sIG1hbnRlciBhIMO6bHRpbWEgbGFyZ3VyYSBjb25oZWNpZGEKICAgICAgICAgICAgaWYgKGxhc3RDYW52YXNXaWR0aCA9PT0gMCkgewogICAgICAgICAgICAgIGxhc3RDYW52YXNXaWR0aCA9IGN1cnJlbnRDYW52YXNXaWR0aDsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBTZSBhIG5vdmEgbGFyZ3VyYSDDqSBtdWl0byBtYWlvciwgcG9kZSBzZXIgdW0gZXJybyBkZSBtZWRpw6fDo28gLSBuw6NvIGFwbGljYXIKICAgICAgICAgICAgaWYgKG5ld1dpZHRoID4gY3VycmVudENhbnZhc1dpZHRoICsgMjAwKSB7CiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdBanVzdGUgZGUgbGFyZ3VyYSBkbyBjYW52YXMgaWdub3JhZG8gLSBwb3Nzw612ZWwgZXJybyBkZSBtZWRpw6fDo286JywgewogICAgICAgICAgICAgICAgY3VycmVudDogY3VycmVudENhbnZhc1dpZHRoLAogICAgICAgICAgICAgICAgY2FsY3VsYXRlZDogbmV3V2lkdGgsCiAgICAgICAgICAgICAgICBkaWZmZXJlbmNlOiB3aWR0aERpZmZlcmVuY2UKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIDEwLiBMaWJlcmFyIGZsYWcgYXDDs3MgY29tcGxldGFyIG8gYWp1c3RlIChpbXBvcnRhbnRlIHBhcmEgZXZpdGFyIGxvb3BzIGluZmluaXRvcykKICAgICAgICAgIGlzQWRqdXN0aW5nQ2FudmFzU2l6ZSA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZWxlY3RFbGVtZW50KGlkKSB7CiAgICAgIC8vIEV2aXRhciByZS1yZW5kZXJpemHDp8OjbyBkZXNuZWNlc3PDoXJpYSBzZSBvIGVsZW1lbnRvIGrDoSBlc3TDoSBzZWxlY2lvbmFkbwogICAgICBpZiAoc2VsZWN0ZWRFbGVtZW50SWQgPT09IGlkKSB7CiAgICAgICAgcmV0dXJuOyAvLyBKw6EgZXN0w6Egc2VsZWNpb25hZG8sIG7Do28gcHJlY2lzYSBmYXplciBuYWRhCiAgICAgIH0KCiAgICAgIC8vIE1vc3RyYXIgbyBwYWluZWwgc2UgZXN0aXZlciBvY3VsdG8KICAgICAgY29uc3QgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29kZVBhbmVsJyk7CiAgICAgIGlmIChwYW5lbCAmJiBwYW5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7CiAgICAgICAgcGFuZWwuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgIH0KCiAgICAgIC8vIEF0dWFsaXphciBzZWxlw6fDo28gdmlzdWFsIHNlbSByZWNyaWFyIG8gRE9NIGludGVpcm8KICAgICAgLy8gSXNzbyBldml0YSByZWZsb3dzIGRlc25lY2Vzc8OhcmlvcyBxdWUgY2F1c2FtIGNyZXNjaW1lbnRvIGluZmluaXRvCiAgICAgIGNvbnN0IHByZXZTZWxlY3RlZCA9IHNlbGVjdGVkRWxlbWVudElkID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtaWQ9IiR7c2VsZWN0ZWRFbGVtZW50SWR9Il1gKSA6IG51bGw7CiAgICAgIGlmIChwcmV2U2VsZWN0ZWQpIHsKICAgICAgICBwcmV2U2VsZWN0ZWQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTsKICAgICAgfQoKICAgICAgY29uc3QgbmV3U2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pZD0iJHtpZH0iXWApOwogICAgICBpZiAobmV3U2VsZWN0ZWQpIHsKICAgICAgICBuZXdTZWxlY3RlZC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwogICAgICB9CgogICAgICBzZWxlY3RlZEVsZW1lbnRJZCA9IGlkOwogICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIHJlY3JpYXIgbyBET00gcXVhbmRvIGFwZW5hcyBzZWxlY2lvbmFtb3MKICAgICAgLy8gQXBlbmFzIGF0dWFsaXphciBvIGluc3BlY3RvciAoY8OzZGlnbyBzZXLDoSBnZXJhZG8gYXBlbmFzIHF1YW5kbyBzb2xpY2l0YWRvKQogICAgICByZW5kZXJJbnNwZWN0b3IoKTsKICAgICAgLy8gU2FsdmFyIGVzdGFkbyBhcMOzcyBzZWxlw6fDo28KICAgICAgc2F2ZVN0YXRlKCk7CiAgICB9CgogICAgZnVuY3Rpb24gY2xvc2VQYW5lbCgpIHsKICAgICAgY29uc3QgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29kZVBhbmVsJyk7CiAgICAgIGlmIChwYW5lbCkgewogICAgICAgIHBhbmVsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICB9CiAgICB9CgogICAgd2luZG93LmNsb3NlUGFuZWwgPSBjbG9zZVBhbmVsOwoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBJbnNwZWN0b3IgKFJpZ2h0IHBhbmVsKQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGZpZWxkV3JhcChsYWJlbFRleHQpIHsKICAgICAgY29uc3Qgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICB3cmFwLmNsYXNzTmFtZSA9ICdpbnNwZWN0b3ItZmllbGQnOwogICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7CiAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gbGFiZWxUZXh0OwogICAgICB3cmFwLmFwcGVuZENoaWxkKGxhYmVsKTsKICAgICAgcmV0dXJuIHdyYXA7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkSW5wdXQod3JhcCwgdmFsdWUsIG9uQ2hhbmdlLCBvcHRzID0ge30pIHsKICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICBpbnB1dC50eXBlID0gb3B0cy50eXBlIHx8ICd0ZXh0JzsKICAgICAgaWYgKG9wdHMubWluICE9IG51bGwpIGlucHV0Lm1pbiA9IG9wdHMubWluOwogICAgICBpZiAob3B0cy5tYXggIT0gbnVsbCkgaW5wdXQubWF4ID0gb3B0cy5tYXg7CiAgICAgIGlmIChvcHRzLnN0ZXAgIT0gbnVsbCkgaW5wdXQuc3RlcCA9IG9wdHMuc3RlcDsKICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZSA/PyAnJzsKICAgICAgaW5wdXQub25pbnB1dCA9ICgpID0+IG9uQ2hhbmdlKGlucHV0LnZhbHVlKTsKICAgICAgd3JhcC5hcHBlbmRDaGlsZChpbnB1dCk7CiAgICAgIHJldHVybiBpbnB1dDsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRTZWxlY3Qod3JhcCwgdmFsdWUsIG9wdGlvbnMsIG9uQ2hhbmdlKSB7CiAgICAgIGNvbnN0IHNlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpOwogICAgICBvcHRpb25zLmZvckVhY2gobyA9PiB7CiAgICAgICAgY29uc3Qgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7CiAgICAgICAgb3B0LnZhbHVlID0gby52YWx1ZTsKICAgICAgICBvcHQudGV4dENvbnRlbnQgPSBvLmxhYmVsOwogICAgICAgIGlmIChvLnZhbHVlID09PSB2YWx1ZSkgb3B0LnNlbGVjdGVkID0gdHJ1ZTsKICAgICAgICBzZWwuYXBwZW5kQ2hpbGQob3B0KTsKICAgICAgfSk7CiAgICAgIHNlbC5vbmNoYW5nZSA9ICgpID0+IG9uQ2hhbmdlKHNlbC52YWx1ZSk7CiAgICAgIHdyYXAuYXBwZW5kQ2hpbGQoc2VsKTsKICAgICAgcmV0dXJuIHNlbDsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRUZXh0YXJlYSh3cmFwLCB2YWx1ZSwgb25DaGFuZ2UpIHsKICAgICAgY29uc3QgdGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpOwogICAgICB0YS52YWx1ZSA9IHZhbHVlID8/ICcnOwogICAgICB0YS5vbmlucHV0ID0gKCkgPT4gb25DaGFuZ2UodGEudmFsdWUpOwogICAgICB3cmFwLmFwcGVuZENoaWxkKHRhKTsKICAgICAgcmV0dXJuIHRhOwogICAgfQoKICAgIC8vIEZ1bsOnw7VlcyBhdXhpbGlhcmVzIHBhcmEgbyBlZGl0b3IgKGRvIGdlcmFkb3JfYXR1YWxpemFkb192Mi5odG1sKQogICAgZnVuY3Rpb24gZmluZEVsZW1lbnRCeUlkUmVjdXJzaXZlKGlkLCBlbGVtZW50c0FycmF5KSB7CiAgICAgIGZvciAoY29uc3QgZWwgb2YgZWxlbWVudHNBcnJheSkgewogICAgICAgIGlmIChlbC5pZCA9PT0gaWQpIHJldHVybiBlbDsKCiAgICAgICAgLy8gQnVzY2FyIGVtIGdydXBvcwogICAgICAgIGlmIChlbC50eXBlID09PSAnZ3JvdXAnICYmIGVsLnByb3BlcnRpZXMgJiYgZWwucHJvcGVydGllcy5jaGlsZHJlbikgewogICAgICAgICAgY29uc3QgZm91bmQgPSBmaW5kRWxlbWVudEJ5SWRSZWN1cnNpdmUoaWQsIGVsLnByb3BlcnRpZXMuY2hpbGRyZW4pOwogICAgICAgICAgaWYgKGZvdW5kKSByZXR1cm4gZm91bmQ7CiAgICAgICAgfQoKICAgICAgICAvLyBCdXNjYXIgZW0gY29sdW1ucwogICAgICAgIGlmIChlbC50eXBlID09PSAnY29sdW1ucycgJiYgZWwucHJvcGVydGllcyAmJiBlbC5wcm9wZXJ0aWVzLmNvbHVtbnMpIHsKICAgICAgICAgIGZvciAoY29uc3QgY29sIG9mIGVsLnByb3BlcnRpZXMuY29sdW1ucykgewogICAgICAgICAgICBpZiAoY29sLmNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgY29uc3QgZm91bmQgPSBmaW5kRWxlbWVudEJ5SWRSZWN1cnNpdmUoaWQsIGNvbC5jaGlsZHJlbik7CiAgICAgICAgICAgICAgaWYgKGZvdW5kKSByZXR1cm4gZm91bmQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIEJ1c2NhciBlbSBsaXN0IGl0ZW1zIChxdWFuZG8gaXRlbSDDqSB1bSBub2RlKQogICAgICAgIGlmIChlbC50eXBlID09PSAnbGlzdCcgJiYgZWwucHJvcGVydGllcyAmJiBlbC5wcm9wZXJ0aWVzLml0ZW1zKSB7CiAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZWwucHJvcGVydGllcy5pdGVtcykgewogICAgICAgICAgICBpZiAoaXRlbS5raW5kID09PSAnbm9kZScgJiYgaXRlbS5ub2RlKSB7CiAgICAgICAgICAgICAgaWYgKGl0ZW0ubm9kZS5pZCA9PT0gaWQpIHJldHVybiBpdGVtLm5vZGU7CiAgICAgICAgICAgICAgLy8gQnVzY2FyIHJlY3Vyc2l2YW1lbnRlIG5vIG5vZGUKICAgICAgICAgICAgICBjb25zdCBmb3VuZCA9IGZpbmRFbGVtZW50QnlJZFJlY3Vyc2l2ZShpZCwgW2l0ZW0ubm9kZV0pOwogICAgICAgICAgICAgIGlmIChmb3VuZCkgcmV0dXJuIGZvdW5kOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBCdXNjYXIgZW0gdGFibGUgY2VsbHMKICAgICAgICBpZiAoZWwudHlwZSA9PT0gJ3RhYmxlJyAmJiBlbC5wcm9wZXJ0aWVzICYmIGVsLnByb3BlcnRpZXMuYm9keSkgewogICAgICAgICAgZm9yIChjb25zdCByb3cgb2YgZWwucHJvcGVydGllcy5ib2R5KSB7CiAgICAgICAgICAgIGZvciAoY29uc3QgY2VsbCBvZiByb3cpIHsKICAgICAgICAgICAgICBpZiAoY2VsbCAmJiB0eXBlb2YgY2VsbCA9PT0gJ29iamVjdCcgJiYgY2VsbC5jaGlsZHJlbikgewogICAgICAgICAgICAgICAgY29uc3QgZm91bmQgPSBmaW5kRWxlbWVudEJ5SWRSZWN1cnNpdmUoaWQsIGNlbGwuY2hpbGRyZW4pOwogICAgICAgICAgICAgICAgaWYgKGZvdW5kKSByZXR1cm4gZm91bmQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmRFbGVtZW50QnlJZChpZCkgewogICAgICBpZiAoIWlkKSByZXR1cm4gbnVsbDsKICAgICAgLy8gUHJpbWVpcm8gdGVudGFyIHVzYXIgZmluZE5vZGVCeUlkIHNlIGV4aXN0aXIKICAgICAgaWYgKHR5cGVvZiBmaW5kTm9kZUJ5SWQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBjb25zdCBub2RlID0gZmluZE5vZGVCeUlkKGlkKTsKICAgICAgICBpZiAobm9kZSkgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgICAgLy8gRGVwb2lzIGJ1c2NhciByZWN1cnNpdmFtZW50ZSBub3MgZWxlbWVudHMKICAgICAgcmV0dXJuIGZpbmRFbGVtZW50QnlJZFJlY3Vyc2l2ZShpZCwgZWxlbWVudHMpOwogICAgfQoKICAgIC8vIEZpbmQgcGFyZW50IGNvbnRhaW5lciBvZiBhbiBlbGVtZW50IChncm91cCwgY29sdW1ucywgbGlzdCwgdGFibGUpCiAgICAvLyBWZXJpZmljYXIgc2UgZWxlbWVudG8gZXN0w6EgZGVudHJvIGRlIGhlYWRlcgogICAgZnVuY3Rpb24gaXNFbGVtZW50SW5IZWFkZXIoZWxlbWVudElkKSB7CiAgICAgIGlmICghZWxlbWVudElkIHx8ICFkb2N1bWVudEhlYWRlci5yb290KSByZXR1cm4gZmFsc2U7CiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOwogICAgICB3YWxrKGRvY3VtZW50SGVhZGVyLnJvb3QsIChuKSA9PiB7CiAgICAgICAgaWYgKG4uaWQgPT09IGVsZW1lbnRJZCkgZm91bmQgPSB0cnVlOwogICAgICB9KTsKICAgICAgcmV0dXJuIGZvdW5kOwogICAgfQoKICAgIC8vIFZlcmlmaWNhciBzZSBlbGVtZW50byBlc3TDoSBkZW50cm8gZGUgZm9vdGVyCiAgICBmdW5jdGlvbiBpc0VsZW1lbnRJbkZvb3RlcihlbGVtZW50SWQpIHsKICAgICAgaWYgKCFlbGVtZW50SWQgfHwgIWRvY3VtZW50Rm9vdGVyLnJvb3QpIHJldHVybiBmYWxzZTsKICAgICAgbGV0IGZvdW5kID0gZmFsc2U7CiAgICAgIHdhbGsoZG9jdW1lbnRGb290ZXIucm9vdCwgKG4pID0+IHsKICAgICAgICBpZiAobi5pZCA9PT0gZWxlbWVudElkKSBmb3VuZCA9IHRydWU7CiAgICAgIH0pOwogICAgICByZXR1cm4gZm91bmQ7CiAgICB9CgogICAgZnVuY3Rpb24gZmluZFBhcmVudEdyb3VwKGVsZW1lbnRJZCkgewogICAgICBpZiAoIWVsZW1lbnRJZCkgcmV0dXJuIG51bGw7CgogICAgICAvLyBCdXNjYXIgZW0gZ3J1cG9zIGRvIHJvb3QKICAgICAgZm9yIChjb25zdCBncm91cCBvZiBlbGVtZW50cykgewogICAgICAgIGlmIChncm91cC50eXBlID09PSAnZ3JvdXAnICYmIGdyb3VwLnByb3BlcnRpZXMgJiYgZ3JvdXAucHJvcGVydGllcy5jaGlsZHJlbikgewogICAgICAgICAgY29uc3QgY2hpbGRJbmRleCA9IGdyb3VwLnByb3BlcnRpZXMuY2hpbGRyZW4uZmluZEluZGV4KGMgPT4gYyAmJiBjLmlkID09PSBlbGVtZW50SWQpOwogICAgICAgICAgaWYgKGNoaWxkSW5kZXggIT09IC0xKSB7CiAgICAgICAgICAgIHJldHVybiB7IGdyb3VwLCBjaGlsZDogZ3JvdXAucHJvcGVydGllcy5jaGlsZHJlbltjaGlsZEluZGV4XSwgaW5kZXg6IGNoaWxkSW5kZXggfTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBCdXNjYXIgcmVjdXJzaXZhbWVudGUgZW0gZ3J1cG9zIGFuaW5oYWRvcwogICAgICAgICAgZm9yIChjb25zdCBjaGlsZEdyb3VwIG9mIGdyb3VwLnByb3BlcnRpZXMuY2hpbGRyZW4pIHsKICAgICAgICAgICAgaWYgKGNoaWxkR3JvdXAgJiYgY2hpbGRHcm91cC50eXBlID09PSAnZ3JvdXAnICYmIGNoaWxkR3JvdXAucHJvcGVydGllcyAmJiBjaGlsZEdyb3VwLnByb3BlcnRpZXMuY2hpbGRyZW4pIHsKICAgICAgICAgICAgICBjb25zdCBuZXN0ZWRDaGlsZEluZGV4ID0gY2hpbGRHcm91cC5wcm9wZXJ0aWVzLmNoaWxkcmVuLmZpbmRJbmRleChjID0+IGMgJiYgYy5pZCA9PT0gZWxlbWVudElkKTsKICAgICAgICAgICAgICBpZiAobmVzdGVkQ2hpbGRJbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIGdyb3VwOiBjaGlsZEdyb3VwLAogICAgICAgICAgICAgICAgICBjaGlsZDogY2hpbGRHcm91cC5wcm9wZXJ0aWVzLmNoaWxkcmVuW25lc3RlZENoaWxkSW5kZXhdLAogICAgICAgICAgICAgICAgICBpbmRleDogbmVzdGVkQ2hpbGRJbmRleAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIEJ1c2NhciBlbSBjb2x1bW5zCiAgICAgICAgaWYgKGdyb3VwLnR5cGUgPT09ICdjb2x1bW5zJyAmJiBncm91cC5wcm9wZXJ0aWVzICYmIGdyb3VwLnByb3BlcnRpZXMuY29sdW1ucykgewogICAgICAgICAgZm9yIChsZXQgY29sSWR4ID0gMDsgY29sSWR4IDwgZ3JvdXAucHJvcGVydGllcy5jb2x1bW5zLmxlbmd0aDsgY29sSWR4KyspIHsKICAgICAgICAgICAgY29uc3QgY29sID0gZ3JvdXAucHJvcGVydGllcy5jb2x1bW5zW2NvbElkeF07CiAgICAgICAgICAgIGlmIChjb2wuY2hpbGRyZW4pIHsKICAgICAgICAgICAgICBjb25zdCBjaGlsZEluZGV4ID0gY29sLmNoaWxkcmVuLmZpbmRJbmRleChjID0+IGMgJiYgYy5pZCA9PT0gZWxlbWVudElkKTsKICAgICAgICAgICAgICBpZiAoY2hpbGRJbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7IGdyb3VwLCBjaGlsZDogY29sLmNoaWxkcmVuW2NoaWxkSW5kZXhdLCBpbmRleDogY2hpbGRJbmRleCwgY29sSW5kZXg6IGNvbElkeCB9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gQnVzY2FyIGVtIGxpc3QgaXRlbXMKICAgICAgICBpZiAoZ3JvdXAudHlwZSA9PT0gJ2xpc3QnICYmIGdyb3VwLnByb3BlcnRpZXMgJiYgZ3JvdXAucHJvcGVydGllcy5pdGVtcykgewogICAgICAgICAgZm9yIChsZXQgaXRlbUlkeCA9IDA7IGl0ZW1JZHggPCBncm91cC5wcm9wZXJ0aWVzLml0ZW1zLmxlbmd0aDsgaXRlbUlkeCsrKSB7CiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBncm91cC5wcm9wZXJ0aWVzLml0ZW1zW2l0ZW1JZHhdOwogICAgICAgICAgICBpZiAoaXRlbS5raW5kID09PSAnbm9kZScgJiYgaXRlbS5ub2RlICYmIGl0ZW0ubm9kZS5pZCA9PT0gZWxlbWVudElkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHsgZ3JvdXAsIGNoaWxkOiBpdGVtLm5vZGUsIGluZGV4OiBpdGVtSWR4IH07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIEJ1c2NhciBlbSB0YWJsZSBjZWxscwogICAgICAgIGlmIChncm91cC50eXBlID09PSAndGFibGUnICYmIGdyb3VwLnByb3BlcnRpZXMgJiYgZ3JvdXAucHJvcGVydGllcy5ib2R5KSB7CiAgICAgICAgICBmb3IgKGxldCByb3dJZHggPSAwOyByb3dJZHggPCBncm91cC5wcm9wZXJ0aWVzLmJvZHkubGVuZ3RoOyByb3dJZHgrKykgewogICAgICAgICAgICBjb25zdCByb3cgPSBncm91cC5wcm9wZXJ0aWVzLmJvZHlbcm93SWR4XTsKICAgICAgICAgICAgZm9yIChsZXQgY29sSWR4ID0gMDsgY29sSWR4IDwgcm93Lmxlbmd0aDsgY29sSWR4KyspIHsKICAgICAgICAgICAgICBjb25zdCBjZWxsID0gcm93W2NvbElkeF07CiAgICAgICAgICAgICAgaWYgKGNlbGwgJiYgdHlwZW9mIGNlbGwgPT09ICdvYmplY3QnICYmIGNlbGwuY2hpbGRyZW4pIHsKICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkSW5kZXggPSBjZWxsLmNoaWxkcmVuLmZpbmRJbmRleChjID0+IGMgJiYgYy5pZCA9PT0gZWxlbWVudElkKTsKICAgICAgICAgICAgICAgIGlmIChjaGlsZEluZGV4ICE9PSAtMSkgewogICAgICAgICAgICAgICAgICByZXR1cm4geyBncm91cCwgY2hpbGQ6IGNlbGwuY2hpbGRyZW5bY2hpbGRJbmRleF0sIGluZGV4OiBjaGlsZEluZGV4LCByb3dJbmRleDogcm93SWR4LCBjb2xJbmRleDogY29sSWR4IH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIC8vIE1vdmVyIGVsZW1lbnRvIGRlbnRybyBkZSB1bSBjb250YWluZXIgKGdydXBvLCBjb2x1bW5zLCB0YWJsZSkKICAgIGZ1bmN0aW9uIG1vdmVFbGVtZW50SW5Db250YWluZXIoZGlyZWN0aW9uKSB7CiAgICAgIGlmICghc2VsZWN0ZWRFbGVtZW50SWQpIHJldHVybjsKCiAgICAgIGNvbnN0IG5vZGVXaXRoUGFyZW50ID0gZmluZE5vZGVXaXRoUGFyZW50KHNlbGVjdGVkRWxlbWVudElkKTsKICAgICAgaWYgKCFub2RlV2l0aFBhcmVudCB8fCAhbm9kZVdpdGhQYXJlbnQucGFyZW50IHx8ICFub2RlV2l0aFBhcmVudC5jdHgpIHJldHVybjsKCiAgICAgIGNvbnN0IHsgcGFyZW50LCBjdHggfSA9IG5vZGVXaXRoUGFyZW50OwogICAgICBsZXQgY2hpbGRyZW4gPSBbXTsKICAgICAgbGV0IGluZGV4ID0gLTE7CgogICAgICAvLyBEZXRlcm1pbmFyIGFycmF5IGRlIGNoaWxkcmVuIGUgw61uZGljZSBiYXNlYWRvIG5vIHRpcG8gZGUgY29udGFpbmVyCiAgICAgIGlmIChjdHgua2luZCA9PT0gJ2dyb3VwQ2hpbGRyZW4nKSB7CiAgICAgICAgY2hpbGRyZW4gPSBwYXJlbnQucHJvcGVydGllcy5jaGlsZHJlbiB8fCBbXTsKICAgICAgICBpbmRleCA9IGN0eC5pbmRleDsKICAgICAgfSBlbHNlIGlmIChjdHgua2luZCA9PT0gJ2NvbHVtbnMnKSB7CiAgICAgICAgY29uc3QgY29sID0gcGFyZW50LnByb3BlcnRpZXMuY29sdW1uc1tjdHguY29sSW5kZXhdOwogICAgICAgIGNoaWxkcmVuID0gY29sLmNoaWxkcmVuIHx8IFtdOwogICAgICAgIGluZGV4ID0gY3R4LmluZGV4OwogICAgICB9IGVsc2UgaWYgKGN0eC5raW5kID09PSAndGFibGVDZWxsJykgewogICAgICAgIGNvbnN0IGNlbGwgPSBwYXJlbnQucHJvcGVydGllcy5ib2R5W2N0eC5yb3ddW2N0eC5jb2xdOwogICAgICAgIGNoaWxkcmVuID0gY2VsbC5jaGlsZHJlbiB8fCBbXTsKICAgICAgICBpbmRleCA9IGN0eC5pbmRleDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm47IC8vIE7Do28gc3Vwb3J0YWRvCiAgICAgIH0KCiAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPD0gMSkgcmV0dXJuOwoKICAgICAgbGV0IG5ld0luZGV4ID0gaW5kZXg7CgogICAgICBzd2l0Y2ggKGRpcmVjdGlvbikgewogICAgICAgIGNhc2UgJ2ZpcnN0JzoKICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgbmV3SW5kZXggPSAwOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAncHJldic6CiAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHJldHVybjsKICAgICAgICAgIG5ld0luZGV4ID0gaW5kZXggLSAxOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnbmV4dCc6CiAgICAgICAgICBpZiAoaW5kZXggPT09IGNoaWxkcmVuLmxlbmd0aCAtIDEpIHJldHVybjsKICAgICAgICAgIG5ld0luZGV4ID0gaW5kZXggKyAxOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnbGFzdCc6CiAgICAgICAgICBpZiAoaW5kZXggPT09IGNoaWxkcmVuLmxlbmd0aCAtIDEpIHJldHVybjsKICAgICAgICAgIG5ld0luZGV4ID0gY2hpbGRyZW4ubGVuZ3RoIC0gMTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICAvLyBNb3ZlciBlbGVtZW50bwogICAgICBjb25zdCBbbW92ZWRFbGVtZW50XSA9IGNoaWxkcmVuLnNwbGljZShpbmRleCwgMSk7CiAgICAgIGNoaWxkcmVuLnNwbGljZShuZXdJbmRleCwgMCwgbW92ZWRFbGVtZW50KTsKCiAgICAgIC8vIFNlIGZvciBncnVwbywgcmVjYWxjdWxhciBsYXJndXJhcyBzZSBmb3IgaG9yaXpvbnRhbAogICAgICBpZiAoY3R4LmtpbmQgPT09ICdncm91cENoaWxkcmVuJyAmJiBwYXJlbnQucHJvcGVydGllcy5vcmllbnRhdGlvbiA9PT0gJ3JvdycgJiYgdHlwZW9mIHVwZGF0ZUdyb3VwQ2hpbGRyZW5XaWR0aHMgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB1cGRhdGVHcm91cENoaWxkcmVuV2lkdGhzKHBhcmVudCk7CiAgICAgIH0KCiAgICAgIC8vIEF0dWFsaXphciBkaW1lbnPDtWVzIGRvIGdydXBvIHNlIGFwbGljw6F2ZWwKICAgICAgaWYgKGN0eC5raW5kID09PSAnZ3JvdXBDaGlsZHJlbicgJiYgdHlwZW9mIHVwZGF0ZUdyb3VwRGltZW5zaW9ucyA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHVwZGF0ZUdyb3VwRGltZW5zaW9ucyhwYXJlbnQpOwogICAgICB9CgogICAgICAvLyBSZS1yZW5kZXJpemFyIGltZWRpYXRhbWVudGUKICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICByZW5kZXJBbGwoKTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgcmVuZGVyKCk7CiAgICAgIH0KICAgICAgLy8gQXR1YWxpemFyIGluc3BlY3RvciBwYXJhIHJlZmxldGlyIGEgbm92YSBwb3Npw6fDo28KICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJJbnNwZWN0b3IgPT09ICdmdW5jdGlvbicpIHJlbmRlckluc3BlY3RvcigpOwogICAgICB9LCAwKTsKICAgIH0KCiAgICAvLyBNb3ZlciBlbGVtZW50byBkZW50cm8gZGUgdW0gZ3J1cG8gKG1hbnRpZG8gcGFyYSBjb21wYXRpYmlsaWRhZGUpCiAgICBmdW5jdGlvbiBtb3ZlRWxlbWVudEluR3JvdXAoZGlyZWN0aW9uKSB7CiAgICAgIG1vdmVFbGVtZW50SW5Db250YWluZXIoZGlyZWN0aW9uKTsKICAgIH0KCiAgICAvLyBNb3ZlciBjb2x1bmEgZGVudHJvIGRlIGNvbHVtbnMKICAgIGZ1bmN0aW9uIG1vdmVDb2x1bW5JbkNvbHVtbnMoZWxlbWVudElkLCBjb2xJbmRleCwgZGlyZWN0aW9uKSB7CiAgICAgIGNvbnN0IGVsZW1lbnQgPSBmaW5kRWxlbWVudEJ5SWQoZWxlbWVudElkKTsKICAgICAgaWYgKCFlbGVtZW50IHx8IGVsZW1lbnQudHlwZSAhPT0gJ2NvbHVtbnMnKSByZXR1cm47CgogICAgICBjb25zdCBjb2xzID0gZWxlbWVudC5wcm9wZXJ0aWVzLmNvbHVtbnMgfHwgW107CiAgICAgIGlmIChjb2xzLmxlbmd0aCA8PSAxKSByZXR1cm47CgogICAgICBsZXQgbmV3SW5kZXggPSBjb2xJbmRleDsKCiAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7CiAgICAgICAgY2FzZSAnZmlyc3QnOgogICAgICAgICAgaWYgKGNvbEluZGV4ID09PSAwKSByZXR1cm47CiAgICAgICAgICBuZXdJbmRleCA9IDA7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdwcmV2JzoKICAgICAgICAgIGlmIChjb2xJbmRleCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgbmV3SW5kZXggPSBjb2xJbmRleCAtIDE7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICduZXh0JzoKICAgICAgICAgIGlmIChjb2xJbmRleCA9PT0gY29scy5sZW5ndGggLSAxKSByZXR1cm47CiAgICAgICAgICBuZXdJbmRleCA9IGNvbEluZGV4ICsgMTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2xhc3QnOgogICAgICAgICAgaWYgKGNvbEluZGV4ID09PSBjb2xzLmxlbmd0aCAtIDEpIHJldHVybjsKICAgICAgICAgIG5ld0luZGV4ID0gY29scy5sZW5ndGggLSAxOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIC8vIE1vdmVyIGNvbHVuYQogICAgICBjb25zdCBbbW92ZWRDb2xdID0gY29scy5zcGxpY2UoY29sSW5kZXgsIDEpOwogICAgICBjb2xzLnNwbGljZShuZXdJbmRleCwgMCwgbW92ZWRDb2wpOwoKICAgICAgLy8gUmUtcmVuZGVyaXphcgogICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJlbmRlckFsbCgpOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICByZW5kZXIoKTsKICAgICAgfQogICAgICAvLyBBdHVhbGl6YXIgaW5zcGVjdG9yCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGlmICh0eXBlb2YgcmVuZGVySW5zcGVjdG9yID09PSAnZnVuY3Rpb24nKSByZW5kZXJJbnNwZWN0b3IoKTsKICAgICAgfSwgMCk7CiAgICB9CgogICAgLy8gTW92ZXIgY29sdW5hIGRlbnRybyBkZSB0YWJsZQogICAgZnVuY3Rpb24gbW92ZUNvbHVtbkluVGFibGUoZWxlbWVudElkLCBjb2xJbmRleCwgZGlyZWN0aW9uKSB7CiAgICAgIGNvbnN0IGVsZW1lbnQgPSBmaW5kRWxlbWVudEJ5SWQoZWxlbWVudElkKTsKICAgICAgaWYgKCFlbGVtZW50IHx8IGVsZW1lbnQudHlwZSAhPT0gJ3RhYmxlJykgcmV0dXJuOwoKICAgICAgY29uc3QgYm9keSA9IGVsZW1lbnQucHJvcGVydGllcy5ib2R5IHx8IFtdOwogICAgICBpZiAoYm9keS5sZW5ndGggPT09IDApIHJldHVybjsKCiAgICAgIGNvbnN0IG51bUNvbHMgPSBib2R5WzBdLmxlbmd0aDsKICAgICAgaWYgKG51bUNvbHMgPD0gMSkgcmV0dXJuOwoKICAgICAgbGV0IG5ld0luZGV4ID0gY29sSW5kZXg7CgogICAgICBzd2l0Y2ggKGRpcmVjdGlvbikgewogICAgICAgIGNhc2UgJ2ZpcnN0JzoKICAgICAgICAgIGlmIChjb2xJbmRleCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgbmV3SW5kZXggPSAwOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAncHJldic6CiAgICAgICAgICBpZiAoY29sSW5kZXggPT09IDApIHJldHVybjsKICAgICAgICAgIG5ld0luZGV4ID0gY29sSW5kZXggLSAxOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnbmV4dCc6CiAgICAgICAgICBpZiAoY29sSW5kZXggPT09IG51bUNvbHMgLSAxKSByZXR1cm47CiAgICAgICAgICBuZXdJbmRleCA9IGNvbEluZGV4ICsgMTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2xhc3QnOgogICAgICAgICAgaWYgKGNvbEluZGV4ID09PSBudW1Db2xzIC0gMSkgcmV0dXJuOwogICAgICAgICAgbmV3SW5kZXggPSBudW1Db2xzIC0gMTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICAvLyBNb3ZlciBjb2x1bmEgZW0gdG9kYXMgYXMgbGluaGFzCiAgICAgIGJvZHkuZm9yRWFjaChyb3cgPT4gewogICAgICAgIGNvbnN0IFttb3ZlZENlbGxdID0gcm93LnNwbGljZShjb2xJbmRleCwgMSk7CiAgICAgICAgcm93LnNwbGljZShuZXdJbmRleCwgMCwgbW92ZWRDZWxsKTsKICAgICAgfSk7CgogICAgICAvLyBNb3ZlciB3aWR0aCBjb3JyZXNwb25kZW50ZSBzZSBleGlzdGlyCiAgICAgIGlmIChlbGVtZW50LnByb3BlcnRpZXMud2lkdGhzICYmIGVsZW1lbnQucHJvcGVydGllcy53aWR0aHMubGVuZ3RoID09PSBudW1Db2xzKSB7CiAgICAgICAgY29uc3QgW21vdmVkV2lkdGhdID0gZWxlbWVudC5wcm9wZXJ0aWVzLndpZHRocy5zcGxpY2UoY29sSW5kZXgsIDEpOwogICAgICAgIGVsZW1lbnQucHJvcGVydGllcy53aWR0aHMuc3BsaWNlKG5ld0luZGV4LCAwLCBtb3ZlZFdpZHRoKTsKICAgICAgfQoKICAgICAgLy8gUmUtcmVuZGVyaXphcgogICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJlbmRlckFsbCgpOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICByZW5kZXIoKTsKICAgICAgfQogICAgICAvLyBBdHVhbGl6YXIgaW5zcGVjdG9yCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGlmICh0eXBlb2YgcmVuZGVySW5zcGVjdG9yID09PSAnZnVuY3Rpb24nKSByZW5kZXJJbnNwZWN0b3IoKTsKICAgICAgfSwgMCk7CiAgICB9CgogICAgLy8gRGVsZXRhciBjb2x1bmEgZXNwZWPDrWZpY2EgZGUgY29sdW1ucwogICAgZnVuY3Rpb24gZGVsZXRlQ29sdW1uRnJvbUNvbHVtbnMoZWxlbWVudElkLCBjb2xJbmRleCkgewogICAgICBjb25zdCBlbGVtZW50ID0gZmluZEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7CiAgICAgIGlmICghZWxlbWVudCB8fCBlbGVtZW50LnR5cGUgIT09ICdjb2x1bW5zJykgcmV0dXJuOwoKICAgICAgY29uc3QgY29scyA9IGVsZW1lbnQucHJvcGVydGllcy5jb2x1bW5zIHx8IFtdOwogICAgICBpZiAoY29scy5sZW5ndGggPD0gMSkgewogICAgICAgIGlmICh0eXBlb2Ygc2hvd0FsZXJ0TW9kYWwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHNob3dBbGVydE1vZGFsKCdBdmlzbycsICfDiSBuZWNlc3PDoXJpbyBtYW50ZXIgcGVsbyBtZW5vcyB1bWEgY29sdW5hLicpOwogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0eXBlb2Ygc2hvd0NvbmZpcm1Nb2RhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHNob3dDb25maXJtTW9kYWwoCiAgICAgICAgICAnRGVsZXRhciBDb2x1bmEnLAogICAgICAgICAgYFRlbSBjZXJ0ZXphIHF1ZSBkZXNlamEgZGVsZXRhciBhIENvbHVuYSAke2NvbEluZGV4ICsgMX0/IFRvZG9zIG9zIGVsZW1lbnRvcyBkZW50cm8gZGVzdGEgY29sdW5hIHNlcsOjbyByZW1vdmlkb3MuYCwKICAgICAgICAgICgpID0+IHsKICAgICAgICAgICAgLy8gRGVsZXRhciBhIGNvbHVuYQogICAgICAgICAgICBjb2xzLnNwbGljZShjb2xJbmRleCwgMSk7CgogICAgICAgICAgICAvLyBBdHVhbGl6YXIgbyBuw7ptZXJvIGRlIGNvbHVuYXMgbm8gaW5wdXQgc2UgZXhpc3RpcgogICAgICAgICAgICBjb25zdCBjb2xDb3VudElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtY29sQ291bnQnKTsKICAgICAgICAgICAgaWYgKGNvbENvdW50SW5wdXQpIHsKICAgICAgICAgICAgICBjb2xDb3VudElucHV0LnZhbHVlID0gY29scy5sZW5ndGg7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFJlLXJlbmRlcml6YXIKICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICByZW5kZXJBbGwoKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgcmVuZGVyKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gQXR1YWxpemFyIGluc3BlY3RvcgogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckluc3BlY3RvciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVySW5zcGVjdG9yKCk7CiAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgfQogICAgICAgICk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBEZWxldGFyIGNvbHVuYSBlc3BlY8OtZmljYSBkZSB0YWJsZQogICAgZnVuY3Rpb24gZGVsZXRlQ29sdW1uRnJvbVRhYmxlKGVsZW1lbnRJZCwgY29sSW5kZXgpIHsKICAgICAgY29uc3QgZWxlbWVudCA9IGZpbmRFbGVtZW50QnlJZChlbGVtZW50SWQpOwogICAgICBpZiAoIWVsZW1lbnQgfHwgZWxlbWVudC50eXBlICE9PSAndGFibGUnKSByZXR1cm47CgogICAgICBjb25zdCBib2R5ID0gZWxlbWVudC5wcm9wZXJ0aWVzLmJvZHkgfHwgW107CiAgICAgIGlmIChib2R5Lmxlbmd0aCA9PT0gMCkgcmV0dXJuOwoKICAgICAgY29uc3QgbnVtQ29scyA9IGJvZHlbMF0ubGVuZ3RoOwogICAgICBpZiAobnVtQ29scyA8PSAxKSB7CiAgICAgICAgaWYgKHR5cGVvZiBzaG93QWxlcnRNb2RhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgc2hvd0FsZXJ0TW9kYWwoJ0F2aXNvJywgJ8OJIG5lY2Vzc8OhcmlvIG1hbnRlciBwZWxvIG1lbm9zIHVtYSBjb2x1bmEuJyk7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHR5cGVvZiBzaG93Q29uZmlybU1vZGFsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgc2hvd0NvbmZpcm1Nb2RhbCgKICAgICAgICAgICdEZWxldGFyIENvbHVuYScsCiAgICAgICAgICBgVGVtIGNlcnRlemEgcXVlIGRlc2VqYSBkZWxldGFyIGEgQ29sdW5hICR7Y29sSW5kZXggKyAxfT8gVG9kb3Mgb3MgZGFkb3MgZGVzdGEgY29sdW5hIGVtIHRvZGFzIGFzIGxpbmhhcyBzZXLDo28gcmVtb3ZpZG9zLmAsCiAgICAgICAgICAoKSA9PiB7CiAgICAgICAgICAgIC8vIERlbGV0YXIgY29sdW5hIGRlIHRvZGFzIGFzIGxpbmhhcwogICAgICAgICAgICBib2R5LmZvckVhY2gocm93ID0+IHsKICAgICAgICAgICAgICByb3cuc3BsaWNlKGNvbEluZGV4LCAxKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBEZWxldGFyIHdpZHRoIGNvcnJlc3BvbmRlbnRlIHNlIGV4aXN0aXIKICAgICAgICAgICAgaWYgKGVsZW1lbnQucHJvcGVydGllcy53aWR0aHMgJiYgZWxlbWVudC5wcm9wZXJ0aWVzLndpZHRocy5sZW5ndGggPT09IG51bUNvbHMpIHsKICAgICAgICAgICAgICBlbGVtZW50LnByb3BlcnRpZXMud2lkdGhzLnNwbGljZShjb2xJbmRleCwgMSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEF0dWFsaXphciBuw7ptZXJvIGRlIGNvbHVuYXMgbm8gaW5wdXQgc2UgZXhpc3RpcgogICAgICAgICAgICBjb25zdCB0YWJsZUNvbHNJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXRhYmxlQ29scycpOwogICAgICAgICAgICBpZiAodGFibGVDb2xzSW5wdXQpIHsKICAgICAgICAgICAgICB0YWJsZUNvbHNJbnB1dC52YWx1ZSA9IG51bUNvbHMgLSAxOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBSZS1yZW5kZXJpemFyCiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgcmVuZGVyQWxsKCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgIHJlbmRlcigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIEF0dWFsaXphciBpbnNwZWN0b3IKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJJbnNwZWN0b3IgPT09ICdmdW5jdGlvbicpIHJlbmRlckluc3BlY3RvcigpOwogICAgICAgICAgICB9LCAwKTsKICAgICAgICAgIH0KICAgICAgICApOwogICAgICB9CiAgICB9CgogICAgLy8gUHJvY2Vzc2FyIGltYWdlbSBjb20gYm9yZGVyLXJhZGl1cyB1c2FuZG8gQ2FudmFzIChhZGFwdGFkbyBkbyBzY3JpcHQgTm9kZS5qcyBmb3JuZWNpZG8pCiAgICBmdW5jdGlvbiBlc2NhcGVIdG1sKHRleHQpIHsKICAgICAgaWYgKCF0ZXh0KSByZXR1cm4gJyc7CiAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBkaXYudGV4dENvbnRlbnQgPSB0ZXh0OwogICAgICByZXR1cm4gZGl2LmlubmVySFRNTDsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVQYXJlbnRHcm91cHNEaW1lbnNpb25zKGNoaWxkSWQpIHsKICAgICAgaWYgKCFjaGlsZElkKSByZXR1cm47CiAgICAgIGVsZW1lbnRzLmZvckVhY2goZ3JvdXAgPT4gewogICAgICAgIGlmIChncm91cC50eXBlID09PSAnZ3JvdXAnICYmIGdyb3VwLnByb3BlcnRpZXMgJiYgZ3JvdXAucHJvcGVydGllcy5jaGlsZHJlbikgewogICAgICAgICAgY29uc3QgaGFzQ2hpbGQgPSBncm91cC5wcm9wZXJ0aWVzLmNoaWxkcmVuLnNvbWUoY2hpbGQgPT4gY2hpbGQgJiYgY2hpbGQuaWQgPT09IGNoaWxkSWQpOwogICAgICAgICAgaWYgKGhhc0NoaWxkICYmIHR5cGVvZiB1cGRhdGVHcm91cERpbWVuc2lvbnMgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgdXBkYXRlR3JvdXBEaW1lbnNpb25zKGdyb3VwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8vIFJlbW92ZXIgZWxlbWVudG8gc2VsZWNpb25hZG8KICAgIGZ1bmN0aW9uIHJlbW92ZVNlbGVjdGVkRWxlbWVudCgpIHsKICAgICAgaWYgKCFzZWxlY3RlZEVsZW1lbnRJZCkgcmV0dXJuOwoKICAgICAgc2hvd0NvbmZpcm1Nb2RhbCgKICAgICAgICAnUmVtb3ZlciBlbGVtZW50bycsCiAgICAgICAgJ1RlbSBjZXJ0ZXphIHF1ZSBkZXNlamEgcmVtb3ZlciBlc3RlIGVsZW1lbnRvPycsCiAgICAgICAgKCkgPT4gewogICAgICAgICAgLy8gVXNhciBkZWxldGVTZWxlY3RlZCBxdWUgasOhIGV4aXN0ZSBlIGZ1bmNpb25hIGNvcnJldGFtZW50ZQogICAgICAgICAgZGVsZXRlU2VsZWN0ZWQoKTsKICAgICAgICAgIC8vIEF0dWFsaXphciBpbnNwZWN0b3IgYXDDs3MgcmVtb8Onw6NvCiAgICAgICAgICByZW5kZXJJbnNwZWN0b3IoKTsKICAgICAgICB9CiAgICAgICk7CiAgICB9CiAgICB3aW5kb3cucmVtb3ZlU2VsZWN0ZWRFbGVtZW50ID0gcmVtb3ZlU2VsZWN0ZWRFbGVtZW50OyAvLyBUb3JuYXIgZ2xvYmFsIHBhcmEgdXNvIG5vIG9uY2xpY2sKCiAgICAvLyBWYXJpw6F2ZWwgZ2xvYmFsIHBhcmEgYXJtYXplbmFyIHByb3ByaWVkYWRlcyBjb3BpYWRhcwogICAgbGV0IGNvcGllZEVsZW1lbnRQcm9wZXJ0aWVzID0gbnVsbDsKCiAgICAvLyBEdXBsaWNhciBlbGVtZW50byBzZWxlY2lvbmFkbwogICAgZnVuY3Rpb24gZHVwbGljYXRlU2VsZWN0ZWRFbGVtZW50KCkgewogICAgICBpZiAoIXNlbGVjdGVkRWxlbWVudElkKSByZXR1cm47CgogICAgICBjb25zdCBlbGVtZW50ID0gZmluZEVsZW1lbnRCeUlkKHNlbGVjdGVkRWxlbWVudElkKTsKICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm47CgogICAgICAvLyBDcmlhciB1bWEgY8OzcGlhIHByb2Z1bmRhIGRvIGVsZW1lbnRvCiAgICAgIGNvbnN0IGR1cGxpY2F0ZWQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVsZW1lbnQpKTsKCiAgICAgIC8vIEdlcmFyIG5vdm8gSUQKICAgICAgZHVwbGljYXRlZC5pZCA9ICdlbF8nICsgRGF0ZS5ub3coKSArICdfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTsKCiAgICAgIC8vIEVuY29udHJhciBvbmRlIGFkaWNpb25hciBvIGVsZW1lbnRvIGR1cGxpY2FkbwogICAgICBjb25zdCBwYXJlbnRHcm91cEluZm8gPSBmaW5kUGFyZW50R3JvdXAoc2VsZWN0ZWRFbGVtZW50SWQpOwogICAgICBjb25zdCBub2RlV2l0aFBhcmVudCA9IGZpbmROb2RlV2l0aFBhcmVudChzZWxlY3RlZEVsZW1lbnRJZCk7CgogICAgICBpZiAocGFyZW50R3JvdXBJbmZvKSB7CiAgICAgICAgLy8gQWRpY2lvbmFyIGFvIG1lc21vIGdydXBvLCBhcMOzcyBvIGVsZW1lbnRvIG9yaWdpbmFsCiAgICAgICAgY29uc3QgcGFyZW50R3JvdXAgPSBwYXJlbnRHcm91cEluZm8uZ3JvdXA7CiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBwYXJlbnRHcm91cC5wcm9wZXJ0aWVzLmNoaWxkcmVuIHx8IFtdOwogICAgICAgIGNvbnN0IGluZGV4ID0gcGFyZW50R3JvdXBJbmZvLmluZGV4OwogICAgICAgIGNoaWxkcmVuLnNwbGljZShpbmRleCArIDEsIDAsIGR1cGxpY2F0ZWQpOwogICAgICAgIHBhcmVudEdyb3VwLnByb3BlcnRpZXMuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgICAgfSBlbHNlIGlmIChub2RlV2l0aFBhcmVudCAmJiBub2RlV2l0aFBhcmVudC5wYXJlbnQgJiYgbm9kZVdpdGhQYXJlbnQuY3R4KSB7CiAgICAgICAgY29uc3QgY3R4ID0gbm9kZVdpdGhQYXJlbnQuY3R4OwogICAgICAgIGlmIChjdHgua2luZCA9PT0gJ2NvbHVtbnMnKSB7CiAgICAgICAgICBjb25zdCBjb2wgPSBub2RlV2l0aFBhcmVudC5wYXJlbnQucHJvcGVydGllcy5jb2x1bW5zW2N0eC5jb2xJbmRleF07CiAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGNvbC5jaGlsZHJlbiB8fCBbXTsKICAgICAgICAgIGNoaWxkcmVuLnNwbGljZShjdHguaW5kZXggKyAxLCAwLCBkdXBsaWNhdGVkKTsKICAgICAgICAgIGNvbC5jaGlsZHJlbiA9IGNoaWxkcmVuOwogICAgICAgIH0gZWxzZSBpZiAoY3R4LmtpbmQgPT09ICd0YWJsZUNlbGwnKSB7CiAgICAgICAgICBjb25zdCBjZWxsID0gbm9kZVdpdGhQYXJlbnQucGFyZW50LnByb3BlcnRpZXMuYm9keVtjdHgucm93XVtjdHguY29sXTsKICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gY2VsbC5jaGlsZHJlbiB8fCBbXTsKICAgICAgICAgIGNoaWxkcmVuLnNwbGljZShjdHguaW5kZXggKyAxLCAwLCBkdXBsaWNhdGVkKTsKICAgICAgICAgIGNlbGwuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gQWRpY2lvbmFyIGFvIHJvb3QKICAgICAgICAgIGNvbnN0IHJvb3RHcm91cCA9IGdldFJvb3RHcm91cCgpOwogICAgICAgICAgaWYgKHJvb3RHcm91cCkgewogICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHJvb3RHcm91cC5wcm9wZXJ0aWVzLmNoaWxkcmVuIHx8IFtdOwogICAgICAgICAgICBjb25zdCBpbmRleCA9IGNoaWxkcmVuLmZpbmRJbmRleChlbCA9PiBlbC5pZCA9PT0gc2VsZWN0ZWRFbGVtZW50SWQpOwogICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkgewogICAgICAgICAgICAgIGNoaWxkcmVuLnNwbGljZShpbmRleCArIDEsIDAsIGR1cGxpY2F0ZWQpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goZHVwbGljYXRlZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcm9vdEdyb3VwLnByb3BlcnRpZXMuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQWRpY2lvbmFyIGFvIHJvb3QKICAgICAgICBjb25zdCByb290R3JvdXAgPSBnZXRSb290R3JvdXAoKTsKICAgICAgICBpZiAocm9vdEdyb3VwKSB7CiAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHJvb3RHcm91cC5wcm9wZXJ0aWVzLmNoaWxkcmVuIHx8IFtdOwogICAgICAgICAgY29uc3QgaW5kZXggPSBjaGlsZHJlbi5maW5kSW5kZXgoZWwgPT4gZWwuaWQgPT09IHNlbGVjdGVkRWxlbWVudElkKTsKICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7CiAgICAgICAgICAgIGNoaWxkcmVuLnNwbGljZShpbmRleCArIDEsIDAsIGR1cGxpY2F0ZWQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChkdXBsaWNhdGVkKTsKICAgICAgICAgIH0KICAgICAgICAgIHJvb3RHcm91cC5wcm9wZXJ0aWVzLmNoaWxkcmVuID0gY2hpbGRyZW47CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBTZWxlY2lvbmFyIG8gZWxlbWVudG8gZHVwbGljYWRvCiAgICAgIHNlbGVjdGVkRWxlbWVudElkID0gZHVwbGljYXRlZC5pZDsKCiAgICAgIC8vIFJlc2V0YXIgY2FjaGUgZSByZW5kZXJpemFyIHByaW1laXJvIHNlbSBhanVzdGFyIHRhbWFuaG8KICAgICAgcmVzZXRDYW52YXNTaXplQ2FjaGUoKTsKICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICByZW5kZXJBbGwoZmFsc2UpOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICByZW5kZXIoKTsKICAgICAgfQoKICAgICAgLy8gRGVwb2lzLCBwZXJtaXRpciBhanVzdGUgZSBmYXplciBhanVzdGUgw7puaWNvIGFww7NzIHVtIGRlbGF5CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGFsbG93Q2FudmFzU2l6ZUFkanVzdCA9IHRydWU7CiAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHJlbmRlckFsbCh0cnVlKTsKICAgICAgICB9CiAgICAgICAgYWxsb3dDYW52YXNTaXplQWRqdXN0ID0gZmFsc2U7CiAgICAgIH0sIDEwMCk7CgogICAgICAvLyBBdHVhbGl6YXIgaW5zcGVjdG9yCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGlmICh0eXBlb2YgcmVuZGVySW5zcGVjdG9yID09PSAnZnVuY3Rpb24nKSByZW5kZXJJbnNwZWN0b3IoKTsKICAgICAgfSwgMTUwKTsKICAgIH0KICAgIHdpbmRvdy5kdXBsaWNhdGVTZWxlY3RlZEVsZW1lbnQgPSBkdXBsaWNhdGVTZWxlY3RlZEVsZW1lbnQ7CgogICAgLy8gQ29waWFyIHByb3ByaWVkYWRlcyBkbyBlbGVtZW50bwogICAgZnVuY3Rpb24gY29weUVsZW1lbnRQcm9wZXJ0aWVzKCkgewogICAgICBpZiAoIXNlbGVjdGVkRWxlbWVudElkKSByZXR1cm47CgogICAgICBjb25zdCBlbGVtZW50ID0gZmluZEVsZW1lbnRCeUlkKHNlbGVjdGVkRWxlbWVudElkKTsKICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm47CgogICAgICAvLyBDb3BpYXIgYXBlbmFzIGFzIHByb3ByaWVkYWRlcyAobsOjbyBvIElEIG5lbSBvdXRyYXMgcHJvcHJpZWRhZGVzIGRvIGVsZW1lbnRvKQogICAgICBjb3BpZWRFbGVtZW50UHJvcGVydGllcyA9IHsKICAgICAgICB0eXBlOiBlbGVtZW50LnR5cGUsCiAgICAgICAgcHJvcGVydGllczogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbGVtZW50LnByb3BlcnRpZXMgfHwge30pKQogICAgICB9OwoKICAgICAgLy8gTW9zdHJhciBmZWVkYmFjawogICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLXBhc3RlJyk7CiAgICAgIGlmIChidG4pIHsKICAgICAgICBidG4uc3R5bGUuYmFja2dyb3VuZCA9ICcjZjU5ZTBiJzsKICAgICAgICBidG4uZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICBidG4uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInOwogICAgICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGJ0bi50ZXh0Q29udGVudDsKICAgICAgICBidG4udGV4dENvbnRlbnQgPSAn4pyTIFByb3ByaWVkYWRlcyBDb3BpYWRhcyEnOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0OwogICAgICAgIH0sIDIwMDApOwogICAgICB9CiAgICB9CiAgICB3aW5kb3cuY29weUVsZW1lbnRQcm9wZXJ0aWVzID0gY29weUVsZW1lbnRQcm9wZXJ0aWVzOwoKICAgIC8vIENvbGFyIHByb3ByaWVkYWRlcyBubyBlbGVtZW50byBzZWxlY2lvbmFkbwogICAgZnVuY3Rpb24gcGFzdGVFbGVtZW50UHJvcGVydGllcygpIHsKICAgICAgaWYgKCFzZWxlY3RlZEVsZW1lbnRJZCB8fCAhY29waWVkRWxlbWVudFByb3BlcnRpZXMpIHJldHVybjsKCiAgICAgIGNvbnN0IGVsZW1lbnQgPSBmaW5kRWxlbWVudEJ5SWQoc2VsZWN0ZWRFbGVtZW50SWQpOwogICAgICBpZiAoIWVsZW1lbnQpIHJldHVybjsKCiAgICAgIC8vIFPDsyBjb2xhciBzZSBvcyB0aXBvcyBmb3JlbSBjb21wYXTDrXZlaXMKICAgICAgaWYgKGVsZW1lbnQudHlwZSAhPT0gY29waWVkRWxlbWVudFByb3BlcnRpZXMudHlwZSkgewogICAgICAgIGlmICh0eXBlb2Ygc2hvd0FsZXJ0TW9kYWwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHNob3dBbGVydE1vZGFsKAogICAgICAgICAgICAnRXJybyBhbyBDb2xhciBQcm9wcmllZGFkZXMnLAogICAgICAgICAgICBgTsOjbyDDqSBwb3Nzw612ZWwgY29sYXIgcHJvcHJpZWRhZGVzIGRlIHVtIHRpcG8gZGUgZWxlbWVudG8gZGlmZXJlbnRlLlxuXG5FbGVtZW50byBhdHVhbDogJHtnZXRFbGVtZW50VHlwZU5hbWUoZWxlbWVudC50eXBlKX1cbkVsZW1lbnRvIGNvcGlhZG86ICR7Z2V0RWxlbWVudFR5cGVOYW1lKGNvcGllZEVsZW1lbnRQcm9wZXJ0aWVzLnR5cGUpfWAKICAgICAgICAgICk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KCdOw6NvIMOpIHBvc3PDrXZlbCBjb2xhciBwcm9wcmllZGFkZXMgZGUgdW0gdGlwbyBkZSBlbGVtZW50byBkaWZlcmVudGUuJyk7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gQ29sYXIgYXMgcHJvcHJpZWRhZGVzIChwcmVzZXJ2YXIgSUQgZSBvdXRyYXMgcHJvcHJpZWRhZGVzIGRvIGVsZW1lbnRvKQogICAgICBlbGVtZW50LnByb3BlcnRpZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvcGllZEVsZW1lbnRQcm9wZXJ0aWVzLnByb3BlcnRpZXMpKTsKCiAgICAgIC8vIEF0dWFsaXphciByZW5kZXJpemHDp8OjbwogICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJlbmRlckFsbCgpOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICByZW5kZXIoKTsKICAgICAgfQoKICAgICAgLy8gQXR1YWxpemFyIGluc3BlY3RvcgogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBpZiAodHlwZW9mIHJlbmRlckluc3BlY3RvciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVySW5zcGVjdG9yKCk7CiAgICAgIH0sIDEwMCk7CiAgICB9CiAgICB3aW5kb3cucGFzdGVFbGVtZW50UHJvcGVydGllcyA9IHBhc3RlRWxlbWVudFByb3BlcnRpZXM7CgogICAgLy8gSGVscGVyIGZ1bmN0aW9uIHBhcmEgY3JpYXIgdG9vbHRpcHMKICAgIGZ1bmN0aW9uIGNyZWF0ZVRvb2x0aXAodGV4dCwgaGVscFRleHQgPSAnJykgewogICAgICBpZiAoIXRleHQpIHJldHVybiAnJzsKICAgICAgY29uc3QgdG9vbHRpcElkID0gJ3Rvb2x0aXBfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTsKICAgICAgY29uc3QgZnVsbFRleHQgPSBoZWxwVGV4dCA/IHRleHQgKyAnXFxuXFxuJyArIGhlbHBUZXh0IDogdGV4dDsKICAgICAgcmV0dXJuIGAKICAgICAgICA8c3BhbiBzdHlsZT0icG9zaXRpb246IHJlbGF0aXZlOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IG1hcmdpbi1sZWZ0OiAwLjI1cmVtOyBjdXJzb3I6IGhlbHA7IiB0aXRsZT0iJHtlc2NhcGVIdG1sKGZ1bGxUZXh0KX0iPgogICAgICAgICAgPHNwYW4gc3R5bGU9ImNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsgZm9udC1zaXplOiAwLjg3NXJlbTsiPuKEue+4jzwvc3Bhbj4KICAgICAgICA8L3NwYW4+CiAgICAgIGA7CiAgICB9CgogICAgLy8gR2V0IGVsZW1lbnQgdHlwZSBuYW1lIGZvciBkaXNwbGF5CiAgICBmdW5jdGlvbiBnZXRFbGVtZW50VHlwZU5hbWUodHlwZSkgewogICAgICBjb25zdCBuYW1lcyA9IHsKICAgICAgICB0ZXh0OiAnVGV4dG8nLAogICAgICAgIGhlYWRlcjogJ0NhYmXDp2FsaG8nLAogICAgICAgIGltYWdlOiAnSW1hZ2VtJywKICAgICAgICB0YWJsZTogJ1RhYmVsYScsCiAgICAgICAgY29sdW1uczogJ0NvbHVuYXMnLAogICAgICAgIGxpc3Q6ICdMaXN0YScsCiAgICAgICAgbWFyZ2luOiAnRXNwYcOnbycsCiAgICAgICAgcGFnZUJyZWFrOiAnUXVlYnJhIGRlIFDDoWdpbmEnLAogICAgICAgIGdyb3VwOiAnR3J1cG8nCiAgICAgIH07CiAgICAgIHJldHVybiBuYW1lc1t0eXBlXSB8fCB0eXBlOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlckluc3BlY3RvcigpIHsKICAgICAgY29uc3QgaW5zcGVjdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3BlY3RvcicpOwogICAgICBjb25zdCBlbGVtZW50ID0gZmluZEVsZW1lbnRCeUlkKHNlbGVjdGVkRWxlbWVudElkKTsKCiAgICAgIGlmICghZWxlbWVudCkgewogICAgICAgIC8vIExpbXBhciB0w610dWxvIHF1YW5kbyBuw6NvIGjDoSBlbGVtZW50byBzZWxlY2lvbmFkbwogICAgICAgIGNvbnN0IHR5cGVUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbGVtZW50VHlwZVRpdGxlJyk7CiAgICAgICAgaWYgKHR5cGVUaXRsZSkgewogICAgICAgICAgdHlwZVRpdGxlLmlubmVySFRNTCA9ICdUaXBvJzsKICAgICAgICB9CiAgICAgICAgaW5zcGVjdG9yLmlubmVySFRNTCA9IGAKICAgICAgICAgIDxkaXYgY2xhc3M9Im11dGVkIiBzdHlsZT0icGFkZGluZzogMXJlbTsgdGV4dC1hbGlnbjogY2VudGVyOyI+CiAgICAgICAgICAgIFNlbGVjaW9uZSB1bSBlbGVtZW50byBubyBjYW52YXMgcGFyYSBlZGl0YXIgc3VhcyBwcm9wcmllZGFkZXMuCiAgICAgICAgICA8L2Rpdj4KICAgICAgICBgOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gQXR1YWxpemFyIHTDrXR1bG8gbm8gaGVhZGVyCiAgICAgIGNvbnN0IHR5cGVUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbGVtZW50VHlwZVRpdGxlJyk7CiAgICAgIGlmICh0eXBlVGl0bGUpIHsKICAgICAgICB0eXBlVGl0bGUuaW5uZXJIVE1MID0gYFRpcG86IDxzdHJvbmc+JHtnZXRFbGVtZW50VHlwZU5hbWUoZWxlbWVudC50eXBlKX08L3N0cm9uZz5gOwogICAgICB9CgogICAgICBsZXQgaHRtbCA9ICcnOwoKICAgICAgLy8gQ2hlY2sgaWYgZWxlbWVudCBpcyBpbnNpZGUgYSBjb250YWluZXIgKGdyb3VwLCBjb2x1bW5zLCB0YWJsZSkKICAgICAgY29uc3QgcGFyZW50R3JvdXBJbmZvID0gZmluZFBhcmVudEdyb3VwKGVsZW1lbnQuaWQpOwogICAgICBjb25zdCBub2RlV2l0aFBhcmVudCA9IGZpbmROb2RlV2l0aFBhcmVudChlbGVtZW50LmlkKTsKCiAgICAgIGlmIChwYXJlbnRHcm91cEluZm8gfHwgKG5vZGVXaXRoUGFyZW50ICYmIG5vZGVXaXRoUGFyZW50LnBhcmVudCAmJiBub2RlV2l0aFBhcmVudC5jdHgpKSB7CiAgICAgICAgbGV0IGNoaWxkcmVuID0gW107CiAgICAgICAgbGV0IGNoaWxkSW5kZXggPSAtMTsKICAgICAgICBsZXQgaXNGaXJzdCA9IGZhbHNlOwogICAgICAgIGxldCBpc0xhc3QgPSBmYWxzZTsKICAgICAgICBsZXQgc2hvd1Jlb3JkZXIgPSBmYWxzZTsKCiAgICAgICAgLy8gU2UgZW5jb250cm91IHZpYSBmaW5kUGFyZW50R3JvdXAgKGdydXBvcykKICAgICAgICBpZiAocGFyZW50R3JvdXBJbmZvKSB7CiAgICAgICAgICBjb25zdCBwYXJlbnRHcm91cCA9IHBhcmVudEdyb3VwSW5mby5ncm91cDsKICAgICAgICAgIGNoaWxkSW5kZXggPSBwYXJlbnRHcm91cEluZm8uaW5kZXg7CiAgICAgICAgICBjaGlsZHJlbiA9IHBhcmVudEdyb3VwLnByb3BlcnRpZXMuY2hpbGRyZW4gfHwgW107CiAgICAgICAgICBpc0ZpcnN0ID0gY2hpbGRJbmRleCA9PT0gMDsKICAgICAgICAgIGlzTGFzdCA9IGNoaWxkSW5kZXggPT09IGNoaWxkcmVuLmxlbmd0aCAtIDE7CiAgICAgICAgICBzaG93UmVvcmRlciA9IHRydWU7CiAgICAgICAgfQogICAgICAgIC8vIFNlIGVuY29udHJvdSB2aWEgZmluZE5vZGVXaXRoUGFyZW50IChjb2x1bW5zLCB0YWJsZSkKICAgICAgICBlbHNlIGlmIChub2RlV2l0aFBhcmVudCAmJiBub2RlV2l0aFBhcmVudC5wYXJlbnQgJiYgbm9kZVdpdGhQYXJlbnQuY3R4KSB7CiAgICAgICAgICBjb25zdCBjdHggPSBub2RlV2l0aFBhcmVudC5jdHg7CiAgICAgICAgICBpZiAoY3R4LmtpbmQgPT09ICdjb2x1bW5zJykgewogICAgICAgICAgICBjb25zdCBjb2wgPSBub2RlV2l0aFBhcmVudC5wYXJlbnQucHJvcGVydGllcy5jb2x1bW5zW2N0eC5jb2xJbmRleF07CiAgICAgICAgICAgIGNoaWxkcmVuID0gY29sLmNoaWxkcmVuIHx8IFtdOwogICAgICAgICAgICBjaGlsZEluZGV4ID0gY3R4LmluZGV4OwogICAgICAgICAgICBpc0ZpcnN0ID0gY2hpbGRJbmRleCA9PT0gMDsKICAgICAgICAgICAgaXNMYXN0ID0gY2hpbGRJbmRleCA9PT0gY2hpbGRyZW4ubGVuZ3RoIC0gMTsKICAgICAgICAgICAgc2hvd1Jlb3JkZXIgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIGlmIChjdHgua2luZCA9PT0gJ3RhYmxlQ2VsbCcpIHsKICAgICAgICAgICAgY29uc3QgY2VsbCA9IG5vZGVXaXRoUGFyZW50LnBhcmVudC5wcm9wZXJ0aWVzLmJvZHlbY3R4LnJvd11bY3R4LmNvbF07CiAgICAgICAgICAgIGNoaWxkcmVuID0gY2VsbC5jaGlsZHJlbiB8fCBbXTsKICAgICAgICAgICAgY2hpbGRJbmRleCA9IGN0eC5pbmRleDsKICAgICAgICAgICAgaXNGaXJzdCA9IGNoaWxkSW5kZXggPT09IDA7CiAgICAgICAgICAgIGlzTGFzdCA9IGNoaWxkSW5kZXggPT09IGNoaWxkcmVuLmxlbmd0aCAtIDE7CiAgICAgICAgICAgIHNob3dSZW9yZGVyID0gdHJ1ZTsKCiAgICAgICAgICAgIC8vIEFkaWNpb25hciBjYW1wbyBwYXJhIGVkaXRhciB2ZXJ0aWNhbEFsaWdubWVudCBkYSBjw6lsdWxhCiAgICAgICAgICAgIGh0bWwgKz0gYAogICAgICAgICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCIgc3R5bGU9Im1hcmdpbi10b3A6IDFyZW07IHBhZGRpbmctdG9wOiAxcmVtOyBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsiPgogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAwLjc1cmVtOyBkaXNwbGF5OiBibG9jazsgZm9udC13ZWlnaHQ6IDUwMDsiPkFsaW5oYW1lbnRvIFZlcnRpY2FsIGRhIEPDqWx1bGE8L2xhYmVsPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcC1jZWxsVmVydGljYWxBbGlnbm1lbnQiIHN0eWxlPSJ3aWR0aDogMTAwJTsgcGFkZGluZzogMC41cmVtOyBiYWNrZ3JvdW5kOiB2YXIoLS1iZy10ZXJ0aWFyeSk7IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOyBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsiPgogICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0b3AiICR7Y2VsbC52ZXJ0aWNhbEFsaWdubWVudCA9PT0gJ3RvcCcgPyAnc2VsZWN0ZWQnIDogJyd9PlRvcG88L29wdGlvbj4KICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibWlkZGxlIiAke2NlbGwudmVydGljYWxBbGlnbm1lbnQgPT09ICdtaWRkbGUnIHx8ICFjZWxsLnZlcnRpY2FsQWxpZ25tZW50ID8gJ3NlbGVjdGVkJyA6ICcnfT5NZWlvPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImJvdHRvbSIgJHtjZWxsLnZlcnRpY2FsQWxpZ25tZW50ID09PSAnYm90dG9tJyA/ICdzZWxlY3RlZCcgOiAnJ30+SW5mZXJpb3I8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0ibWFyZ2luLXRvcDogMC41cmVtOyI+QWxpbmhhbWVudG8gdmVydGljYWwgZG8gY29udGXDumRvIGRlbnRybyBkZXN0YSBjw6lsdWxhPC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBBZGljaW9uYXIgYm90w7VlcyBkZSByZW9yZGVuYcOnw6NvIHBhcmEgZWxlbWVudG9zIGRlbnRybyBkZSBjb250YWluZXJzCiAgICAgICAgaWYgKHNob3dSZW9yZGVyICYmIGNoaWxkcmVuLmxlbmd0aCA+IDEpIHsKICAgICAgICAgIGh0bWwgKz0gYAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiIHN0eWxlPSJtYXJnaW4tdG9wOiAxcmVtOyBwYWRkaW5nLXRvcDogMXJlbTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7Ij4KICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1ib3R0b206IDAuNzVyZW07IGRpc3BsYXk6IGJsb2NrOyBmb250LXdlaWdodDogNTAwOyI+UmVvcmRlbmFyIEVsZW1lbnRvPC9sYWJlbD4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMC41cmVtOyI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tbW92ZS1maXJzdCIgb25jbGljaz0ibW92ZUVsZW1lbnRJbkNvbnRhaW5lcignZmlyc3QnKSIgCiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJwYWRkaW5nOiAwLjVyZW07IGJhY2tncm91bmQ6ICR7aXNGaXJzdCA/ICd2YXIoLS1iZy10ZXJ0aWFyeSknIDogJyMyNTYzZWInfTsgY29sb3I6ICR7aXNGaXJzdCA/ICd2YXIoLS10ZXh0LXRlcnRpYXJ5KScgOiAnd2hpdGUnfTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgY3Vyc29yOiAke2lzRmlyc3QgPyAnbm90LWFsbG93ZWQnIDogJ3BvaW50ZXInfTsgZm9udC1zaXplOiAwLjg3NXJlbTsiCiAgICAgICAgICAgICAgICAgICAgICAgICR7aXNGaXJzdCA/ICdkaXNhYmxlZCcgOiAnJ30+CiAgICAgICAgICAgICAgICAgIOKPru+4jyBQcmltZWlybwogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tbW92ZS1wcmV2IiBvbmNsaWNrPSJtb3ZlRWxlbWVudEluQ29udGFpbmVyKCdwcmV2JykiIAogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0icGFkZGluZzogMC41cmVtOyBiYWNrZ3JvdW5kOiAke2lzRmlyc3QgPyAndmFyKC0tYmctdGVydGlhcnkpJyA6ICcjMjU2M2ViJ307IGNvbG9yOiAke2lzRmlyc3QgPyAndmFyKC0tdGV4dC10ZXJ0aWFyeSknIDogJ3doaXRlJ307IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07IGN1cnNvcjogJHtpc0ZpcnN0ID8gJ25vdC1hbGxvd2VkJyA6ICdwb2ludGVyJ307IGZvbnQtc2l6ZTogMC44NzVyZW07IgogICAgICAgICAgICAgICAgICAgICAgICAke2lzRmlyc3QgPyAnZGlzYWJsZWQnIDogJyd9PgogICAgICAgICAgICAgICAgICDirIXvuI8gQW50ZXJpb3IKICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuLW1vdmUtbmV4dCIgb25jbGljaz0ibW92ZUVsZW1lbnRJbkNvbnRhaW5lcignbmV4dCcpIiAKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9InBhZGRpbmc6IDAuNXJlbTsgYmFja2dyb3VuZDogJHtpc0xhc3QgPyAndmFyKC0tYmctdGVydGlhcnkpJyA6ICcjMjU2M2ViJ307IGNvbG9yOiAke2lzTGFzdCA/ICd2YXIoLS10ZXh0LXRlcnRpYXJ5KScgOiAnd2hpdGUnfTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgY3Vyc29yOiAke2lzTGFzdCA/ICdub3QtYWxsb3dlZCcgOiAncG9pbnRlcid9OyBmb250LXNpemU6IDAuODc1cmVtOyIKICAgICAgICAgICAgICAgICAgICAgICAgJHtpc0xhc3QgPyAnZGlzYWJsZWQnIDogJyd9PgogICAgICAgICAgICAgICAgICDinqHvuI8gUHLDs3hpbW8KICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuLW1vdmUtbGFzdCIgb25jbGljaz0ibW92ZUVsZW1lbnRJbkNvbnRhaW5lcignbGFzdCcpIiAKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9InBhZGRpbmc6IDAuNXJlbTsgYmFja2dyb3VuZDogJHtpc0xhc3QgPyAndmFyKC0tYmctdGVydGlhcnkpJyA6ICcjMjU2M2ViJ307IGNvbG9yOiAke2lzTGFzdCA/ICd2YXIoLS10ZXh0LXRlcnRpYXJ5KScgOiAnd2hpdGUnfTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgY3Vyc29yOiAke2lzTGFzdCA/ICdub3QtYWxsb3dlZCcgOiAncG9pbnRlcid9OyBmb250LXNpemU6IDAuODc1cmVtOyIKICAgICAgICAgICAgICAgICAgICAgICAgJHtpc0xhc3QgPyAnZGlzYWJsZWQnIDogJyd9PgogICAgICAgICAgICAgICAgICDij63vuI8gw5psdGltbwogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgYDsKICAgICAgICB9CgogICAgICAgIC8vIFNob3cgd2lkdGggYW5kIGhlaWdodCBmaWVsZHMgb25seSBmb3IgZWxlbWVudHMgaW4gZ3JvdXBzCiAgICAgICAgaWYgKHBhcmVudEdyb3VwSW5mbykgewogICAgICAgICAgY29uc3QgcGFyZW50R3JvdXAgPSBwYXJlbnRHcm91cEluZm8uZ3JvdXA7CiAgICAgICAgICBpZiAocGFyZW50R3JvdXAucHJvcGVydGllcy5vcmllbnRhdGlvbiA9PT0gJ3JvdycpIHsKICAgICAgICAgICAgLy8gU2hvdyB3aWR0aCBmaWVsZCBmb3IgZWxlbWVudHMgaW4gaG9yaXpvbnRhbCBncm91cHMKICAgICAgICAgICAgY29uc3QgY3VycmVudFdpZHRoID0gZWxlbWVudC53aWR0aCAhPT0gbnVsbCAmJiBlbGVtZW50LndpZHRoICE9PSB1bmRlZmluZWQgPyBlbGVtZW50LndpZHRoIDogKDEwMCAvIChwYXJlbnRHcm91cC5wcm9wZXJ0aWVzLmNoaWxkcmVuPy5sZW5ndGggfHwgMSkpOwogICAgICAgICAgICBodG1sICs9IGAKICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICAgICAgPGxhYmVsPkxhcmd1cmEgKCUpPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLXdpZHRoIiB2YWx1ZT0iJHtNYXRoLnJvdW5kKGN1cnJlbnRXaWR0aCl9IiBzdGVwPSIxIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSI+TGFyZ3VyYSBkbyBlbGVtZW50byBkZW50cm8gZG8gZ3J1cG8uIE8gZXNwYcOnbyByZXN0YW50ZSBzZXLDoSBkaXN0cmlidcOtZG8gZW50cmUgb3Mgb3V0cm9zIGVsZW1lbnRvcy48L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIFNlIG8gZWxlbWVudG8gw6kgY29sdW1ucywgYWRpY2lvbmFyIG9ww6fDtWVzIHBhcmEgcmVvcmRlbmFyIGUgZGVsZXRhciBjb2x1bmFzCiAgICAgIGlmIChlbGVtZW50LnR5cGUgPT09ICdjb2x1bW5zJykgewogICAgICAgIGNvbnN0IGNvbHMgPSBlbGVtZW50LnByb3BlcnRpZXMuY29sdW1ucyB8fCBbXTsKICAgICAgICBpZiAoY29scy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBodG1sICs9IGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIiBzdHlsZT0ibWFyZ2luLXRvcDogMXJlbTsgcGFkZGluZy10b3A6IDFyZW07IGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOyI+CiAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAwLjc1cmVtOyBkaXNwbGF5OiBibG9jazsgZm9udC13ZWlnaHQ6IDUwMDsiPlJlb3JkZW5hciBDb2x1bmFzPC9sYWJlbD4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAwLjVyZW07Ij5TZWxlY2lvbmUgdW1hIGNvbHVuYSBhYmFpeG8gcGFyYSBtb3bDqi1sYTwvZGl2PgogICAgICAgICAgYDsKICAgICAgICAgIGNvbHMuZm9yRWFjaCgoY29sLCBjb2xJbmRleCkgPT4gewogICAgICAgICAgICBjb25zdCBpc0ZpcnN0Q29sID0gY29sSW5kZXggPT09IDA7CiAgICAgICAgICAgIGNvbnN0IGlzTGFzdENvbCA9IGNvbEluZGV4ID09PSBjb2xzLmxlbmd0aCAtIDE7CiAgICAgICAgICAgIC8vY29uc3QgY2FuRGVsZXRlID0gY29scy5sZW5ndGggPiAxOyAvLyBTw7MgcG9kZSBkZWxldGFyIHNlIHRpdmVyIG1haXMgZGUgMSBjb2x1bmEKICAgICAgICAgICAgaHRtbCArPSBgCiAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMC41cmVtOyI+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IG1hcmdpbi1ib3R0b206IDAuMjVyZW07Ij4KICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTogMC44NzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7Ij5Db2x1bmEgJHtjb2xJbmRleCArIDF9PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAke2NvbHMubGVuZ3RoID4gMSA/IGAKICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDFmciAxZnI7IGdhcDogMC4yNXJlbTsiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibW92ZUNvbHVtbkluQ29sdW1ucygnJHtlbGVtZW50LmlkfScsICR7Y29sSW5kZXh9LCAnZmlyc3QnKSIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0icGFkZGluZzogMC4yNXJlbTsgYmFja2dyb3VuZDogJHtpc0ZpcnN0Q29sID8gJ3ZhcigtLWJnLXRlcnRpYXJ5KScgOiAnIzI1NjNlYid9OyBjb2xvcjogJHtpc0ZpcnN0Q29sID8gJ3ZhcigtLXRleHQtdGVydGlhcnkpJyA6ICd3aGl0ZSd9OyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDAuMjVyZW07IGN1cnNvcjogJHtpc0ZpcnN0Q29sID8gJ25vdC1hbGxvd2VkJyA6ICdwb2ludGVyJ307IGZvbnQtc2l6ZTogMC43NXJlbTsiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2lzRmlyc3RDb2wgPyAnZGlzYWJsZWQnIDogJyd9PgogICAgICAgICAgICAgICAgICAgICAg4oekCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJtb3ZlQ29sdW1uSW5Db2x1bW5zKCcke2VsZW1lbnQuaWR9JywgJHtjb2xJbmRleH0sICdwcmV2JykiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9InBhZGRpbmc6IDAuMjVyZW07IGJhY2tncm91bmQ6ICR7aXNGaXJzdENvbCA/ICd2YXIoLS1iZy10ZXJ0aWFyeSknIDogJyMyNTYzZWInfTsgY29sb3I6ICR7aXNGaXJzdENvbCA/ICd2YXIoLS10ZXh0LXRlcnRpYXJ5KScgOiAnd2hpdGUnfTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiAwLjI1cmVtOyBjdXJzb3I6ICR7aXNGaXJzdENvbCA/ICdub3QtYWxsb3dlZCcgOiAncG9pbnRlcid9OyBmb250LXNpemU6IDAuNzVyZW07IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtpc0ZpcnN0Q29sID8gJ2Rpc2FibGVkJyA6ICcnfT4KICAgICAgICAgICAgICAgICAgICAgIOKGkAogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibW92ZUNvbHVtbkluQ29sdW1ucygnJHtlbGVtZW50LmlkfScsICR7Y29sSW5kZXh9LCAnbmV4dCcpIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJwYWRkaW5nOiAwLjI1cmVtOyBiYWNrZ3JvdW5kOiAke2lzTGFzdENvbCA/ICd2YXIoLS1iZy10ZXJ0aWFyeSknIDogJyMyNTYzZWInfTsgY29sb3I6ICR7aXNMYXN0Q29sID8gJ3ZhcigtLXRleHQtdGVydGlhcnkpJyA6ICd3aGl0ZSd9OyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDAuMjVyZW07IGN1cnNvcjogJHtpc0xhc3RDb2wgPyAnbm90LWFsbG93ZWQnIDogJ3BvaW50ZXInfTsgZm9udC1zaXplOiAwLjc1cmVtOyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7aXNMYXN0Q29sID8gJ2Rpc2FibGVkJyA6ICcnfT4KICAgICAgICAgICAgICAgICAgICAgIOKGkgogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibW92ZUNvbHVtbkluQ29sdW1ucygnJHtlbGVtZW50LmlkfScsICR7Y29sSW5kZXh9LCAnbGFzdCcpIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJwYWRkaW5nOiAwLjI1cmVtOyBiYWNrZ3JvdW5kOiAke2lzTGFzdENvbCA/ICd2YXIoLS1iZy10ZXJ0aWFyeSknIDogJyMyNTYzZWInfTsgY29sb3I6ICR7aXNMYXN0Q29sID8gJ3ZhcigtLXRleHQtdGVydGlhcnkpJyA6ICd3aGl0ZSd9OyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDAuMjVyZW07IGN1cnNvcjogJHtpc0xhc3RDb2wgPyAnbm90LWFsbG93ZWQnIDogJ3BvaW50ZXInfTsgZm9udC1zaXplOiAwLjc1cmVtOyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7aXNMYXN0Q29sID8gJ2Rpc2FibGVkJyA6ICcnfT4KICAgICAgICAgICAgICAgICAgICAgIOKHpQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIGAgOiAnJ30KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICAgIH0pOwogICAgICAgICAgaHRtbCArPSBgPC9kaXY+YDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIFNlIG8gZWxlbWVudG8gw6kgdGFibGUsIGFkaWNpb25hciBvcMOnw7VlcyBwYXJhIHJlb3JkZW5hciBlIGRlbGV0YXIgY29sdW5hcyBkYSB0YWJlbGEKICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gJ3RhYmxlJykgewogICAgICAgIGNvbnN0IGJvZHkgPSBlbGVtZW50LnByb3BlcnRpZXMuYm9keSB8fCBbXTsKICAgICAgICBpZiAoYm9keS5sZW5ndGggPiAwICYmIGJvZHlbMF0ubGVuZ3RoID4gMCkgewogICAgICAgICAgY29uc3QgbnVtQ29scyA9IGJvZHlbMF0ubGVuZ3RoOwogICAgICAgICAgaHRtbCArPSBgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCIgc3R5bGU9Im1hcmdpbi10b3A6IDFyZW07IHBhZGRpbmctdG9wOiAxcmVtOyBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsiPgogICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMC43NXJlbTsgZGlzcGxheTogYmxvY2s7IGZvbnQtd2VpZ2h0OiA1MDA7Ij5SZW9yZGVuYXIgQ29sdW5hcyBkYSBUYWJlbGE8L2xhYmVsPgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9Im1hcmdpbi1ib3R0b206IDAuNXJlbTsiPlNlbGVjaW9uZSB1bWEgY29sdW5hIGFiYWl4byBwYXJhIG1vdsOqLWxhPC9kaXY+CiAgICAgICAgICBgOwogICAgICAgICAgZm9yIChsZXQgY29sSW5kZXggPSAwOyBjb2xJbmRleCA8IG51bUNvbHM7IGNvbEluZGV4KyspIHsKICAgICAgICAgICAgY29uc3QgaXNGaXJzdENvbCA9IGNvbEluZGV4ID09PSAwOwogICAgICAgICAgICBjb25zdCBpc0xhc3RDb2wgPSBjb2xJbmRleCA9PT0gbnVtQ29scyAtIDE7CiAgICAgICAgICAgIGNvbnN0IGNhbkRlbGV0ZSA9IG51bUNvbHMgPiAxOyAvLyBTw7MgcG9kZSBkZWxldGFyIHNlIHRpdmVyIG1haXMgZGUgMSBjb2x1bmEKICAgICAgICAgICAgaHRtbCArPSBgCiAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMC41cmVtOyI+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IG1hcmdpbi1ib3R0b206IDAuMjVyZW07Ij4KICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTogMC44NzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7Ij5Db2x1bmEgJHtjb2xJbmRleCArIDF9PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAke251bUNvbHMgPiAxID8gYAogICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnIgMWZyIDFmcjsgZ2FwOiAwLjI1cmVtOyI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJtb3ZlQ29sdW1uSW5UYWJsZSgnJHtlbGVtZW50LmlkfScsICR7Y29sSW5kZXh9LCAnZmlyc3QnKSIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0icGFkZGluZzogMC4yNXJlbTsgYmFja2dyb3VuZDogJHtpc0ZpcnN0Q29sID8gJ3ZhcigtLWJnLXRlcnRpYXJ5KScgOiAnIzI1NjNlYid9OyBjb2xvcjogJHtpc0ZpcnN0Q29sID8gJ3ZhcigtLXRleHQtdGVydGlhcnkpJyA6ICd3aGl0ZSd9OyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDAuMjVyZW07IGN1cnNvcjogJHtpc0ZpcnN0Q29sID8gJ25vdC1hbGxvd2VkJyA6ICdwb2ludGVyJ307IGZvbnQtc2l6ZTogMC43NXJlbTsiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2lzRmlyc3RDb2wgPyAnZGlzYWJsZWQnIDogJyd9PgogICAgICAgICAgICAgICAgICAgICAg4oekCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJtb3ZlQ29sdW1uSW5UYWJsZSgnJHtlbGVtZW50LmlkfScsICR7Y29sSW5kZXh9LCAncHJldicpIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJwYWRkaW5nOiAwLjI1cmVtOyBiYWNrZ3JvdW5kOiAke2lzRmlyc3RDb2wgPyAndmFyKC0tYmctdGVydGlhcnkpJyA6ICcjMjU2M2ViJ307IGNvbG9yOiAke2lzRmlyc3RDb2wgPyAndmFyKC0tdGV4dC10ZXJ0aWFyeSknIDogJ3doaXRlJ307IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsgY3Vyc29yOiAke2lzRmlyc3RDb2wgPyAnbm90LWFsbG93ZWQnIDogJ3BvaW50ZXInfTsgZm9udC1zaXplOiAwLjc1cmVtOyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7aXNGaXJzdENvbCA/ICdkaXNhYmxlZCcgOiAnJ30+CiAgICAgICAgICAgICAgICAgICAgICDihpAKICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9Im1vdmVDb2x1bW5JblRhYmxlKCcke2VsZW1lbnQuaWR9JywgJHtjb2xJbmRleH0sICduZXh0JykiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9InBhZGRpbmc6IDAuMjVyZW07IGJhY2tncm91bmQ6ICR7aXNMYXN0Q29sID8gJ3ZhcigtLWJnLXRlcnRpYXJ5KScgOiAnIzI1NjNlYid9OyBjb2xvcjogJHtpc0xhc3RDb2wgPyAndmFyKC0tdGV4dC10ZXJ0aWFyeSknIDogJ3doaXRlJ307IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsgY3Vyc29yOiAke2lzTGFzdENvbCA/ICdub3QtYWxsb3dlZCcgOiAncG9pbnRlcid9OyBmb250LXNpemU6IDAuNzVyZW07IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtpc0xhc3RDb2wgPyAnZGlzYWJsZWQnIDogJyd9PgogICAgICAgICAgICAgICAgICAgICAg4oaSCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJtb3ZlQ29sdW1uSW5UYWJsZSgnJHtlbGVtZW50LmlkfScsICR7Y29sSW5kZXh9LCAnbGFzdCcpIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJwYWRkaW5nOiAwLjI1cmVtOyBiYWNrZ3JvdW5kOiAke2lzTGFzdENvbCA/ICd2YXIoLS1iZy10ZXJ0aWFyeSknIDogJyMyNTYzZWInfTsgY29sb3I6ICR7aXNMYXN0Q29sID8gJ3ZhcigtLXRleHQtdGVydGlhcnkpJyA6ICd3aGl0ZSd9OyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDAuMjVyZW07IGN1cnNvcjogJHtpc0xhc3RDb2wgPyAnbm90LWFsbG93ZWQnIDogJ3BvaW50ZXInfTsgZm9udC1zaXplOiAwLjc1cmVtOyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7aXNMYXN0Q29sID8gJ2Rpc2FibGVkJyA6ICcnfT4KICAgICAgICAgICAgICAgICAgICAgIOKHpQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIGAgOiAnJ30KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICAgIH0KICAgICAgICAgIGh0bWwgKz0gYDwvZGl2PmA7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBSZW5kZXIgZmllbGRzIGJhc2VkIG9uIGVsZW1lbnQgdHlwZQogICAgICBzd2l0Y2ggKGVsZW1lbnQudHlwZSkgewogICAgICAgIGNhc2UgJ3RleHQnOgogICAgICAgICAgaHRtbCArPSByZW5kZXJJbnNwZWN0b3JUZXh0KGVsZW1lbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnaGVhZGVyJzoKICAgICAgICAgIGh0bWwgKz0gcmVuZGVySW5zcGVjdG9ySGVhZGVyKGVsZW1lbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnaW1hZ2UnOgogICAgICAgICAgaHRtbCArPSByZW5kZXJJbnNwZWN0b3JJbWFnZShlbGVtZW50KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ3RhYmxlJzoKICAgICAgICAgIGh0bWwgKz0gcmVuZGVySW5zcGVjdG9yVGFibGUoZWxlbWVudCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdjb2x1bW5zJzoKICAgICAgICAgIGh0bWwgKz0gcmVuZGVySW5zcGVjdG9yQ29sdW1ucyhlbGVtZW50KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2xpc3QnOgogICAgICAgICAgaHRtbCArPSByZW5kZXJJbnNwZWN0b3JMaXN0KGVsZW1lbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnbWFyZ2luJzoKICAgICAgICAgIGh0bWwgKz0gcmVuZGVySW5zcGVjdG9yTWFyZ2luKGVsZW1lbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAncGFnZUJyZWFrJzoKICAgICAgICAgIGh0bWwgKz0gcmVuZGVySW5zcGVjdG9yUGFnZUJyZWFrKGVsZW1lbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAncXInOgogICAgICAgICAgaHRtbCArPSByZW5kZXJJbnNwZWN0b3JRUihlbGVtZW50KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ3N2Zyc6CiAgICAgICAgICBodG1sICs9IHJlbmRlckluc3BlY3RvclNWRyhlbGVtZW50KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2JhcmNvZGUnOgogICAgICAgICAgaHRtbCArPSByZW5kZXJJbnNwZWN0b3JCYXJjb2RlKGVsZW1lbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnc3RhbXAnOgogICAgICAgICAgaHRtbCArPSByZW5kZXJJbnNwZWN0b3JTdGFtcChlbGVtZW50KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2NoZWNrYm94JzoKICAgICAgICAgIGh0bWwgKz0gcmVuZGVySW5zcGVjdG9yQ2hlY2tib3goZWxlbWVudCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdyYWRpbyc6CiAgICAgICAgICBodG1sICs9IHJlbmRlckluc3BlY3RvclJhZGlvKGVsZW1lbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnZmlsbExpbmUnOgogICAgICAgICAgaHRtbCArPSByZW5kZXJJbnNwZWN0b3JGaWxsTGluZShlbGVtZW50KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2NoYXJ0JzoKICAgICAgICAgIGh0bWwgKz0gcmVuZGVySW5zcGVjdG9yQ2hhcnQoZWxlbWVudCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdncm91cCc6CiAgICAgICAgICBodG1sICs9IHJlbmRlckluc3BlY3Rvckdyb3VwKGVsZW1lbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIC8vIEFkaWNpb25hciBib3TDtWVzIGRlIGHDp8OjbyBubyBmaW5hbCBkbyBpbnNwZWN0b3IKICAgICAgaHRtbCArPSBgCiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIiBzdHlsZT0ibWFyZ2luLXRvcDogMnJlbTsgcGFkZGluZy10b3A6IDEuNXJlbTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7Ij4KICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsgZ2FwOiAwLjVyZW07IG1hcmdpbi1ib3R0b206IDAuNzVyZW07Ij4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWR1cGxpY2F0ZSIgb25jbGljaz0iZHVwbGljYXRlU2VsZWN0ZWRFbGVtZW50KCkiIHN0eWxlPSJwYWRkaW5nOiAwLjc1cmVtIDFyZW07IGJhY2tncm91bmQ6ICMyNTYzZWI7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiAwLjVyZW07IGZvbnQtc2l6ZTogMC44NzVyZW07IGZvbnQtd2VpZ2h0OiA1MDA7IGN1cnNvcjogcG9pbnRlcjsgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzOyI+CiAgICAgICAgICAgICAg8J+TiyBEdXBsaWNhcgogICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWNvcHkiIG9uY2xpY2s9ImNvcHlFbGVtZW50UHJvcGVydGllcygpIiBzdHlsZT0icGFkZGluZzogMC43NXJlbSAxcmVtOyBiYWNrZ3JvdW5kOiAjMTBiOTgxOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogMC41cmVtOyBmb250LXNpemU6IDAuODc1cmVtOyBmb250LXdlaWdodDogNTAwOyBjdXJzb3I6IHBvaW50ZXI7IHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4yczsiPgogICAgICAgICAgICAgIPCfk4QgQ29waWFyCiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsgZ2FwOiAwLjVyZW07Ij4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLXBhc3RlIiBvbmNsaWNrPSJwYXN0ZUVsZW1lbnRQcm9wZXJ0aWVzKCkiIHN0eWxlPSJwYWRkaW5nOiAwLjc1cmVtIDFyZW07IGJhY2tncm91bmQ6ICR7Y29waWVkRWxlbWVudFByb3BlcnRpZXMgPyAnI2Y1OWUwYicgOiAnIzZiNzI4MCd9OyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogMC41cmVtOyBmb250LXNpemU6IDAuODc1cmVtOyBmb250LXdlaWdodDogNTAwOyBjdXJzb3I6ICR7Y29waWVkRWxlbWVudFByb3BlcnRpZXMgPyAncG9pbnRlcicgOiAnbm90LWFsbG93ZWQnfTsgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzOyIgJHshY29waWVkRWxlbWVudFByb3BlcnRpZXMgPyAnZGlzYWJsZWQnIDogJyd9PgogICAgICAgICAgICAgIPCfk6UgQ29sYXIgUHJvcHJpZWRhZGVzCiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tcmVtb3ZlLWxhcmdlIiBvbmNsaWNrPSJyZW1vdmVTZWxlY3RlZEVsZW1lbnQoKSIgc3R5bGU9IndpZHRoOiAxMDAlOyBwYWRkaW5nOiAwLjc1cmVtIDFyZW07IGJhY2tncm91bmQ6ICNlZjQ0NDQ7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiAwLjVyZW07IGZvbnQtc2l6ZTogMXJlbTsgZm9udC13ZWlnaHQ6IDUwMDsgY3Vyc29yOiBwb2ludGVyOyB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMnM7Ij4KICAgICAgICAgICAgICDwn5eR77iPIFJlbW92ZXIgRWxlbWVudG8KICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgYDsKCiAgICAgIGluc3BlY3Rvci5pbm5lckhUTUwgPSBodG1sOwoKICAgICAgLy8gRm9yw6dhciB2aXNpYmlsaWRhZGUgZG8gaW5zcGVjdG9yIGFww7NzIHJlbmRlcml6YXIKICAgICAgaWYgKGluc3BlY3RvcikgewogICAgICAgIGluc3BlY3Rvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICBpbnNwZWN0b3Iuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJzsKICAgICAgICBpbnNwZWN0b3Iuc3R5bGUub3BhY2l0eSA9ICcxJzsKICAgICAgICBpbnNwZWN0b3Iuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nOwogICAgICB9CgogICAgICAvLyBBdHRhY2ggZXZlbnQgbGlzdGVuZXJzIChkZXZlIHNlciBjaGFtYWRvIGFww7NzIGF0dWFsaXphciBvIEhUTUwpCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGF0dGFjaEluc3BlY3Rvckxpc3RlbmVycyhlbGVtZW50KTsKICAgICAgfSwgMCk7CiAgICB9CgogICAgLy8gSW5zcGVjdG9yIHJlbmRlciBmdW5jdGlvbnMKICAgIGZ1bmN0aW9uIHJlbmRlckluc3BlY3RvclRleHQoZWxlbWVudCkgewogICAgICBjb25zdCBwID0gZWxlbWVudC5wcm9wZXJ0aWVzIHx8IHt9OwoKICAgICAgLy8gVmVyaWZpY2FyIHNlIG8gZWxlbWVudG8gZXN0w6EgZGVudHJvIGRlIGhlYWRlciBvdSBmb290ZXIKICAgICAgY29uc3QgaXNJbkhlYWRlciA9IGlzRWxlbWVudEluSGVhZGVyKGVsZW1lbnQuaWQpOwogICAgICBjb25zdCBpc0luRm9vdGVyID0gaXNFbGVtZW50SW5Gb290ZXIoZWxlbWVudC5pZCk7CiAgICAgIGNvbnN0IGlzSW5IZWFkZXJGb290ZXIgPSBpc0luSGVhZGVyIHx8IGlzSW5Gb290ZXI7CgogICAgICByZXR1cm4gYAogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWw+SUQgZG8gRWxlbWVudG8gKHBhcmEgbGlua1RvRGVzdGluYXRpb24pICR7Y3JlYXRlVG9vbHRpcCgnRGVmaW5lIHVtIElEIMO6bmljbyBwYXJhIGVzdGUgZWxlbWVudG8uIE91dHJvcyBlbGVtZW50b3MgcG9kZW0gdXNhciBsaW5rVG9EZXN0aW5hdGlvbiBhcG9udGFuZG8gcGFyYSBlc3RlIElELicsICdFeGVtcGxvOiBTZSBkZWZpbmlyIGlkPSJzZWNhbzEiLCBvdXRyb3MgZWxlbWVudG9zIHBvZGVtIHVzYXIgbGlua1RvRGVzdGluYXRpb246ICJzZWNhbzEiIHBhcmEgY3JpYXIgdW0gbGluayBpbnRlcm5vLicpfTwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Imluc3AtZWxlbWVudElkIiB2YWx1ZT0iJHtlc2NhcGVIdG1sKHAuaWQgfHwgJycpfSIgcGxhY2Vob2xkZXI9IkV4OiBzZWNhbzEsIGRlc3Rpbm8xIChkZWl4ZSB2YXppbyBzZSBuw6NvIGZvciBkZXN0aW5vKSI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiPklEIMO6bmljbyBwYXJhIGVzdGUgZWxlbWVudG8uIFVzZSBwYXJhIGNyaWFyIGRlc3Rpbm9zIGRlIGxpbmtzIGludGVybm9zLjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICAgICAgPGxhYmVsPlRleHRvICR7Y3JlYXRlVG9vbHRpcCgnQ29udGXDumRvIGRlIHRleHRvIGRvIGVsZW1lbnRvLiBQb2RlIGNvbnRlciBtw7psdGlwbGFzIGxpbmhhcy4nLCAnVXNlIHt7cGFnZU51bWJlcn19IGUge3t0b3RhbFBhZ2VzfX0gZW0gaGVhZGVycy9mb290ZXJzIHBhcmEgbnVtZXJhw6fDo28gZGUgcMOhZ2luYXMuJyl9PC9sYWJlbD4KICAgICAgICAgIDx0ZXh0YXJlYSBpZD0iaW5zcC10ZXh0Ij4ke2VzY2FwZUh0bWwocC50ZXh0IHx8ICcnKX08L3RleHRhcmVhPgogICAgICAgICAgJHtpc0luSGVhZGVyRm9vdGVyID8gYAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjVyZW07IHBhZGRpbmc6IDAuNzVyZW07IGJhY2tncm91bmQ6ICNkYmVhZmU7IGJvcmRlci1sZWZ0OiAzcHggc29saWQgIzI1NjNlYjsgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsgY29sb3I6ICMxZTQwYWY7Ij4KICAgICAgICAgICAgICA8c3Ryb25nPvCfkqEgTnVtZXJhw6fDo28gZGUgUMOhZ2luYTo8L3N0cm9uZz4gVXNlIDxjb2RlPnt7cGFnZU51bWJlcn19PC9jb2RlPiBwYXJhIG7Dum1lcm8gZGEgcMOhZ2luYSBhdHVhbCBlIDxjb2RlPnt7dG90YWxQYWdlc319PC9jb2RlPiBwYXJhIHRvdGFsIGRlIHDDoWdpbmFzLiBFeGVtcGxvOiAiUMOhZ2luYSB7e3BhZ2VOdW1iZXJ9fSBkZSB7e3RvdGFsUGFnZXN9fSIKICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICBgIDogJyd9CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWw+VGlwbyBkZSBMaW5rICR7Y3JlYXRlVG9vbHRpcCgnRXNjb2xoYSBvIHRpcG8gZGUgbGluazogVVJMIGV4dGVybmEsIGxpbmsgcGFyYSBww6FnaW5hIGRvIFBERiBvdSBsaW5rIHBhcmEgZGVzdGluby/Dom5jb3JhLicsICdMaW5rVG9QYWdlOiBuw7ptZXJvIGRhIHDDoWdpbmEgKGV4OiAxLCAyLCAzKS4gTGlua1RvRGVzdGluYXRpb246IG5vbWUgZGEgw6JuY29yYSBkZWZpbmlkYSBubyBkb2N1bWVudG8uJyl9PC9sYWJlbD4KICAgICAgICAgIDxzZWxlY3QgaWQ9Imluc3AtbGlua1R5cGUiPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJub25lIiAkeyghcC5fbGlua1R5cGUgJiYgIXAubGluayAmJiAhcC5saW5rVG9QYWdlICYmICFwLmxpbmtUb0Rlc3RpbmF0aW9uKSB8fCBwLl9saW5rVHlwZSA9PT0gJ25vbmUnID8gJ3NlbGVjdGVkJyA6ICcnfT5OZW5odW08L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0idXJsIiAkeyhwLl9saW5rVHlwZSA9PT0gJ3VybCcgfHwgKHAubGluayAmJiAhcC5saW5rVG9QYWdlICYmICFwLmxpbmtUb0Rlc3RpbmF0aW9uKSkgPyAnc2VsZWN0ZWQnIDogJyd9PlVSTCBFeHRlcm5hPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InBhZ2UiICR7cC5fbGlua1R5cGUgPT09ICdwYWdlJyB8fCBwLmxpbmtUb1BhZ2UgPyAnc2VsZWN0ZWQnIDogJyd9PkxpbmsgcGFyYSBQw6FnaW5hPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImRlc3RpbmF0aW9uIiAke3AuX2xpbmtUeXBlID09PSAnZGVzdGluYXRpb24nIHx8IHAubGlua1RvRGVzdGluYXRpb24gPyAnc2VsZWN0ZWQnIDogJyd9PkxpbmsgcGFyYSBEZXN0aW5vPC9vcHRpb24+CiAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJpbnNwLWxpbmtVcmxPcHRpb25zIiBzdHlsZT0iJHsocC5fbGlua1R5cGUgPT09ICd1cmwnIHx8IChwLmxpbmsgJiYgIXAubGlua1RvUGFnZSAmJiAhcC5saW5rVG9EZXN0aW5hdGlvbikpID8gJycgOiAnZGlzcGxheTogbm9uZTsnfSI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICA8bGFiZWw+TGluayAoVVJMKTwvbGFiZWw+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5zcC1saW5rIiB2YWx1ZT0iJHtlc2NhcGVIdG1sKHAubGluayB8fCAnJyl9IiBwbGFjZWhvbGRlcj0iaHR0cHM6Ly9leGVtcGxvLmNvbSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSI+VVJMIGV4dGVybmEgcGFyYSBvIGxpbms8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9Imluc3AtbGlua1BhZ2VPcHRpb25zIiBzdHlsZT0iJHsocC5fbGlua1R5cGUgPT09ICdwYWdlJyB8fCBwLmxpbmtUb1BhZ2UpID8gJycgOiAnZGlzcGxheTogbm9uZTsnfSI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICA8bGFiZWw+TsO6bWVybyBkYSBQw6FnaW5hPC9sYWJlbD4KICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtbGlua1RvUGFnZSIgdmFsdWU9IiR7cC5saW5rVG9QYWdlIHx8IDF9IiBtaW49IjEiIHBsYWNlaG9sZGVyPSIxIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIj5Ow7ptZXJvIGRhIHDDoWdpbmEgcGFyYSBvbmRlIG8gbGluayBhcG9udGEgKGNvbWXDp2EgZW0gMSk8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9Imluc3AtbGlua0Rlc3RpbmF0aW9uT3B0aW9ucyIgc3R5bGU9IiR7KHAuX2xpbmtUeXBlID09PSAnZGVzdGluYXRpb24nIHx8IHAubGlua1RvRGVzdGluYXRpb24pID8gJycgOiAnZGlzcGxheTogbm9uZTsnfSI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICA8bGFiZWw+Tm9tZSBkbyBEZXN0aW5vIChJRCBkbyBlbGVtZW50byBkZXN0aW5vKTwvbGFiZWw+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5zcC1saW5rVG9EZXN0aW5hdGlvbiIgdmFsdWU9IiR7ZXNjYXBlSHRtbChwLmxpbmtUb0Rlc3RpbmF0aW9uIHx8ICcnKX0iIHBsYWNlaG9sZGVyPSJub21lLWRvLWRlc3Rpbm8iPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjVyZW07IHBhZGRpbmc6IDAuNzVyZW07IGJhY2tncm91bmQ6ICNmZWYzYzc7IGJvcmRlci1sZWZ0OiAzcHggc29saWQgI2Y1OWUwYjsgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsgY29sb3I6ICM5MjQwMGU7Ij4KICAgICAgICAgICAgICA8c3Ryb25nPuKaoO+4jyBJbXBvcnRhbnRlOjwvc3Ryb25nPiBPIGVsZW1lbnRvIGRlIGRlc3Rpbm8gcHJlY2lzYSB0ZXIgdW0gPHN0cm9uZz5JRDwvc3Ryb25nPiBkZWZpbmlkbyBpZ3VhbCBhIGVzdGUgdmFsb3IuIEV4ZW1wbG86IFNlIHVzYXIgInNlY2FvMSIgYXF1aSwgbyBlbGVtZW50byBkZXN0aW5vIGRldmUgdGVyIElEPSJzZWNhbzEiIG5vIGNhbXBvICJJRCBkbyBFbGVtZW50byIuCiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPlRhbWFuaG8gZGEgRm9udGU8L2xhYmVsPgogICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWZvbnRTaXplIiB2YWx1ZT0iJHtwLmZvbnRTaXplIHx8IDE0fSIgbWluPSI4IiBtYXg9IjcyIiBzdGVwPSIxIj4KICAgICAgICAgICAgICA8ZGl2IGlkPSJpbnNwLWZvbnRTaXplRXJyb3IiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBtYXJnaW4tdG9wOiAwLjI1cmVtOyBwYWRkaW5nOiAwLjI1cmVtOyBiYWNrZ3JvdW5kOiAjZmVlMmUyOyBib3JkZXItbGVmdDogM3B4IHNvbGlkICNlZjQ0NDQ7IGJvcmRlci1yYWRpdXM6IDAuMjVyZW07IGNvbG9yOiAjOTkxYjFiOyBmb250LXNpemU6IDAuNzVyZW07Ij48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkZvbnRlPC9sYWJlbD4KICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJpbnNwLWZvbnQiPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUm9ib3RvIiAke3AuZm9udCA9PT0gJ1JvYm90bycgfHwgIXAuZm9udCA/ICdzZWxlY3RlZCcgOiAnJ30+Um9ib3RvPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDb3VyaWVyIiAke3AuZm9udCA9PT0gJ0NvdXJpZXInID8gJ3NlbGVjdGVkJyA6ICcnfT5Db3VyaWVyPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJIZWx2ZXRpY2EiICR7cC5mb250ID09PSAnSGVsdmV0aWNhJyA/ICdzZWxlY3RlZCcgOiAnJ30+SGVsdmV0aWNhPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJUaW1lcyIgJHtwLmZvbnQgPT09ICdUaW1lcycgPyAnc2VsZWN0ZWQnIDogJyd9PlRpbWVzPC9vcHRpb24+CiAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkZvbnQgRmVhdHVyZXMgKGZvbnRGZWF0dXJlcyk8L2xhYmVsPgogICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJpbnNwLWZvbnRGZWF0dXJlcyIgdmFsdWU9IiR7cC5mb250RmVhdHVyZXMgPyBwLmZvbnRGZWF0dXJlcy5qb2luKCcsICcpIDogJyd9IiBwbGFjZWhvbGRlcj0iRXg6IGtlcm4sIGxpZ2EsIHNtY3AgKHNlcGFyYWRvcyBwb3IgdsOtcmd1bGEpIj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9Im1hcmdpbi10b3A6IDAuMjVyZW07IGZvbnQtc2l6ZTogMC43NXJlbTsgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOyI+RmVhdHVyZXMgdGlwb2dyw6FmaWNhcyBhdmFuw6dhZGFzIChkZXBlbmRlbSBkYSBmb250ZSBUVEYpLiBTZXBhcmUgcG9yIHbDrXJndWxhLjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5Db3IgZG8gVGV4dG88L2xhYmVsPgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogMC41cmVtOyBhbGlnbi1pdGVtczogY2VudGVyOyI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY29sb3IiIGlkPSJpbnNwLWNvbG9yIiB2YWx1ZT0iJHtwLmNvbG9yIHx8ICcjMDAwMDAwJ30iIHN0eWxlPSJ3aWR0aDogNTBweDsgaGVpZ2h0OiAzMnB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5zcC1jb2xvclRleHQiIHZhbHVlPSIke3AuY29sb3IgfHwgJyMwMDAwMDAnfSIgcGxhY2Vob2xkZXI9IiMwMDAwMDAiIHN0eWxlPSJmbGV4OiAxOyBmb250LXNpemU6IDAuODc1cmVtOyI+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5Db3IgZGUgRnVuZG88L2xhYmVsPgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogMC41cmVtOyBhbGlnbi1pdGVtczogY2VudGVyOyI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY29sb3IiIGlkPSJpbnNwLWJhY2tncm91bmQiIHZhbHVlPSIke3AuYmFja2dyb3VuZCB8fCAnI2ZmZmZmZid9IiBzdHlsZT0id2lkdGg6IDUwcHg7IGhlaWdodDogMzJweDsgY3Vyc29yOiBwb2ludGVyOyI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Imluc3AtYmFja2dyb3VuZFRleHQiIHZhbHVlPSIke3AuYmFja2dyb3VuZCB8fCAnJ30iIHBsYWNlaG9sZGVyPSJEZWl4ZSB2YXppbyBwYXJhIHRyYW5zcGFyZW50ZSIgc3R5bGU9ImZsZXg6IDE7IGZvbnQtc2l6ZTogMC44NzVyZW07Ij4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+QWxpbmhhbWVudG88L2xhYmVsPgogICAgICAgICAgICAgIDxzZWxlY3QgaWQ9Imluc3AtYWxpZ25tZW50Ij4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImxlZnQiICR7cC5hbGlnbm1lbnQgPT09ICdsZWZ0JyA/ICdzZWxlY3RlZCcgOiAnJ30+RXNxdWVyZGE8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImNlbnRlciIgJHtwLmFsaWdubWVudCA9PT0gJ2NlbnRlcicgPyAnc2VsZWN0ZWQnIDogJyd9PkNlbnRybzwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0icmlnaHQiICR7cC5hbGlnbm1lbnQgPT09ICdyaWdodCcgPyAnc2VsZWN0ZWQnIDogJyd9PkRpcmVpdGE8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Imp1c3RpZnkiICR7cC5hbGlnbm1lbnQgPT09ICdqdXN0aWZ5JyA/ICdzZWxlY3RlZCcgOiAnJ30+SnVzdGlmaWNhZG88L29wdGlvbj4KICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkRlY29yYcOnw6NvPC9sYWJlbD4KICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJpbnNwLWRlY29yYXRpb24iPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIiAkeyFwLmRlY29yYXRpb24gPyAnc2VsZWN0ZWQnIDogJyd9Pk5lbmh1bWE8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InVuZGVybGluZSIgJHtwLmRlY29yYXRpb24gPT09ICd1bmRlcmxpbmUnID8gJ3NlbGVjdGVkJyA6ICcnfT5TdWJsaW5oYWRvPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsaW5lVGhyb3VnaCIgJHtwLmRlY29yYXRpb24gPT09ICdsaW5lVGhyb3VnaCcgPyAnc2VsZWN0ZWQnIDogJyd9PlJpc2NhZG88L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Im92ZXJsaW5lIiAke3AuZGVjb3JhdGlvbiA9PT0gJ292ZXJsaW5lJyA/ICdzZWxlY3RlZCcgOiAnJ30+U29icmVsaW5oYTwvb3B0aW9uPgogICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAwLjVyZW07IGZvbnQtd2VpZ2h0OiA1MDA7Ij4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9Imluc3AtYm9sZCIgJHtwLmJvbGQgPyAnY2hlY2tlZCcgOiAnJ30gc3R5bGU9IndpZHRoOiAxOHB4OyBoZWlnaHQ6IDE4cHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgPHNwYW4+TmVncml0bzwvc3Bhbj4KICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMC41cmVtOyBmb250LXdlaWdodDogNTAwOyI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJpbnNwLWl0YWxpY3MiICR7cC5pdGFsaWNzID8gJ2NoZWNrZWQnIDogJyd9IHN0eWxlPSJ3aWR0aDogMThweDsgaGVpZ2h0OiAxOHB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgIDxzcGFuPkl0w6FsaWNvPC9zcGFuPgogICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkFsdHVyYSBkYSBMaW5oYSAobGluZUhlaWdodCk8L2xhYmVsPgogICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWxpbmVIZWlnaHQiIHZhbHVlPSIke3AubGluZUhlaWdodCB8fCAnJ30iIHBsYWNlaG9sZGVyPSJBdXRvIiBtaW49IjAiIG1heD0iMTAiIHN0ZXA9IjAuMSI+CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0ibWFyZ2luLXRvcDogMC4yNXJlbTsgZm9udC1zaXplOiAwLjc1cmVtOyBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7Ij5EZWl4ZSB2YXppbyBwYXJhIGF1dG9tw6F0aWNvPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5Fc3Bhw6dhbWVudG8gZW50cmUgQ2FyYWN0ZXJlczwvbGFiZWw+CiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtY2hhcmFjdGVyU3BhY2luZyIgdmFsdWU9IiR7cC5jaGFyYWN0ZXJTcGFjaW5nIHx8ICcnfSIgcGxhY2Vob2xkZXI9IjAiIG1pbj0iMCIgbWF4PSIxMCIgc3RlcD0iMC4xIj4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjI1cmVtOyBmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsiPkVtIHVuaWRhZGVzICgwID0gbm9ybWFsKTwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCIgaWQ9ImRlY29yYXRpb25PcHRpb25zIiBzdHlsZT0iJHshcC5kZWNvcmF0aW9uID8gJ2Rpc3BsYXk6IG5vbmU7JyA6ICcnfSI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5Fc3RpbG8gZGEgRGVjb3Jhw6fDo288L2xhYmVsPgogICAgICAgICAgICAgIDxzZWxlY3QgaWQ9Imluc3AtZGVjb3JhdGlvblN0eWxlIj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InNvbGlkIiAke3AuZGVjb3JhdGlvblN0eWxlID09PSAnc29saWQnIHx8ICFwLmRlY29yYXRpb25TdHlsZSA/ICdzZWxlY3RlZCcgOiAnJ30+U8OzbGlkYTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGFzaGVkIiAke3AuZGVjb3JhdGlvblN0eWxlID09PSAnZGFzaGVkJyA/ICdzZWxlY3RlZCcgOiAnJ30+VHJhY2VqYWRhPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkb3R0ZWQiICR7cC5kZWNvcmF0aW9uU3R5bGUgPT09ICdkb3R0ZWQnID8gJ3NlbGVjdGVkJyA6ICcnfT5Qb250aWxoYWRhPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkb3VibGUiICR7cC5kZWNvcmF0aW9uU3R5bGUgPT09ICdkb3VibGUnID8gJ3NlbGVjdGVkJyA6ICcnfT5EdXBsYTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0id2F2eSIgJHtwLmRlY29yYXRpb25TdHlsZSA9PT0gJ3dhdnknID8gJ3NlbGVjdGVkJyA6ICcnfT5PbmR1bGFkYTwvb3B0aW9uPgogICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+Q29yIGRhIERlY29yYcOnw6NvPC9sYWJlbD4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBnYXA6IDAuNXJlbTsgYWxpZ24taXRlbXM6IGNlbnRlcjsiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNvbG9yIiBpZD0iaW5zcC1kZWNvcmF0aW9uQ29sb3IiIHZhbHVlPSIke3AuZGVjb3JhdGlvbkNvbG9yIHx8IHAuY29sb3IgfHwgJyMwMDAwMDAnfSIgc3R5bGU9IndpZHRoOiA1MHB4OyBoZWlnaHQ6IDMycHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJpbnNwLWRlY29yYXRpb25Db2xvclRleHQiIHZhbHVlPSIke3AuZGVjb3JhdGlvbkNvbG9yIHx8ICcnfSIgcGxhY2Vob2xkZXI9IkRlaXhlIHZhemlvIHBhcmEgdXNhciBjb3IgZG8gdGV4dG8iIHN0eWxlPSJmbGV4OiAxOyBmb250LXNpemU6IDAuODc1cmVtOyI+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgJHtyZW5kZXJNYXJnaW5TZWN0aW9uKGVsZW1lbnQpfQogICAgICBgOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlckluc3BlY3RvckhlYWRlcihlbGVtZW50KSB7CiAgICAgIGNvbnN0IHAgPSBlbGVtZW50LnByb3BlcnRpZXMgfHwge307CiAgICAgIHJldHVybiBgCiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbD5JRCBkbyBFbGVtZW50byAocGFyYSBsaW5rVG9EZXN0aW5hdGlvbikgJHtjcmVhdGVUb29sdGlwKCdEZWZpbmUgdW0gSUQgw7puaWNvIHBhcmEgZXN0ZSBlbGVtZW50by4gT3V0cm9zIGVsZW1lbnRvcyBwb2RlbSB1c2FyIGxpbmtUb0Rlc3RpbmF0aW9uIGFwb250YW5kbyBwYXJhIGVzdGUgSUQuJywgJ0V4ZW1wbG86IFNlIGRlZmluaXIgaWQ9InNlY2FvMSIsIG91dHJvcyBlbGVtZW50b3MgcG9kZW0gdXNhciBsaW5rVG9EZXN0aW5hdGlvbjogInNlY2FvMSIgcGFyYSBjcmlhciB1bSBsaW5rIGludGVybm8uJyl9PC9sYWJlbD4KICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5zcC1oZWFkZXJFbGVtZW50SWQiIHZhbHVlPSIke2VzY2FwZUh0bWwocC5pZCB8fCAnJyl9IiBwbGFjZWhvbGRlcj0iRXg6IHNlY2FvMSwgZGVzdGlubzEgKGRlaXhlIHZhemlvIHNlIG7Do28gZm9yIGRlc3Rpbm8pIj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSI+SUQgw7puaWNvIHBhcmEgZXN0ZSBlbGVtZW50by4gVXNlIHBhcmEgY3JpYXIgZGVzdGlub3MgZGUgbGlua3MgaW50ZXJub3MuPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgICAgICA8bGFiZWw+VGV4dG8gZG8gQ2FiZcOnYWxobzwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Imluc3AtaGVhZGVyVGV4dCIgdmFsdWU9IiR7ZXNjYXBlSHRtbChwLnRleHQgfHwgJycpfSI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWw+VGlwbyBkZSBMaW5rPC9sYWJlbD4KICAgICAgICAgIDxzZWxlY3QgaWQ9Imluc3AtaGVhZGVyTGlua1R5cGUiPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJub25lIiAkeyghcC5fbGlua1R5cGUgJiYgIXAubGluayAmJiAhcC5saW5rVG9QYWdlICYmICFwLmxpbmtUb0Rlc3RpbmF0aW9uKSB8fCBwLl9saW5rVHlwZSA9PT0gJ25vbmUnID8gJ3NlbGVjdGVkJyA6ICcnfT5OZW5odW08L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0idXJsIiAkeyhwLl9saW5rVHlwZSA9PT0gJ3VybCcgfHwgKHAubGluayAmJiAhcC5saW5rVG9QYWdlICYmICFwLmxpbmtUb0Rlc3RpbmF0aW9uKSkgPyAnc2VsZWN0ZWQnIDogJyd9PlVSTCBFeHRlcm5hPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InBhZ2UiICR7cC5fbGlua1R5cGUgPT09ICdwYWdlJyB8fCBwLmxpbmtUb1BhZ2UgPyAnc2VsZWN0ZWQnIDogJyd9PkxpbmsgcGFyYSBQw6FnaW5hPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImRlc3RpbmF0aW9uIiAke3AuX2xpbmtUeXBlID09PSAnZGVzdGluYXRpb24nIHx8IHAubGlua1RvRGVzdGluYXRpb24gPyAnc2VsZWN0ZWQnIDogJyd9PkxpbmsgcGFyYSBEZXN0aW5vPC9vcHRpb24+CiAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJpbnNwLWhlYWRlckxpbmtVcmxPcHRpb25zIiBzdHlsZT0iJHsocC5fbGlua1R5cGUgPT09ICd1cmwnIHx8IChwLmxpbmsgJiYgIXAubGlua1RvUGFnZSAmJiAhcC5saW5rVG9EZXN0aW5hdGlvbikpID8gJycgOiAnZGlzcGxheTogbm9uZTsnfSI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICA8bGFiZWw+TGluayAoVVJMKTwvbGFiZWw+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5zcC1oZWFkZXJMaW5rIiB2YWx1ZT0iJHtlc2NhcGVIdG1sKHAubGluayB8fCAnJyl9IiBwbGFjZWhvbGRlcj0iaHR0cHM6Ly9leGVtcGxvLmNvbSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSI+VVJMIGV4dGVybmEgcGFyYSBvIGxpbms8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9Imluc3AtaGVhZGVyTGlua1BhZ2VPcHRpb25zIiBzdHlsZT0iJHsocC5fbGlua1R5cGUgPT09ICdwYWdlJyB8fCBwLmxpbmtUb1BhZ2UpID8gJycgOiAnZGlzcGxheTogbm9uZTsnfSI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICA8bGFiZWw+TsO6bWVybyBkYSBQw6FnaW5hPC9sYWJlbD4KICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtaGVhZGVyTGlua1RvUGFnZSIgdmFsdWU9IiR7cC5saW5rVG9QYWdlIHx8IDF9IiBtaW49IjEiIHBsYWNlaG9sZGVyPSIxIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIj5Ow7ptZXJvIGRhIHDDoWdpbmEgcGFyYSBvbmRlIG8gbGluayBhcG9udGEgKGNvbWXDp2EgZW0gMSk8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9Imluc3AtaGVhZGVyTGlua0Rlc3RpbmF0aW9uT3B0aW9ucyIgc3R5bGU9IiR7KHAuX2xpbmtUeXBlID09PSAnZGVzdGluYXRpb24nIHx8IHAubGlua1RvRGVzdGluYXRpb24pID8gJycgOiAnZGlzcGxheTogbm9uZTsnfSI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICA8bGFiZWw+Tm9tZSBkbyBEZXN0aW5vIChJRCBkbyBlbGVtZW50byBkZXN0aW5vKTwvbGFiZWw+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5zcC1oZWFkZXJMaW5rVG9EZXN0aW5hdGlvbiIgdmFsdWU9IiR7ZXNjYXBlSHRtbChwLmxpbmtUb0Rlc3RpbmF0aW9uIHx8ICcnKX0iIHBsYWNlaG9sZGVyPSJub21lLWRvLWRlc3Rpbm8iPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjVyZW07IHBhZGRpbmc6IDAuNzVyZW07IGJhY2tncm91bmQ6ICNmZWYzYzc7IGJvcmRlci1sZWZ0OiAzcHggc29saWQgI2Y1OWUwYjsgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsgY29sb3I6ICM5MjQwMGU7Ij4KICAgICAgICAgICAgICA8c3Ryb25nPuKaoO+4jyBJbXBvcnRhbnRlOjwvc3Ryb25nPiBPIGVsZW1lbnRvIGRlIGRlc3Rpbm8gcHJlY2lzYSB0ZXIgdW0gPHN0cm9uZz5JRDwvc3Ryb25nPiBkZWZpbmlkbyBpZ3VhbCBhIGVzdGUgdmFsb3IuIEV4ZW1wbG86IFNlIHVzYXIgInNlY2FvMSIgYXF1aSwgbyBlbGVtZW50byBkZXN0aW5vIGRldmUgdGVyIElEPSJzZWNhbzEiIG5vIGNhbXBvICJJRCBkbyBFbGVtZW50byIuCiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPlRhbWFuaG8gZGEgRm9udGU8L2xhYmVsPgogICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWhlYWRlckZvbnRTaXplIiB2YWx1ZT0iJHtwLmZvbnRTaXplIHx8IDE4fSIgbWluPSI4IiBtYXg9IjcyIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkZvbnRlPC9sYWJlbD4KICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJpbnNwLWhlYWRlckZvbnQiPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUm9ib3RvIiAke3AuZm9udCA9PT0gJ1JvYm90bycgfHwgIXAuZm9udCA/ICdzZWxlY3RlZCcgOiAnJ30+Um9ib3RvPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDb3VyaWVyIiAke3AuZm9udCA9PT0gJ0NvdXJpZXInID8gJ3NlbGVjdGVkJyA6ICcnfT5Db3VyaWVyPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJIZWx2ZXRpY2EiICR7cC5mb250ID09PSAnSGVsdmV0aWNhJyA/ICdzZWxlY3RlZCcgOiAnJ30+SGVsdmV0aWNhPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJUaW1lcyIgJHtwLmZvbnQgPT09ICdUaW1lcycgPyAnc2VsZWN0ZWQnIDogJyd9PlRpbWVzPC9vcHRpb24+CiAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5Gb250IEZlYXR1cmVzIChmb250RmVhdHVyZXMpPC9sYWJlbD4KICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5zcC1oZWFkZXJGb250RmVhdHVyZXMiIHZhbHVlPSIke3AuZm9udEZlYXR1cmVzID8gcC5mb250RmVhdHVyZXMuam9pbignLCAnKSA6ICcnfSIgcGxhY2Vob2xkZXI9IkV4OiBrZXJuLCBsaWdhLCBzbWNwIChzZXBhcmFkb3MgcG9yIHbDrXJndWxhKSI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjI1cmVtOyBmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsiPkZlYXR1cmVzIHRpcG9ncsOhZmljYXMgYXZhbsOnYWRhcyAoZGVwZW5kZW0gZGEgZm9udGUgVFRGKS4gU2VwYXJlIHBvciB2w61yZ3VsYS48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+Q29yIGRvIFRleHRvPC9sYWJlbD4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBnYXA6IDAuNXJlbTsgYWxpZ24taXRlbXM6IGNlbnRlcjsiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNvbG9yIiBpZD0iaW5zcC1oZWFkZXJDb2xvciIgdmFsdWU9IiR7cC5jb2xvciB8fCAnIzAwMDAwMCd9IiBzdHlsZT0id2lkdGg6IDUwcHg7IGhlaWdodDogMzJweDsgY3Vyc29yOiBwb2ludGVyOyI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Imluc3AtaGVhZGVyQ29sb3JUZXh0IiB2YWx1ZT0iJHtwLmNvbG9yIHx8ICcjMDAwMDAwJ30iIHBsYWNlaG9sZGVyPSIjMDAwMDAwIiBzdHlsZT0iZmxleDogMTsgZm9udC1zaXplOiAwLjg3NXJlbTsiPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+Q29yIGRlIEZ1bmRvPC9sYWJlbD4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBnYXA6IDAuNXJlbTsgYWxpZ24taXRlbXM6IGNlbnRlcjsiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNvbG9yIiBpZD0iaW5zcC1oZWFkZXJCYWNrZ3JvdW5kIiB2YWx1ZT0iJHtwLmJhY2tncm91bmQgfHwgJyNmZmZmZmYnfSIgc3R5bGU9IndpZHRoOiA1MHB4OyBoZWlnaHQ6IDMycHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJpbnNwLWhlYWRlckJhY2tncm91bmRUZXh0IiB2YWx1ZT0iJHtwLmJhY2tncm91bmQgfHwgJyd9IiBwbGFjZWhvbGRlcj0iRGVpeGUgdmF6aW8gcGFyYSB0cmFuc3BhcmVudGUiIHN0eWxlPSJmbGV4OiAxOyBmb250LXNpemU6IDAuODc1cmVtOyI+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkFsaW5oYW1lbnRvPC9sYWJlbD4KICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJpbnNwLWhlYWRlckFsaWdubWVudCI+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsZWZ0IiAke3AuYWxpZ25tZW50ID09PSAnbGVmdCcgPyAnc2VsZWN0ZWQnIDogJyd9PkVzcXVlcmRhPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjZW50ZXIiICR7cC5hbGlnbm1lbnQgPT09ICdjZW50ZXInID8gJ3NlbGVjdGVkJyA6ICcnfT5DZW50cm88L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InJpZ2h0IiAke3AuYWxpZ25tZW50ID09PSAncmlnaHQnID8gJ3NlbGVjdGVkJyA6ICcnfT5EaXJlaXRhPC9vcHRpb24+CiAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5EZWNvcmHDp8OjbzwvbGFiZWw+CiAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcC1oZWFkZXJEZWNvcmF0aW9uIj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiIgJHshcC5kZWNvcmF0aW9uID8gJ3NlbGVjdGVkJyA6ICcnfT5OZW5odW1hPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ1bmRlcmxpbmUiICR7cC5kZWNvcmF0aW9uID09PSAndW5kZXJsaW5lJyA/ICdzZWxlY3RlZCcgOiAnJ30+U3VibGluaGFkbzwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGluZVRocm91Z2giICR7cC5kZWNvcmF0aW9uID09PSAnbGluZVRocm91Z2gnID8gJ3NlbGVjdGVkJyA6ICcnfT5SaXNjYWRvPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJvdmVybGluZSIgJHtwLmRlY29yYXRpb24gPT09ICdvdmVybGluZScgPyAnc2VsZWN0ZWQnIDogJyd9PlNvYnJlbGluaGE8L29wdGlvbj4KICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMC41cmVtOyBmb250LXdlaWdodDogNTAwOyI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJpbnNwLWhlYWRlckJvbGQiICR7cC5ib2xkID8gJ2NoZWNrZWQnIDogJyd9IHN0eWxlPSJ3aWR0aDogMThweDsgaGVpZ2h0OiAxOHB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgIDxzcGFuPk5lZ3JpdG88L3NwYW4+CiAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDAuNXJlbTsgZm9udC13ZWlnaHQ6IDUwMDsiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iaW5zcC1oZWFkZXJJdGFsaWNzIiAke3AuaXRhbGljcyA/ICdjaGVja2VkJyA6ICcnfSBzdHlsZT0id2lkdGg6IDE4cHg7IGhlaWdodDogMThweDsgY3Vyc29yOiBwb2ludGVyOyI+CiAgICAgICAgICAgICAgICA8c3Bhbj5JdMOhbGljbzwvc3Bhbj4KICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5BbHR1cmEgZGEgTGluaGEgKGxpbmVIZWlnaHQpPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1oZWFkZXJMaW5lSGVpZ2h0IiB2YWx1ZT0iJHtwLmxpbmVIZWlnaHQgfHwgJyd9IiBwbGFjZWhvbGRlcj0iQXV0byIgbWluPSIwIiBtYXg9IjEwIiBzdGVwPSIwLjEiPgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9Im1hcmdpbi10b3A6IDAuMjVyZW07IGZvbnQtc2l6ZTogMC43NXJlbTsgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOyI+RGVpeGUgdmF6aW8gcGFyYSBhdXRvbcOhdGljbzwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+RXNwYcOnYW1lbnRvIGVudHJlIENhcmFjdGVyZXM8L2xhYmVsPgogICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWhlYWRlckNoYXJhY3RlclNwYWNpbmciIHZhbHVlPSIke3AuY2hhcmFjdGVyU3BhY2luZyB8fCAnJ30iIHBsYWNlaG9sZGVyPSIwIiBtaW49IjAiIG1heD0iMTAiIHN0ZXA9IjAuMSI+CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0ibWFyZ2luLXRvcDogMC4yNXJlbTsgZm9udC1zaXplOiAwLjc1cmVtOyBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7Ij5FbSB1bmlkYWRlcyAoMCA9IG5vcm1hbCk8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiIGlkPSJoZWFkZXJEZWNvcmF0aW9uT3B0aW9ucyIgc3R5bGU9IiR7IXAuZGVjb3JhdGlvbiA/ICdkaXNwbGF5OiBub25lOycgOiAnJ30iPgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+RXN0aWxvIGRhIERlY29yYcOnw6NvPC9sYWJlbD4KICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJpbnNwLWhlYWRlckRlY29yYXRpb25TdHlsZSI+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJzb2xpZCIgJHtwLmRlY29yYXRpb25TdHlsZSA9PT0gJ3NvbGlkJyB8fCAhcC5kZWNvcmF0aW9uU3R5bGUgPyAnc2VsZWN0ZWQnIDogJyd9PlPDs2xpZGE8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImRhc2hlZCIgJHtwLmRlY29yYXRpb25TdHlsZSA9PT0gJ2Rhc2hlZCcgPyAnc2VsZWN0ZWQnIDogJyd9PlRyYWNlamFkYTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZG90dGVkIiAke3AuZGVjb3JhdGlvblN0eWxlID09PSAnZG90dGVkJyA/ICdzZWxlY3RlZCcgOiAnJ30+UG9udGlsaGFkYTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZG91YmxlIiAke3AuZGVjb3JhdGlvblN0eWxlID09PSAnZG91YmxlJyA/ICdzZWxlY3RlZCcgOiAnJ30+RHVwbGE8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IndhdnkiICR7cC5kZWNvcmF0aW9uU3R5bGUgPT09ICd3YXZ5JyA/ICdzZWxlY3RlZCcgOiAnJ30+T25kdWxhZGE8L29wdGlvbj4KICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkNvciBkYSBEZWNvcmHDp8OjbzwvbGFiZWw+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAwLjVyZW07IGFsaWduLWl0ZW1zOiBjZW50ZXI7Ij4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjb2xvciIgaWQ9Imluc3AtaGVhZGVyRGVjb3JhdGlvbkNvbG9yIiB2YWx1ZT0iJHtwLmRlY29yYXRpb25Db2xvciB8fCBwLmNvbG9yIHx8ICcjMDAwMDAwJ30iIHN0eWxlPSJ3aWR0aDogNTBweDsgaGVpZ2h0OiAzMnB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5zcC1oZWFkZXJEZWNvcmF0aW9uQ29sb3JUZXh0IiB2YWx1ZT0iJHtwLmRlY29yYXRpb25Db2xvciB8fCAnJ30iIHBsYWNlaG9sZGVyPSJEZWl4ZSB2YXppbyBwYXJhIHVzYXIgY29yIGRvIHRleHRvIiBzdHlsZT0iZmxleDogMTsgZm9udC1zaXplOiAwLjg3NXJlbTsiPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgICR7cmVuZGVyTWFyZ2luU2VjdGlvbihlbGVtZW50KX0KICAgICAgYDsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJJbnNwZWN0b3JDb2x1bW5zKGVsZW1lbnQpIHsKICAgICAgY29uc3QgcCA9IGVsZW1lbnQucHJvcGVydGllcyB8fCB7fTsKICAgICAgY29uc3QgY29scyA9IHAuY29sdW1ucyB8fCBbeyB0ZXh0OiAnQ29sdW5hIDEnLCB3aWR0aDogJyonIH0sIHsgdGV4dDogJ0NvbHVuYSAyJywgd2lkdGg6ICcqJyB9XTsKICAgICAgcmV0dXJuIGAKICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+TsO6bWVybyBkZSBDb2x1bmFzPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1jb2xDb3VudCIgdmFsdWU9IiR7Y29scy5sZW5ndGh9IiBtaW49IjIiIG1heD0iNiI+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkVzcGHDp2FtZW50byAoZ2FwKTwvbGFiZWw+CiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtY29sR2FwIiB2YWx1ZT0iJHtwLmdhcCB8fCAxMH0iIG1pbj0iMCIgbWF4PSI1MCI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkFsaW5oYW1lbnRvIFZlcnRpY2FsPC9sYWJlbD4KICAgICAgICAgIDxzZWxlY3QgaWQ9Imluc3AtY29sVmFsaWduIj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0idG9wIiAke3AudmFsaWduID09PSAndG9wJyB8fCAhcC52YWxpZ24gPyAnc2VsZWN0ZWQnIDogJyd9PlRvcG88L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iY2VudGVyIiAke3AudmFsaWduID09PSAnY2VudGVyJyA/ICdzZWxlY3RlZCcgOiAnJ30+Q2VudHJvPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImJvdHRvbSIgJHtwLnZhbGlnbiA9PT0gJ2JvdHRvbScgPyAnc2VsZWN0ZWQnIDogJyd9PkluZmVyaW9yPC9vcHRpb24+CiAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9Im1hcmdpbi10b3A6IDAuMjVyZW07IGZvbnQtc2l6ZTogMC43NXJlbTsgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOyI+QWxpbmhhbWVudG8gdmVydGljYWwgZG8gY29udGXDumRvIGRlbnRybyBkYXMgY29sdW5hczwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCIgc3R5bGU9Im1hcmdpbi10b3A6IDEuNXJlbTsgcGFkZGluZy10b3A6IDFyZW07IGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOyI+CiAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtd2VpZ2h0OiA1MDA7IG1hcmdpbi1ib3R0b206IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOyI+TGFyZ3VyYXMgZGFzIENvbHVuYXM8L2xhYmVsPgogICAgICAgICAgJHtjb2xzLm1hcCgoY29sLCBpZHgpID0+IHsKICAgICAgICBjb25zdCB3aWR0aCA9IGNvbC53aWR0aCB8fCAnKic7CiAgICAgICAgbGV0IHdpZHRoVHlwZSA9ICdhdXRvJzsKICAgICAgICBsZXQgd2lkdGhWYWx1ZSA9ICcnOwoKICAgICAgICBpZiAod2lkdGggPT09ICcqJykgewogICAgICAgICAgd2lkdGhUeXBlID0gJ2F1dG8nOwogICAgICAgIH0gZWxzZSBpZiAod2lkdGggPT09ICdhdXRvJykgewogICAgICAgICAgd2lkdGhUeXBlID0gJ2F1dG8nOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpZHRoID09PSAnbnVtYmVyJykgewogICAgICAgICAgd2lkdGhUeXBlID0gJ3BpeGVscyc7CiAgICAgICAgICB3aWR0aFZhbHVlID0gd2lkdGg7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygd2lkdGggPT09ICdzdHJpbmcnICYmIHdpZHRoLmVuZHNXaXRoKCclJykpIHsKICAgICAgICAgIHdpZHRoVHlwZSA9ICdwZXJjZW50YWdlJzsKICAgICAgICAgIHdpZHRoVmFsdWUgPSB3aWR0aC5yZXBsYWNlKCclJywgJycpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3aWR0aFR5cGUgPSAnYXV0byc7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYAogICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206IDAuNzVyZW07IHBhZGRpbmc6IDAuNzVyZW07IGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07Ij4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgbWFyZ2luLWJvdHRvbTogMC41cmVtOyI+CiAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC13ZWlnaHQ6IDUwMDsgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7Ij5Db2x1bmEgJHtpZHggKyAxfTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICR7aWR4ID4gMCA/IGAKICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0bi1kZWxldGUtY29sIiBkYXRhLWNvbC1pbmRleD0iJHtpZHh9IiBzdHlsZT0icGFkZGluZzogMC4yNXJlbSAwLjVyZW07IGJhY2tncm91bmQ6ICNlZjQ0NDQ7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiAwLjI1cmVtOyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtc2l6ZTogMC43NXJlbTsiPvCfl5HvuI88L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgYCA6ICcnfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6IDE7Ij4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+VGlwbyBkZSBMYXJndXJhPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPSJjb2wtd2lkdGgtdHlwZSIgZGF0YS1jb2wtaW5kZXg9IiR7aWR4fSI+CiAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJhdXRvIiAke3dpZHRoVHlwZSA9PT0gJ2F1dG8nID8gJ3NlbGVjdGVkJyA6ICcnfT5BdXRvbcOhdGljbyAoKik8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InBpeGVscyIgJHt3aWR0aFR5cGUgPT09ICdwaXhlbHMnID8gJ3NlbGVjdGVkJyA6ICcnfT5QaXhlbHMgKHB4KTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0icGVyY2VudGFnZSIgJHt3aWR0aFR5cGUgPT09ICdwZXJjZW50YWdlJyA/ICdzZWxlY3RlZCcgOiAnJ30+UG9yY2VudGFnZW0gKCUpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6IDE7ICR7d2lkdGhUeXBlID09PSAnYXV0bycgPyAnZGlzcGxheTogbm9uZTsnIDogJyd9IiBpZD0iY29sLXdpZHRoLXZhbHVlLSR7aWR4fSI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPlZhbG9yPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBjbGFzcz0iY29sLXdpZHRoLXZhbHVlIiBkYXRhLWNvbC1pbmRleD0iJHtpZHh9IiB2YWx1ZT0iJHt3aWR0aFZhbHVlfSIgbWluPSIwIiBzdGVwPSIke3dpZHRoVHlwZSA9PT0gJ3BlcmNlbnRhZ2UnID8gJzEnIDogJzEnfSIgcGxhY2Vob2xkZXI9IiR7d2lkdGhUeXBlID09PSAncGVyY2VudGFnZScgPyAnNTAnIDogJzEwMCd9Ij4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgYDsKICAgICAgfSkuam9pbignJyl9CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjVyZW07IGZvbnQtc2l6ZTogMC43NXJlbTsgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOyI+CiAgICAgICAgICAgIDxzdHJvbmcgc3R5bGU9ImNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOyI+VGlwb3MgZGUgbGFyZ3VyYTo8L3N0cm9uZz48YnI+CiAgICAgICAgICAgIOKAoiBBdXRvbcOhdGljbyAoKik6IGRpdmlkZSBvIGVzcGHDp28gaWd1YWxtZW50ZSBlbnRyZSBhcyBjb2x1bmFzPGJyPgogICAgICAgICAgICDigKIgUGl4ZWxzOiBsYXJndXJhIGZpeGEgZW0gcG9udG9zIChleDogMTAwLCAyMDApPGJyPgogICAgICAgICAgICDigKIgUG9yY2VudGFnZW06IGxhcmd1cmEgZW0gJSBkbyBlc3Bhw6dvIGRpc3BvbsOtdmVsIChleDogMzAsIDUwKQogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbD5Db250ZcO6ZG8gZGFzIENvbHVuYXMgKHVtYSBwb3IgbGluaGEsIHNlcGFyYWRvIHBvciAiLS0tIik8L2xhYmVsPgogICAgICAgICAgPHRleHRhcmVhIGlkPSJpbnNwLWNvbFRleHRzIiBwbGFjZWhvbGRlcj0iQ29sdW5hIDEmIzEwOy0tLSYjMTA7Q29sdW5hIDIiPiR7Y29scy5tYXAoYyA9PiBjLnRleHQgfHwgJycpLmpvaW4oJ1xuLS0tXG4nKX08L3RleHRhcmVhPgogICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIj5Vc2UgIi0tLSIgZW0gdW1hIGxpbmhhIHNlcGFyYWRhIHBhcmEgZGl2aWRpciBhcyBjb2x1bmFzPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgJHtyZW5kZXJNYXJnaW5TZWN0aW9uKGVsZW1lbnQpfQogICAgICBgOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlckluc3BlY3Rvckxpc3QoZWxlbWVudCkgewogICAgICBjb25zdCBwID0gZWxlbWVudC5wcm9wZXJ0aWVzIHx8IHt9OwogICAgICBjb25zdCBpdGVtcyA9IHAuaXRlbXMgfHwgW3sga2luZDogJ3RleHQnLCB0ZXh0OiAnSXRlbSAxJyB9LCB7IGtpbmQ6ICd0ZXh0JywgdGV4dDogJ0l0ZW0gMicgfV07CiAgICAgIGNvbnN0IHRleHRJdGVtcyA9IGl0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0ua2luZCA9PT0gJ3RleHQnKS5tYXAoaXRlbSA9PiBpdGVtLnRleHQgfHwgJycpLmpvaW4oJ1xuJyk7CiAgICAgIGNvbnN0IGlzT3JkZXJlZCA9IHAub3JkZXJlZCB8fCBwLmxpc3RUeXBlID09PSAnb2wnOwogICAgICByZXR1cm4gYAogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5UaXBvPC9sYWJlbD4KICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJpbnNwLWxpc3RLaW5kIj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InVsIiAkeyFpc09yZGVyZWQgPyAnc2VsZWN0ZWQnIDogJyd9Pk7Do28gb3JkZW5hZGEgKHVsKTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ib2wiICR7aXNPcmRlcmVkID8gJ3NlbGVjdGVkJyA6ICcnfT5PcmRlbmFkYSAob2wpPC9vcHRpb24+CiAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgJHtpc09yZGVyZWQgPyBgCiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPk7Dum1lcm8gSW5pY2lhbCAoc3RhcnQpPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1saXN0U3RhcnQiIHZhbHVlPSIke3Auc3RhcnQgfHwgMX0iIG1pbj0iMSIgbWF4PSIxMDAwIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPlRpcG8gZGUgTWFyY2Fkb3I8L2xhYmVsPgogICAgICAgICAgICAgIDxzZWxlY3QgaWQ9Imluc3AtbGlzdFR5cGUiPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGVjaW1hbCIgJHtwLnR5cGUgPT09ICdkZWNpbWFsJyB8fCAhcC50eXBlID8gJ3NlbGVjdGVkJyA6ICcnfT5EZWNpbWFsICgxLCAyLCAzLi4uKTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibG93ZXItYWxwaGEiICR7cC50eXBlID09PSAnbG93ZXItYWxwaGEnID8gJ3NlbGVjdGVkJyA6ICcnfT5NaW7DunNjdWxhcyAoYSwgYiwgYy4uLik8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InVwcGVyLWFscGhhIiAke3AudHlwZSA9PT0gJ3VwcGVyLWFscGhhJyA/ICdzZWxlY3RlZCcgOiAnJ30+TWFpw7pzY3VsYXMgKEEsIEIsIEMuLi4pPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsb3dlci1yb21hbiIgJHtwLnR5cGUgPT09ICdsb3dlci1yb21hbicgPyAnc2VsZWN0ZWQnIDogJyd9PlJvbWFubyBtaW7DunNjdWxvIChpLCBpaSwgaWlpLi4uKTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0idXBwZXItcm9tYW4iICR7cC50eXBlID09PSAndXBwZXItcm9tYW4nID8gJ3NlbGVjdGVkJyA6ICcnfT5Sb21hbm8gbWFpw7pzY3VsbyAoSSwgSUksIElJSS4uLik8L29wdGlvbj4KICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9Imluc3AtbGlzdFJldmVyc2VkIiAke3AucmV2ZXJzZWQgPyAnY2hlY2tlZCcgOiAnJ30+IExpc3RhIFJldmVyc2EgKHJldmVyc2VkKTwvbGFiZWw+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiPkludmVydGUgYSBvcmRlbSBudW3DqXJpY2EgZGEgbGlzdGE8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICBgIDogYAogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+VGlwbyBkZSBNYXJjYWRvcjwvbGFiZWw+CiAgICAgICAgICA8c2VsZWN0IGlkPSJpbnNwLWxpc3RUeXBlIj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGlzYyIgJHtwLnR5cGUgPT09ICdkaXNjJyB8fCAhcC50eXBlID8gJ3NlbGVjdGVkJyA6ICcnfT5EaXNjbyBwcmVlbmNoaWRvICjil48pPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImNpcmNsZSIgJHtwLnR5cGUgPT09ICdjaXJjbGUnID8gJ3NlbGVjdGVkJyA6ICcnfT5Dw61yY3VsbyB2YXppbyAo4peLKTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJzcXVhcmUiICR7cC50eXBlID09PSAnc3F1YXJlJyA/ICdzZWxlY3RlZCcgOiAnJ30+UXVhZHJhZG8gKOKWoCk8L29wdGlvbj4KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgIDwvZGl2PgogICAgICAgIGB9CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbD5JdGVucyBkZSBUZXh0byAodW0gcG9yIGxpbmhhKTwvbGFiZWw+CiAgICAgICAgICA8dGV4dGFyZWEgaWQ9Imluc3AtbGlzdEl0ZW1zIj4ke3RleHRJdGVtc308L3RleHRhcmVhPgogICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIj5Wb2PDqiB0YW1iw6ltIHBvZGUgYXJyYXN0YXIgZWxlbWVudG9zIGRpcmV0YW1lbnRlIG5hIGxpc3RhIHBhcmEgY3JpYXIgaXRlbnMgY29tcGxleG9zLjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiPkl0ZW5zIGNvbSBlbGVtZW50b3MgYW5pbmhhZG9zOiAke2l0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0ua2luZCA9PT0gJ25vZGUnKS5sZW5ndGh9PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgJHshaXNPcmRlcmVkID8gYAogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+Q29yIGRvcyBNYXJjYWRvcmVzIChtYXJrZXJDb2xvcik8L2xhYmVsPgogICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAwLjVyZW07IGFsaWduLWl0ZW1zOiBjZW50ZXI7Ij4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNvbG9yIiBpZD0iaW5zcC1tYXJrZXJDb2xvciIgdmFsdWU9IiR7cC5tYXJrZXJDb2xvciB8fCAnIzAwMDAwMCd9IiBzdHlsZT0id2lkdGg6IDUwcHg7IGhlaWdodDogMzJweDsgY3Vyc29yOiBwb2ludGVyOyI+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5zcC1tYXJrZXJDb2xvclRleHQiIHZhbHVlPSIke3AubWFya2VyQ29sb3IgfHwgJyd9IiBwbGFjZWhvbGRlcj0iRGVpeGUgdmF6aW8gcGFyYSB1c2FyIGNvciBwYWRyw6NvIiBzdHlsZT0iZmxleDogMTsgZm9udC1zaXplOiAwLjg3NXJlbTsiPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjI1cmVtOyBmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsiPkFwbGljYS1zZSBhcGVuYXMgYSBsaXN0YXMgbsOjbyBvcmRlbmFkYXMgKHVsKTwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIGAgOiAnJ30KICAgICAgICAke3JlbmRlck1hcmdpblNlY3Rpb24oZWxlbWVudCl9CiAgICAgIGA7CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVySW5zcGVjdG9yVGFibGUoZWxlbWVudCkgewogICAgICBjb25zdCBwID0gZWxlbWVudC5wcm9wZXJ0aWVzIHx8IHt9OwogICAgICBjb25zdCBib2R5ID0gcC5ib2R5IHx8IFtdOwogICAgICBjb25zdCBudW1Sb3dzID0gYm9keS5sZW5ndGggfHwgMjsKICAgICAgY29uc3QgbnVtQ29scyA9IGJvZHlbMF0/Lmxlbmd0aCB8fCAzOwogICAgICBjb25zdCBudW1EYXRhUm93cyA9IE1hdGgubWF4KDAsIG51bVJvd3MgLSAxKTsgLy8gTGluaGFzIGRlIGRhZG9zIChleGNsdWluZG8gaGVhZGVyKQoKICAgICAgcmV0dXJuIGAKICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0icGFkZGluZzogMC43NXJlbTsgYmFja2dyb3VuZDogI2RiZWFmZTsgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCAjMjU2M2ViOyBtYXJnaW4tYm90dG9tOiAxcmVtOyBib3JkZXItcmFkaXVzOiAwLjI1cmVtOyBjb2xvcjogIzFlNDBhZjsiPgogICAgICAgICAgICA8c3Ryb25nPvCfk4sgRXN0cnV0dXJhIGRhIFRhYmVsYTo8L3N0cm9uZz48YnI+CiAgICAgICAgICAgIOKAoiA8c3Ryb25nPkxpbmhhIDE8L3N0cm9uZz4gPSBDYWJlw6dhbGhvIChub21lcyBkYXMgY29sdW5hcyk8YnI+CiAgICAgICAgICAgIOKAoiA8c3Ryb25nPkxpbmhhcyAke251bVJvd3MgPiAxID8gJzItJyArIG51bVJvd3MgOiAnMid9PC9zdHJvbmc+ID0gRGFkb3MgZGEgdGFiZWxhCiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+Q29sdW5hczwvbGFiZWw+CiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtdGFibGVDb2xzIiB2YWx1ZT0iJHtudW1Db2xzfSIgbWluPSIxIiBtYXg9IjEwIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkxpbmhhcyBkZSBEYWRvczwvbGFiZWw+CiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtdGFibGVSb3dzIiB2YWx1ZT0iJHtudW1EYXRhUm93c30iIG1pbj0iMSIgbWF4PSIyMCI+CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0ibWFyZ2luLXRvcDogMC4yNXJlbTsgZm9udC1zaXplOiAwLjc1cmVtOyBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7Ij4KICAgICAgICAgICAgICAgIChUb3RhbDogJHtudW1Sb3dzfSBsaW5oYXMgaW5jbHVpbmRvIGNhYmXDp2FsaG8pCiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5MaW5oYXMgZGUgQ2FiZcOnYWxobyAoaGVhZGVyUm93cykgJHtjcmVhdGVUb29sdGlwKCdEZWZpbmUgcXVhbnRhcyBsaW5oYXMgZGEgdGFiZWxhIHNlcsOjbyByZXBldGlkYXMgZW0gY2FkYSBww6FnaW5hIGNvbW8gY2FiZcOnYWxoby4nLCAnUGFkcsOjbzogMSBsaW5oYS4gU2UgZGVmaW5pciAyLCBhcyBkdWFzIHByaW1laXJhcyBsaW5oYXMgc2Vyw6NvIGNhYmXDp2FsaG8uJyl9PC9sYWJlbD4KICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLXRhYmxlSGVhZGVyUm93cyIgdmFsdWU9IiR7cC5oZWFkZXJSb3dzICE9PSB1bmRlZmluZWQgPyBwLmhlYWRlclJvd3MgOiAxfSIgbWluPSIwIiBtYXg9IiR7bnVtUm93c30iPgogICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0ibWFyZ2luLXRvcDogMC4yNXJlbTsgZm9udC1zaXplOiAwLjc1cmVtOyBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7Ij4KICAgICAgICAgICAgTsO6bWVybyBkZSBsaW5oYXMgcXVlIHNlcsOjbyBjb25zaWRlcmFkYXMgY29tbyBjYWJlw6dhbGhvIChwYWRyw6NvOiAxKQogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5MYXlvdXQ8L2xhYmVsPgogICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcC10YWJsZUxheW91dCI+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImxpZ2h0SG9yaXpvbnRhbExpbmVzIiAke3AubGF5b3V0ID09PSAnbGlnaHRIb3Jpem9udGFsTGluZXMnIHx8ICFwLmxheW91dCA/ICdzZWxlY3RlZCcgOiAnJ30+TGluaGFzIEhvcml6b250YWlzPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImhlYWRlckxpbmVPbmx5IiAke3AubGF5b3V0ID09PSAnaGVhZGVyTGluZU9ubHknID8gJ3NlbGVjdGVkJyA6ICcnfT5BcGVuYXMgSGVhZGVyPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Im5vQm9yZGVycyIgJHtwLmxheW91dCA9PT0gJ25vQm9yZGVycycgPyAnc2VsZWN0ZWQnIDogJyd9PlNlbSBCb3JkYXM8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iY3VzdG9tIiAke3AubGF5b3V0ID09PSAnY3VzdG9tJyB8fCAocC5jdXN0b21MYXlvdXQgJiYgT2JqZWN0LmtleXMocC5jdXN0b21MYXlvdXQpLmxlbmd0aCA+IDApID8gJ3NlbGVjdGVkJyA6ICcnfT5DdXN0b21pemFkbzwvb3B0aW9uPgogICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjI1cmVtOyBmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsiPkVzY29saGEgIkN1c3RvbWl6YWRvIiBwYXJhIGRlZmluaXIgY29yZXMgZSBsYXJndXJhcyBkYXMgbGluaGFzIG1hbnVhbG1lbnRlPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgCiAgICAgICAgJHsocC5sYXlvdXQgPT09ICdjdXN0b20nIHx8IChwLmN1c3RvbUxheW91dCAmJiBPYmplY3Qua2V5cyhwLmN1c3RvbUxheW91dCkubGVuZ3RoID4gMCkpID8gYAogICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDAuNXJlbTsiPgogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJidG4tc2hvdy1jdXN0b20tbGF5b3V0IiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFibGVDdXN0b21MYXlvdXRPcHRpb25zJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IHRoaXMuc3R5bGUuZGlzcGxheSA9ICdub25lJzsiIHN0eWxlPSJwYWRkaW5nOiAwLjVyZW07IGJhY2tncm91bmQ6ICMyNTYzZWI7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgY3Vyc29yOiBwb2ludGVyOyBmb250LXNpemU6IDAuODc1cmVtOyI+TW9zdHJhciBPcMOnw7VlcyBkZSBMYXlvdXQgQ3VzdG9taXphZG88L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgICBgIDogJyd9CiAgICAgICAgJHsocC5sYXlvdXQgPT09ICdjdXN0b20nIHx8IChwLmN1c3RvbUxheW91dCAmJiBPYmplY3Qua2V5cyhwLmN1c3RvbUxheW91dCkubGVuZ3RoID4gMCkpID8gYAogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCIgaWQ9InRhYmxlQ3VzdG9tTGF5b3V0T3B0aW9ucyI+CiAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtd2VpZ2h0OiA1MDA7IG1hcmdpbi1ib3R0b206IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOyI+TGF5b3V0IEN1c3RvbWl6YWRvPC9sYWJlbD4KICAgICAgICAgIAogICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMXJlbTsiPgogICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9ImNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7Ij5MaW5oYXMgSG9yaXpvbnRhaXM8L2xhYmVsPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjVyZW07Ij4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OiAxOyI+CiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9ImNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7IGZvbnQtc2l6ZTogMC43NXJlbTsiPkxhcmd1cmEgKHB4KTwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC10YWJsZUhMaW5lV2lkdGgiIHZhbHVlPSIke3AuY3VzdG9tTGF5b3V0Py5oTGluZVdpZHRoIHx8IDF9IiBtaW49IjAiIG1heD0iMTAiIHN0ZXA9IjAuMSIgc3R5bGU9IndpZHRoOiAxMDAlOyBwYWRkaW5nOiAwLjVyZW07IGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7IGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtOyBmb250LXNpemU6IDAuODc1cmVtOyI+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDogMTsiPgogICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpOyBmb250LXNpemU6IDAuNzVyZW07Ij5Db3I8L2xhYmVsPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAwLjVyZW07IGFsaWduLWl0ZW1zOiBjZW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNvbG9yIiBpZD0iaW5zcC10YWJsZUhMaW5lQ29sb3IiIHZhbHVlPSIke3AuY3VzdG9tTGF5b3V0Py5oTGluZUNvbG9yIHx8ICcjMDAwMDAwJ30iIHN0eWxlPSJ3aWR0aDogNTBweDsgaGVpZ2h0OiAzMnB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJpbnNwLXRhYmxlSExpbmVDb2xvclRleHQiIHZhbHVlPSIke3AuY3VzdG9tTGF5b3V0Py5oTGluZUNvbG9yIHx8ICcjMDAwMDAwJ30iIHBsYWNlaG9sZGVyPSIjMDAwMDAwIiBzdHlsZT0iZmxleDogMTsgcGFkZGluZzogMC41cmVtOyBiYWNrZ3JvdW5kOiB2YXIoLS1iZy10ZXJ0aWFyeSk7IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOyBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgZm9udC1zaXplOiAwLjg3NXJlbTsiPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICAKICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206IDFyZW07Ij4KICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpOyI+TGluaGFzIFZlcnRpY2FpczwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyIgc3R5bGU9Im1hcmdpbi10b3A6IDAuNXJlbTsiPgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6IDE7Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0iY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsgZm9udC1zaXplOiAwLjc1cmVtOyI+TGFyZ3VyYSAocHgpPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLXRhYmxlVkxpbmVXaWR0aCIgdmFsdWU9IiR7cC5jdXN0b21MYXlvdXQ/LnZMaW5lV2lkdGggfHwgMX0iIG1pbj0iMCIgbWF4PSIxMCIgc3RlcD0iMC4xIiBzdHlsZT0id2lkdGg6IDEwMCU7IHBhZGRpbmc6IDAuNXJlbTsgYmFja2dyb3VuZDogdmFyKC0tYmctdGVydGlhcnkpOyBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07IGZvbnQtc2l6ZTogMC44NzVyZW07Ij4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OiAxOyI+CiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9ImNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7IGZvbnQtc2l6ZTogMC43NXJlbTsiPkNvcjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBnYXA6IDAuNXJlbTsgYWxpZ24taXRlbXM6IGNlbnRlcjsiPgogICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY29sb3IiIGlkPSJpbnNwLXRhYmxlVkxpbmVDb2xvciIgdmFsdWU9IiR7cC5jdXN0b21MYXlvdXQ/LnZMaW5lQ29sb3IgfHwgJyMwMDAwMDAnfSIgc3R5bGU9IndpZHRoOiA1MHB4OyBoZWlnaHQ6IDMycHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Imluc3AtdGFibGVWTGluZUNvbG9yVGV4dCIgdmFsdWU9IiR7cC5jdXN0b21MYXlvdXQ/LnZMaW5lQ29sb3IgfHwgJyMwMDAwMDAnfSIgcGxhY2Vob2xkZXI9IiMwMDAwMDAiIHN0eWxlPSJmbGV4OiAxOyBwYWRkaW5nOiAwLjVyZW07IGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7IGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtOyBmb250LXNpemU6IDAuODc1cmVtOyI+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIAogICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMXJlbTsiPgogICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9ImNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7Ij5QYWRkaW5nIGRhcyBDw6lsdWxhczwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyIgc3R5bGU9Im1hcmdpbi10b3A6IDAuNXJlbTsiPgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6IDE7Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0iY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsgZm9udC1zaXplOiAwLjc1cmVtOyI+RXNxdWVyZGE8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtdGFibGVQYWRkaW5nTGVmdCIgdmFsdWU9IiR7cC5jdXN0b21MYXlvdXQ/LnBhZGRpbmdMZWZ0IHx8IDV9IiBtaW49IjAiIG1heD0iNTAiIHN0eWxlPSJ3aWR0aDogMTAwJTsgcGFkZGluZzogMC41cmVtOyBiYWNrZ3JvdW5kOiB2YXIoLS1iZy10ZXJ0aWFyeSk7IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOyBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgZm9udC1zaXplOiAwLjg3NXJlbTsiPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6IDE7Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0iY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsgZm9udC1zaXplOiAwLjc1cmVtOyI+RGlyZWl0YTwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC10YWJsZVBhZGRpbmdSaWdodCIgdmFsdWU9IiR7cC5jdXN0b21MYXlvdXQ/LnBhZGRpbmdSaWdodCB8fCA1fSIgbWluPSIwIiBtYXg9IjUwIiBzdHlsZT0id2lkdGg6IDEwMCU7IHBhZGRpbmc6IDAuNXJlbTsgYmFja2dyb3VuZDogdmFyKC0tYmctdGVydGlhcnkpOyBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07IGZvbnQtc2l6ZTogMC44NzVyZW07Ij4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyIgc3R5bGU9Im1hcmdpbi10b3A6IDAuNXJlbTsiPgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6IDE7Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0iY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsgZm9udC1zaXplOiAwLjc1cmVtOyI+VG9wbzwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC10YWJsZVBhZGRpbmdUb3AiIHZhbHVlPSIke3AuY3VzdG9tTGF5b3V0Py5wYWRkaW5nVG9wIHx8IDV9IiBtaW49IjAiIG1heD0iNTAiIHN0eWxlPSJ3aWR0aDogMTAwJTsgcGFkZGluZzogMC41cmVtOyBiYWNrZ3JvdW5kOiB2YXIoLS1iZy10ZXJ0aWFyeSk7IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOyBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgZm9udC1zaXplOiAwLjg3NXJlbTsiPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6IDE7Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0iY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsgZm9udC1zaXplOiAwLjc1cmVtOyI+SW5mZXJpb3I8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtdGFibGVQYWRkaW5nQm90dG9tIiB2YWx1ZT0iJHtwLmN1c3RvbUxheW91dD8ucGFkZGluZ0JvdHRvbSB8fCA1fSIgbWluPSIwIiBtYXg9IjUwIiBzdHlsZT0id2lkdGg6IDEwMCU7IHBhZGRpbmc6IDAuNXJlbTsgYmFja2dyb3VuZDogdmFyKC0tYmctdGVydGlhcnkpOyBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07IGZvbnQtc2l6ZTogMC44NzVyZW07Ij4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIAogICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMXJlbTsiPgogICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9ImNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7Ij5Fc3RpbG9zIGRlIExpbmhhcyAoRGFzaGVkKTwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyIgc3R5bGU9Im1hcmdpbi10b3A6IDAuNXJlbTsiPgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6IDE7Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAwLjVyZW07IGZvbnQtd2VpZ2h0OiA1MDA7Ij4KICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iaW5zcC10YWJsZUhMaW5lU3R5bGUiICR7cC5jdXN0b21MYXlvdXQ/LmhMaW5lU3R5bGUgPyAnY2hlY2tlZCcgOiAnJ30gc3R5bGU9IndpZHRoOiAxOHB4OyBoZWlnaHQ6IDE4cHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgICA8c3Bhbj5MaW5oYXMgSG9yaXpvbnRhaXMgVHJhY2VqYWRhczwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjI1cmVtOyBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7IGZvbnQtc2l6ZTogMC43NXJlbTsiPgogICAgICAgICAgICAgICAgICBBcGxpY2EgZXN0aWxvIHRyYWNlamFkbyBuYXMgbGluaGFzIGhvcml6b250YWlzCiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OiAxOyI+CiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMC41cmVtOyBmb250LXdlaWdodDogNTAwOyI+CiAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9Imluc3AtdGFibGVWTGluZVN0eWxlIiAke3AuY3VzdG9tTGF5b3V0Py52TGluZVN0eWxlID8gJ2NoZWNrZWQnIDogJyd9IHN0eWxlPSJ3aWR0aDogMThweDsgaGVpZ2h0OiAxOHB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgPHNwYW4+TGluaGFzIFZlcnRpY2FpcyBUcmFjZWphZGFzPC9zcGFuPgogICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9Im1hcmdpbi10b3A6IDAuMjVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsgZm9udC1zaXplOiAwLjc1cmVtOyI+CiAgICAgICAgICAgICAgICAgIEFwbGljYSBlc3RpbG8gdHJhY2VqYWRvIG5hcyBsaW5oYXMgdmVydGljYWlzCiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIAogICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMXJlbTsiPgogICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9ImNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7Ij5Cb3JkYSBQYWRyw6NvIChkZWZhdWx0Qm9yZGVyKTwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDAuNXJlbTsiPgogICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAwLjVyZW07IGZvbnQtd2VpZ2h0OiA1MDA7Ij4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9Imluc3AtdGFibGVEZWZhdWx0Qm9yZGVyIiAke3AuY3VzdG9tTGF5b3V0Py5kZWZhdWx0Qm9yZGVyICE9PSBmYWxzZSA/ICdjaGVja2VkJyA6ICcnfSBzdHlsZT0id2lkdGg6IDE4cHg7IGhlaWdodDogMThweDsgY3Vyc29yOiBwb2ludGVyOyI+CiAgICAgICAgICAgICAgICA8c3Bhbj5Vc2FyIEJvcmRhcyBQYWRyw6NvPC9zcGFuPgogICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0ibWFyZ2luLXRvcDogMC4yNXJlbTsgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOyBmb250LXNpemU6IDAuNzVyZW07Ij4KICAgICAgICAgICAgICAgIFNlIGRlc21hcmNhZG8sIGFwZW5hcyBjw6lsdWxhcyBjb20gYm9yZGVyIGRlZmluaWRvIHRlcsOjbyBib3JkYXMKICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICBgIDogJyd9CiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIiBzdHlsZT0ibWFyZ2luLXRvcDogMS41cmVtOyBwYWRkaW5nLXRvcDogMXJlbTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7Ij4KICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC13ZWlnaHQ6IDUwMDsgbWFyZ2luLWJvdHRvbTogMC43NXJlbTsgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7Ij5UYWJlbGEgWmVicmFkYTwvbGFiZWw+CiAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxcmVtOyI+CiAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAwLjVyZW07IGZvbnQtd2VpZ2h0OiA1MDA7Ij4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJpbnNwLXRhYmxlWmVicmFFbmFibGVkIiAke3AuemVicmFFbmFibGVkID8gJ2NoZWNrZWQnIDogJyd9IHN0eWxlPSJ3aWR0aDogMThweDsgaGVpZ2h0OiAxOHB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICA8c3Bhbj5BdGl2YXIgVGFiZWxhIFplYnJhZGE8L3NwYW4+CiAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9Im1hcmdpbi10b3A6IDAuNXJlbTsgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOyBmb250LXNpemU6IDAuNzVyZW07Ij4KICAgICAgICAgICAgICBBbHRlcm5hIGNvcmVzIGRlIGZ1bmRvIGVudHJlIGxpbmhhcyBwYXJhIGZhY2lsaXRhciBhIGxlaXR1cmEKICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIAogICAgICAgICAgJHtwLnplYnJhRW5hYmxlZCA/IGAKICAgICAgICAgIDxkaXYgaWQ9InRhYmxlWmVicmFPcHRpb25zIiBzdHlsZT0ibWFyZ2luLXRvcDogMXJlbTsgcGFkZGluZzogMXJlbTsgYmFja2dyb3VuZDogdmFyKC0tYmctdGVydGlhcnkpOyBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsiPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxcmVtOyI+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpOyBmb250LXNpemU6IDAuNzVyZW07IG1hcmdpbi1ib3R0b206IDAuNXJlbTsgZGlzcGxheTogYmxvY2s7Ij5Db3IgQmFzZSAobGluaGFzIHBhcmVzKTwvbGFiZWw+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAwLjVyZW07IGFsaWduLWl0ZW1zOiBjZW50ZXI7Ij4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjb2xvciIgaWQ9Imluc3AtdGFibGVaZWJyYUNvbG9yIiB2YWx1ZT0iJHtwLnplYnJhQ29sb3IgfHwgJyNDQ0NDQ0MnfSIgc3R5bGU9IndpZHRoOiA1MHB4OyBoZWlnaHQ6IDMycHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJpbnNwLXRhYmxlWmVicmFDb2xvclRleHQiIHZhbHVlPSIke3AuemVicmFDb2xvciB8fCAnI0NDQ0NDQyd9IiBwbGFjZWhvbGRlcj0iI0NDQ0NDQyIgc3R5bGU9ImZsZXg6IDE7IHBhZGRpbmc6IDAuNXJlbTsgYmFja2dyb3VuZDogdmFyKC0tYmctdGVydGlhcnkpOyBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07IGZvbnQtc2l6ZTogMC44NzVyZW07Ij4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsgZm9udC1zaXplOiAwLjc1cmVtOyI+CiAgICAgICAgICAgICAgICBBIGNvciBkYXMgbGluaGFzIMOtbXBhcmVzIHNlcsOhIGdlcmFkYSBhdXRvbWF0aWNhbWVudGUgY29tIDUwJSBkZSBvcGFjaWRhZGUKICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxcmVtOyI+CiAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDAuNXJlbTsgZm9udC13ZWlnaHQ6IDUwMDsiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iaW5zcC10YWJsZVplYnJhV2l0aExpbmVzIiAke3AuemVicmFXaXRoTGluZXMgIT09IGZhbHNlID8gJ2NoZWNrZWQnIDogJyd9IHN0eWxlPSJ3aWR0aDogMThweDsgaGVpZ2h0OiAxOHB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgIDxzcGFuPk1vc3RyYXIgTGluaGFzIEhvcml6b250YWlzPC9zcGFuPgogICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0ibWFyZ2luLXRvcDogMC41cmVtOyBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7IGZvbnQtc2l6ZTogMC43NXJlbTsiPgogICAgICAgICAgICAgICAgQWRpY2lvbmEgbGluaGFzIGhvcml6b250YWlzIGVudHJlIGFzIGxpbmhhcyBkYSB0YWJlbGEKICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIGAgOiAnJ30KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiIHN0eWxlPSJtYXJnaW4tdG9wOiAxLjVyZW07IHBhZGRpbmctdG9wOiAxcmVtOyBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsiPgogICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXdlaWdodDogNTAwOyBtYXJnaW4tYm90dG9tOiAwLjc1cmVtOyBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsiPkVzdGlsb3MgZGFzIEPDqWx1bGFzPC9sYWJlbD4KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9Im1hcmdpbi1ib3R0b206IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsgZm9udC1zaXplOiAwLjc1cmVtOyI+CiAgICAgICAgICAgIENvbmZpZ3VyZSBjb3JlcyBkZSBmdW5kbyBlIHRleHRvIHBhcmEgYXMgY8OpbHVsYXMgZGEgdGFiZWxhLiBBIHByaW1laXJhIGxpbmhhIMOpIG8gY2FiZcOnYWxoby4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgCiAgICAgICAgICAke0FycmF5LmZyb20oeyBsZW5ndGg6IG51bVJvd3MgfSwgKF8sIHJvd0lkeCkgPT4gewogICAgICAgIGNvbnN0IGlzSGVhZGVyID0gcm93SWR4ID09PSAwOwogICAgICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoOiBudW1Db2xzIH0sIChfLCBjb2xJZHgpID0+IHsKICAgICAgICAgIGNvbnN0IGNlbGwgPSBib2R5W3Jvd0lkeF0/Lltjb2xJZHhdIHx8IHsgY2hpbGRyZW46IFtdIH07CiAgICAgICAgICBjb25zdCBjZWxsRmlsbENvbG9yID0gY2VsbC5maWxsQ29sb3IgfHwgJyc7CiAgICAgICAgICBjb25zdCBjZWxsQ29sb3IgPSBjZWxsLmNvbG9yIHx8ICcnOwogICAgICAgICAgY29uc3QgY2VsbEZpbGxPcGFjaXR5ID0gY2VsbC5maWxsT3BhY2l0eSAhPT0gdW5kZWZpbmVkID8gY2VsbC5maWxsT3BhY2l0eSA6IDE7CgogICAgICAgICAgcmV0dXJuIGAKICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206IDAuNzVyZW07IHBhZGRpbmc6IDAuNzVyZW07IGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07Ij4KICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXdlaWdodDogNTAwOyBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsgbWFyZ2luLWJvdHRvbTogMC41cmVtOyBkaXNwbGF5OiBibG9jazsiPgogICAgICAgICAgICAgICAgICAgICR7aXNIZWFkZXIgPyAn8J+UtScgOiAn4pqqJ30gJHtpc0hlYWRlciA/ICdDYWJlw6dhbGhvJyA6ICdMaW5oYSd9ICR7cm93SWR4ICsgMX0sIENvbHVuYSAke2NvbElkeCArIDF9CiAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOiAwLjVyZW07Ij4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9ImNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7IGZvbnQtc2l6ZTogMC43NXJlbTsiPkNvciBkZSBGdW5kbyAoZmlsbENvbG9yKTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAwLjVyZW07IGFsaWduLWl0ZW1zOiBjZW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjb2xvciIgY2xhc3M9InRhYmxlLWNlbGwtZmlsbC1jb2xvciIgZGF0YS1yb3c9IiR7cm93SWR4fSIgZGF0YS1jb2w9IiR7Y29sSWR4fSIgdmFsdWU9IiR7Y2VsbEZpbGxDb2xvciB8fCAnI2ZmZmZmZid9IiBzdHlsZT0id2lkdGg6IDUwcHg7IGhlaWdodDogMzJweDsgY3Vyc29yOiBwb2ludGVyOyI+CiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9InRhYmxlLWNlbGwtZmlsbC1jb2xvci10ZXh0IiBkYXRhLXJvdz0iJHtyb3dJZHh9IiBkYXRhLWNvbD0iJHtjb2xJZHh9IiB2YWx1ZT0iJHtjZWxsRmlsbENvbG9yIHx8ICcnfSIgcGxhY2Vob2xkZXI9IkRlaXhlIHZhemlvIHBhcmEgdHJhbnNwYXJlbnRlIiBzdHlsZT0iZmxleDogMTsgcGFkZGluZzogMC41cmVtOyBiYWNrZ3JvdW5kOiB2YXIoLS1iZy10ZXJ0aWFyeSk7IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOyBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgZm9udC1zaXplOiAwLjg3NXJlbTsiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206IDAuNXJlbTsiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0iY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsgZm9udC1zaXplOiAwLjc1cmVtOyI+Q29yIGRvIFRleHRvIChjb2xvcik8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogMC41cmVtOyBhbGlnbi1pdGVtczogY2VudGVyOyI+CiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY29sb3IiIGNsYXNzPSJ0YWJsZS1jZWxsLWNvbG9yIiBkYXRhLXJvdz0iJHtyb3dJZHh9IiBkYXRhLWNvbD0iJHtjb2xJZHh9IiB2YWx1ZT0iJHtjZWxsQ29sb3IgfHwgJyMwMDAwMDAnfSIgc3R5bGU9IndpZHRoOiA1MHB4OyBoZWlnaHQ6IDMycHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJ0YWJsZS1jZWxsLWNvbG9yLXRleHQiIGRhdGEtcm93PSIke3Jvd0lkeH0iIGRhdGEtY29sPSIke2NvbElkeH0iIHZhbHVlPSIke2NlbGxDb2xvciB8fCAnJ30iIHBsYWNlaG9sZGVyPSJEZWl4ZSB2YXppbyBwYXJhIGNvciBwYWRyw6NvIiBzdHlsZT0iZmxleDogMTsgcGFkZGluZzogMC41cmVtOyBiYWNrZ3JvdW5kOiB2YXIoLS1iZy10ZXJ0aWFyeSk7IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOyBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgZm9udC1zaXplOiAwLjg3NXJlbTsiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpOyBmb250LXNpemU6IDAuNzVyZW07Ij5PcGFjaWRhZGUgZG8gRnVuZG8gKGZpbGxPcGFjaXR5KTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgY2xhc3M9InRhYmxlLWNlbGwtZmlsbC1vcGFjaXR5IiBkYXRhLXJvdz0iJHtyb3dJZHh9IiBkYXRhLWNvbD0iJHtjb2xJZHh9IiB2YWx1ZT0iJHtjZWxsRmlsbE9wYWNpdHl9IiBtaW49IjAiIG1heD0iMSIgc3RlcD0iMC4xIiBzdHlsZT0id2lkdGg6IDEwMCU7IHBhZGRpbmc6IDAuNXJlbTsgYmFja2dyb3VuZDogdmFyKC0tYmctdGVydGlhcnkpOyBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07IGZvbnQtc2l6ZTogMC44NzVyZW07Ij4KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICBgOwogICAgICAgIH0pLmpvaW4oJycpCiAgICAgIH0pLmpvaW4oJycpfQogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAwLjVyZW07IGZvbnQtd2VpZ2h0OiA1MDA7Ij4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9Imluc3AtdGFibGVEb250QnJlYWtSb3dzIiAke3AuZG9udEJyZWFrUm93cyA/ICdjaGVja2VkJyA6ICcnfSBzdHlsZT0id2lkdGg6IDE4cHg7IGhlaWdodDogMThweDsgY3Vyc29yOiBwb2ludGVyOyI+CiAgICAgICAgICAgICAgICA8c3Bhbj5Ow6NvIFF1ZWJyYXIgTGluaGFzPC9zcGFuPgogICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIj5QcmV2aW5lIHF1ZWJyYSBkZSBsaW5oYXMgZW50cmUgcMOhZ2luYXM8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPk1hbnRlciBjb20gSGVhZGVyIChrZWVwV2l0aEhlYWRlclJvd3MpPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC10YWJsZUtlZXBXaXRoSGVhZGVyUm93cyIgdmFsdWU9IiR7cC5rZWVwV2l0aEhlYWRlclJvd3MgfHwgMH0iIG1pbj0iMCIgbWF4PSIxMCI+CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIj5Ow7ptZXJvIGRlIGxpbmhhcyBwYXJhIG1hbnRlciBjb20gY2FiZcOnYWxobzwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCIgc3R5bGU9Im1hcmdpbi10b3A6IDEuNXJlbTsgcGFkZGluZy10b3A6IDFyZW07IGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOyI+CiAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtd2VpZ2h0OiA1MDA7IG1hcmdpbi1ib3R0b206IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOyI+TGFyZ3VyYXMgZGFzIENvbHVuYXM8L2xhYmVsPgogICAgICAgICAgJHtBcnJheS5mcm9tKHsgbGVuZ3RoOiBudW1Db2xzIH0sIChfLCBpZHgpID0+IHsKICAgICAgICBjb25zdCB3aWR0aHMgPSBwLndpZHRocyB8fCBbXTsKICAgICAgICBjb25zdCB3aWR0aCA9IHdpZHRoc1tpZHhdIHx8ICcqJzsKICAgICAgICBsZXQgd2lkdGhUeXBlID0gJ2F1dG8nOwogICAgICAgIGxldCB3aWR0aFZhbHVlID0gJyc7CgogICAgICAgIGlmICh3aWR0aCA9PT0gJyonIHx8IHdpZHRoID09PSAnYXV0bycpIHsKICAgICAgICAgIHdpZHRoVHlwZSA9ICdhdXRvJzsKICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB3aWR0aCA9PT0gJ251bWJlcicpIHsKICAgICAgICAgIHdpZHRoVHlwZSA9ICdwaXhlbHMnOwogICAgICAgICAgd2lkdGhWYWx1ZSA9IHdpZHRoOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpZHRoID09PSAnc3RyaW5nJyAmJiB3aWR0aC5lbmRzV2l0aCgnJScpKSB7CiAgICAgICAgICB3aWR0aFR5cGUgPSAncGVyY2VudGFnZSc7CiAgICAgICAgICB3aWR0aFZhbHVlID0gd2lkdGgucmVwbGFjZSgnJScsICcnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2lkdGhUeXBlID0gJ2F1dG8nOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGAKICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOiAwLjc1cmVtOyBwYWRkaW5nOiAwLjc1cmVtOyBiYWNrZ3JvdW5kOiB2YXIoLS1iZy10ZXJ0aWFyeSk7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7IGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtOyI+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IG1hcmdpbi1ib3R0b206IDAuNXJlbTsiPgogICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtd2VpZ2h0OiA1MDA7IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOyI+Q29sdW5hICR7aWR4ICsgMX08L2xhYmVsPgogICAgICAgICAgICAgICAgICAke2lkeCA+IDAgPyBgCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4tZGVsZXRlLXRhYmxlLWNvbCIgZGF0YS1jb2wtaW5kZXg9IiR7aWR4fSIgc3R5bGU9InBhZGRpbmc6IDAuMjVyZW0gMC41cmVtOyBiYWNrZ3JvdW5kOiAjZWY0NDQ0OyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsgY3Vyc29yOiBwb2ludGVyOyBmb250LXNpemU6IDAuNzVyZW07Ij7wn5eR77iPPC9idXR0b24+CiAgICAgICAgICAgICAgICAgIGAgOiAnJ30KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDogMTsiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0iY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsiPlRpcG8gZGUgTGFyZ3VyYTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz0idGFibGUtY29sLXdpZHRoLXR5cGUiIGRhdGEtY29sLWluZGV4PSIke2lkeH0iIHN0eWxlPSJ3aWR0aDogMTAwJTsgcGFkZGluZzogMC41cmVtOyBiYWNrZ3JvdW5kOiB2YXIoLS1iZy10ZXJ0aWFyeSk7IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOyBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgZm9udC1zaXplOiAwLjg3NXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iYXV0byIgJHt3aWR0aFR5cGUgPT09ICdhdXRvJyA/ICdzZWxlY3RlZCcgOiAnJ30+QXV0b23DoXRpY28gKCopPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJwaXhlbHMiICR7d2lkdGhUeXBlID09PSAncGl4ZWxzJyA/ICdzZWxlY3RlZCcgOiAnJ30+UGl4ZWxzIChweCk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InBlcmNlbnRhZ2UiICR7d2lkdGhUeXBlID09PSAncGVyY2VudGFnZScgPyAnc2VsZWN0ZWQnIDogJyd9PlBvcmNlbnRhZ2VtICglKTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDogMTsgJHt3aWR0aFR5cGUgPT09ICdhdXRvJyA/ICdkaXNwbGF5OiBub25lOycgOiAnJ30iIGlkPSJ0YWJsZS1jb2wtd2lkdGgtdmFsdWUtJHtpZHh9Ij4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9ImNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7Ij5WYWxvcjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgY2xhc3M9InRhYmxlLWNvbC13aWR0aC12YWx1ZSIgZGF0YS1jb2wtaW5kZXg9IiR7aWR4fSIgdmFsdWU9IiR7d2lkdGhWYWx1ZX0iIG1pbj0iMCIgc3RlcD0iJHt3aWR0aFR5cGUgPT09ICdwZXJjZW50YWdlJyA/ICcxJyA6ICcxJ30iIHBsYWNlaG9sZGVyPSIke3dpZHRoVHlwZSA9PT0gJ3BlcmNlbnRhZ2UnID8gJzUwJyA6ICcxMDAnfSIgc3R5bGU9IndpZHRoOiAxMDAlOyBwYWRkaW5nOiAwLjVyZW07IGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7IGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtOyBmb250LXNpemU6IDAuODc1cmVtOyI+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgIH0pLmpvaW4oJycpfQogICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0ibWFyZ2luLXRvcDogMC41cmVtOyBmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsiPgogICAgICAgICAgICA8c3Ryb25nIHN0eWxlPSJjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsiPlRpcG9zIGRlIGxhcmd1cmE6PC9zdHJvbmc+PGJyPgogICAgICAgICAgICDigKIgQXV0b23DoXRpY28gKCopOiBkaXZpZGUgbyBlc3Bhw6dvIGlndWFsbWVudGUgZW50cmUgYXMgY29sdW5hczxicj4KICAgICAgICAgICAg4oCiIFBpeGVsczogbGFyZ3VyYSBmaXhhIGVtIHBvbnRvcyAoZXg6IDEwMCwgMjAwKTxicj4KICAgICAgICAgICAg4oCiIFBvcmNlbnRhZ2VtOiBsYXJndXJhIGVtICUgZG8gZXNwYcOnbyBkaXNwb27DrXZlbCAoZXg6IDMwLCA1MCkKICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCIgc3R5bGU9Im1hcmdpbi10b3A6IDEuNXJlbTsgcGFkZGluZy10b3A6IDFyZW07IGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOyI+CiAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtd2VpZ2h0OiA1MDA7IG1hcmdpbi1ib3R0b206IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOyI+QWx0dXJhIGRhcyBMaW5oYXMgKGhlaWdodHMpPC9sYWJlbD4KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9Im1hcmdpbi1ib3R0b206IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsgZm9udC1zaXplOiAwLjc1cmVtOyI+CiAgICAgICAgICAgIERlZmluYSBhIGFsdHVyYSBkYXMgbGluaGFzIGRhIHRhYmVsYS4gUG9kZSBzZXIgdW0gdmFsb3IgZml4byBwYXJhIHRvZGFzLCB1bSBhcnJheSBwb3IgbGluaGEsIG91IHVtYSBmdW7Dp8Ojby4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDogMTsiPgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5UaXBvPC9sYWJlbD4KICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJpbnNwLXRhYmxlSGVpZ2h0c1R5cGUiPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibm9uZSIgJHshcC5oZWlnaHRzID8gJ3NlbGVjdGVkJyA6ICcnfT5Ow6NvIERlZmluaXI8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImZpeGVkIiAke3AuaGVpZ2h0cyAmJiB0eXBlb2YgcC5oZWlnaHRzID09PSAnbnVtYmVyJyA/ICdzZWxlY3RlZCcgOiAnJ30+VmFsb3IgRml4byAodG9kYXMgYXMgbGluaGFzKTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iYXJyYXkiICR7cC5oZWlnaHRzICYmIEFycmF5LmlzQXJyYXkocC5oZWlnaHRzKSA/ICdzZWxlY3RlZCcgOiAnJ30+QXJyYXkgKHBvciBsaW5oYSk8L29wdGlvbj4KICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6IDE7ICR7IXAuaGVpZ2h0cyB8fCB0eXBlb2YgcC5oZWlnaHRzICE9PSAnbnVtYmVyJyA/ICdkaXNwbGF5OiBub25lOycgOiAnJ30iIGlkPSJ0YWJsZS1oZWlnaHRzLWZpeGVkIj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+QWx0dXJhIEZpeGEgKHB4KTwvbGFiZWw+CiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtdGFibGVIZWlnaHRzRml4ZWQiIHZhbHVlPSIke3AuaGVpZ2h0cyAmJiB0eXBlb2YgcC5oZWlnaHRzID09PSAnbnVtYmVyJyA/IHAuaGVpZ2h0cyA6IDQwfSIgbWluPSIwIiBzdGVwPSIxIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICR7cC5oZWlnaHRzICYmIEFycmF5LmlzQXJyYXkocC5oZWlnaHRzKSA/IGAKICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDFyZW07Ij4KICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpOyBtYXJnaW4tYm90dG9tOiAwLjVyZW07IGRpc3BsYXk6IGJsb2NrOyI+QWx0dXJhcyBwb3IgTGluaGE8L2xhYmVsPgogICAgICAgICAgICAke0FycmF5LmZyb20oeyBsZW5ndGg6IG51bVJvd3MgfSwgKF8sIGlkeCkgPT4gewogICAgICAgIGNvbnN0IGhlaWdodCA9IHAuaGVpZ2h0c1tpZHhdIHx8IDQwOwogICAgICAgIHJldHVybiBgCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOiAwLjVyZW07Ij4KICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpOyBmb250LXNpemU6IDAuNzVyZW07Ij5MaW5oYSAke2lkeCArIDF9PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgY2xhc3M9InRhYmxlLXJvdy1oZWlnaHQiIGRhdGEtcm93PSIke2lkeH0iIHZhbHVlPSIke2hlaWdodH0iIG1pbj0iMCIgc3RlcD0iMSIgc3R5bGU9IndpZHRoOiAxMDAlOyBwYWRkaW5nOiAwLjVyZW07IGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7IGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtOyBmb250LXNpemU6IDAuODc1cmVtOyI+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICBgOwogICAgICB9KS5qb2luKCcnKX0KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgYCA6ICcnfQogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCIgc3R5bGU9Im1hcmdpbi10b3A6IDEuNXJlbTsgcGFkZGluZy10b3A6IDFyZW07IGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOyI+CiAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtd2VpZ2h0OiA1MDA7IG1hcmdpbi1ib3R0b206IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOyI+UHJvcHJpZWRhZGVzIEF2YW7Dp2FkYXMgZGFzIEPDqWx1bGFzPC9sYWJlbD4KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9Im1hcmdpbi1ib3R0b206IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsgZm9udC1zaXplOiAwLjc1cmVtOyI+CiAgICAgICAgICAgIENvbmZpZ3VyZSByb3dTcGFuLCBjb2xTcGFuLCBib3JkZXIgZSBib3JkZXJDb2xvciBwYXJhIGPDqWx1bGFzIGluZGl2aWR1YWlzLgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICAKICAgICAgICAgICR7QXJyYXkuZnJvbSh7IGxlbmd0aDogbnVtUm93cyB9LCAoXywgcm93SWR4KSA9PiB7CiAgICAgICAgY29uc3QgaXNIZWFkZXIgPSByb3dJZHggPT09IDA7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IG51bUNvbHMgfSwgKF8sIGNvbElkeCkgPT4gewogICAgICAgICAgY29uc3QgY2VsbCA9IGJvZHlbcm93SWR4XT8uW2NvbElkeF0gfHwgeyBjaGlsZHJlbjogW10gfTsKICAgICAgICAgIGNvbnN0IHJvd1NwYW4gPSBjZWxsLnJvd1NwYW4gfHwgMTsKICAgICAgICAgIGNvbnN0IGNvbFNwYW4gPSBjZWxsLmNvbFNwYW4gfHwgMTsKICAgICAgICAgIGNvbnN0IGJvcmRlciA9IGNlbGwuYm9yZGVyIHx8IFt0cnVlLCB0cnVlLCB0cnVlLCB0cnVlXTsKICAgICAgICAgIGNvbnN0IGJvcmRlckNvbG9yID0gY2VsbC5ib3JkZXJDb2xvciB8fCBbJycsICcnLCAnJywgJyddOwoKICAgICAgICAgIHJldHVybiBgCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxcmVtOyBwYWRkaW5nOiAwLjc1cmVtOyBiYWNrZ3JvdW5kOiB2YXIoLS1iZy10ZXJ0aWFyeSk7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7IGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtOyI+CiAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC13ZWlnaHQ6IDUwMDsgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7IG1hcmdpbi1ib3R0b206IDAuNzVyZW07IGRpc3BsYXk6IGJsb2NrOyI+CiAgICAgICAgICAgICAgICAgICAgJHtpc0hlYWRlciA/ICfwn5S1JyA6ICfimqonfSAke2lzSGVhZGVyID8gJ0NhYmXDp2FsaG8nIDogJ0xpbmhhJ30gJHtyb3dJZHggKyAxfSwgQ29sdW5hICR7Y29sSWR4ICsgMX0KICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyIgc3R5bGU9Im1hcmdpbi1ib3R0b206IDAuNzVyZW07Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OiAxOyI+CiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9ImNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7IGZvbnQtc2l6ZTogMC43NXJlbTsiPnJvd1NwYW48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgY2xhc3M9InRhYmxlLWNlbGwtcm93c3BhbiIgZGF0YS1yb3c9IiR7cm93SWR4fSIgZGF0YS1jb2w9IiR7Y29sSWR4fSIgdmFsdWU9IiR7cm93U3Bhbn0iIG1pbj0iMSIgbWF4PSIxMCIgc3R5bGU9IndpZHRoOiAxMDAlOyBwYWRkaW5nOiAwLjVyZW07IGJhY2tncm91bmQ6IHZhcigtLWJnLXRlcnRpYXJ5KTsgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7IGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtOyBmb250LXNpemU6IDAuODc1cmVtOyI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6IDE7Ij4KICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0iY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsgZm9udC1zaXplOiAwLjc1cmVtOyI+Y29sU3BhbjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBjbGFzcz0idGFibGUtY2VsbC1jb2xzcGFuIiBkYXRhLXJvdz0iJHtyb3dJZHh9IiBkYXRhLWNvbD0iJHtjb2xJZHh9IiB2YWx1ZT0iJHtjb2xTcGFufSIgbWluPSIxIiBtYXg9IjEwIiBzdHlsZT0id2lkdGg6IDEwMCU7IHBhZGRpbmc6IDAuNXJlbTsgYmFja2dyb3VuZDogdmFyKC0tYmctdGVydGlhcnkpOyBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07IGZvbnQtc2l6ZTogMC44NzVyZW07Ij4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMC43NXJlbTsiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0iY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsgZm9udC1zaXplOiAwLjc1cmVtOyBtYXJnaW4tYm90dG9tOiAwLjVyZW07IGRpc3BsYXk6IGJsb2NrOyI+Qm9yZGFzIChib3JkZXIpIC0gW2VzcXVlcmRhLCB0b3BvLCBkaXJlaXRhLCBpbmZlcmlvcl08L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OiAxOyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0iY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsgZm9udC1zaXplOiAwLjdyZW07Ij5Fc3F1ZXJkYTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2xhc3M9InRhYmxlLWNlbGwtYm9yZGVyIiBkYXRhLXJvdz0iJHtyb3dJZHh9IiBkYXRhLWNvbD0iJHtjb2xJZHh9IiBkYXRhLXNpZGU9IjAiICR7Ym9yZGVyWzBdID8gJ2NoZWNrZWQnIDogJyd9IHN0eWxlPSJ3aWR0aDogMTAwJTsiPgogICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OiAxOyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0iY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsgZm9udC1zaXplOiAwLjdyZW07Ij5Ub3BvPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBjbGFzcz0idGFibGUtY2VsbC1ib3JkZXIiIGRhdGEtcm93PSIke3Jvd0lkeH0iIGRhdGEtY29sPSIke2NvbElkeH0iIGRhdGEtc2lkZT0iMSIgJHtib3JkZXJbMV0gPyAnY2hlY2tlZCcgOiAnJ30gc3R5bGU9IndpZHRoOiAxMDAlOyI+CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6IDE7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpOyBmb250LXNpemU6IDAuN3JlbTsiPkRpcmVpdGE8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGNsYXNzPSJ0YWJsZS1jZWxsLWJvcmRlciIgZGF0YS1yb3c9IiR7cm93SWR4fSIgZGF0YS1jb2w9IiR7Y29sSWR4fSIgZGF0YS1zaWRlPSIyIiAke2JvcmRlclsyXSA/ICdjaGVja2VkJyA6ICcnfSBzdHlsZT0id2lkdGg6IDEwMCU7Ij4KICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDogMTsiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9ImNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7IGZvbnQtc2l6ZTogMC43cmVtOyI+SW5mZXJpb3I8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGNsYXNzPSJ0YWJsZS1jZWxsLWJvcmRlciIgZGF0YS1yb3c9IiR7cm93SWR4fSIgZGF0YS1jb2w9IiR7Y29sSWR4fSIgZGF0YS1zaWRlPSIzIiAke2JvcmRlclszXSA/ICdjaGVja2VkJyA6ICcnfSBzdHlsZT0id2lkdGg6IDEwMCU7Ij4KICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpOyBmb250LXNpemU6IDAuNzVyZW07IG1hcmdpbi1ib3R0b206IDAuNXJlbTsgZGlzcGxheTogYmxvY2s7Ij5Db3JlcyBkYXMgQm9yZGFzIChib3JkZXJDb2xvcikgLSBbZXNxdWVyZGEsIHRvcG8sIGRpcmVpdGEsIGluZmVyaW9yXTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6IDE7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpOyBmb250LXNpemU6IDAuN3JlbTsiPkVzcXVlcmRhPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNvbG9yIiBjbGFzcz0idGFibGUtY2VsbC1ib3JkZXItY29sb3IiIGRhdGEtcm93PSIke3Jvd0lkeH0iIGRhdGEtY29sPSIke2NvbElkeH0iIGRhdGEtc2lkZT0iMCIgdmFsdWU9IiR7Ym9yZGVyQ29sb3JbMF0gfHwgJyMwMDAwMDAnfSIgc3R5bGU9IndpZHRoOiAxMDAlOyBoZWlnaHQ6IDMycHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OiAxOyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0iY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsgZm9udC1zaXplOiAwLjdyZW07Ij5Ub3BvPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNvbG9yIiBjbGFzcz0idGFibGUtY2VsbC1ib3JkZXItY29sb3IiIGRhdGEtcm93PSIke3Jvd0lkeH0iIGRhdGEtY29sPSIke2NvbElkeH0iIGRhdGEtc2lkZT0iMSIgdmFsdWU9IiR7Ym9yZGVyQ29sb3JbMV0gfHwgJyMwMDAwMDAnfSIgc3R5bGU9IndpZHRoOiAxMDAlOyBoZWlnaHQ6IDMycHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OiAxOyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0iY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsgZm9udC1zaXplOiAwLjdyZW07Ij5EaXJlaXRhPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNvbG9yIiBjbGFzcz0idGFibGUtY2VsbC1ib3JkZXItY29sb3IiIGRhdGEtcm93PSIke3Jvd0lkeH0iIGRhdGEtY29sPSIke2NvbElkeH0iIGRhdGEtc2lkZT0iMiIgdmFsdWU9IiR7Ym9yZGVyQ29sb3JbMl0gfHwgJyMwMDAwMDAnfSIgc3R5bGU9IndpZHRoOiAxMDAlOyBoZWlnaHQ6IDMycHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OiAxOyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0iY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsgZm9udC1zaXplOiAwLjdyZW07Ij5JbmZlcmlvcjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjb2xvciIgY2xhc3M9InRhYmxlLWNlbGwtYm9yZGVyLWNvbG9yIiBkYXRhLXJvdz0iJHtyb3dJZHh9IiBkYXRhLWNvbD0iJHtjb2xJZHh9IiBkYXRhLXNpZGU9IjMiIHZhbHVlPSIke2JvcmRlckNvbG9yWzNdIHx8ICcjMDAwMDAwJ30iIHN0eWxlPSJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAzMnB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIGA7CiAgICAgICAgfSkuam9pbignJykKICAgICAgfSkuam9pbignJyl9CiAgICAgICAgPC9kaXY+CiAgICAgICAgJHtyZW5kZXJNYXJnaW5TZWN0aW9uKGVsZW1lbnQpfQogICAgICBgOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlckluc3BlY3RvckltYWdlKGVsZW1lbnQpIHsKICAgICAgY29uc3QgcCA9IGVsZW1lbnQucHJvcGVydGllcyB8fCB7fTsKICAgICAgY29uc3QgdXNlRml0ID0gcC5maXQgIT09IHVuZGVmaW5lZDsKICAgICAgY29uc3QgdXNlQ292ZXIgPSBwLmNvdmVyICE9PSB1bmRlZmluZWQ7CiAgICAgIGNvbnN0IHVzZUFic29sdXRlUG9zaXRpb24gPSBwLmFic29sdXRlUG9zaXRpb24gIT09IHVuZGVmaW5lZDsKICAgICAgY29uc3QgdXNlUmVsYXRpdmVQb3NpdGlvbiA9IHAucmVsYXRpdmVQb3NpdGlvbiAhPT0gdW5kZWZpbmVkOwogICAgICByZXR1cm4gYAogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWw+VVJMIGRhIEltYWdlbTwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Imluc3AtaW1hZ2VVcmwiIHZhbHVlPSIke2VzY2FwZUh0bWwocC51cmwgfHwgJycpfSIgcGxhY2Vob2xkZXI9Imh0dHBzOi8vZXhlbXBsby5jb20vaW1hZ2VtLmpwZyI+CiAgICAgICAgICA8ZGl2IGlkPSJpbnNwLWltYWdlVXJsRXJyb3IiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBtYXJnaW4tdG9wOiAwLjVyZW07IHBhZGRpbmc6IDAuNXJlbTsgYmFja2dyb3VuZDogI2ZlZTJlMjsgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCAjZWY0NDQ0OyBib3JkZXItcmFkaXVzOiAwLjI1cmVtOyBjb2xvcjogIzk5MWIxYjsgZm9udC1zaXplOiAwLjg3NXJlbTsiPjwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIj5Db2xlIGEgVVJMIGNvbXBsZXRhIGRhIGltYWdlbSAoaHR0cDovLywgaHR0cHM6Ly8gb3UgZGF0YTppbWFnZSk8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPk1vZG8gZGUgRGltZW5zaW9uYW1lbnRvPC9sYWJlbD4KICAgICAgICAgIDxzZWxlY3QgaWQ9Imluc3AtaW1hZ2VTaXplTW9kZSI+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IndpZHRoSGVpZ2h0IiAkeyF1c2VGaXQgJiYgIXVzZUNvdmVyID8gJ3NlbGVjdGVkJyA6ICcnfT5MYXJndXJhIGUgQWx0dXJhPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImZpdCIgJHt1c2VGaXQgPyAnc2VsZWN0ZWQnIDogJyd9PkZpdCAoQWp1c3RhciBtYW50ZW5kbyBwcm9wb3LDp8Ojbyk8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iY292ZXIiICR7dXNlQ292ZXIgPyAnc2VsZWN0ZWQnIDogJyd9PkNvdmVyIChQcmVlbmNoZXIgw6FyZWEpPC9vcHRpb24+CiAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9ImltYWdlV2lkdGhIZWlnaHRPcHRpb25zIiBzdHlsZT0iJHt1c2VGaXQgfHwgdXNlQ292ZXIgPyAnZGlzcGxheTogbm9uZTsnIDogJyd9Ij4KICAgICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5MYXJndXJhPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWltYWdlV2lkdGgiIHZhbHVlPSIke3Aud2lkdGggfHwgJyd9IiBtaW49IjEwIiBtYXg9IjUwMCIgcGxhY2Vob2xkZXI9IkF1dG8iPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+QWx0dXJhPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWltYWdlSGVpZ2h0IiB2YWx1ZT0iJHtwLmhlaWdodCB8fCAnJ30iIG1pbj0iMTAiIG1heD0iNTAwIiBwbGFjZWhvbGRlcj0iQXV0byI+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBpZD0iaW1hZ2VGaXRPcHRpb25zIiBzdHlsZT0iJHshdXNlRml0ID8gJ2Rpc3BsYXk6IG5vbmU7JyA6ICcnfSI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+Rml0IFdpZHRoPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWltYWdlRml0V2lkdGgiIHZhbHVlPSIke0FycmF5LmlzQXJyYXkocC5maXQpID8gcC5maXRbMF0gOiAocC5maXQgfHwgMTAwKX0iIG1pbj0iMTAiIG1heD0iNTAwIj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkZpdCBIZWlnaHQ8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtaW1hZ2VGaXRIZWlnaHQiIHZhbHVlPSIke0FycmF5LmlzQXJyYXkocC5maXQpID8gcC5maXRbMV0gOiAocC5maXQgfHwgMTAwKX0iIG1pbj0iMTAiIG1heD0iNTAwIj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9Im1hcmdpbi10b3A6IDAuMjVyZW07IGZvbnQtc2l6ZTogMC43NXJlbTsgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOyI+QWp1c3RhIGEgaW1hZ2VtIG1hbnRlbmRvIGEgcHJvcG9yw6fDo288L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9ImltYWdlQ292ZXJPcHRpb25zIiBzdHlsZT0iJHshdXNlQ292ZXIgPyAnZGlzcGxheTogbm9uZTsnIDogJyd9Ij4KICAgICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5Db3ZlciBXaWR0aDwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1pbWFnZUNvdmVyV2lkdGgiIHZhbHVlPSIke3AuY292ZXI/LndpZHRoIHx8IDMwMH0iIG1pbj0iMTAiIG1heD0iNTAwIj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkNvdmVyIEhlaWdodDwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1pbWFnZUNvdmVySGVpZ2h0IiB2YWx1ZT0iJHtwLmNvdmVyPy5oZWlnaHQgfHwgMTUwfSIgbWluPSIxMCIgbWF4PSI1MDAiPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkNvdmVyIEFsaWduPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9Imluc3AtaW1hZ2VDb3ZlckFsaWduIj4KICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGVmdCIgJHtwLmNvdmVyPy5hbGlnbiA9PT0gJ2xlZnQnID8gJ3NlbGVjdGVkJyA6ICcnfT5Fc3F1ZXJkYTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjZW50ZXIiICR7cC5jb3Zlcj8uYWxpZ24gPT09ICdjZW50ZXInIHx8ICFwLmNvdmVyPy5hbGlnbiA/ICdzZWxlY3RlZCcgOiAnJ30+Q2VudHJvPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InJpZ2h0IiAke3AuY292ZXI/LmFsaWduID09PSAncmlnaHQnID8gJ3NlbGVjdGVkJyA6ICcnfT5EaXJlaXRhPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkNvdmVyIFZhbGlnbjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJpbnNwLWltYWdlQ292ZXJWYWxpZ24iPgogICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0b3AiICR7cC5jb3Zlcj8udmFsaWduID09PSAndG9wJyA/ICdzZWxlY3RlZCcgOiAnJ30+VG9wbzwvb3B0aW9uPgogICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjZW50ZXIiICR7cC5jb3Zlcj8udmFsaWduID09PSAnY2VudGVyJyB8fCAhcC5jb3Zlcj8udmFsaWduID8gJ3NlbGVjdGVkJyA6ICcnfT5DZW50cm88L29wdGlvbj4KICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iYm90dG9tIiAke3AuY292ZXI/LnZhbGlnbiA9PT0gJ2JvdHRvbScgPyAnc2VsZWN0ZWQnIDogJyd9PkluZmVyaW9yPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkJvcmRlciBSYWRpdXM8L2xhYmVsPgogICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtaW1hZ2VCb3JkZXJSYWRpdXMiIHZhbHVlPSIke3AuYm9yZGVyUmFkaXVzIHx8IDB9IiBtaW49IjAiIG1heD0iMTAwMCIgc3RlcD0iMSIgcGxhY2Vob2xkZXI9IjAiPgogICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0ibWFyZ2luLXRvcDogMC4yNXJlbTsgZm9udC1zaXplOiAwLjc1cmVtOyBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7Ij5BcGVuYXMgbyBuw7ptZXJvIChleDogMzAsIDUwLCAxMDApLiAwID0gc2VtIGFycmVkb25kYW1lbnRvPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5PcGFjaWRhZGUgKDAuMCAtIDEuMCk8L2xhYmVsPgogICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtaW1hZ2VPcGFjaXR5IiB2YWx1ZT0iJHtwLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IHAub3BhY2l0eSA6ICcnfSIgcGxhY2Vob2xkZXI9IjEuMCIgbWluPSIwIiBtYXg9IjEiIHN0ZXA9IjAuMSI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjI1cmVtOyBmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsiPjEuMCA9IHRvdGFsbWVudGUgb3BhY28sIDAuMCA9IHRyYW5zcGFyZW50ZTwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+QWxpbmhhbWVudG88L2xhYmVsPgogICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcC1pbWFnZUFsaWdubWVudCI+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImxlZnQiICR7cC5hbGlnbm1lbnQgPT09ICdsZWZ0JyA/ICdzZWxlY3RlZCcgOiAnJ30+RXNxdWVyZGE8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iY2VudGVyIiAke3AuYWxpZ25tZW50ID09PSAnY2VudGVyJyA/ICdzZWxlY3RlZCcgOiAnJ30+Q2VudHJvPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InJpZ2h0IiAke3AuYWxpZ25tZW50ID09PSAncmlnaHQnID8gJ3NlbGVjdGVkJyA6ICcnfT5EaXJlaXRhPC9vcHRpb24+CiAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPlRpcG8gZGUgUG9zaWNpb25hbWVudG88L2xhYmVsPgogICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcC1pbWFnZVBvc2l0aW9uVHlwZSI+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Im5vbmUiICR7IXVzZUFic29sdXRlUG9zaXRpb24gJiYgIXVzZVJlbGF0aXZlUG9zaXRpb24gPyAnc2VsZWN0ZWQnIDogJyd9Pk5vcm1hbCAoZmx1eG8gZG8gZG9jdW1lbnRvKTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJhYnNvbHV0ZSIgJHt1c2VBYnNvbHV0ZVBvc2l0aW9uID8gJ3NlbGVjdGVkJyA6ICcnfT5Qb3Npw6fDo28gQWJzb2x1dGE8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0icmVsYXRpdmUiICR7dXNlUmVsYXRpdmVQb3NpdGlvbiA/ICdzZWxlY3RlZCcgOiAnJ30+UG9zacOnw6NvIFJlbGF0aXZhPC9vcHRpb24+CiAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJpbWFnZUFic29sdXRlUG9zaXRpb25PcHRpb25zIiBzdHlsZT0iJHshdXNlQWJzb2x1dGVQb3NpdGlvbiA/ICdkaXNwbGF5OiBub25lOycgOiAnJ30iPgogICAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPlggKGFic29sdXRvKTwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1pbWFnZUFic29sdXRlWCIgdmFsdWU9IiR7cC5hYnNvbHV0ZVBvc2l0aW9uPy54IHx8IDB9IiBtaW49IjAiIHN0ZXA9IjEiPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+WSAoYWJzb2x1dG8pPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWltYWdlQWJzb2x1dGVZIiB2YWx1ZT0iJHtwLmFic29sdXRlUG9zaXRpb24/LnkgfHwgMH0iIG1pbj0iMCIgc3RlcD0iMSI+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjI1cmVtOyBmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsiPlBvc2nDp8OjbyBlbSBwaXhlbHMgYSBwYXJ0aXIgZG8gY2FudG8gc3VwZXJpb3IgZXNxdWVyZG8gZGEgcMOhZ2luYTwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBpZD0iaW1hZ2VSZWxhdGl2ZVBvc2l0aW9uT3B0aW9ucyIgc3R5bGU9IiR7IXVzZVJlbGF0aXZlUG9zaXRpb24gPyAnZGlzcGxheTogbm9uZTsnIDogJyd9Ij4KICAgICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5YIChyZWxhdGl2byk8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtaW1hZ2VSZWxhdGl2ZVgiIHZhbHVlPSIke3AucmVsYXRpdmVQb3NpdGlvbj8ueCB8fCAwfSIgc3RlcD0iMSI+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5ZIChyZWxhdGl2byk8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtaW1hZ2VSZWxhdGl2ZVkiIHZhbHVlPSIke3AucmVsYXRpdmVQb3NpdGlvbj8ueSB8fCAwfSIgc3RlcD0iMSI+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjI1cmVtOyBmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsiPkRlc2xvY2FtZW50byByZWxhdGl2byDDoCBwb3Npw6fDo28gYXR1YWwgbm8gZmx1eG8gZG8gZG9jdW1lbnRvPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICAke3JlbmRlck1hcmdpblNlY3Rpb24oZWxlbWVudCl9CiAgICAgIGA7CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVySW5zcGVjdG9yTWFyZ2luKGVsZW1lbnQpIHsKICAgICAgY29uc3QgcCA9IGVsZW1lbnQucHJvcGVydGllcyB8fCB7fTsKICAgICAgLy8gU3Vwb3J0YXIgdGFudG8gbyBmb3JtYXRvIGFudGlnbyAoc2l6ZSkgcXVhbnRvIG8gbm92byAobWFyZ2luIGFycmF5KQogICAgICBjb25zdCBtYXJnaW5BcnJheSA9IHAubWFyZ2luIHx8IChwLnNpemUgPyBbMCwgcC5zaXplLCAwLCAwXSA6IFswLCAyMCwgMCwgMF0pOwogICAgICByZXR1cm4gYAogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWw+TWFyZ2VucyBJbmRpdmlkdWFpcyAocHgpPC9sYWJlbD4KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9Im1hcmdpbi1ib3R0b206IDAuNXJlbTsiPkNvbmZpZ3VyZSBhcyBtYXJnZW5zOiBbRXNxdWVyZGEsIFRvcG8sIERpcmVpdGEsIEJhaXhvXTwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+RXNxdWVyZGE8L2xhYmVsPgogICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLW1hcmdpbkxlZnQiIHZhbHVlPSIke21hcmdpbkFycmF5WzBdIHx8IDB9IiBtaW49IjAiIHN0ZXA9IjEiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+VG9wbzwvbGFiZWw+CiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtbWFyZ2luVG9wIiB2YWx1ZT0iJHttYXJnaW5BcnJheVsxXSB8fCAyMH0iIG1pbj0iMCIgc3RlcD0iMSI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5EaXJlaXRhPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1tYXJnaW5SaWdodCIgdmFsdWU9IiR7bWFyZ2luQXJyYXlbMl0gfHwgMH0iIG1pbj0iMCIgc3RlcD0iMSI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5CYWl4bzwvbGFiZWw+CiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtbWFyZ2luQm90dG9tIiB2YWx1ZT0iJHttYXJnaW5BcnJheVszXSB8fCAwfSIgbWluPSIwIiBzdGVwPSIxIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9Im1hcmdpbi10b3A6IDAuNXJlbTsgZm9udC1zaXplOiAwLjc1cmVtOyBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7Ij5Gb3JtYXRvIFBERk1ha2U6IFtsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b21dPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgYDsKICAgIH0KCiAgICAvLyBGdW7Dp8OjbyBhdXhpbGlhciBwYXJhIHJlbmRlcml6YXIgc2XDp8OjbyBkZSBtYXJnZW5zIChyZXV0aWxpesOhdmVsIHBhcmEgdG9kb3Mgb3MgZWxlbWVudG9zKQogICAgZnVuY3Rpb24gcmVuZGVyTWFyZ2luU2VjdGlvbihlbGVtZW50KSB7CiAgICAgIGNvbnN0IHAgPSBlbGVtZW50LnByb3BlcnRpZXMgfHwge307CiAgICAgIGNvbnN0IG1hcmdpbkFycmF5ID0gcC5tYXJnaW4gfHwgWzAsIDAsIDAsIDBdOwogICAgICByZXR1cm4gYAogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCIgc3R5bGU9Im1hcmdpbi10b3A6IDFyZW07IHBhZGRpbmctdG9wOiAxcmVtOyBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTsiPgogICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXdlaWdodDogNTAwOyBtYXJnaW4tYm90dG9tOiAwLjVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOyI+TWFyZ2VucyAocHgpPC9sYWJlbD4KICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkVzcXVlcmRhPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBjbGFzcz0ibWFyZ2luLWlucHV0IiBkYXRhLXNpZGU9IjAiIHZhbHVlPSIke21hcmdpbkFycmF5WzBdIHx8IDB9IiBtaW49IjAiIHN0ZXA9IjEiIHBsYWNlaG9sZGVyPSIwIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPlRvcG88L2xhYmVsPgogICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGNsYXNzPSJtYXJnaW4taW5wdXQiIGRhdGEtc2lkZT0iMSIgdmFsdWU9IiR7bWFyZ2luQXJyYXlbMV0gfHwgMH0iIG1pbj0iMCIgc3RlcD0iMSIgcGxhY2Vob2xkZXI9IjAiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+RGlyZWl0YTwvbGFiZWw+CiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgY2xhc3M9Im1hcmdpbi1pbnB1dCIgZGF0YS1zaWRlPSIyIiB2YWx1ZT0iJHttYXJnaW5BcnJheVsyXSB8fCAwfSIgbWluPSIwIiBzdGVwPSIxIiBwbGFjZWhvbGRlcj0iMCI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5CYWl4bzwvbGFiZWw+CiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgY2xhc3M9Im1hcmdpbi1pbnB1dCIgZGF0YS1zaWRlPSIzIiB2YWx1ZT0iJHttYXJnaW5BcnJheVszXSB8fCAwfSIgbWluPSIwIiBzdGVwPSIxIiBwbGFjZWhvbGRlcj0iMCI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjVyZW07IGZvbnQtc2l6ZTogMC43NXJlbTsgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOyI+Rm9ybWF0bzogW2xlZnQsIHRvcCwgcmlnaHQsIGJvdHRvbV08L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgYDsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJJbnNwZWN0b3JQYWdlQnJlYWsoZWxlbWVudCkgewogICAgICByZXR1cm4gYAogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiPlF1ZWJyYSBkZSBww6FnaW5hIC0gbsOjbyBow6EgcHJvcHJpZWRhZGVzIGNvbmZpZ3Vyw6F2ZWlzIHBhcmEgZXN0ZSBlbGVtZW50by48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICBgOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlckluc3BlY3RvclFSKGVsZW1lbnQpIHsKICAgICAgY29uc3QgcCA9IGVsZW1lbnQucHJvcGVydGllcyB8fCB7fTsKICAgICAgcmV0dXJuIGAKICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsPlRleHRvL0RhZG9zIHBhcmEgUVIgQ29kZTwvbGFiZWw+CiAgICAgICAgICA8dGV4dGFyZWEgaWQ9Imluc3AtcXJUZXh0IiBwbGFjZWhvbGRlcj0iVVJMLCB0ZXh0byBvdSBkYWRvcyBwYXJhIGNvZGlmaWNhciIgc3R5bGU9Im1pbi1oZWlnaHQ6IDYwcHg7Ij4ke2VzY2FwZUh0bWwocC50ZXh0IHx8ICcnKX08L3RleHRhcmVhPgogICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIj5Qb2RlIHNlciB1bWEgVVJMLCB0ZXh0byBvdSBxdWFscXVlciBkYWRvIHF1ZSB2b2PDqiBxdWVpcmEgY29kaWZpY2FyIG5vIFFSIENvZGU8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+VGFtYW5obyAoZml0KTwvbGFiZWw+CiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtcXJGaXQiIHZhbHVlPSIke3AuZml0IHx8IDEwMH0iIG1pbj0iNTAiIG1heD0iNTAwIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPk7DrXZlbCBkZSBDb3JyZcOnw6NvPC9sYWJlbD4KICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJpbnNwLXFyRWNjTGV2ZWwiPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTCIgJHtwLmVjY0xldmVsID09PSAnTCcgPyAnc2VsZWN0ZWQnIDogJyd9PkwgKEJhaXhvIC0gNyUpPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJNIiAke3AuZWNjTGV2ZWwgPT09ICdNJyB8fCAhcC5lY2NMZXZlbCA/ICdzZWxlY3RlZCcgOiAnJ30+TSAoTcOpZGlvIC0gMTUlKTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUSIgJHtwLmVjY0xldmVsID09PSAnUScgPyAnc2VsZWN0ZWQnIDogJyd9PlEgKEFsdG8gLSAyNSUpPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJIIiAke3AuZWNjTGV2ZWwgPT09ICdIJyA/ICdzZWxlY3RlZCcgOiAnJ30+SCAoTXVpdG8gQWx0byAtIDMwJSk8L29wdGlvbj4KICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+Q29yIGRvIFFSIENvZGU8L2xhYmVsPgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogMC41cmVtOyBhbGlnbi1pdGVtczogY2VudGVyOyI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY29sb3IiIGlkPSJpbnNwLXFyRm9yZWdyb3VuZCIgdmFsdWU9IiR7cC5mb3JlZ3JvdW5kIHx8ICcjMDAwMDAwJ30iIHN0eWxlPSJ3aWR0aDogNTBweDsgaGVpZ2h0OiAzMnB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5zcC1xckZvcmVncm91bmRUZXh0IiB2YWx1ZT0iJHtwLmZvcmVncm91bmQgfHwgJyMwMDAwMDAnfSIgcGxhY2Vob2xkZXI9IiMwMDAwMDAiIHN0eWxlPSJmbGV4OiAxOyBmb250LXNpemU6IDAuODc1cmVtOyI+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5Db3IgZGUgRnVuZG88L2xhYmVsPgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogMC41cmVtOyBhbGlnbi1pdGVtczogY2VudGVyOyI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY29sb3IiIGlkPSJpbnNwLXFyQmFja2dyb3VuZCIgdmFsdWU9IiR7cC5iYWNrZ3JvdW5kIHx8ICcjZmZmZmZmJ30iIHN0eWxlPSJ3aWR0aDogNTBweDsgaGVpZ2h0OiAzMnB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5zcC1xckJhY2tncm91bmRUZXh0IiB2YWx1ZT0iJHtwLmJhY2tncm91bmQgfHwgJyNmZmZmZmYnfSIgcGxhY2Vob2xkZXI9IiNmZmZmZmYiIHN0eWxlPSJmbGV4OiAxOyBmb250LXNpemU6IDAuODc1cmVtOyI+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5BbGluaGFtZW50bzwvbGFiZWw+CiAgICAgICAgICA8c2VsZWN0IGlkPSJpbnNwLXFyQWxpZ25tZW50Ij4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGVmdCIgJHtwLmFsaWdubWVudCA9PT0gJ2xlZnQnID8gJ3NlbGVjdGVkJyA6ICcnfT5Fc3F1ZXJkYTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjZW50ZXIiICR7cC5hbGlnbm1lbnQgPT09ICdjZW50ZXInIHx8ICFwLmFsaWdubWVudCA/ICdzZWxlY3RlZCcgOiAnJ30+Q2VudHJvPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InJpZ2h0IiAke3AuYWxpZ25tZW50ID09PSAncmlnaHQnID8gJ3NlbGVjdGVkJyA6ICcnfT5EaXJlaXRhPC9vcHRpb24+CiAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICR7cmVuZGVyTWFyZ2luU2VjdGlvbihlbGVtZW50KX0KICAgICAgYDsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJJbnNwZWN0b3JTVkcoZWxlbWVudCkgewogICAgICBjb25zdCBwID0gZWxlbWVudC5wcm9wZXJ0aWVzIHx8IHt9OwogICAgICByZXR1cm4gYAogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWw+Q8OzZGlnbyBTVkc8L2xhYmVsPgogICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0icGFkZGluZzogMC43NXJlbTsgYmFja2dyb3VuZDogI2RiZWFmZTsgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCAjMjU2M2ViOyBtYXJnaW4tYm90dG9tOiAxcmVtOyBib3JkZXItcmFkaXVzOiAwLjI1cmVtOyBjb2xvcjogIzFlNDBhZjsiPgogICAgICAgICAgICA8c3Ryb25nPvCfkqEgRGljYTo8L3N0cm9uZz4gQ3JpZSBvdSBlZGl0ZSBTVkdzIGZhY2lsbWVudGUgZW0gCiAgICAgICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vd3d3LnN2Z3ZpZXdlci5kZXYvIiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub29wZW5lciBub3JlZmVycmVyIiBzdHlsZT0iY29sb3I6ICMxZTQwYWY7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBmb250LXdlaWdodDogNTAwOyI+c3Zndmlld2VyLmRldjwvYT4KICAgICAgICAgICAgZSBkZXBvaXMgY29sZSBvIGPDs2RpZ28gYXF1aS4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPHRleHRhcmVhIGlkPSJpbnNwLXN2Z0NvZGUiIHBsYWNlaG9sZGVyPSJDb2xlIG91IGRpZ2l0ZSBvIGPDs2RpZ28gU1ZHIGFxdWkiIHN0eWxlPSJtaW4taGVpZ2h0OiAxMjBweDsgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsgZm9udC1zaXplOiAwLjg3NXJlbTsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDAuNXJlbSAwLjc1cmVtOyBiYWNrZ3JvdW5kOiB2YXIoLS1iZy10ZXJ0aWFyeSk7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7IGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtOyBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsgYm94LXNpemluZzogYm9yZGVyLWJveDsgcmVzaXplOiB2ZXJ0aWNhbDsiPiR7ZXNjYXBlSHRtbChwLnN2ZyB8fCAnJyl9PC90ZXh0YXJlYT4KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSI+Q29sZSBvIGPDs2RpZ28gU1ZHIGNvbXBsZXRvIChpbmNsdWluZG8gYSB0YWcgJmx0O3N2ZyZndDspPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5MYXJndXJhPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1zdmdXaWR0aCIgdmFsdWU9IiR7cC53aWR0aCB8fCAxMDB9IiBtaW49IjEwIiBtYXg9IjEwMDAiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+QWx0dXJhPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1zdmdIZWlnaHQiIHZhbHVlPSIke3AuaGVpZ2h0IHx8IDEwMH0iIG1pbj0iMTAiIG1heD0iMTAwMCI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+Q29yIChwYXJhIFNWR3MgbW9ub2Nyb23DoXRpY29zKTwvbGFiZWw+CiAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBnYXA6IDAuNXJlbTsgYWxpZ24taXRlbXM6IGNlbnRlcjsiPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0iY29sb3IiIGlkPSJpbnNwLXN2Z0NvbG9yIiB2YWx1ZT0iJHtwLmNvbG9yIHx8ICcjMDAwMDAwJ30iIHN0eWxlPSJ3aWR0aDogNTBweDsgaGVpZ2h0OiAzMnB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJpbnNwLXN2Z0NvbG9yVGV4dCIgdmFsdWU9IiR7cC5jb2xvciB8fCAnIzAwMDAwMCd9IiBwbGFjZWhvbGRlcj0iIzAwMDAwMCIgc3R5bGU9ImZsZXg6IDE7IGZvbnQtc2l6ZTogMC44NzVyZW07Ij4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiPkFwbGljw6F2ZWwgYXBlbmFzIHBhcmEgU1ZHcyBxdWUgc3Vwb3J0YW0gY29sb3Jhw6fDo28gKGRlaXhlIHZhemlvIHNlIG8gU1ZHIGrDoSB0aXZlciBjb3JlcyBkZWZpbmlkYXMpPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5BbGluaGFtZW50bzwvbGFiZWw+CiAgICAgICAgICA8c2VsZWN0IGlkPSJpbnNwLXN2Z0FsaWdubWVudCI+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImxlZnQiICR7cC5hbGlnbm1lbnQgPT09ICdsZWZ0JyA/ICdzZWxlY3RlZCcgOiAnJ30+RXNxdWVyZGE8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iY2VudGVyIiAke3AuYWxpZ25tZW50ID09PSAnY2VudGVyJyB8fCAhcC5hbGlnbm1lbnQgPyAnc2VsZWN0ZWQnIDogJyd9PkNlbnRybzwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJyaWdodCIgJHtwLmFsaWdubWVudCA9PT0gJ3JpZ2h0JyA/ICdzZWxlY3RlZCcgOiAnJ30+RGlyZWl0YTwvb3B0aW9uPgogICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgPC9kaXY+CiAgICAgICAgJHtyZW5kZXJNYXJnaW5TZWN0aW9uKGVsZW1lbnQpfQogICAgICBgOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlckluc3BlY3RvckJhcmNvZGUoZWxlbWVudCkgewogICAgICBjb25zdCBwID0gZWxlbWVudC5wcm9wZXJ0aWVzIHx8IHt9OwogICAgICByZXR1cm4gYAogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWw+VmFsb3IgZG8gQmFyY29kZTwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Imluc3AtYmFyY29kZVZhbHVlIiB2YWx1ZT0iJHtlc2NhcGVIdG1sKHAuYmFyY29kZVZhbHVlIHx8ICdBQkMxMjM0NTY3ODknKX0iIHBsYWNlaG9sZGVyPSJBQkMxMjM0NTY3ODkiPgogICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIj5EaWdpdGUgbyB2YWxvciBxdWUgc2Vyw6EgY29kaWZpY2FkbyBubyBiYXJjb2RlPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbD5Gb3JtYXRvPC9sYWJlbD4KICAgICAgICAgIDxzZWxlY3QgaWQ9Imluc3AtYmFyY29kZUZvcm1hdCI+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNPREUxMjgiICR7cC5mb3JtYXQgPT09ICdDT0RFMTI4JyB8fCAhcC5mb3JtYXQgPyAnc2VsZWN0ZWQnIDogJyd9PkNPREUxMjg8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ09ERTM5IiAke3AuZm9ybWF0ID09PSAnQ09ERTM5JyA/ICdzZWxlY3RlZCcgOiAnJ30+Q09ERTM5PC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkVBTjEzIiAke3AuZm9ybWF0ID09PSAnRUFOMTMnID8gJ3NlbGVjdGVkJyA6ICcnfT5FQU4xMzwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJFQU44IiAke3AuZm9ybWF0ID09PSAnRUFOOCcgPyAnc2VsZWN0ZWQnIDogJyd9PkVBTjg8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iVVBDIiAke3AuZm9ybWF0ID09PSAnVVBDJyA/ICdzZWxlY3RlZCcgOiAnJ30+VVBDPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IklURiIgJHtwLmZvcm1hdCA9PT0gJ0lURicgPyAnc2VsZWN0ZWQnIDogJyd9PklURjwvb3B0aW9uPgogICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkxpbmUgV2lkdGg8L2xhYmVsPgogICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWJhcmNvZGVMaW5lV2lkdGgiIHZhbHVlPSIke3AubGluZVdpZHRoIHx8IDEuNX0iIG1pbj0iMC41IiBtYXg9IjUiIHN0ZXA9IjAuMSI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5IZWlnaHQ8L2xhYmVsPgogICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWJhcmNvZGVIZWlnaHQiIHZhbHVlPSIke3AuYmFySGVpZ2h0IHx8IDMwfSIgbWluPSIxMCIgbWF4PSIyMDAiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWwgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMC41cmVtOyBmb250LXdlaWdodDogNTAwOyI+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9Imluc3AtYmFyY29kZURpc3BsYXlWYWx1ZSIgJHtwLmRpc3BsYXlWYWx1ZSAhPT0gZmFsc2UgPyAnY2hlY2tlZCcgOiAnJ30gc3R5bGU9IndpZHRoOiAxOHB4OyBoZWlnaHQ6IDE4cHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICA8c3Bhbj5EaXNwbGF5IFZhbHVlPC9zcGFuPgogICAgICAgICAgPC9sYWJlbD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+Rm9udCBTaXplPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1iYXJjb2RlRm9udFNpemUiIHZhbHVlPSIke3AuZm9udFNpemUgfHwgMTB9IiBtaW49IjgiIG1heD0iMjAiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+TWFyZ2luPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1iYXJjb2RlTWFyZ2luIiB2YWx1ZT0iJHtwLm1hcmdpbiB8fCAwfSIgbWluPSIwIiBtYXg9IjIwIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsPkZpdCAoTGFyZ3VyYSB4IEFsdHVyYSk8L2xhYmVsPgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1iYXJjb2RlRml0VyIgdmFsdWU9IiR7cC5maXQgPyBwLmZpdFswXSA6IDIwMX0iIG1pbj0iNTAiIG1heD0iNTAwIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtYmFyY29kZUZpdEgiIHZhbHVlPSIke3AuZml0ID8gcC5maXRbMV0gOiA0Mn0iIG1pbj0iMjAiIG1heD0iMjAwIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSI+VGFtYW5obyBkbyBiYXJjb2RlIG5vIFBERiAoZW0gcGl4ZWxzKTwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+QWxpbmhhbWVudG88L2xhYmVsPgogICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcC1iYXJjb2RlQWxpZ25tZW50Ij4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGVmdCIgJHtwLmFsaWdubWVudCA9PT0gJ2xlZnQnID8gJ3NlbGVjdGVkJyA6ICcnfT5Fc3F1ZXJkYTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjZW50ZXIiICR7cC5hbGlnbm1lbnQgPT09ICdjZW50ZXInIHx8ICFwLmFsaWdubWVudCA/ICdzZWxlY3RlZCcgOiAnJ30+Q2VudHJvPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InJpZ2h0IiAke3AuYWxpZ25tZW50ID09PSAncmlnaHQnID8gJ3NlbGVjdGVkJyA6ICcnfT5EaXJlaXRhPC9vcHRpb24+CiAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICA8L2Rpdj4KICAgICAgICAke3JlbmRlck1hcmdpblNlY3Rpb24oZWxlbWVudCl9CiAgICAgIGA7CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVySW5zcGVjdG9yU3RhbXAoZWxlbWVudCkgewogICAgICBjb25zdCBwID0gZWxlbWVudC5wcm9wZXJ0aWVzIHx8IHt9OwogICAgICBjb25zdCBmaXQgPSBBcnJheS5pc0FycmF5KHAuZml0KSA/IHAuZml0IDogW3AuZml0IHx8IDEyMCwgcC5maXQgfHwgMTIwXTsKICAgICAgcmV0dXJuIGAKICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsPlRpcG8gZGUgRm9udGU8L2xhYmVsPgogICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcC1zdGFtcFNvdXJjZVR5cGUiPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJpbWFnZSIgJHtwLnNvdXJjZVR5cGUgPT09ICdpbWFnZScgfHwgIXAuc291cmNlVHlwZSA/ICdzZWxlY3RlZCcgOiAnJ30+SW1hZ2VtPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InN2ZyIgJHtwLnNvdXJjZVR5cGUgPT09ICdzdmcnID8gJ3NlbGVjdGVkJyA6ICcnfT5TVkc8L29wdGlvbj4KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCIgaWQ9Imluc3Atc3RhbXBWYWx1ZUZpZWxkIj4KICAgICAgICAgIDxsYWJlbCBpZD0iaW5zcC1zdGFtcFZhbHVlTGFiZWwiPiR7cC5zb3VyY2VUeXBlID09PSAnc3ZnJyA/ICdDw7NkaWdvIFNWRycgOiAnVVJMIG91IERhdGFVUkwnfTwvbGFiZWw+CiAgICAgICAgICAke3Auc291cmNlVHlwZSA9PT0gJ3N2ZycgPwogICAgICAgICAgYDx0ZXh0YXJlYSBpZD0iaW5zcC1zdGFtcFZhbHVlIiByb3dzPSI2IiBwbGFjZWhvbGRlcj0iPHN2Zz4uLi48L3N2Zz4iPiR7ZXNjYXBlSHRtbChwLnZhbHVlIHx8ICcnKX08L3RleHRhcmVhPmAgOgogICAgICAgICAgYDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5zcC1zdGFtcFZhbHVlIiB2YWx1ZT0iJHtlc2NhcGVIdG1sKHAudmFsdWUgfHwgJycpfSIgcGxhY2Vob2xkZXI9Imh0dHBzOi8vZXhlbXBsby5jb20vaW1hZ2VtLnBuZyBvdSBkYXRhOmltYWdlLy4uLiI+YAogICAgICAgIH0KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSI+JHtwLnNvdXJjZVR5cGUgPT09ICdzdmcnID8gJ0NvbGUgbyBjw7NkaWdvIFNWRyBjb21wbGV0bycgOiAnVVJMIGRhIGltYWdlbSAoaHR0cC9odHRwcykgb3UgZGF0YVVSTCAoZGF0YTppbWFnZS8uLi4pJ308L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsPkZpdCAoTGFyZ3VyYSB4IEFsdHVyYSk8L2xhYmVsPgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1zdGFtcEZpdFciIHZhbHVlPSIke2ZpdFswXX0iIG1pbj0iMTAiIG1heD0iNTAwIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3Atc3RhbXBGaXRIIiB2YWx1ZT0iJHtmaXRbMV19IiBtaW49IjEwIiBtYXg9IjUwMCI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5BbGluaGFtZW50bzwvbGFiZWw+CiAgICAgICAgICA8c2VsZWN0IGlkPSJpbnNwLXN0YW1wQWxpZ25tZW50Ij4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGVmdCIgJHtwLmFsaWdubWVudCA9PT0gJ2xlZnQnID8gJ3NlbGVjdGVkJyA6ICcnfT5Fc3F1ZXJkYTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjZW50ZXIiICR7cC5hbGlnbm1lbnQgPT09ICdjZW50ZXInIHx8ICFwLmFsaWdubWVudCA/ICdzZWxlY3RlZCcgOiAnJ30+Q2VudHJvPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InJpZ2h0IiAke3AuYWxpZ25tZW50ID09PSAncmlnaHQnID8gJ3NlbGVjdGVkJyA6ICcnfT5EaXJlaXRhPC9vcHRpb24+CiAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPk9wYWNpZGFkZTwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1zdGFtcE9wYWNpdHkiIHZhbHVlPSIke3Aub3BhY2l0eSAhPT0gdW5kZWZpbmVkID8gcC5vcGFjaXR5IDogMX0iIG1pbj0iMCIgbWF4PSIxIiBzdGVwPSIwLjEiPgogICAgICAgIDwvZGl2PgogICAgICAgICR7cmVuZGVyTWFyZ2luU2VjdGlvbihlbGVtZW50KX0KICAgICAgYDsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJJbnNwZWN0b3JDaGVja2JveChlbGVtZW50KSB7CiAgICAgIGNvbnN0IHAgPSBlbGVtZW50LnByb3BlcnRpZXMgfHwge307CiAgICAgIHJldHVybiBgCiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbD5UZXh0bzwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Imluc3AtY2hvaWNlVGV4dCIgdmFsdWU9IiR7ZXNjYXBlSHRtbChwLmNob2ljZVRleHQgfHwgJ1RleHRvLi4uJyl9IiBwbGFjZWhvbGRlcj0iVGV4dG8uLi4iPgogICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0ibWFyZ2luLXRvcDogMC4yNXJlbTsgZm9udC1zaXplOiAwLjc1cmVtOyBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7Ij5UZXh0byBxdWUgYXBhcmVjZSBhbyBsYWRvIGRvIMOtY29uZTwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWwgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMC41cmVtOyBmb250LXdlaWdodDogNTAwOyI+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9Imluc3AtY2hvaWNlQ2hlY2tlZCIgJHtwLmNob2ljZUNoZWNrZWQgPT09IHRydWUgPyAnY2hlY2tlZCcgOiAnJ30gc3R5bGU9IndpZHRoOiAxOHB4OyBoZWlnaHQ6IDE4cHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICA8c3Bhbj5NYXJjYWRvPC9zcGFuPgogICAgICAgICAgPC9sYWJlbD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsPlBvc2nDp8OjbyBkbyDDjWNvbmU8L2xhYmVsPgogICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcC1jaG9pY2VJY29uUG9zaXRpb24iPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJiZWZvcmUiICR7cC5jaG9pY2VJY29uUG9zaXRpb24gPT09ICdiZWZvcmUnIHx8ICFwLmNob2ljZUljb25Qb3NpdGlvbiA/ICdzZWxlY3RlZCcgOiAnJ30+QW50ZXMgZG8gdGV4dG88L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iYWZ0ZXIiICR7cC5jaG9pY2VJY29uUG9zaXRpb24gPT09ICdhZnRlcicgPyAnc2VsZWN0ZWQnIDogJyd9PkRlcG9pcyBkbyB0ZXh0bzwvb3B0aW9uPgogICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPlRhbWFuaG8gZG8gw41jb25lPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1jaG9pY2VJY29uU2l6ZSIgdmFsdWU9IiR7cC5jaG9pY2VJY29uU2l6ZSB8fCAxMn0iIG1pbj0iOCIgbWF4PSIzMCIgc3RlcD0iMSI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5HYXAgKGRpc3TDom5jaWEpPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1jaG9pY2VHYXAiIHZhbHVlPSIke3AuY2hvaWNlR2FwIHx8IDh9IiBtaW49IjAiIG1heD0iMzAiIHN0ZXA9IjEiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+QWxpbmhhbWVudG88L2xhYmVsPgogICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcC1jaG9pY2VBbGlnbm1lbnQiPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsZWZ0IiAke3AuYWxpZ25tZW50ID09PSAnbGVmdCcgfHwgIXAuYWxpZ25tZW50ID8gJ3NlbGVjdGVkJyA6ICcnfT5Fc3F1ZXJkYTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjZW50ZXIiICR7cC5hbGlnbm1lbnQgPT09ICdjZW50ZXInID8gJ3NlbGVjdGVkJyA6ICcnfT5DZW50cm88L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0icmlnaHQiICR7cC5hbGlnbm1lbnQgPT09ICdyaWdodCcgPyAnc2VsZWN0ZWQnIDogJyd9PkRpcmVpdGE8L29wdGlvbj4KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgIDwvZGl2PgogICAgICAgICR7cmVuZGVyTWFyZ2luU2VjdGlvbihlbGVtZW50KX0KICAgICAgYDsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJJbnNwZWN0b3JSYWRpbyhlbGVtZW50KSB7CiAgICAgIGNvbnN0IHAgPSBlbGVtZW50LnByb3BlcnRpZXMgfHwge307CiAgICAgIHJldHVybiBgCiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbD5UZXh0bzwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Imluc3AtY2hvaWNlVGV4dCIgdmFsdWU9IiR7ZXNjYXBlSHRtbChwLmNob2ljZVRleHQgfHwgJ1RleHRvLi4uJyl9IiBwbGFjZWhvbGRlcj0iVGV4dG8uLi4iPgogICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIiBzdHlsZT0ibWFyZ2luLXRvcDogMC4yNXJlbTsgZm9udC1zaXplOiAwLjc1cmVtOyBjb2xvcjogdmFyKC0tdGV4dC10ZXJ0aWFyeSk7Ij5UZXh0byBxdWUgYXBhcmVjZSBhbyBsYWRvIGRvIMOtY29uZTwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWwgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMC41cmVtOyBmb250LXdlaWdodDogNTAwOyI+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9Imluc3AtY2hvaWNlQ2hlY2tlZCIgJHtwLmNob2ljZUNoZWNrZWQgPT09IHRydWUgPyAnY2hlY2tlZCcgOiAnJ30gc3R5bGU9IndpZHRoOiAxOHB4OyBoZWlnaHQ6IDE4cHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICA8c3Bhbj5NYXJjYWRvPC9zcGFuPgogICAgICAgICAgPC9sYWJlbD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsPlBvc2nDp8OjbyBkbyDDjWNvbmU8L2xhYmVsPgogICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcC1jaG9pY2VJY29uUG9zaXRpb24iPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJiZWZvcmUiICR7cC5jaG9pY2VJY29uUG9zaXRpb24gPT09ICdiZWZvcmUnIHx8ICFwLmNob2ljZUljb25Qb3NpdGlvbiA/ICdzZWxlY3RlZCcgOiAnJ30+QW50ZXMgZG8gdGV4dG88L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iYWZ0ZXIiICR7cC5jaG9pY2VJY29uUG9zaXRpb24gPT09ICdhZnRlcicgPyAnc2VsZWN0ZWQnIDogJyd9PkRlcG9pcyBkbyB0ZXh0bzwvb3B0aW9uPgogICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPlRhbWFuaG8gZG8gw41jb25lPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1jaG9pY2VJY29uU2l6ZSIgdmFsdWU9IiR7cC5jaG9pY2VJY29uU2l6ZSB8fCAxMn0iIG1pbj0iOCIgbWF4PSIzMCIgc3RlcD0iMSI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5HYXAgKGRpc3TDom5jaWEpPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1jaG9pY2VHYXAiIHZhbHVlPSIke3AuY2hvaWNlR2FwIHx8IDh9IiBtaW49IjAiIG1heD0iMzAiIHN0ZXA9IjEiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+QWxpbmhhbWVudG88L2xhYmVsPgogICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcC1jaG9pY2VBbGlnbm1lbnQiPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsZWZ0IiAke3AuYWxpZ25tZW50ID09PSAnbGVmdCcgfHwgIXAuYWxpZ25tZW50ID8gJ3NlbGVjdGVkJyA6ICcnfT5Fc3F1ZXJkYTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjZW50ZXIiICR7cC5hbGlnbm1lbnQgPT09ICdjZW50ZXInID8gJ3NlbGVjdGVkJyA6ICcnfT5DZW50cm88L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0icmlnaHQiICR7cC5hbGlnbm1lbnQgPT09ICdyaWdodCcgPyAnc2VsZWN0ZWQnIDogJyd9PkRpcmVpdGE8L29wdGlvbj4KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgIDwvZGl2PgogICAgICAgICR7cmVuZGVyTWFyZ2luU2VjdGlvbihlbGVtZW50KX0KICAgICAgYDsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJJbnNwZWN0b3JGaWxsTGluZShlbGVtZW50KSB7CiAgICAgIGNvbnN0IHAgPSBlbGVtZW50LnByb3BlcnRpZXMgfHwge307CiAgICAgIHJldHVybiBgCiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5MYXJndXJhIGRhIExpbmhhPC9sYWJlbD4KICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWZpbGxMaW5lV2lkdGgiIHZhbHVlPSIke3AubGluZVdpZHRoIHx8IDIwMH0iIG1pbj0iNTAiIG1heD0iODAwIiBzdGVwPSIxMCI+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5Fc3Blc3N1cmE8L2xhYmVsPgogICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imluc3AtZmlsbExpbmVUaGlja25lc3MiIHZhbHVlPSIke3AudGhpY2tuZXNzIHx8IDAuOH0iIG1pbj0iMC41IiBtYXg9IjUiIHN0ZXA9IjAuMSI+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5Db3I8L2xhYmVsPgogICAgICAgICAgPGlucHV0IHR5cGU9ImNvbG9yIiBpZD0iaW5zcC1maWxsTGluZUNvbG9yIiB2YWx1ZT0iJHtwLmNvbG9yIHx8ICcjMDAwMDAwJ30iPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+QWxpbmhhbWVudG88L2xhYmVsPgogICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcC1maWxsTGluZUFsaWdubWVudCI+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImxlZnQiICR7cC5hbGlnbm1lbnQgPT09ICdsZWZ0JyB8fCAhcC5hbGlnbm1lbnQgPyAnc2VsZWN0ZWQnIDogJyd9PkVzcXVlcmRhPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImNlbnRlciIgJHtwLmFsaWdubWVudCA9PT0gJ2NlbnRlcicgPyAnc2VsZWN0ZWQnIDogJyd9PkNlbnRybzwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJyaWdodCIgJHtwLmFsaWdubWVudCA9PT0gJ3JpZ2h0JyA/ICdzZWxlY3RlZCcgOiAnJ30+RGlyZWl0YTwvb3B0aW9uPgogICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgPC9kaXY+CiAgICAgICAgJHtyZW5kZXJNYXJnaW5TZWN0aW9uKGVsZW1lbnQpfQogICAgICBgOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlckluc3BlY3RvckNoYXJ0KGVsZW1lbnQpIHsKICAgICAgY29uc3QgcCA9IGVsZW1lbnQucHJvcGVydGllcyB8fCB7fTsKICAgICAgY29uc3QgZml0ID0gQXJyYXkuaXNBcnJheShwLmNoYXJ0Rml0KSA/IHAuY2hhcnRGaXQgOiBbcC5jaGFydEZpdCB8fCA0MDAsIHAuY2hhcnRGaXQgfHwgMjAwXTsKICAgICAgcmV0dXJuIGAKICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsPlRpcG8gZGUgR3LDoWZpY288L2xhYmVsPgogICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcC1jaGFydFR5cGUiPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJiYXIiICR7cC5jaGFydFR5cGUgPT09ICdiYXInIHx8ICFwLmNoYXJ0VHlwZSA/ICdzZWxlY3RlZCcgOiAnJ30+QmFycmE8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGluZSIgJHtwLmNoYXJ0VHlwZSA9PT0gJ2xpbmUnID8gJ3NlbGVjdGVkJyA6ICcnfT5MaW5oYTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJwaWUiICR7cC5jaGFydFR5cGUgPT09ICdwaWUnID8gJ3NlbGVjdGVkJyA6ICcnfT5QaXp6YTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkb3VnaG51dCIgJHtwLmNoYXJ0VHlwZSA9PT0gJ2RvdWdobnV0JyA/ICdzZWxlY3RlZCcgOiAnJ30+Um9zY2E8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0icmFkYXIiICR7cC5jaGFydFR5cGUgPT09ICdyYWRhcicgPyAnc2VsZWN0ZWQnIDogJyd9PlJhZGFyPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InBvbGFyQXJlYSIgJHtwLmNoYXJ0VHlwZSA9PT0gJ3BvbGFyQXJlYScgPyAnc2VsZWN0ZWQnIDogJyd9PsOBcmVhIFBvbGFyPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InNjYXR0ZXIiICR7cC5jaGFydFR5cGUgPT09ICdzY2F0dGVyJyA/ICdzZWxlY3RlZCcgOiAnJ30+RGlzcGVyc8Ojbzwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJidWJibGUiICR7cC5jaGFydFR5cGUgPT09ICdidWJibGUnID8gJ3NlbGVjdGVkJyA6ICcnfT5Cb2xoYTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJtaXhlZCIgJHtwLmNoYXJ0VHlwZSA9PT0gJ21peGVkJyA/ICdzZWxlY3RlZCcgOiAnJ30+TWlzdG88L29wdGlvbj4KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWw+VGFtYW5obyBkbyBHcsOhZmljbzwvbGFiZWw+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5MYXJndXJhPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcC1jaGFydFdpZHRoIiB2YWx1ZT0iJHtwLmNoYXJ0V2lkdGggfHwgNDAwfSIgbWluPSIyMDAiIG1heD0iODAwIiBzdGVwPSIxMCI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5BbHR1cmE8L2xhYmVsPgogICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWNoYXJ0SGVpZ2h0IiB2YWx1ZT0iJHtwLmNoYXJ0SGVpZ2h0IHx8IDIwMH0iIG1pbj0iMTAwIiBtYXg9IjYwMCIgc3RlcD0iMTAiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWw+Rml0IChMYXJndXJhIHggQWx0dXJhKTwvbGFiZWw+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWNoYXJ0Rml0VyIgdmFsdWU9IiR7Zml0WzBdfSIgbWluPSIxMDAiIG1heD0iODAwIiBzdGVwPSIxMCI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWNoYXJ0Rml0SCIgdmFsdWU9IiR7Zml0WzFdfSIgbWluPSI1MCIgbWF4PSI2MDAiIHN0ZXA9IjEwIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkNvciBkZSBGdW5kbzwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQgdHlwZT0iY29sb3IiIGlkPSJpbnNwLWNoYXJ0QmFja2dyb3VuZENvbG9yIiB2YWx1ZT0iJHtwLmNoYXJ0QmFja2dyb3VuZENvbG9yIHx8ICcjRkZGRkZGJ30iPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+RGV2aWNlIFBpeGVsIFJhdGlvPC9sYWJlbD4KICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWNoYXJ0RGV2aWNlUGl4ZWxSYXRpbyIgdmFsdWU9IiR7cC5jaGFydERldmljZVBpeGVsUmF0aW8gfHwgMn0iIG1pbj0iMSIgbWF4PSI0IiBzdGVwPSIxIj4KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9Im1hcmdpbi10b3A6IDAuMjVyZW07IGZvbnQtc2l6ZTogMC43NXJlbTsgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOyI+VmFsb3IgbWFpb3IgPSBtZWxob3IgcXVhbGlkYWRlICgyIMOpIHJlY29tZW5kYWRvKTwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWw+RGFkb3MgZG8gR3LDoWZpY28gKEpTT04pPC9sYWJlbD4KICAgICAgICAgIDx0ZXh0YXJlYSBpZD0iaW5zcC1jaGFydERhdGEiIHJvd3M9IjgiIHBsYWNlaG9sZGVyPSd7ImxhYmVscyI6IFsiSmFuIiwgIkZlYiJdLCAiZGF0YXNldHMiOiBbLi4uXX0nPiR7ZXNjYXBlSHRtbChKU09OLnN0cmluZ2lmeShwLmNoYXJ0RGF0YSB8fCB7IGxhYmVsczogW10sIGRhdGFzZXRzOiBbXSB9LCBudWxsLCAyKSl9PC90ZXh0YXJlYT4KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9Im1hcmdpbi10b3A6IDAuMjVyZW07IGZvbnQtc2l6ZTogMC43NXJlbTsgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOyI+Rm9ybWF0byBKU09OIGRvIENoYXJ0LmpzLiBEZXZlIGNvbnRlciAibGFiZWxzIiBlICJkYXRhc2V0cyI8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGxhYmVsPk9ww6fDtWVzIGRvIEdyw6FmaWNvIChKU09OKTwvbGFiZWw+CiAgICAgICAgICA8dGV4dGFyZWEgaWQ9Imluc3AtY2hhcnRPcHRpb25zIiByb3dzPSI4IiBwbGFjZWhvbGRlcj0neyJyZXNwb25zaXZlIjogZmFsc2UsICJhbmltYXRpb24iOiB7ImR1cmF0aW9uIjogMH0sIC4uLn0nPiR7ZXNjYXBlSHRtbChKU09OLnN0cmluZ2lmeShwLmNoYXJ0T3B0aW9ucyB8fCB7IHJlc3BvbnNpdmU6IGZhbHNlLCBhbmltYXRpb246IHsgZHVyYXRpb246IDAgfSB9LCBudWxsLCAyKSl9PC90ZXh0YXJlYT4KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9Im1hcmdpbi10b3A6IDAuMjVyZW07IGZvbnQtc2l6ZTogMC43NXJlbTsgY29sb3I6IHZhcigtLXRleHQtdGVydGlhcnkpOyI+Rm9ybWF0byBKU09OIGRvIENoYXJ0LmpzLiBhbmltYXRpb24uZHVyYXRpb24gZGV2ZSBzZXIgMCBwYXJhIGV4cG9ydCBjb3JyZXRvPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5BbGluaGFtZW50bzwvbGFiZWw+CiAgICAgICAgICA8c2VsZWN0IGlkPSJpbnNwLWNoYXJ0QWxpZ25tZW50Ij4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGVmdCIgJHtwLmFsaWdubWVudCA9PT0gJ2xlZnQnID8gJ3NlbGVjdGVkJyA6ICcnfT5Fc3F1ZXJkYTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjZW50ZXIiICR7cC5hbGlnbm1lbnQgPT09ICdjZW50ZXInIHx8ICFwLmFsaWdubWVudCA/ICdzZWxlY3RlZCcgOiAnJ30+Q2VudHJvPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InJpZ2h0IiAke3AuYWxpZ25tZW50ID09PSAncmlnaHQnID8gJ3NlbGVjdGVkJyA6ICcnfT5EaXJlaXRhPC9vcHRpb24+CiAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICA8L2Rpdj4KICAgICAgICAke3JlbmRlck1hcmdpblNlY3Rpb24oZWxlbWVudCl9CiAgICAgIGA7CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVySW5zcGVjdG9yR3JvdXAoZWxlbWVudCkgewogICAgICBjb25zdCBwID0gZWxlbWVudC5wcm9wZXJ0aWVzIHx8IHt9OwogICAgICByZXR1cm4gYAogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+T3JpZW50YcOnYW88L2xhYmVsPgogICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcC1ncm91cE9yaWVudGF0aW9uIj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iY29sdW1uIiAke3Aub3JpZW50YXRpb24gPT09ICdjb2x1bW4nID8gJ3NlbGVjdGVkJyA6ICcnfT5Db2x1bmEgKHZlcnRpY2FsKTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJyb3ciICR7cC5vcmllbnRhdGlvbiA9PT0gJ3JvdycgPyAnc2VsZWN0ZWQnIDogJyd9PkxpbmhhIChob3Jpem9udGFsKTwvb3B0aW9uPgogICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5BbGluaGFtZW50bzwvbGFiZWw+CiAgICAgICAgICA8c2VsZWN0IGlkPSJpbnNwLWdyb3VwQWxpZ25tZW50Ij4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGVmdCIgJHtwLmFsaWdubWVudCA9PT0gJ2xlZnQnID8gJ3NlbGVjdGVkJyA6ICcnfT5Fc3F1ZXJkYTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjZW50ZXIiICR7cC5hbGlnbm1lbnQgPT09ICdjZW50ZXInID8gJ3NlbGVjdGVkJyA6ICcnfT5DZW50cm88L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0icmlnaHQiICR7cC5hbGlnbm1lbnQgPT09ICdyaWdodCcgPyAnc2VsZWN0ZWQnIDogJyd9PkRpcmVpdGE8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ianVzdGlmeSIgJHtwLmFsaWdubWVudCA9PT0gJ2p1c3RpZnknID8gJ3NlbGVjdGVkJyA6ICcnfT5KdXN0aWZpY2Fkbzwvb3B0aW9uPgogICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5Fc3Bhw6dhbWVudG8gZW50cmUgZWxlbWVudG9zIChnYXApPC9sYWJlbD4KICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwLWdyb3VwR2FwIiB2YWx1ZT0iJHtwLmdhcCB8fCAxMH0iIG1pbj0iMCIgbWF4PSI1MCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjI1cmVtOyBmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsiPkVzcGHDp28gZW50cmUgb3MgZWxlbWVudG9zIGRlbnRybyBkbyBncnVwbzwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJtYXJnaW4tdG9wOiAwLjI1cmVtOyBmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiB2YXIoLS10ZXh0LXRlcnRpYXJ5KTsiPkVsZW1lbnRvcyBubyBncnVwbzogJHtwLmNoaWxkcmVuPy5sZW5ndGggfHwgMH08L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICAke3JlbmRlck1hcmdpblNlY3Rpb24oZWxlbWVudCl9CiAgICAgIGA7CiAgICB9CgogICAgLy8gVmFyacOhdmVpcyBwYXJhIGRlYm91bmNlIGUgcHJlc2VydmHDp8OjbyBkZSBmb2NvCiAgICBsZXQgcmVuZGVyVGltZW91dCA9IG51bGw7CiAgICBsZXQgZm9jdXNlZEVsZW1lbnRJZCA9IG51bGw7CiAgICBsZXQgZm9jdXNlZEVsZW1lbnRWYWx1ZSA9IG51bGw7CiAgICBsZXQgZm9jdXNlZEVsZW1lbnRTZWxlY3Rpb25TdGFydCA9IG51bGw7CiAgICBsZXQgZm9jdXNlZEVsZW1lbnRTZWxlY3Rpb25FbmQgPSBudWxsOwoKICAgIGZ1bmN0aW9uIGF0dGFjaEluc3BlY3Rvckxpc3RlbmVycyhlbGVtZW50KSB7CiAgICAgIGNvbnN0IHAgPSBlbGVtZW50LnByb3BlcnRpZXMgfHwge307CiAgICAgIGNvbnN0IHBhcmVudEdyb3VwSW5mbyA9IGZpbmRQYXJlbnRHcm91cChlbGVtZW50LmlkKTsKCiAgICAgIC8vIExpc3RlbmVycyBnZW7DqXJpY29zIHBhcmEgbWFyZ2VucyAoYXBsaWPDoXZlbCBhIHRvZG9zIG9zIGVsZW1lbnRvcykKICAgICAgY29uc3QgbWFyZ2luSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1hcmdpbi1pbnB1dCcpOwogICAgICBtYXJnaW5JbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7CiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICBjb25zdCBzaWRlID0gcGFyc2VJbnQoaW5wdXQuZGF0YXNldC5zaWRlIHx8IDApOwogICAgICAgICAgaWYgKCFwLm1hcmdpbikgcC5tYXJnaW4gPSBbMCwgMCwgMCwgMF07CiAgICAgICAgICBwLm1hcmdpbltzaWRlXSA9IHBhcnNlSW50KGlucHV0LnZhbHVlIHx8IDApIHx8IDA7CiAgICAgICAgICAvLyBTZSB0b2RhcyBhcyBtYXJnZW5zIHPDo28gMCwgcmVtb3ZlciBhIHByb3ByaWVkYWRlCiAgICAgICAgICBpZiAocC5tYXJnaW4uZXZlcnkobSA9PiBtID09PSAwKSkgewogICAgICAgICAgICBkZWxldGUgcC5tYXJnaW47CiAgICAgICAgICB9CiAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwoKICAgICAgLy8gRnVuw6fDo28gaGVscGVyIHBhcmEgYXR1YWxpemFyIHNlbSBwZXJkZXIgZm9jbwogICAgICBmdW5jdGlvbiB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXModXBkYXRlRm4sIGRlbGF5ID0gMzAwKSB7CiAgICAgICAgLy8gQXRpdmFyIG1vZG8gZGUgZWRpw6fDo28gcGFyYSBldml0YXIgYWp1c3RlIGRlIHRhbWFuaG8gZHVyYW50ZSBlZGnDp8O1ZXMKICAgICAgICBpc0VkaXRpbmdNb2RlID0gdHJ1ZTsKCiAgICAgICAgLy8gU2FsdmFyIGVzdGFkbyBkbyBlbGVtZW50byBmb2NhZG8KICAgICAgICBjb25zdCBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsKICAgICAgICBpZiAoYWN0aXZlRWxlbWVudCAmJiAoYWN0aXZlRWxlbWVudC50YWdOYW1lID09PSAnSU5QVVQnIHx8IGFjdGl2ZUVsZW1lbnQudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykpIHsKICAgICAgICAgIGZvY3VzZWRFbGVtZW50SWQgPSBhY3RpdmVFbGVtZW50LmlkOwogICAgICAgICAgLy8gSU1QT1JUQU5URTogUGFyYSBpbnB1dHMgbnVtYmVyLCBzYWx2YXIgbyB2YWxvciBjb21vIHN0cmluZyBwYXJhIHByZXNlcnZhciBkaWdpdGHDp8OjbyBwYXJjaWFsCiAgICAgICAgICBmb2N1c2VkRWxlbWVudFZhbHVlID0gYWN0aXZlRWxlbWVudC52YWx1ZTsKICAgICAgICAgIC8vIFBhcmEgaW5wdXRzIG51bWJlciwgc2VsZWN0aW9uU3RhcnQvRW5kIHBvZGVtIHNlciBudWxsLCB1c2FyIDAgY29tbyBmYWxsYmFjawogICAgICAgICAgZm9jdXNlZEVsZW1lbnRTZWxlY3Rpb25TdGFydCA9IGFjdGl2ZUVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgIT09IG51bGwgPyBhY3RpdmVFbGVtZW50LnNlbGVjdGlvblN0YXJ0IDogYWN0aXZlRWxlbWVudC52YWx1ZS5sZW5ndGg7CiAgICAgICAgICBmb2N1c2VkRWxlbWVudFNlbGVjdGlvbkVuZCA9IGFjdGl2ZUVsZW1lbnQuc2VsZWN0aW9uRW5kICE9PSBudWxsID8gYWN0aXZlRWxlbWVudC5zZWxlY3Rpb25FbmQgOiBhY3RpdmVFbGVtZW50LnZhbHVlLmxlbmd0aDsKICAgICAgICB9CgogICAgICAgIC8vIExpbXBhciB0aW1lb3V0IGFudGVyaW9yCiAgICAgICAgaWYgKHJlbmRlclRpbWVvdXQpIHsKICAgICAgICAgIGNsZWFyVGltZW91dChyZW5kZXJUaW1lb3V0KTsKICAgICAgICB9CgogICAgICAgIC8vIEV4ZWN1dGFyIGF0dWFsaXphw6fDo28gYXDDs3MgZGVsYXkKICAgICAgICByZW5kZXJUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB1cGRhdGVGbigpOwoKICAgICAgICAgIC8vIERlc2F0aXZhciBtb2RvIGRlIGVkacOnw6NvIGFww7NzIHVtIHBlcXVlbm8gZGVsYXkgcGFyYSBwZXJtaXRpciBxdWUgbyBET00gc2UgZXN0YWJpbGl6ZQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGlzRWRpdGluZ01vZGUgPSBmYWxzZTsKICAgICAgICAgIH0sIDIwMCk7CgogICAgICAgICAgLy8gUmVzdGF1cmFyIGZvY28gYXDDs3MgcmVuZGVyaXphw6fDo28KICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBpZiAoZm9jdXNlZEVsZW1lbnRJZCkgewogICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmb2N1c2VkRWxlbWVudElkKTsKICAgICAgICAgICAgICBpZiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogUGFyYSBpbnB1dHMgbnVtYmVyLCByZXN0YXVyYXIgbyB2YWxvciBBTlRFUyBkZSBmb2NhcgogICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PT0gJ0lOUFVUJyB8fCBlbGVtZW50LnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHsKICAgICAgICAgICAgICAgICAgLy8gUmVzdGF1cmFyIG8gdmFsb3IgZXhhdG8gcXVlIGVzdGF2YSBzZW5kbyBkaWdpdGFkbyAocG9kZSBpbmNsdWlyIGRpZ2l0YcOnw6NvIHBhcmNpYWwpCiAgICAgICAgICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSBmb2N1c2VkRWxlbWVudFZhbHVlOwoKICAgICAgICAgICAgICAgICAgLy8gRm9jYXIgbyBlbGVtZW50bwogICAgICAgICAgICAgICAgICBlbGVtZW50LmZvY3VzKCk7CgogICAgICAgICAgICAgICAgICAvLyBSZXN0YXVyYXIgcG9zacOnw6NvIGRvIGN1cnNvciBhcMOzcyB1bSBwZXF1ZW5vIGRlbGF5IHBhcmEgZ2FyYW50aXIgcXVlIG8gdmFsb3IgZm9pIGFwbGljYWRvCiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnNldFNlbGVjdGlvblJhbmdlICYmIGZvY3VzZWRFbGVtZW50U2VsZWN0aW9uU3RhcnQgIT09IHVuZGVmaW5lZCAmJiBmb2N1c2VkRWxlbWVudFNlbGVjdGlvblN0YXJ0ICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW4gPSBlbGVtZW50LnZhbHVlLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgZm9jdXNlZEVsZW1lbnRTZWxlY3Rpb25TdGFydCksIGxlbik7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBNYXRoLm1pbihNYXRoLm1heCgwLCBmb2N1c2VkRWxlbWVudFNlbGVjdGlvbkVuZCAhPT0gdW5kZWZpbmVkICYmIGZvY3VzZWRFbGVtZW50U2VsZWN0aW9uRW5kICE9PSBudWxsID8gZm9jdXNlZEVsZW1lbnRTZWxlY3Rpb25FbmQgOiBmb2N1c2VkRWxlbWVudFNlbGVjdGlvblN0YXJ0KSwgbGVuKTsKCiAgICAgICAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBQYXJhIGlucHV0cyBudW1iZXIsIHRlbnRhciByZXN0YXVyYXIgYSBwb3Npw6fDo28gZG8gY3Vyc29yCiAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldFNlbGVjdGlvblJhbmdlKHN0YXJ0LCBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBBbGd1bnMgbmF2ZWdhZG9yZXMgcG9kZW0gbsOjbyBzdXBvcnRhciBzZXRTZWxlY3Rpb25SYW5nZSBlbSBpbnB1dHMgbnVtYmVyCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5lc3NlIGNhc28sIHRlbnRhciBwb3NpY2lvbmFyIG8gY3Vyc29yIG5vIGZpbmFsCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRTZWxlY3Rpb25SYW5nZShsZW4sIGxlbik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2UgYWluZGEgZmFsaGFyLCBhcGVuYXMgbWFudGVyIG8gZm9jbwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIFNlIG7Do28gaG91dmVyIHNlbGXDp8OjbyBzYWx2YSwgcG9zaWNpb25hciBubyBmaW5hbAogICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuID0gZWxlbWVudC52YWx1ZS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UobGVuLCBsZW4pOwogICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmFyIGVycm8KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIDUpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZWxlbWVudC5mb2N1cygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgNTApOyAvLyBBdW1lbnRhciBkZWxheSBwYXJhIGdhcmFudGlyIHF1ZSBvIERPTSBmb2kgY29tcGxldGFtZW50ZSBhdHVhbGl6YWRvCiAgICAgICAgfSwgZGVsYXkpOwogICAgICB9CgogICAgICAvLyBIYW5kbGUgd2lkdGggZmllbGQgaWYgZWxlbWVudCBpcyBpbiBhIGhvcml6b250YWwgZ3JvdXAKICAgICAgaWYgKHBhcmVudEdyb3VwSW5mbyAmJiBwYXJlbnRHcm91cEluZm8uZ3JvdXAucHJvcGVydGllcyAmJiBwYXJlbnRHcm91cEluZm8uZ3JvdXAucHJvcGVydGllcy5vcmllbnRhdGlvbiA9PT0gJ3JvdycpIHsKICAgICAgICBjb25zdCB3aWR0aElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3Atd2lkdGgnKTsKICAgICAgICBpZiAod2lkdGhJbnB1dCAmJiB0eXBlb2YgcmVkaXN0cmlidXRlR3JvdXBXaWR0aHMgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHdpZHRoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gcHJvY2Vzc2FyIG8gdmFsb3IgaW1lZGlhdGFtZW50ZSBwYXJhIGlucHV0cyBudW1iZXIKICAgICAgICAgICAgLy8gRGVpeGFyIG8gdmFsb3IgY29tbyBzdHJpbmcgZHVyYW50ZSBhIGRpZ2l0YcOnw6NvIHBhcmEgcHJlc2VydmFyIHBvc2nDp8OjbyBkbyBjdXJzb3IKICAgICAgICAgICAgY29uc3QgcmF3VmFsdWUgPSB3aWR0aElucHV0LnZhbHVlOwogICAgICAgICAgICAvLyBBcGVuYXMgYXR1YWxpemFyIHNlIG8gdmFsb3IgZm9yIHbDoWxpZG8gKG7Do28gdmF6aW8gZSBudW3DqXJpY28pCiAgICAgICAgICAgIGlmIChyYXdWYWx1ZSAhPT0gJycgJiYgIWlzTmFOKHJhd1ZhbHVlKSkgewogICAgICAgICAgICAgIGNvbnN0IG5ld1dpZHRoID0gcGFyc2VGbG9hdChyYXdWYWx1ZSkgfHwgMDsKICAgICAgICAgICAgICByZWRpc3RyaWJ1dGVHcm91cFdpZHRocyhwYXJlbnRHcm91cEluZm8uZ3JvdXAsIGVsZW1lbnQuaWQsIG5ld1dpZHRoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgcmVuZGVyQWxsKGZhbHNlKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIHJlbmRlcigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBSZS1yZW5kZXJpemFyIG8gaW5zcGVjdG9yIHBhcmEgYXR1YWxpemFyIG9zIHZhbG9yZXMgZG9zIG91dHJvcyBlbGVtZW50b3MKICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVySW5zcGVjdG9yID09PSAnZnVuY3Rpb24nKSByZW5kZXJJbnNwZWN0b3IoKTsKICAgICAgICAgICAgICB9LCAwKTsKICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKCiAgICAgIC8vIEhhbmRsZSBoZWlnaHQgZmllbGQgaWYgZWxlbWVudCBpcyBpbiBhIGdyb3VwCiAgICAgIGlmIChwYXJlbnRHcm91cEluZm8pIHsKICAgICAgICBjb25zdCBoZWlnaHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWhlaWdodCcpOwogICAgICAgIGlmIChoZWlnaHRJbnB1dCkgewogICAgICAgICAgaGVpZ2h0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gcHJvY2Vzc2FyIG8gdmFsb3IgaW1lZGlhdGFtZW50ZSBwYXJhIGlucHV0cyBudW1iZXIKICAgICAgICAgICAgLy8gRGVpeGFyIG8gdmFsb3IgY29tbyBzdHJpbmcgZHVyYW50ZSBhIGRpZ2l0YcOnw6NvIHBhcmEgcHJlc2VydmFyIHBvc2nDp8OjbyBkbyBjdXJzb3IKICAgICAgICAgICAgY29uc3QgcmF3VmFsdWUgPSBoZWlnaHRJbnB1dC52YWx1ZTsKICAgICAgICAgICAgLy8gQXBlbmFzIGF0dWFsaXphciBzZSBvIHZhbG9yIGZvciB2w6FsaWRvIChuw6NvIHZhemlvIGUgbnVtw6lyaWNvKQogICAgICAgICAgICBpZiAocmF3VmFsdWUgIT09ICcnICYmICFpc05hTihyYXdWYWx1ZSkpIHsKICAgICAgICAgICAgICBlbGVtZW50LmggPSBwYXJzZUludChyYXdWYWx1ZSkgfHwgMTAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlR3JvdXBEaW1lbnNpb25zID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgdXBkYXRlR3JvdXBEaW1lbnNpb25zKHBhcmVudEdyb3VwSW5mby5ncm91cCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgcmVuZGVyQWxsKCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICByZW5kZXIoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIEFkaWNpb25hciBsaXN0ZW5lciBwYXJhIHZlcnRpY2FsQWxpZ25tZW50IGRlIGPDqWx1bGEgZGUgdGFiZWxhCiAgICAgIGNvbnN0IGNlbGxWZXJ0aWNhbEFsaWdubWVudFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWNlbGxWZXJ0aWNhbEFsaWdubWVudCcpOwogICAgICBpZiAoY2VsbFZlcnRpY2FsQWxpZ25tZW50U2VsZWN0KSB7CiAgICAgICAgY29uc3Qgbm9kZVdpdGhQYXJlbnQgPSBmaW5kTm9kZVdpdGhQYXJlbnQoZWxlbWVudC5pZCk7CiAgICAgICAgaWYgKG5vZGVXaXRoUGFyZW50ICYmIG5vZGVXaXRoUGFyZW50LnBhcmVudCAmJiBub2RlV2l0aFBhcmVudC5jdHggJiYgbm9kZVdpdGhQYXJlbnQuY3R4LmtpbmQgPT09ICd0YWJsZUNlbGwnKSB7CiAgICAgICAgICBjb25zdCBjdHggPSBub2RlV2l0aFBhcmVudC5jdHg7CiAgICAgICAgICBjb25zdCB0YWJsZSA9IG5vZGVXaXRoUGFyZW50LnBhcmVudDsKICAgICAgICAgIGNvbnN0IGNlbGwgPSB0YWJsZS5wcm9wZXJ0aWVzLmJvZHlbY3R4LnJvd11bY3R4LmNvbF07CgogICAgICAgICAgY2VsbFZlcnRpY2FsQWxpZ25tZW50U2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgY2VsbC52ZXJ0aWNhbEFsaWdubWVudCA9IGNlbGxWZXJ0aWNhbEFsaWdubWVudFNlbGVjdC52YWx1ZTsKICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHN3aXRjaCAoZWxlbWVudC50eXBlKSB7CiAgICAgICAgY2FzZSAndGV4dCc6CiAgICAgICAgICBjb25zdCBlbGVtZW50SWRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWVsZW1lbnRJZCcpOwogICAgICAgICAgY29uc3QgdGV4dElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtdGV4dCcpOwogICAgICAgICAgY29uc3QgdGV4dExpbmtJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWxpbmsnKTsKICAgICAgICAgIGNvbnN0IGZvbnRTaXplSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1mb250U2l6ZScpOwoKICAgICAgICAgIGlmIChlbGVtZW50SWRJbnB1dCkgewogICAgICAgICAgICBlbGVtZW50SWRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBjb25zdCBpZFZhbHVlID0gZWxlbWVudElkSW5wdXQudmFsdWUudHJpbSgpOwogICAgICAgICAgICAgIGlmIChpZFZhbHVlKSB7CiAgICAgICAgICAgICAgICBwLmlkID0gaWRWYWx1ZTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZGVsZXRlIHAuaWQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBmb250U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtZm9udCcpOwogICAgICAgICAgY29uc3QgZm9udEZlYXR1cmVzSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1mb250RmVhdHVyZXMnKTsKICAgICAgICAgIGNvbnN0IGFsaWdubWVudFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWFsaWdubWVudCcpOwogICAgICAgICAgY29uc3QgZGVjb3JhdGlvblNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWRlY29yYXRpb24nKTsKICAgICAgICAgIGNvbnN0IGNvbG9ySW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1jb2xvcicpOwogICAgICAgICAgY29uc3QgY29sb3JUZXh0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1jb2xvclRleHQnKTsKICAgICAgICAgIGNvbnN0IGJhY2tncm91bmRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWJhY2tncm91bmQnKTsKICAgICAgICAgIGNvbnN0IGJhY2tncm91bmRUZXh0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1iYWNrZ3JvdW5kVGV4dCcpOwogICAgICAgICAgY29uc3QgYm9sZENoZWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtYm9sZCcpOwogICAgICAgICAgY29uc3QgaXRhbGljc0NoZWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaXRhbGljcycpOwogICAgICAgICAgY29uc3QgbGluZUhlaWdodElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtbGluZUhlaWdodCcpOwogICAgICAgICAgY29uc3QgY2hhcmFjdGVyU3BhY2luZ0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtY2hhcmFjdGVyU3BhY2luZycpOwogICAgICAgICAgY29uc3QgZGVjb3JhdGlvblN0eWxlU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtZGVjb3JhdGlvblN0eWxlJyk7CiAgICAgICAgICBjb25zdCBkZWNvcmF0aW9uQ29sb3JJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWRlY29yYXRpb25Db2xvcicpOwogICAgICAgICAgY29uc3QgZGVjb3JhdGlvbkNvbG9yVGV4dElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtZGVjb3JhdGlvbkNvbG9yVGV4dCcpOwogICAgICAgICAgY29uc3QgZGVjb3JhdGlvbk9wdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVjb3JhdGlvbk9wdGlvbnMnKTsKCiAgICAgICAgICBpZiAodGV4dElucHV0KSB7CiAgICAgICAgICAgIHRleHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBwLnRleHQgPSB0ZXh0SW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgdXBkYXRlUGFyZW50R3JvdXBzRGltZW5zaW9ucyhlbGVtZW50LmlkKTsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgLy8gSGFuZGxlIGxpbmsgdHlwZSBzZWxlY3RvcgogICAgICAgICAgY29uc3QgbGlua1R5cGVTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1saW5rVHlwZScpOwogICAgICAgICAgY29uc3QgbGlua1VybE9wdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1saW5rVXJsT3B0aW9ucycpOwogICAgICAgICAgY29uc3QgbGlua1BhZ2VPcHRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtbGlua1BhZ2VPcHRpb25zJyk7CiAgICAgICAgICBjb25zdCBsaW5rRGVzdGluYXRpb25PcHRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtbGlua0Rlc3RpbmF0aW9uT3B0aW9ucycpOwoKICAgICAgICAgIGlmIChsaW5rVHlwZVNlbGVjdCkgewogICAgICAgICAgICBsaW5rVHlwZVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgbGlua1R5cGUgPSBsaW5rVHlwZVNlbGVjdC52YWx1ZTsKCiAgICAgICAgICAgICAgLy8gUHJlc2VydmFyIG8gdGlwbyBlc2NvbGhpZG8gbWVzbW8gcXVhbmRvIG7Do28gaMOhIHZhbG9yIGFpbmRhCiAgICAgICAgICAgICAgcC5fbGlua1R5cGUgPSBsaW5rVHlwZTsKCiAgICAgICAgICAgICAgLy8gU2hvdy9oaWRlIG9wdGlvbnMKICAgICAgICAgICAgICBpZiAobGlua1VybE9wdGlvbnMpIGxpbmtVcmxPcHRpb25zLnN0eWxlLmRpc3BsYXkgPSBsaW5rVHlwZSA9PT0gJ3VybCcgPyAnJyA6ICdub25lJzsKICAgICAgICAgICAgICBpZiAobGlua1BhZ2VPcHRpb25zKSBsaW5rUGFnZU9wdGlvbnMuc3R5bGUuZGlzcGxheSA9IGxpbmtUeXBlID09PSAncGFnZScgPyAnJyA6ICdub25lJzsKICAgICAgICAgICAgICBpZiAobGlua0Rlc3RpbmF0aW9uT3B0aW9ucykgbGlua0Rlc3RpbmF0aW9uT3B0aW9ucy5zdHlsZS5kaXNwbGF5ID0gbGlua1R5cGUgPT09ICdkZXN0aW5hdGlvbicgPyAnJyA6ICdub25lJzsKCiAgICAgICAgICAgICAgLy8gQXBlbmFzIGxpbXBhciBwcm9wcmllZGFkZXMgc2UgbXVkb3UgcGFyYSAnbm9uZScsIGNhc28gY29udHLDoXJpbyBtYW50ZXIgdmFsb3JlcyBleGlzdGVudGVzCiAgICAgICAgICAgICAgaWYgKGxpbmtUeXBlID09PSAnbm9uZScpIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmxpbms7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rVG9QYWdlOwogICAgICAgICAgICAgICAgZGVsZXRlIHAubGlua1RvRGVzdGluYXRpb247CiAgICAgICAgICAgICAgICBkZWxldGUgcC5fbGlua1R5cGU7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5rVHlwZSA9PT0gJ3VybCcpIHsKICAgICAgICAgICAgICAgIC8vIFNlIG11ZG91IHBhcmEgVVJMLCBsaW1wYXIgb3V0cm9zIHRpcG9zIG1hcyBtYW50ZXIgVVJMIHNlIGV4aXN0aXIKICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmxpbmtUb1BhZ2U7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rVG9EZXN0aW5hdGlvbjsKICAgICAgICAgICAgICAgIC8vIE7Do28gbGltcGFyIHAubGluayAtIGRlaXhhciBvIHVzdcOhcmlvIHByZWVuY2hlciBvdSBtYW50ZXIgc2UgasOhIGV4aXN0ZQogICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlua1R5cGUgPT09ICdwYWdlJykgewogICAgICAgICAgICAgICAgLy8gU2UgbXVkb3UgcGFyYSBww6FnaW5hLCBsaW1wYXIgb3V0cm9zIHRpcG9zIG1hcyBtYW50ZXIgbGlua1RvUGFnZSBzZSBleGlzdGlyCiAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rOwogICAgICAgICAgICAgICAgZGVsZXRlIHAubGlua1RvRGVzdGluYXRpb247CiAgICAgICAgICAgICAgICBpZiAoIXAubGlua1RvUGFnZSAmJiBsaW5rVG9QYWdlSW5wdXQpIHsKICAgICAgICAgICAgICAgICAgLy8gU2UgbsOjbyB0aW5oYSBww6FnaW5hLCBkZWZpbmlyIHBhZHLDo28gMQogICAgICAgICAgICAgICAgICBwLmxpbmtUb1BhZ2UgPSAxOwogICAgICAgICAgICAgICAgICBpZiAobGlua1RvUGFnZUlucHV0KSBsaW5rVG9QYWdlSW5wdXQudmFsdWUgPSAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlua1R5cGUgPT09ICdkZXN0aW5hdGlvbicpIHsKICAgICAgICAgICAgICAgIC8vIFNlIG11ZG91IHBhcmEgZGVzdGlubywgbGltcGFyIG91dHJvcyB0aXBvcyBtYXMgbWFudGVyIGxpbmtUb0Rlc3RpbmF0aW9uIHNlIGV4aXN0aXIKICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmxpbms7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rVG9QYWdlOwogICAgICAgICAgICAgICAgLy8gTsOjbyBsaW1wYXIgcC5saW5rVG9EZXN0aW5hdGlvbiAtIGRlaXhhciBvIHVzdcOhcmlvIHByZWVuY2hlciBvdSBtYW50ZXIgc2UgasOhIGV4aXN0ZQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8gTsOjbyByZS1yZW5kZXJpemFyIG8gaW5zcGVjdG9yIHBhcmEgbsOjbyBwZXJkZXIgYSBzZWxlw6fDo28gZG8gZHJvcGRvd24KICAgICAgICAgICAgICAvLyBBcGVuYXMgYXR1YWxpemFyIGEgcmVuZGVyaXphw6fDo28gZG8gY2FudmFzIHNlIG5lY2Vzc8OhcmlvCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGV4dExpbmtJbnB1dCkgewogICAgICAgICAgICB0ZXh0TGlua0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHVybFZhbHVlID0gdGV4dExpbmtJbnB1dC52YWx1ZS50cmltKCk7CiAgICAgICAgICAgICAgaWYgKHVybFZhbHVlKSB7CiAgICAgICAgICAgICAgICBwLmxpbmsgPSB1cmxWYWx1ZTsKICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmxpbmtUb1BhZ2U7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rVG9EZXN0aW5hdGlvbjsKICAgICAgICAgICAgICAgIHAuX2xpbmtUeXBlID0gJ3VybCc7IC8vIFByZXNlcnZhciB0aXBvIGVzY29saGlkbwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBTZSBsaW1wb3UgbyBjYW1wbywgdmVyaWZpY2FyIHNlIGRldmUgbWFudGVyIG8gdGlwbyBvdSBsaW1wYXIgdHVkbwogICAgICAgICAgICAgICAgaWYgKHAuX2xpbmtUeXBlID09PSAndXJsJykgewogICAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZGVsZXRlIHAubGluazsKICAgICAgICAgICAgICAgICAgZGVsZXRlIHAuX2xpbmtUeXBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IGxpbmtUb1BhZ2VJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWxpbmtUb1BhZ2UnKTsKICAgICAgICAgIGlmIChsaW5rVG9QYWdlSW5wdXQpIHsKICAgICAgICAgICAgbGlua1RvUGFnZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHBhZ2VOdW0gPSBwYXJzZUludChsaW5rVG9QYWdlSW5wdXQudmFsdWUpOwogICAgICAgICAgICAgIGlmIChwYWdlTnVtID4gMCkgewogICAgICAgICAgICAgICAgcC5saW5rVG9QYWdlID0gcGFnZU51bTsKICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmxpbms7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rVG9EZXN0aW5hdGlvbjsKICAgICAgICAgICAgICAgIHAuX2xpbmtUeXBlID0gJ3BhZ2UnOyAvLyBQcmVzZXJ2YXIgdGlwbyBlc2NvbGhpZG8KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gU2UgbGltcG91IG8gY2FtcG8sIHZlcmlmaWNhciBzZSBkZXZlIG1hbnRlciBvIHRpcG8gb3UgbGltcGFyIHR1ZG8KICAgICAgICAgICAgICAgIGlmIChwLl9saW5rVHlwZSA9PT0gJ3BhZ2UnKSB7CiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmxpbmtUb1BhZ2U7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rVG9QYWdlOwogICAgICAgICAgICAgICAgICBkZWxldGUgcC5fbGlua1R5cGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgbGlua1RvRGVzdGluYXRpb25JbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWxpbmtUb0Rlc3RpbmF0aW9uJyk7CiAgICAgICAgICBpZiAobGlua1RvRGVzdGluYXRpb25JbnB1dCkgewogICAgICAgICAgICBsaW5rVG9EZXN0aW5hdGlvbklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IGRlc3QgPSBsaW5rVG9EZXN0aW5hdGlvbklucHV0LnZhbHVlLnRyaW0oKTsKICAgICAgICAgICAgICBpZiAoZGVzdCkgewogICAgICAgICAgICAgICAgcC5saW5rVG9EZXN0aW5hdGlvbiA9IGRlc3Q7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rOwogICAgICAgICAgICAgICAgZGVsZXRlIHAubGlua1RvUGFnZTsKICAgICAgICAgICAgICAgIHAuX2xpbmtUeXBlID0gJ2Rlc3RpbmF0aW9uJzsgLy8gUHJlc2VydmFyIHRpcG8gZXNjb2xoaWRvCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIFNlIGxpbXBvdSBvIGNhbXBvLCB2ZXJpZmljYXIgc2UgZGV2ZSBtYW50ZXIgbyB0aXBvIG91IGxpbXBhciB0dWRvCiAgICAgICAgICAgICAgICBpZiAocC5fbGlua1R5cGUgPT09ICdkZXN0aW5hdGlvbicpIHsKICAgICAgICAgICAgICAgICAgZGVsZXRlIHAubGlua1RvRGVzdGluYXRpb247CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rVG9EZXN0aW5hdGlvbjsKICAgICAgICAgICAgICAgICAgZGVsZXRlIHAuX2xpbmtUeXBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGZvbnRTaXplSW5wdXQpIHsKICAgICAgICAgICAgY29uc3QgZm9udFNpemVFcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWZvbnRTaXplRXJyb3InKTsKCiAgICAgICAgICAgIGZvbnRTaXplSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBwcm9jZXNzYXIgbyB2YWxvciBpbWVkaWF0YW1lbnRlIHBhcmEgaW5wdXRzIG51bWJlcgogICAgICAgICAgICAgIC8vIERlaXhhciBvIHZhbG9yIGNvbW8gc3RyaW5nIGR1cmFudGUgYSBkaWdpdGHDp8OjbyBwYXJhIHByZXNlcnZhciBwb3Npw6fDo28gZG8gY3Vyc29yCiAgICAgICAgICAgICAgY29uc3QgcmF3VmFsdWUgPSBmb250U2l6ZUlucHV0LnZhbHVlOwoKICAgICAgICAgICAgICAvLyBWYWxpZGFyIHJhbmdlCiAgICAgICAgICAgICAgaWYgKHJhd1ZhbHVlICE9PSAnJyAmJiAhaXNOYU4ocmF3VmFsdWUpKSB7CiAgICAgICAgICAgICAgICBjb25zdCBmb250U2l6ZSA9IHBhcnNlSW50KHJhd1ZhbHVlKTsKICAgICAgICAgICAgICAgIGlmIChmb250U2l6ZSA8IDggfHwgZm9udFNpemUgPiA3MikgewogICAgICAgICAgICAgICAgICBpZiAoZm9udFNpemVFcnJvcikgewogICAgICAgICAgICAgICAgICAgIGZvbnRTaXplRXJyb3IudGV4dENvbnRlbnQgPSBg4pqg77iPIFRhbWFuaG8gZGEgZm9udGUgZGV2ZSBlc3RhciBlbnRyZSA4IGUgNzIgKHZhbG9yIGF0dWFsOiAke2ZvbnRTaXplfSlgOwogICAgICAgICAgICAgICAgICAgIGZvbnRTaXplRXJyb3Iuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGlmIChmb250U2l6ZUVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgZm9udFNpemVFcnJvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHAuZm9udFNpemUgPSBmb250U2l6ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJhd1ZhbHVlID09PSAnJykgewogICAgICAgICAgICAgICAgaWYgKGZvbnRTaXplRXJyb3IpIHsKICAgICAgICAgICAgICAgICAgZm9udFNpemVFcnJvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdXBkYXRlUGFyZW50R3JvdXBzRGltZW5zaW9ucyhlbGVtZW50LmlkKTsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGZvbnRTZWxlY3QpIHsKICAgICAgICAgICAgZm9udFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgaXNFZGl0aW5nTW9kZSA9IHRydWU7CiAgICAgICAgICAgICAgcC5mb250ID0gZm9udFNlbGVjdC52YWx1ZSB8fCBudWxsOwogICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGlzRWRpdGluZ01vZGUgPSBmYWxzZTsgfSwgMjAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZm9udEZlYXR1cmVzSW5wdXQpIHsKICAgICAgICAgICAgZm9udEZlYXR1cmVzSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgdmFsID0gZm9udEZlYXR1cmVzSW5wdXQudmFsdWUudHJpbSgpOwogICAgICAgICAgICAgIHAuZm9udEZlYXR1cmVzID0gdmFsID8gdmFsLnNwbGl0KCcsJykubWFwKGYgPT4gZi50cmltKCkpLmZpbHRlcihCb29sZWFuKSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGFsaWdubWVudFNlbGVjdCkgYWxpZ25tZW50U2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgaXNFZGl0aW5nTW9kZSA9IHRydWU7CiAgICAgICAgICAgIHAuYWxpZ25tZW50ID0gYWxpZ25tZW50U2VsZWN0LnZhbHVlOwogICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGlzRWRpdGluZ01vZGUgPSBmYWxzZTsgfSwgMjAwKTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKGRlY29yYXRpb25TZWxlY3QpIHsKICAgICAgICAgICAgZGVjb3JhdGlvblNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgaXNFZGl0aW5nTW9kZSA9IHRydWU7CiAgICAgICAgICAgICAgcC5kZWNvcmF0aW9uID0gZGVjb3JhdGlvblNlbGVjdC52YWx1ZSB8fCBudWxsOwogICAgICAgICAgICAgIGlmIChkZWNvcmF0aW9uT3B0aW9ucykgZGVjb3JhdGlvbk9wdGlvbnMuc3R5bGUuZGlzcGxheSA9IHAuZGVjb3JhdGlvbiA/ICcnIDogJ25vbmUnOwogICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGlzRWRpdGluZ01vZGUgPSBmYWxzZTsgfSwgMjAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZGVjb3JhdGlvblN0eWxlU2VsZWN0KSB7CiAgICAgICAgICAgIGRlY29yYXRpb25TdHlsZVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgaXNFZGl0aW5nTW9kZSA9IHRydWU7CiAgICAgICAgICAgICAgcC5kZWNvcmF0aW9uU3R5bGUgPSBkZWNvcmF0aW9uU3R5bGVTZWxlY3QudmFsdWUgfHwgbnVsbDsKICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyBpc0VkaXRpbmdNb2RlID0gZmFsc2U7IH0sIDIwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGRlY29yYXRpb25Db2xvcklucHV0ICYmIGRlY29yYXRpb25Db2xvclRleHRJbnB1dCkgewogICAgICAgICAgICBkZWNvcmF0aW9uQ29sb3JJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBkZWNvcmF0aW9uQ29sb3JUZXh0SW5wdXQudmFsdWUgPSBkZWNvcmF0aW9uQ29sb3JJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICBwLmRlY29yYXRpb25Db2xvciA9IGRlY29yYXRpb25Db2xvcklucHV0LnZhbHVlOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRlY29yYXRpb25Db2xvclRleHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBpZiAoIWRlY29yYXRpb25Db2xvclRleHRJbnB1dC52YWx1ZS50cmltKCkpIHsKICAgICAgICAgICAgICAgIHAuZGVjb3JhdGlvbkNvbG9yID0gbnVsbDsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9eI1swLTlBLUZdezZ9JC9pLnRlc3QoZGVjb3JhdGlvbkNvbG9yVGV4dElucHV0LnZhbHVlKSkgewogICAgICAgICAgICAgICAgZGVjb3JhdGlvbkNvbG9ySW5wdXQudmFsdWUgPSBkZWNvcmF0aW9uQ29sb3JUZXh0SW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgICBwLmRlY29yYXRpb25Db2xvciA9IGRlY29yYXRpb25Db2xvclRleHRJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjb2xvcklucHV0ICYmIGNvbG9yVGV4dElucHV0KSB7CiAgICAgICAgICAgIGNvbG9ySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgY29sb3JUZXh0SW5wdXQudmFsdWUgPSBjb2xvcklucHV0LnZhbHVlOwogICAgICAgICAgICAgIHAuY29sb3IgPSBjb2xvcklucHV0LnZhbHVlOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbG9yVGV4dElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGlmICgvXiNbMC05QS1GXXs2fSQvaS50ZXN0KGNvbG9yVGV4dElucHV0LnZhbHVlKSkgewogICAgICAgICAgICAgICAgY29sb3JJbnB1dC52YWx1ZSA9IGNvbG9yVGV4dElucHV0LnZhbHVlOwogICAgICAgICAgICAgICAgcC5jb2xvciA9IGNvbG9yVGV4dElucHV0LnZhbHVlOwogICAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoYmFja2dyb3VuZElucHV0ICYmIGJhY2tncm91bmRUZXh0SW5wdXQpIHsKICAgICAgICAgICAgYmFja2dyb3VuZElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGJhY2tncm91bmRUZXh0SW5wdXQudmFsdWUgPSBiYWNrZ3JvdW5kSW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgcC5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZElucHV0LnZhbHVlIHx8IG51bGw7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYmFja2dyb3VuZFRleHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBpZiAoIWJhY2tncm91bmRUZXh0SW5wdXQudmFsdWUudHJpbSgpKSB7CiAgICAgICAgICAgICAgICBwLmJhY2tncm91bmQgPSBudWxsOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoL14jWzAtOUEtRl17Nn0kL2kudGVzdChiYWNrZ3JvdW5kVGV4dElucHV0LnZhbHVlKSkgewogICAgICAgICAgICAgICAgYmFja2dyb3VuZElucHV0LnZhbHVlID0gYmFja2dyb3VuZFRleHRJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICAgIHAuYmFja2dyb3VuZCA9IGJhY2tncm91bmRUZXh0SW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoYm9sZENoZWNrKSBib2xkQ2hlY2suYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICBwLmJvbGQgPSBib2xkQ2hlY2suY2hlY2tlZDsKICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChpdGFsaWNzQ2hlY2spIGl0YWxpY3NDaGVjay5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgIHAuaXRhbGljcyA9IGl0YWxpY3NDaGVjay5jaGVja2VkOwogICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKGxpbmVIZWlnaHRJbnB1dCkgewogICAgICAgICAgICBsaW5lSGVpZ2h0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBwcm9jZXNzYXIgbyB2YWxvciBpbWVkaWF0YW1lbnRlIHBhcmEgaW5wdXRzIG51bWJlcgogICAgICAgICAgICAgIGNvbnN0IHZhbCA9IGxpbmVIZWlnaHRJbnB1dC52YWx1ZS50cmltKCk7CiAgICAgICAgICAgICAgaWYgKHZhbCAhPT0gJycgJiYgIWlzTmFOKHZhbCkpIHsKICAgICAgICAgICAgICAgIHAubGluZUhlaWdodCA9IHBhcnNlRmxvYXQodmFsKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbCA9PT0gJycpIHsKICAgICAgICAgICAgICAgIHAubGluZUhlaWdodCA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjaGFyYWN0ZXJTcGFjaW5nSW5wdXQpIHsKICAgICAgICAgICAgY2hhcmFjdGVyU3BhY2luZ0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gcHJvY2Vzc2FyIG8gdmFsb3IgaW1lZGlhdGFtZW50ZSBwYXJhIGlucHV0cyBudW1iZXIKICAgICAgICAgICAgICBjb25zdCB2YWwgPSBjaGFyYWN0ZXJTcGFjaW5nSW5wdXQudmFsdWUudHJpbSgpOwogICAgICAgICAgICAgIGlmICh2YWwgIT09ICcnICYmICFpc05hTih2YWwpKSB7CiAgICAgICAgICAgICAgICBwLmNoYXJhY3RlclNwYWNpbmcgPSBwYXJzZUZsb2F0KHZhbCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWwgPT09ICcnKSB7CiAgICAgICAgICAgICAgICBwLmNoYXJhY3RlclNwYWNpbmcgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnaGVhZGVyJzoKICAgICAgICAgIGNvbnN0IGhlYWRlckVsZW1lbnRJZElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaGVhZGVyRWxlbWVudElkJyk7CiAgICAgICAgICBjb25zdCBoZWFkZXJUZXh0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1oZWFkZXJUZXh0Jyk7CiAgICAgICAgICBjb25zdCBoZWFkZXJMaW5rSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1oZWFkZXJMaW5rJyk7CiAgICAgICAgICBjb25zdCBoZWFkZXJGb250U2l6ZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaGVhZGVyRm9udFNpemUnKTsKCiAgICAgICAgICBpZiAoaGVhZGVyRWxlbWVudElkSW5wdXQpIHsKICAgICAgICAgICAgaGVhZGVyRWxlbWVudElkSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgaWRWYWx1ZSA9IGhlYWRlckVsZW1lbnRJZElucHV0LnZhbHVlLnRyaW0oKTsKICAgICAgICAgICAgICBpZiAoaWRWYWx1ZSkgewogICAgICAgICAgICAgICAgcC5pZCA9IGlkVmFsdWU7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmlkOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgaGVhZGVyRm9udFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWhlYWRlckZvbnQnKTsKICAgICAgICAgIGNvbnN0IGhlYWRlckZvbnRGZWF0dXJlc0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaGVhZGVyRm9udEZlYXR1cmVzJyk7CiAgICAgICAgICBjb25zdCBoZWFkZXJBbGlnbm1lbnRTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1oZWFkZXJBbGlnbm1lbnQnKTsKICAgICAgICAgIGNvbnN0IGhlYWRlckRlY29yYXRpb25TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1oZWFkZXJEZWNvcmF0aW9uJyk7CiAgICAgICAgICBjb25zdCBoZWFkZXJDb2xvcklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaGVhZGVyQ29sb3InKTsKICAgICAgICAgIGNvbnN0IGhlYWRlckNvbG9yVGV4dElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaGVhZGVyQ29sb3JUZXh0Jyk7CiAgICAgICAgICBjb25zdCBoZWFkZXJCYWNrZ3JvdW5kSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1oZWFkZXJCYWNrZ3JvdW5kJyk7CiAgICAgICAgICBjb25zdCBoZWFkZXJCYWNrZ3JvdW5kVGV4dElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaGVhZGVyQmFja2dyb3VuZFRleHQnKTsKICAgICAgICAgIGNvbnN0IGhlYWRlckJvbGRDaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWhlYWRlckJvbGQnKTsKICAgICAgICAgIGNvbnN0IGhlYWRlckl0YWxpY3NDaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWhlYWRlckl0YWxpY3MnKTsKICAgICAgICAgIGNvbnN0IGhlYWRlckxpbmVIZWlnaHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWhlYWRlckxpbmVIZWlnaHQnKTsKICAgICAgICAgIGNvbnN0IGhlYWRlckNoYXJhY3RlclNwYWNpbmdJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWhlYWRlckNoYXJhY3RlclNwYWNpbmcnKTsKICAgICAgICAgIGNvbnN0IGhlYWRlckRlY29yYXRpb25TdHlsZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWhlYWRlckRlY29yYXRpb25TdHlsZScpOwogICAgICAgICAgY29uc3QgaGVhZGVyRGVjb3JhdGlvbkNvbG9ySW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1oZWFkZXJEZWNvcmF0aW9uQ29sb3InKTsKICAgICAgICAgIGNvbnN0IGhlYWRlckRlY29yYXRpb25Db2xvclRleHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWhlYWRlckRlY29yYXRpb25Db2xvclRleHQnKTsKICAgICAgICAgIGNvbnN0IGhlYWRlckRlY29yYXRpb25PcHRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlYWRlckRlY29yYXRpb25PcHRpb25zJyk7CgogICAgICAgICAgaWYgKGhlYWRlclRleHRJbnB1dCkgewogICAgICAgICAgICBoZWFkZXJUZXh0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC50ZXh0ID0gaGVhZGVyVGV4dElucHV0LnZhbHVlOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBIYW5kbGUgaGVhZGVyIGxpbmsgdHlwZSBzZWxlY3RvcgogICAgICAgICAgY29uc3QgaGVhZGVyTGlua1R5cGVTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1oZWFkZXJMaW5rVHlwZScpOwogICAgICAgICAgY29uc3QgaGVhZGVyTGlua1VybE9wdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1oZWFkZXJMaW5rVXJsT3B0aW9ucycpOwogICAgICAgICAgY29uc3QgaGVhZGVyTGlua1BhZ2VPcHRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaGVhZGVyTGlua1BhZ2VPcHRpb25zJyk7CiAgICAgICAgICBjb25zdCBoZWFkZXJMaW5rRGVzdGluYXRpb25PcHRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaGVhZGVyTGlua0Rlc3RpbmF0aW9uT3B0aW9ucycpOwoKICAgICAgICAgIGlmIChoZWFkZXJMaW5rVHlwZVNlbGVjdCkgewogICAgICAgICAgICBoZWFkZXJMaW5rVHlwZVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgbGlua1R5cGUgPSBoZWFkZXJMaW5rVHlwZVNlbGVjdC52YWx1ZTsKCiAgICAgICAgICAgICAgLy8gUHJlc2VydmFyIG8gdGlwbyBlc2NvbGhpZG8gbWVzbW8gcXVhbmRvIG7Do28gaMOhIHZhbG9yIGFpbmRhCiAgICAgICAgICAgICAgcC5fbGlua1R5cGUgPSBsaW5rVHlwZTsKCiAgICAgICAgICAgICAgLy8gU2hvdy9oaWRlIG9wdGlvbnMKICAgICAgICAgICAgICBpZiAoaGVhZGVyTGlua1VybE9wdGlvbnMpIGhlYWRlckxpbmtVcmxPcHRpb25zLnN0eWxlLmRpc3BsYXkgPSBsaW5rVHlwZSA9PT0gJ3VybCcgPyAnJyA6ICdub25lJzsKICAgICAgICAgICAgICBpZiAoaGVhZGVyTGlua1BhZ2VPcHRpb25zKSBoZWFkZXJMaW5rUGFnZU9wdGlvbnMuc3R5bGUuZGlzcGxheSA9IGxpbmtUeXBlID09PSAncGFnZScgPyAnJyA6ICdub25lJzsKICAgICAgICAgICAgICBpZiAoaGVhZGVyTGlua0Rlc3RpbmF0aW9uT3B0aW9ucykgaGVhZGVyTGlua0Rlc3RpbmF0aW9uT3B0aW9ucy5zdHlsZS5kaXNwbGF5ID0gbGlua1R5cGUgPT09ICdkZXN0aW5hdGlvbicgPyAnJyA6ICdub25lJzsKCiAgICAgICAgICAgICAgLy8gQXBlbmFzIGxpbXBhciBwcm9wcmllZGFkZXMgc2UgbXVkb3UgcGFyYSAnbm9uZScsIGNhc28gY29udHLDoXJpbyBtYW50ZXIgdmFsb3JlcyBleGlzdGVudGVzCiAgICAgICAgICAgICAgaWYgKGxpbmtUeXBlID09PSAnbm9uZScpIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmxpbms7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rVG9QYWdlOwogICAgICAgICAgICAgICAgZGVsZXRlIHAubGlua1RvRGVzdGluYXRpb247CiAgICAgICAgICAgICAgICBkZWxldGUgcC5fbGlua1R5cGU7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5rVHlwZSA9PT0gJ3VybCcpIHsKICAgICAgICAgICAgICAgIC8vIFNlIG11ZG91IHBhcmEgVVJMLCBsaW1wYXIgb3V0cm9zIHRpcG9zIG1hcyBtYW50ZXIgVVJMIHNlIGV4aXN0aXIKICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmxpbmtUb1BhZ2U7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rVG9EZXN0aW5hdGlvbjsKICAgICAgICAgICAgICAgIC8vIE7Do28gbGltcGFyIHAubGluayAtIGRlaXhhciBvIHVzdcOhcmlvIHByZWVuY2hlciBvdSBtYW50ZXIgc2UgasOhIGV4aXN0ZQogICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlua1R5cGUgPT09ICdwYWdlJykgewogICAgICAgICAgICAgICAgLy8gU2UgbXVkb3UgcGFyYSBww6FnaW5hLCBsaW1wYXIgb3V0cm9zIHRpcG9zIG1hcyBtYW50ZXIgbGlua1RvUGFnZSBzZSBleGlzdGlyCiAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rOwogICAgICAgICAgICAgICAgZGVsZXRlIHAubGlua1RvRGVzdGluYXRpb247CiAgICAgICAgICAgICAgICBpZiAoIXAubGlua1RvUGFnZSAmJiBoZWFkZXJMaW5rVG9QYWdlSW5wdXQpIHsKICAgICAgICAgICAgICAgICAgLy8gU2UgbsOjbyB0aW5oYSBww6FnaW5hLCBkZWZpbmlyIHBhZHLDo28gMQogICAgICAgICAgICAgICAgICBwLmxpbmtUb1BhZ2UgPSAxOwogICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyTGlua1RvUGFnZUlucHV0KSBoZWFkZXJMaW5rVG9QYWdlSW5wdXQudmFsdWUgPSAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlua1R5cGUgPT09ICdkZXN0aW5hdGlvbicpIHsKICAgICAgICAgICAgICAgIC8vIFNlIG11ZG91IHBhcmEgZGVzdGlubywgbGltcGFyIG91dHJvcyB0aXBvcyBtYXMgbWFudGVyIGxpbmtUb0Rlc3RpbmF0aW9uIHNlIGV4aXN0aXIKICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmxpbms7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rVG9QYWdlOwogICAgICAgICAgICAgICAgLy8gTsOjbyBsaW1wYXIgcC5saW5rVG9EZXN0aW5hdGlvbiAtIGRlaXhhciBvIHVzdcOhcmlvIHByZWVuY2hlciBvdSBtYW50ZXIgc2UgasOhIGV4aXN0ZQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8gTsOjbyByZS1yZW5kZXJpemFyIG8gaW5zcGVjdG9yIHBhcmEgbsOjbyBwZXJkZXIgYSBzZWxlw6fDo28gZG8gZHJvcGRvd24KICAgICAgICAgICAgICAvLyBBcGVuYXMgYXR1YWxpemFyIGEgcmVuZGVyaXphw6fDo28gZG8gY2FudmFzIHNlIG5lY2Vzc8OhcmlvCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaGVhZGVyTGlua0lucHV0KSB7CiAgICAgICAgICAgIGhlYWRlckxpbmtJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBjb25zdCB1cmxWYWx1ZSA9IGhlYWRlckxpbmtJbnB1dC52YWx1ZS50cmltKCk7CiAgICAgICAgICAgICAgaWYgKHVybFZhbHVlKSB7CiAgICAgICAgICAgICAgICBwLmxpbmsgPSB1cmxWYWx1ZTsKICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmxpbmtUb1BhZ2U7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rVG9EZXN0aW5hdGlvbjsKICAgICAgICAgICAgICAgIHAuX2xpbmtUeXBlID0gJ3VybCc7IC8vIFByZXNlcnZhciB0aXBvIGVzY29saGlkbwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBTZSBsaW1wb3UgbyBjYW1wbywgdmVyaWZpY2FyIHNlIGRldmUgbWFudGVyIG8gdGlwbyBvdSBsaW1wYXIgdHVkbwogICAgICAgICAgICAgICAgaWYgKHAuX2xpbmtUeXBlID09PSAndXJsJykgewogICAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZGVsZXRlIHAubGluazsKICAgICAgICAgICAgICAgICAgZGVsZXRlIHAuX2xpbmtUeXBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IGhlYWRlckxpbmtUb1BhZ2VJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWhlYWRlckxpbmtUb1BhZ2UnKTsKICAgICAgICAgIGlmIChoZWFkZXJMaW5rVG9QYWdlSW5wdXQpIHsKICAgICAgICAgICAgaGVhZGVyTGlua1RvUGFnZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHBhZ2VOdW0gPSBwYXJzZUludChoZWFkZXJMaW5rVG9QYWdlSW5wdXQudmFsdWUpOwogICAgICAgICAgICAgIGlmIChwYWdlTnVtID4gMCkgewogICAgICAgICAgICAgICAgcC5saW5rVG9QYWdlID0gcGFnZU51bTsKICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmxpbms7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rVG9EZXN0aW5hdGlvbjsKICAgICAgICAgICAgICAgIHAuX2xpbmtUeXBlID0gJ3BhZ2UnOyAvLyBQcmVzZXJ2YXIgdGlwbyBlc2NvbGhpZG8KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gU2UgbGltcG91IG8gY2FtcG8sIHZlcmlmaWNhciBzZSBkZXZlIG1hbnRlciBvIHRpcG8gb3UgbGltcGFyIHR1ZG8KICAgICAgICAgICAgICAgIGlmIChwLl9saW5rVHlwZSA9PT0gJ3BhZ2UnKSB7CiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmxpbmtUb1BhZ2U7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rVG9QYWdlOwogICAgICAgICAgICAgICAgICBkZWxldGUgcC5fbGlua1R5cGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgaGVhZGVyTGlua1RvRGVzdGluYXRpb25JbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWhlYWRlckxpbmtUb0Rlc3RpbmF0aW9uJyk7CiAgICAgICAgICBpZiAoaGVhZGVyTGlua1RvRGVzdGluYXRpb25JbnB1dCkgewogICAgICAgICAgICBoZWFkZXJMaW5rVG9EZXN0aW5hdGlvbklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IGRlc3QgPSBoZWFkZXJMaW5rVG9EZXN0aW5hdGlvbklucHV0LnZhbHVlLnRyaW0oKTsKICAgICAgICAgICAgICBpZiAoZGVzdCkgewogICAgICAgICAgICAgICAgcC5saW5rVG9EZXN0aW5hdGlvbiA9IGRlc3Q7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rOwogICAgICAgICAgICAgICAgZGVsZXRlIHAubGlua1RvUGFnZTsKICAgICAgICAgICAgICAgIHAuX2xpbmtUeXBlID0gJ2Rlc3RpbmF0aW9uJzsgLy8gUHJlc2VydmFyIHRpcG8gZXNjb2xoaWRvCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIFNlIGxpbXBvdSBvIGNhbXBvLCB2ZXJpZmljYXIgc2UgZGV2ZSBtYW50ZXIgbyB0aXBvIG91IGxpbXBhciB0dWRvCiAgICAgICAgICAgICAgICBpZiAocC5fbGlua1R5cGUgPT09ICdkZXN0aW5hdGlvbicpIHsKICAgICAgICAgICAgICAgICAgZGVsZXRlIHAubGlua1RvRGVzdGluYXRpb247CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBkZWxldGUgcC5saW5rVG9EZXN0aW5hdGlvbjsKICAgICAgICAgICAgICAgICAgZGVsZXRlIHAuX2xpbmtUeXBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGhlYWRlckZvbnRTaXplSW5wdXQpIHsKICAgICAgICAgICAgaGVhZGVyRm9udFNpemVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIHByb2Nlc3NhciBvIHZhbG9yIGltZWRpYXRhbWVudGUgcGFyYSBpbnB1dHMgbnVtYmVyCiAgICAgICAgICAgICAgY29uc3QgcmF3VmFsdWUgPSBoZWFkZXJGb250U2l6ZUlucHV0LnZhbHVlOwogICAgICAgICAgICAgIGlmIChyYXdWYWx1ZSAhPT0gJycgJiYgIWlzTmFOKHJhd1ZhbHVlKSkgewogICAgICAgICAgICAgICAgcC5mb250U2l6ZSA9IHBhcnNlSW50KHJhd1ZhbHVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChoZWFkZXJGb250U2VsZWN0KSB7CiAgICAgICAgICAgIGhlYWRlckZvbnRTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIHAuZm9udCA9IGhlYWRlckZvbnRTZWxlY3QudmFsdWUgfHwgbnVsbDsKICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChoZWFkZXJGb250RmVhdHVyZXNJbnB1dCkgewogICAgICAgICAgICBoZWFkZXJGb250RmVhdHVyZXNJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBjb25zdCB2YWwgPSBoZWFkZXJGb250RmVhdHVyZXNJbnB1dC52YWx1ZS50cmltKCk7CiAgICAgICAgICAgICAgcC5mb250RmVhdHVyZXMgPSB2YWwgPyB2YWwuc3BsaXQoJywnKS5tYXAoZiA9PiBmLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaGVhZGVyQWxpZ25tZW50U2VsZWN0KSBoZWFkZXJBbGlnbm1lbnRTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICBwLmFsaWdubWVudCA9IGhlYWRlckFsaWdubWVudFNlbGVjdC52YWx1ZTsKICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChoZWFkZXJEZWNvcmF0aW9uU2VsZWN0KSB7CiAgICAgICAgICAgIGhlYWRlckRlY29yYXRpb25TZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIHAuZGVjb3JhdGlvbiA9IGhlYWRlckRlY29yYXRpb25TZWxlY3QudmFsdWUgfHwgbnVsbDsKICAgICAgICAgICAgICBpZiAoaGVhZGVyRGVjb3JhdGlvbk9wdGlvbnMpIGhlYWRlckRlY29yYXRpb25PcHRpb25zLnN0eWxlLmRpc3BsYXkgPSBwLmRlY29yYXRpb24gPyAnJyA6ICdub25lJzsKICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChoZWFkZXJEZWNvcmF0aW9uU3R5bGVTZWxlY3QpIHsKICAgICAgICAgICAgaGVhZGVyRGVjb3JhdGlvblN0eWxlU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgICBwLmRlY29yYXRpb25TdHlsZSA9IGhlYWRlckRlY29yYXRpb25TdHlsZVNlbGVjdC52YWx1ZSB8fCBudWxsOwogICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGhlYWRlckRlY29yYXRpb25Db2xvcklucHV0ICYmIGhlYWRlckRlY29yYXRpb25Db2xvclRleHRJbnB1dCkgewogICAgICAgICAgICBoZWFkZXJEZWNvcmF0aW9uQ29sb3JJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBoZWFkZXJEZWNvcmF0aW9uQ29sb3JUZXh0SW5wdXQudmFsdWUgPSBoZWFkZXJEZWNvcmF0aW9uQ29sb3JJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICBwLmRlY29yYXRpb25Db2xvciA9IGhlYWRlckRlY29yYXRpb25Db2xvcklucHV0LnZhbHVlOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGhlYWRlckRlY29yYXRpb25Db2xvclRleHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBpZiAoIWhlYWRlckRlY29yYXRpb25Db2xvclRleHRJbnB1dC52YWx1ZS50cmltKCkpIHsKICAgICAgICAgICAgICAgIHAuZGVjb3JhdGlvbkNvbG9yID0gbnVsbDsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9eI1swLTlBLUZdezZ9JC9pLnRlc3QoaGVhZGVyRGVjb3JhdGlvbkNvbG9yVGV4dElucHV0LnZhbHVlKSkgewogICAgICAgICAgICAgICAgaGVhZGVyRGVjb3JhdGlvbkNvbG9ySW5wdXQudmFsdWUgPSBoZWFkZXJEZWNvcmF0aW9uQ29sb3JUZXh0SW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgICBwLmRlY29yYXRpb25Db2xvciA9IGhlYWRlckRlY29yYXRpb25Db2xvclRleHRJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChoZWFkZXJDb2xvcklucHV0ICYmIGhlYWRlckNvbG9yVGV4dElucHV0KSB7CiAgICAgICAgICAgIGhlYWRlckNvbG9ySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgaGVhZGVyQ29sb3JUZXh0SW5wdXQudmFsdWUgPSBoZWFkZXJDb2xvcklucHV0LnZhbHVlOwogICAgICAgICAgICAgIHAuY29sb3IgPSBoZWFkZXJDb2xvcklucHV0LnZhbHVlOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGhlYWRlckNvbG9yVGV4dElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGlmICgvXiNbMC05QS1GXXs2fSQvaS50ZXN0KGhlYWRlckNvbG9yVGV4dElucHV0LnZhbHVlKSkgewogICAgICAgICAgICAgICAgaGVhZGVyQ29sb3JJbnB1dC52YWx1ZSA9IGhlYWRlckNvbG9yVGV4dElucHV0LnZhbHVlOwogICAgICAgICAgICAgICAgcC5jb2xvciA9IGhlYWRlckNvbG9yVGV4dElucHV0LnZhbHVlOwogICAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaGVhZGVyQmFja2dyb3VuZElucHV0ICYmIGhlYWRlckJhY2tncm91bmRUZXh0SW5wdXQpIHsKICAgICAgICAgICAgaGVhZGVyQmFja2dyb3VuZElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGhlYWRlckJhY2tncm91bmRUZXh0SW5wdXQudmFsdWUgPSBoZWFkZXJCYWNrZ3JvdW5kSW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgcC5iYWNrZ3JvdW5kID0gaGVhZGVyQmFja2dyb3VuZElucHV0LnZhbHVlIHx8IG51bGw7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaGVhZGVyQmFja2dyb3VuZFRleHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBpZiAoIWhlYWRlckJhY2tncm91bmRUZXh0SW5wdXQudmFsdWUudHJpbSgpKSB7CiAgICAgICAgICAgICAgICBwLmJhY2tncm91bmQgPSBudWxsOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoL14jWzAtOUEtRl17Nn0kL2kudGVzdChoZWFkZXJCYWNrZ3JvdW5kVGV4dElucHV0LnZhbHVlKSkgewogICAgICAgICAgICAgICAgaGVhZGVyQmFja2dyb3VuZElucHV0LnZhbHVlID0gaGVhZGVyQmFja2dyb3VuZFRleHRJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICAgIHAuYmFja2dyb3VuZCA9IGhlYWRlckJhY2tncm91bmRUZXh0SW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaGVhZGVyQm9sZENoZWNrKSBoZWFkZXJCb2xkQ2hlY2suYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICBwLmJvbGQgPSBoZWFkZXJCb2xkQ2hlY2suY2hlY2tlZDsKICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChoZWFkZXJJdGFsaWNzQ2hlY2spIGhlYWRlckl0YWxpY3NDaGVjay5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgIHAuaXRhbGljcyA9IGhlYWRlckl0YWxpY3NDaGVjay5jaGVja2VkOwogICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKGhlYWRlckxpbmVIZWlnaHRJbnB1dCkgewogICAgICAgICAgICBoZWFkZXJMaW5lSGVpZ2h0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgdmFsID0gaGVhZGVyTGluZUhlaWdodElucHV0LnZhbHVlLnRyaW0oKTsKICAgICAgICAgICAgICBwLmxpbmVIZWlnaHQgPSB2YWwgPyBwYXJzZUZsb2F0KHZhbCkgOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChoZWFkZXJDaGFyYWN0ZXJTcGFjaW5nSW5wdXQpIHsKICAgICAgICAgICAgaGVhZGVyQ2hhcmFjdGVyU3BhY2luZ0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHZhbCA9IGhlYWRlckNoYXJhY3RlclNwYWNpbmdJbnB1dC52YWx1ZS50cmltKCk7CiAgICAgICAgICAgICAgcC5jaGFyYWN0ZXJTcGFjaW5nID0gdmFsID8gcGFyc2VGbG9hdCh2YWwpIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnY29sdW1ucyc6CiAgICAgICAgICBjb25zdCBjb2xDb3VudElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtY29sQ291bnQnKTsKICAgICAgICAgIGNvbnN0IGNvbEdhcElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtY29sR2FwJyk7CiAgICAgICAgICBjb25zdCBjb2xWYWxpZ25TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1jb2xWYWxpZ24nKTsKICAgICAgICAgIGNvbnN0IGNvbFRleHRzSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1jb2xUZXh0cycpOwoKICAgICAgICAgIC8vIExpc3RlbmVycyBwYXJhIGxhcmd1cmFzIGRhcyBjb2x1bmFzCiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29sLXdpZHRoLXR5cGUnKS5mb3JFYWNoKHNlbGVjdCA9PiB7CiAgICAgICAgICAgIHNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSBwYXJzZUludChzZWxlY3QuZGF0YXNldC5jb2xJbmRleCB8fCAwKTsKICAgICAgICAgICAgICBjb25zdCB3aWR0aFR5cGUgPSBzZWxlY3QudmFsdWU7CiAgICAgICAgICAgICAgY29uc3QgdmFsdWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5jb2wtd2lkdGgtdmFsdWVbZGF0YS1jb2wtaW5kZXg9IiR7Y29sSW5kZXh9Il1gKTsKICAgICAgICAgICAgICBjb25zdCB2YWx1ZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBjb2wtd2lkdGgtdmFsdWUtJHtjb2xJbmRleH1gKTsKCiAgICAgICAgICAgICAgaWYgKCFwLmNvbHVtbnMgfHwgIXAuY29sdW1uc1tjb2xJbmRleF0pIHJldHVybjsKCiAgICAgICAgICAgICAgaWYgKHdpZHRoVHlwZSA9PT0gJ2F1dG8nKSB7CiAgICAgICAgICAgICAgICBwLmNvbHVtbnNbY29sSW5kZXhdLndpZHRoID0gJyonOwogICAgICAgICAgICAgICAgaWYgKHZhbHVlQ29udGFpbmVyKSB2YWx1ZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAodmFsdWVDb250YWluZXIpIHZhbHVlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHZhbHVlSW5wdXQgPyBwYXJzZUZsb2F0KHZhbHVlSW5wdXQudmFsdWUpIHx8IDAgOiAwOwogICAgICAgICAgICAgICAgaWYgKHdpZHRoVHlwZSA9PT0gJ3BpeGVscycpIHsKICAgICAgICAgICAgICAgICAgcC5jb2x1bW5zW2NvbEluZGV4XS53aWR0aCA9IGN1cnJlbnRWYWx1ZSB8fCAxMDA7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHdpZHRoVHlwZSA9PT0gJ3BlcmNlbnRhZ2UnKSB7CiAgICAgICAgICAgICAgICAgIHAuY29sdW1uc1tjb2xJbmRleF0ud2lkdGggPSBjdXJyZW50VmFsdWUgPyBgJHtjdXJyZW50VmFsdWV9JWAgOiAnNTAlJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29sLXdpZHRoLXZhbHVlJykuZm9yRWFjaChpbnB1dCA9PiB7CiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IGNvbEluZGV4ID0gcGFyc2VJbnQoaW5wdXQuZGF0YXNldC5jb2xJbmRleCB8fCAwKTsKICAgICAgICAgICAgICBjb25zdCB0eXBlU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmNvbC13aWR0aC10eXBlW2RhdGEtY29sLWluZGV4PSIke2NvbEluZGV4fSJdYCk7CiAgICAgICAgICAgICAgY29uc3Qgd2lkdGhUeXBlID0gdHlwZVNlbGVjdCA/IHR5cGVTZWxlY3QudmFsdWUgOiAnYXV0byc7CiAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBwcm9jZXNzYXIgbyB2YWxvciBpbWVkaWF0YW1lbnRlIHBhcmEgaW5wdXRzIG51bWJlcgogICAgICAgICAgICAgIGNvbnN0IHJhd1ZhbHVlID0gaW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSAocmF3VmFsdWUgIT09ICcnICYmICFpc05hTihyYXdWYWx1ZSkpID8gcGFyc2VGbG9hdChyYXdWYWx1ZSkgOiAwOwoKICAgICAgICAgICAgICBpZiAoIXAuY29sdW1ucyB8fCAhcC5jb2x1bW5zW2NvbEluZGV4XSkgcmV0dXJuOwoKICAgICAgICAgICAgICBpZiAod2lkdGhUeXBlID09PSAncGl4ZWxzJykgewogICAgICAgICAgICAgICAgcC5jb2x1bW5zW2NvbEluZGV4XS53aWR0aCA9IHZhbHVlIHx8IDEwMDsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHdpZHRoVHlwZSA9PT0gJ3BlcmNlbnRhZ2UnKSB7CiAgICAgICAgICAgICAgICBwLmNvbHVtbnNbY29sSW5kZXhdLndpZHRoID0gdmFsdWUgPyBgJHt2YWx1ZX0lYCA6ICc1MCUnOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIC8vIExpc3RlbmVyIHBhcmEgZGVsZXRhciBjb2x1bmEKICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idG4tZGVsZXRlLWNvbCcpLmZvckVhY2goYnRuID0+IHsKICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IGNvbEluZGV4ID0gcGFyc2VJbnQoYnRuLmRhdGFzZXQuY29sSW5kZXggfHwgMCk7CiAgICAgICAgICAgICAgaWYgKGNvbEluZGV4ID4gMCAmJiBwLmNvbHVtbnMgJiYgcC5jb2x1bW5zLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2hvd0NvbmZpcm1Nb2RhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICBzaG93Q29uZmlybU1vZGFsKAogICAgICAgICAgICAgICAgICAgICdEZWxldGFyIENvbHVuYScsCiAgICAgICAgICAgICAgICAgICAgYFRlbSBjZXJ0ZXphIHF1ZSBkZXNlamEgZGVsZXRhciBhIENvbHVuYSAke2NvbEluZGV4ICsgMX0/YCwKICAgICAgICAgICAgICAgICAgICAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICBwLmNvbHVtbnMuc3BsaWNlKGNvbEluZGV4LCAxKTsKICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2xDb3VudElucHV0KSBjb2xDb3VudElucHV0LnZhbHVlID0gcC5jb2x1bW5zLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckFsbCgpOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcigpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVySW5zcGVjdG9yID09PSAnZnVuY3Rpb24nKSByZW5kZXJJbnNwZWN0b3IoKTsKICAgICAgICAgICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKGNvbENvdW50SW5wdXQpIHsKICAgICAgICAgICAgY29sQ291bnRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIHByb2Nlc3NhciBvIHZhbG9yIGltZWRpYXRhbWVudGUgcGFyYSBpbnB1dHMgbnVtYmVyCiAgICAgICAgICAgICAgY29uc3QgcmF3VmFsdWUgPSBjb2xDb3VudElucHV0LnZhbHVlOwogICAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gKHJhd1ZhbHVlICE9PSAnJyAmJiAhaXNOYU4ocmF3VmFsdWUpKSA/IHBhcnNlSW50KHJhd1ZhbHVlKSA6IDI7CiAgICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IHAuY29sdW1ucyB8fCBbXTsKICAgICAgICAgICAgICB3aGlsZSAoY3VycmVudC5sZW5ndGggPCBjb3VudCkgewogICAgICAgICAgICAgICAgY3VycmVudC5wdXNoKHsgdGV4dDogYENvbHVuYSAke2N1cnJlbnQubGVuZ3RoICsgMX1gLCB3aWR0aDogJyonLCBjaGlsZHJlbjogW10gfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50Lmxlbmd0aCA+IGNvdW50KSB7CiAgICAgICAgICAgICAgICBjdXJyZW50LnBvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBwLmNvbHVtbnMgPSBjdXJyZW50OwogICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICByZW5kZXJBbGwoKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIHJlbmRlcigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBBdHVhbGl6YXIgaW5zcGVjdG9yIHBhcmEgbW9zdHJhciBhcyBub3ZhcyBjb2x1bmFzCiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckluc3BlY3RvciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVySW5zcGVjdG9yKCk7CiAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjb2xHYXBJbnB1dCkgewogICAgICAgICAgICBjb2xHYXBJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIHByb2Nlc3NhciBvIHZhbG9yIGltZWRpYXRhbWVudGUgcGFyYSBpbnB1dHMgbnVtYmVyCiAgICAgICAgICAgICAgY29uc3QgcmF3VmFsdWUgPSBjb2xHYXBJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICBpZiAocmF3VmFsdWUgIT09ICcnICYmICFpc05hTihyYXdWYWx1ZSkpIHsKICAgICAgICAgICAgICAgIHAuZ2FwID0gcGFyc2VJbnQocmF3VmFsdWUpIHx8IDEwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjb2xWYWxpZ25TZWxlY3QpIHsKICAgICAgICAgICAgY29sVmFsaWduU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgICBwLnZhbGlnbiA9IGNvbFZhbGlnblNlbGVjdC52YWx1ZTsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjb2xUZXh0c0lucHV0KSB7CiAgICAgICAgICAgIGNvbFRleHRzSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBjb2xUZXh0c0lucHV0LnZhbHVlLnNwbGl0KCdcbi0tLVxuJyk7CiAgICAgICAgICAgICAgLy8gUHJlc2VydmFyIGNoaWxkcmVuIGUgd2lkdGggZXhpc3RlbnRlcyBhbyBhdHVhbGl6YXIgdGV4dG9zCiAgICAgICAgICAgICAgcC5jb2x1bW5zID0gcGFydHMubWFwKCh0LCBpKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0NvbCA9IHAuY29sdW1ucyAmJiBwLmNvbHVtbnNbaV07CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICB0ZXh0OiB0LnRyaW0oKSB8fCBgQ29sdW5hICR7aSArIDF9YCwKICAgICAgICAgICAgICAgICAgd2lkdGg6IGV4aXN0aW5nQ29sPy53aWR0aCB8fCAnKicsCiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBleGlzdGluZ0NvbD8uY2hpbGRyZW4gfHwgW10KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdsaXN0JzoKICAgICAgICAgIGNvbnN0IGxpc3RLaW5kU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtbGlzdEtpbmQnKTsKICAgICAgICAgIGNvbnN0IGxpc3RJdGVtc0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtbGlzdEl0ZW1zJyk7CiAgICAgICAgICBjb25zdCBsaXN0U3RhcnRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWxpc3RTdGFydCcpOwogICAgICAgICAgY29uc3QgbGlzdFR5cGVTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1saXN0VHlwZScpOwogICAgICAgICAgY29uc3QgbGlzdFJldmVyc2VkQ2hlY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1saXN0UmV2ZXJzZWQnKTsKICAgICAgICAgIGNvbnN0IG1hcmtlckNvbG9ySW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1tYXJrZXJDb2xvcicpOwogICAgICAgICAgY29uc3QgbWFya2VyQ29sb3JUZXh0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1tYXJrZXJDb2xvclRleHQnKTsKCiAgICAgICAgICBpZiAobGlzdEtpbmRTZWxlY3QpIHsKICAgICAgICAgICAgbGlzdEtpbmRTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIHAub3JkZXJlZCA9IGxpc3RLaW5kU2VsZWN0LnZhbHVlID09PSAnb2wnOwogICAgICAgICAgICAgIHAubGlzdFR5cGUgPSBsaXN0S2luZFNlbGVjdC52YWx1ZTsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGxpc3RTdGFydElucHV0KSB7CiAgICAgICAgICAgIGxpc3RTdGFydElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gcHJvY2Vzc2FyIG8gdmFsb3IgaW1lZGlhdGFtZW50ZSBwYXJhIGlucHV0cyBudW1iZXIKICAgICAgICAgICAgICBjb25zdCByYXdWYWx1ZSA9IGxpc3RTdGFydElucHV0LnZhbHVlOwogICAgICAgICAgICAgIGlmIChyYXdWYWx1ZSAhPT0gJycgJiYgIWlzTmFOKHJhd1ZhbHVlKSkgewogICAgICAgICAgICAgICAgcC5zdGFydCA9IHBhcnNlSW50KHJhd1ZhbHVlKSB8fCAxOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGxpc3RUeXBlU2VsZWN0KSB7CiAgICAgICAgICAgIGxpc3RUeXBlU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgICBwLnR5cGUgPSBsaXN0VHlwZVNlbGVjdC52YWx1ZTsKICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChsaXN0UmV2ZXJzZWRDaGVjaykgewogICAgICAgICAgICBsaXN0UmV2ZXJzZWRDaGVjay5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC5yZXZlcnNlZCA9IGxpc3RSZXZlcnNlZENoZWNrLmNoZWNrZWQ7CiAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobGlzdEl0ZW1zSW5wdXQpIHsKICAgICAgICAgICAgbGlzdEl0ZW1zSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgLy8gQ29udmVydGVyIHN0cmluZ3MgcGFyYSBvYmpldG9zIHtraW5kOiAndGV4dCcsIHRleHQ6ICcuLi4nfQogICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gbGlzdEl0ZW1zSW5wdXQudmFsdWUuc3BsaXQoJ1xuJykuZmlsdGVyKEJvb2xlYW4pOwogICAgICAgICAgICAgIHAuaXRlbXMgPSBsaW5lcy5tYXAobGluZSA9PiAoeyBraW5kOiAndGV4dCcsIHRleHQ6IGxpbmUgfSkpOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAndGFibGUnOgogICAgICAgICAgY29uc3QgdGFibGVDb2xzSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC10YWJsZUNvbHMnKTsKICAgICAgICAgIGNvbnN0IHRhYmxlUm93c0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtdGFibGVSb3dzJyk7CiAgICAgICAgICBjb25zdCB0YWJsZUhlYWRlclJvd3NJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXRhYmxlSGVhZGVyUm93cycpOwogICAgICAgICAgY29uc3QgdGFibGVMYXlvdXRTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC10YWJsZUxheW91dCcpOwoKICAgICAgICAgIGlmICh0YWJsZUhlYWRlclJvd3NJbnB1dCkgewogICAgICAgICAgICB0YWJsZUhlYWRlclJvd3NJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBjb25zdCBoZWFkZXJSb3dzID0gcGFyc2VJbnQodGFibGVIZWFkZXJSb3dzSW5wdXQudmFsdWUpIHx8IDE7CiAgICAgICAgICAgICAgY29uc3QgbnVtUm93cyA9IChwLmJvZHkgfHwgW10pLmxlbmd0aDsKICAgICAgICAgICAgICBpZiAoaGVhZGVyUm93cyA+PSAwICYmIGhlYWRlclJvd3MgPD0gbnVtUm93cykgewogICAgICAgICAgICAgICAgcC5oZWFkZXJSb3dzID0gaGVhZGVyUm93czsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcC5oZWFkZXJSb3dzID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oaGVhZGVyUm93cywgbnVtUm93cykpOwogICAgICAgICAgICAgICAgdGFibGVIZWFkZXJSb3dzSW5wdXQudmFsdWUgPSBwLmhlYWRlclJvd3M7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRhYmxlQ29sc0lucHV0IHx8IHRhYmxlUm93c0lucHV0KSB7CiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVRhYmxlID0gKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IGNvbHMgPSBwYXJzZUludCh0YWJsZUNvbHNJbnB1dD8udmFsdWUgfHwgMyk7CiAgICAgICAgICAgICAgY29uc3QgZGF0YVJvd3MgPSBwYXJzZUludCh0YWJsZVJvd3NJbnB1dD8udmFsdWUgfHwgMSk7IC8vIExpbmhhcyBkZSBkYWRvcyAoc2VtIGNvbnRhciBoZWFkZXIpCiAgICAgICAgICAgICAgY29uc3QgdG90YWxSb3dzID0gZGF0YVJvd3MgKyAxOyAvLyArMSBwYXJhIG8gaGVhZGVyCgogICAgICAgICAgICAgIC8vIFByZXNlcnZhciBlc3RydXR1cmEgZXhpc3RlbnRlIHNlIHBvc3PDrXZlbAogICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRCb2R5ID0gcC5ib2R5IHx8IFtdOwogICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb2xzID0gY3VycmVudEJvZHlbMF0/Lmxlbmd0aCB8fCBjb2xzOwoKICAgICAgICAgICAgICBjb25zdCBuZXdCb2R5ID0gQXJyYXkodG90YWxSb3dzKS5maWxsKG51bGwpLm1hcCgoXywgaSkgPT4gewogICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHsKICAgICAgICAgICAgICAgICAgLy8gUHJpbWVpcmEgbGluaGEgPSBoZWFkZXIKICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFkZXIgPSBjdXJyZW50Qm9keVswXSB8fCBbXTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5KGNvbHMpLmZpbGwobnVsbCkubWFwKChfLCBqKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgLy8gUHJlc2VydmFyIGPDqWx1bGFzIGV4aXN0ZW50ZXMgc2UgcG9zc8OtdmVsLCBzZW7Do28gY3JpYXIgbm92YSBlc3RydXR1cmEKICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdIZWFkZXJbal0gJiYgdHlwZW9mIGV4aXN0aW5nSGVhZGVyW2pdID09PSAnb2JqZWN0JyAmJiBleGlzdGluZ0hlYWRlcltqXS5jaGlsZHJlbikgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nSGVhZGVyW2pdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBjaGlsZHJlbjogW10gfTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAvLyBMaW5oYXMgZGUgZGFkb3MKICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdSb3cgPSBjdXJyZW50Qm9keVtpXSB8fCBbXTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5KGNvbHMpLmZpbGwobnVsbCkubWFwKChfLCBqKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nUm93W2pdICYmIHR5cGVvZiBleGlzdGluZ1Jvd1tqXSA9PT0gJ29iamVjdCcgJiYgZXhpc3RpbmdSb3dbal0uY2hpbGRyZW4pIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1Jvd1tqXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgY2hpbGRyZW46IFtdIH07CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBwLmJvZHkgPSBuZXdCb2R5OwoKICAgICAgICAgICAgICAvLyBBdHVhbGl6YXIgbGFyZ3VyYXMgcHJlc2VydmFuZG8gYXMgZXhpc3RlbnRlcyBxdWFuZG8gcG9zc8OtdmVsCiAgICAgICAgICAgICAgaWYgKCFwLndpZHRocyB8fCBwLndpZHRocy5sZW5ndGggIT09IGNvbHMpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nV2lkdGhzID0gcC53aWR0aHMgfHwgW107CiAgICAgICAgICAgICAgICBwLndpZHRocyA9IEFycmF5KGNvbHMpLmZpbGwobnVsbCkubWFwKChfLCBpKSA9PiB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1dpZHRoc1tpXSB8fCAnKic7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICByZW5kZXJBbGwoKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIHJlbmRlcigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHRhYmxlQ29sc0lucHV0KSB0YWJsZUNvbHNJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZVRhYmxlKTsKICAgICAgICAgICAgaWYgKHRhYmxlUm93c0lucHV0KSB0YWJsZVJvd3NJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZVRhYmxlKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0YWJsZUxheW91dFNlbGVjdCkgewogICAgICAgICAgICB0YWJsZUxheW91dFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC5sYXlvdXQgPSB0YWJsZUxheW91dFNlbGVjdC52YWx1ZTsKCiAgICAgICAgICAgICAgLy8gTW9zdHJhci9vY3VsdGFyIG9ww6fDtWVzIGRlIGxheW91dCBjdXN0b21pemFkbwogICAgICAgICAgICAgIGNvbnN0IGN1c3RvbUxheW91dE9wdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFibGVDdXN0b21MYXlvdXRPcHRpb25zJyk7CiAgICAgICAgICAgICAgaWYgKGN1c3RvbUxheW91dE9wdGlvbnMpIHsKICAgICAgICAgICAgICAgIGN1c3RvbUxheW91dE9wdGlvbnMuc3R5bGUuZGlzcGxheSA9ICh0YWJsZUxheW91dFNlbGVjdC52YWx1ZSA9PT0gJ2N1c3RvbScpID8gJ2Jsb2NrJyA6ICdub25lJzsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckluc3BlY3RvciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVySW5zcGVjdG9yKCk7CiAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIExpc3RlbmVycyBwYXJhIGxheW91dCBjdXN0b21pemFkbwogICAgICAgICAgY29uc3QgaExpbmVXaWR0aElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtdGFibGVITGluZVdpZHRoJyk7CiAgICAgICAgICBjb25zdCBoTGluZUNvbG9ySW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC10YWJsZUhMaW5lQ29sb3InKTsKICAgICAgICAgIGNvbnN0IGhMaW5lQ29sb3JUZXh0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC10YWJsZUhMaW5lQ29sb3JUZXh0Jyk7CiAgICAgICAgICBjb25zdCB2TGluZVdpZHRoSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC10YWJsZVZMaW5lV2lkdGgnKTsKICAgICAgICAgIGNvbnN0IHZMaW5lQ29sb3JJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXRhYmxlVkxpbmVDb2xvcicpOwogICAgICAgICAgY29uc3QgdkxpbmVDb2xvclRleHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXRhYmxlVkxpbmVDb2xvclRleHQnKTsKICAgICAgICAgIGNvbnN0IHBhZGRpbmdMZWZ0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC10YWJsZVBhZGRpbmdMZWZ0Jyk7CiAgICAgICAgICBjb25zdCBwYWRkaW5nUmlnaHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXRhYmxlUGFkZGluZ1JpZ2h0Jyk7CiAgICAgICAgICBjb25zdCBwYWRkaW5nVG9wSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC10YWJsZVBhZGRpbmdUb3AnKTsKICAgICAgICAgIGNvbnN0IHBhZGRpbmdCb3R0b21JbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXRhYmxlUGFkZGluZ0JvdHRvbScpOwoKICAgICAgICAgIGNvbnN0IHVwZGF0ZUN1c3RvbUxheW91dCA9ICgpID0+IHsKICAgICAgICAgICAgaWYgKCFwLmN1c3RvbUxheW91dCkgcC5jdXN0b21MYXlvdXQgPSB7fTsKICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBwcm9jZXNzYXIgdmFsb3JlcyBpbWVkaWF0YW1lbnRlIHBhcmEgaW5wdXRzIG51bWJlcgogICAgICAgICAgICBpZiAoaExpbmVXaWR0aElucHV0KSB7CiAgICAgICAgICAgICAgY29uc3QgcmF3VmFsdWUgPSBoTGluZVdpZHRoSW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgaWYgKHJhd1ZhbHVlICE9PSAnJyAmJiAhaXNOYU4ocmF3VmFsdWUpKSB7CiAgICAgICAgICAgICAgICBwLmN1c3RvbUxheW91dC5oTGluZVdpZHRoID0gcGFyc2VGbG9hdChyYXdWYWx1ZSkgfHwgMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGhMaW5lQ29sb3JUZXh0SW5wdXQgJiYgaExpbmVDb2xvclRleHRJbnB1dC52YWx1ZSkgcC5jdXN0b21MYXlvdXQuaExpbmVDb2xvciA9IGhMaW5lQ29sb3JUZXh0SW5wdXQudmFsdWU7CiAgICAgICAgICAgIGlmICh2TGluZVdpZHRoSW5wdXQpIHsKICAgICAgICAgICAgICBjb25zdCByYXdWYWx1ZSA9IHZMaW5lV2lkdGhJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICBpZiAocmF3VmFsdWUgIT09ICcnICYmICFpc05hTihyYXdWYWx1ZSkpIHsKICAgICAgICAgICAgICAgIHAuY3VzdG9tTGF5b3V0LnZMaW5lV2lkdGggPSBwYXJzZUZsb2F0KHJhd1ZhbHVlKSB8fCAxOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodkxpbmVDb2xvclRleHRJbnB1dCAmJiB2TGluZUNvbG9yVGV4dElucHV0LnZhbHVlKSBwLmN1c3RvbUxheW91dC52TGluZUNvbG9yID0gdkxpbmVDb2xvclRleHRJbnB1dC52YWx1ZTsKICAgICAgICAgICAgaWYgKHBhZGRpbmdMZWZ0SW5wdXQpIHsKICAgICAgICAgICAgICBjb25zdCByYXdWYWx1ZSA9IHBhZGRpbmdMZWZ0SW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgaWYgKHJhd1ZhbHVlICE9PSAnJyAmJiAhaXNOYU4ocmF3VmFsdWUpKSB7CiAgICAgICAgICAgICAgICBwLmN1c3RvbUxheW91dC5wYWRkaW5nTGVmdCA9IHBhcnNlSW50KHJhd1ZhbHVlKSB8fCA1OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocGFkZGluZ1JpZ2h0SW5wdXQpIHsKICAgICAgICAgICAgICBjb25zdCByYXdWYWx1ZSA9IHBhZGRpbmdSaWdodElucHV0LnZhbHVlOwogICAgICAgICAgICAgIGlmIChyYXdWYWx1ZSAhPT0gJycgJiYgIWlzTmFOKHJhd1ZhbHVlKSkgewogICAgICAgICAgICAgICAgcC5jdXN0b21MYXlvdXQucGFkZGluZ1JpZ2h0ID0gcGFyc2VJbnQocmF3VmFsdWUpIHx8IDU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChwYWRkaW5nVG9wSW5wdXQpIHsKICAgICAgICAgICAgICBjb25zdCByYXdWYWx1ZSA9IHBhZGRpbmdUb3BJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICBpZiAocmF3VmFsdWUgIT09ICcnICYmICFpc05hTihyYXdWYWx1ZSkpIHsKICAgICAgICAgICAgICAgIHAuY3VzdG9tTGF5b3V0LnBhZGRpbmdUb3AgPSBwYXJzZUludChyYXdWYWx1ZSkgfHwgNTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHBhZGRpbmdCb3R0b21JbnB1dCkgewogICAgICAgICAgICAgIGNvbnN0IHJhd1ZhbHVlID0gcGFkZGluZ0JvdHRvbUlucHV0LnZhbHVlOwogICAgICAgICAgICAgIGlmIChyYXdWYWx1ZSAhPT0gJycgJiYgIWlzTmFOKHJhd1ZhbHVlKSkgewogICAgICAgICAgICAgICAgcC5jdXN0b21MYXlvdXQucGFkZGluZ0JvdHRvbSA9IHBhcnNlSW50KHJhd1ZhbHVlKSB8fCA1OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgfTsKCiAgICAgICAgICBpZiAoaExpbmVXaWR0aElucHV0KSBoTGluZVdpZHRoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB1cGRhdGVDdXN0b21MYXlvdXQpOwogICAgICAgICAgaWYgKGhMaW5lQ29sb3JJbnB1dCkgewogICAgICAgICAgICBoTGluZUNvbG9ySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIGlmIChoTGluZUNvbG9yVGV4dElucHV0KSBoTGluZUNvbG9yVGV4dElucHV0LnZhbHVlID0gaExpbmVDb2xvcklucHV0LnZhbHVlOwogICAgICAgICAgICAgIHVwZGF0ZUN1c3RvbUxheW91dCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChoTGluZUNvbG9yVGV4dElucHV0KSBoTGluZUNvbG9yVGV4dElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdXBkYXRlQ3VzdG9tTGF5b3V0KTsKCiAgICAgICAgICBpZiAodkxpbmVXaWR0aElucHV0KSB2TGluZVdpZHRoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB1cGRhdGVDdXN0b21MYXlvdXQpOwogICAgICAgICAgaWYgKHZMaW5lQ29sb3JJbnB1dCkgewogICAgICAgICAgICB2TGluZUNvbG9ySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIGlmICh2TGluZUNvbG9yVGV4dElucHV0KSB2TGluZUNvbG9yVGV4dElucHV0LnZhbHVlID0gdkxpbmVDb2xvcklucHV0LnZhbHVlOwogICAgICAgICAgICAgIHVwZGF0ZUN1c3RvbUxheW91dCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh2TGluZUNvbG9yVGV4dElucHV0KSB2TGluZUNvbG9yVGV4dElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdXBkYXRlQ3VzdG9tTGF5b3V0KTsKCiAgICAgICAgICBpZiAocGFkZGluZ0xlZnRJbnB1dCkgcGFkZGluZ0xlZnRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZUN1c3RvbUxheW91dCk7CiAgICAgICAgICBpZiAocGFkZGluZ1JpZ2h0SW5wdXQpIHBhZGRpbmdSaWdodElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdXBkYXRlQ3VzdG9tTGF5b3V0KTsKICAgICAgICAgIGlmIChwYWRkaW5nVG9wSW5wdXQpIHBhZGRpbmdUb3BJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZUN1c3RvbUxheW91dCk7CiAgICAgICAgICBpZiAocGFkZGluZ0JvdHRvbUlucHV0KSBwYWRkaW5nQm90dG9tSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB1cGRhdGVDdXN0b21MYXlvdXQpOwoKICAgICAgICAgIC8vIExpc3RlbmVycyBwYXJhIHRhYmVsYSB6ZWJyYWRhCiAgICAgICAgICBjb25zdCB6ZWJyYUVuYWJsZWRDaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXRhYmxlWmVicmFFbmFibGVkJyk7CiAgICAgICAgICBjb25zdCB6ZWJyYUNvbG9ySW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC10YWJsZVplYnJhQ29sb3InKTsKICAgICAgICAgIGNvbnN0IHplYnJhQ29sb3JUZXh0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC10YWJsZVplYnJhQ29sb3JUZXh0Jyk7CiAgICAgICAgICBjb25zdCB6ZWJyYVdpdGhMaW5lc0NoZWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtdGFibGVaZWJyYVdpdGhMaW5lcycpOwoKICAgICAgICAgIGlmICh6ZWJyYUVuYWJsZWRDaGVjaykgewogICAgICAgICAgICB6ZWJyYUVuYWJsZWRDaGVjay5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC56ZWJyYUVuYWJsZWQgPSB6ZWJyYUVuYWJsZWRDaGVjay5jaGVja2VkOwogICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckluc3BlY3RvciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVySW5zcGVjdG9yKCk7CiAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh6ZWJyYUNvbG9ySW5wdXQpIHsKICAgICAgICAgICAgemVicmFDb2xvcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgICBpZiAoemVicmFDb2xvclRleHRJbnB1dCkgemVicmFDb2xvclRleHRJbnB1dC52YWx1ZSA9IHplYnJhQ29sb3JJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICBwLnplYnJhQ29sb3IgPSB6ZWJyYUNvbG9ySW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoemVicmFDb2xvclRleHRJbnB1dCkgewogICAgICAgICAgICB6ZWJyYUNvbG9yVGV4dElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGlmICh6ZWJyYUNvbG9ySW5wdXQgJiYgemVicmFDb2xvclRleHRJbnB1dC52YWx1ZSkgemVicmFDb2xvcklucHV0LnZhbHVlID0gemVicmFDb2xvclRleHRJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICBwLnplYnJhQ29sb3IgPSB6ZWJyYUNvbG9yVGV4dElucHV0LnZhbHVlIHx8ICcjQ0NDQ0NDJzsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh6ZWJyYVdpdGhMaW5lc0NoZWNrKSB7CiAgICAgICAgICAgIHplYnJhV2l0aExpbmVzQ2hlY2suYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIHAuemVicmFXaXRoTGluZXMgPSB6ZWJyYVdpdGhMaW5lc0NoZWNrLmNoZWNrZWQ7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCB0YWJsZURvbnRCcmVha1Jvd3NDaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXRhYmxlRG9udEJyZWFrUm93cycpOwogICAgICAgICAgY29uc3QgdGFibGVLZWVwV2l0aEhlYWRlclJvd3NJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXRhYmxlS2VlcFdpdGhIZWFkZXJSb3dzJyk7CgogICAgICAgICAgaWYgKHRhYmxlRG9udEJyZWFrUm93c0NoZWNrKSB7CiAgICAgICAgICAgIHRhYmxlRG9udEJyZWFrUm93c0NoZWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgICBwLmRvbnRCcmVha1Jvd3MgPSB0YWJsZURvbnRCcmVha1Jvd3NDaGVjay5jaGVja2VkOwogICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0YWJsZUtlZXBXaXRoSGVhZGVyUm93c0lucHV0KSB7CiAgICAgICAgICAgIHRhYmxlS2VlcFdpdGhIZWFkZXJSb3dzSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBwcm9jZXNzYXIgbyB2YWxvciBpbWVkaWF0YW1lbnRlIHBhcmEgaW5wdXRzIG51bWJlcgogICAgICAgICAgICAgIGNvbnN0IHJhd1ZhbHVlID0gdGFibGVLZWVwV2l0aEhlYWRlclJvd3NJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICBpZiAocmF3VmFsdWUgIT09ICcnICYmICFpc05hTihyYXdWYWx1ZSkpIHsKICAgICAgICAgICAgICAgIHAua2VlcFdpdGhIZWFkZXJSb3dzID0gcGFyc2VJbnQocmF3VmFsdWUpIHx8IDA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gTGlzdGVuZXJzIHBhcmEgZXN0aWxvcyBkYXMgY8OpbHVsYXMKICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJsZS1jZWxsLWZpbGwtY29sb3InKS5mb3JFYWNoKGlucHV0ID0+IHsKICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHBhcnNlSW50KGlucHV0LmRhdGFzZXQucm93IHx8IDApOwogICAgICAgICAgICAgIGNvbnN0IGNvbCA9IHBhcnNlSW50KGlucHV0LmRhdGFzZXQuY29sIHx8IDApOwogICAgICAgICAgICAgIGNvbnN0IHRleHRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC50YWJsZS1jZWxsLWZpbGwtY29sb3ItdGV4dFtkYXRhLXJvdz0iJHtyb3d9Il1bZGF0YS1jb2w9IiR7Y29sfSJdYCk7CiAgICAgICAgICAgICAgaWYgKHRleHRJbnB1dCkgdGV4dElucHV0LnZhbHVlID0gaW5wdXQudmFsdWU7CgogICAgICAgICAgICAgIGlmICghcC5ib2R5W3Jvd10gfHwgIXAuYm9keVtyb3ddW2NvbF0pIHJldHVybjsKICAgICAgICAgICAgICBwLmJvZHlbcm93XVtjb2xdLmZpbGxDb2xvciA9IGlucHV0LnZhbHVlIHx8IHVuZGVmaW5lZDsKCiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJsZS1jZWxsLWZpbGwtY29sb3ItdGV4dCcpLmZvckVhY2goaW5wdXQgPT4gewogICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBjb25zdCByb3cgPSBwYXJzZUludChpbnB1dC5kYXRhc2V0LnJvdyB8fCAwKTsKICAgICAgICAgICAgICBjb25zdCBjb2wgPSBwYXJzZUludChpbnB1dC5kYXRhc2V0LmNvbCB8fCAwKTsKICAgICAgICAgICAgICBjb25zdCBjb2xvcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnRhYmxlLWNlbGwtZmlsbC1jb2xvcltkYXRhLXJvdz0iJHtyb3d9Il1bZGF0YS1jb2w9IiR7Y29sfSJdYCk7CiAgICAgICAgICAgICAgaWYgKGNvbG9ySW5wdXQgJiYgaW5wdXQudmFsdWUpIGNvbG9ySW5wdXQudmFsdWUgPSBpbnB1dC52YWx1ZTsKCiAgICAgICAgICAgICAgaWYgKCFwLmJvZHlbcm93XSB8fCAhcC5ib2R5W3Jvd11bY29sXSkgcmV0dXJuOwogICAgICAgICAgICAgIHAuYm9keVtyb3ddW2NvbF0uZmlsbENvbG9yID0gaW5wdXQudmFsdWUgfHwgdW5kZWZpbmVkOwoKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CgogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYmxlLWNlbGwtY29sb3InKS5mb3JFYWNoKGlucHV0ID0+IHsKICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHBhcnNlSW50KGlucHV0LmRhdGFzZXQucm93IHx8IDApOwogICAgICAgICAgICAgIGNvbnN0IGNvbCA9IHBhcnNlSW50KGlucHV0LmRhdGFzZXQuY29sIHx8IDApOwogICAgICAgICAgICAgIGNvbnN0IHRleHRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC50YWJsZS1jZWxsLWNvbG9yLXRleHRbZGF0YS1yb3c9IiR7cm93fSJdW2RhdGEtY29sPSIke2NvbH0iXWApOwogICAgICAgICAgICAgIGlmICh0ZXh0SW5wdXQpIHRleHRJbnB1dC52YWx1ZSA9IGlucHV0LnZhbHVlOwoKICAgICAgICAgICAgICBpZiAoIXAuYm9keVtyb3ddIHx8ICFwLmJvZHlbcm93XVtjb2xdKSByZXR1cm47CiAgICAgICAgICAgICAgcC5ib2R5W3Jvd11bY29sXS5jb2xvciA9IGlucHV0LnZhbHVlIHx8IHVuZGVmaW5lZDsKCiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJsZS1jZWxsLWNvbG9yLXRleHQnKS5mb3JFYWNoKGlucHV0ID0+IHsKICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgY29uc3Qgcm93ID0gcGFyc2VJbnQoaW5wdXQuZGF0YXNldC5yb3cgfHwgMCk7CiAgICAgICAgICAgICAgY29uc3QgY29sID0gcGFyc2VJbnQoaW5wdXQuZGF0YXNldC5jb2wgfHwgMCk7CiAgICAgICAgICAgICAgY29uc3QgY29sb3JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC50YWJsZS1jZWxsLWNvbG9yW2RhdGEtcm93PSIke3Jvd30iXVtkYXRhLWNvbD0iJHtjb2x9Il1gKTsKICAgICAgICAgICAgICBpZiAoY29sb3JJbnB1dCAmJiBpbnB1dC52YWx1ZSkgY29sb3JJbnB1dC52YWx1ZSA9IGlucHV0LnZhbHVlOwoKICAgICAgICAgICAgICBpZiAoIXAuYm9keVtyb3ddIHx8ICFwLmJvZHlbcm93XVtjb2xdKSByZXR1cm47CiAgICAgICAgICAgICAgcC5ib2R5W3Jvd11bY29sXS5jb2xvciA9IGlucHV0LnZhbHVlIHx8IHVuZGVmaW5lZDsKCiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJsZS1jZWxsLWZpbGwtb3BhY2l0eScpLmZvckVhY2goaW5wdXQgPT4gewogICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBjb25zdCByb3cgPSBwYXJzZUludChpbnB1dC5kYXRhc2V0LnJvdyB8fCAwKTsKICAgICAgICAgICAgICBjb25zdCBjb2wgPSBwYXJzZUludChpbnB1dC5kYXRhc2V0LmNvbCB8fCAwKTsKCiAgICAgICAgICAgICAgaWYgKCFwLmJvZHlbcm93XSB8fCAhcC5ib2R5W3Jvd11bY29sXSkgcmV0dXJuOwogICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gcHJvY2Vzc2FyIG8gdmFsb3IgaW1lZGlhdGFtZW50ZSBwYXJhIGlucHV0cyBudW1iZXIKICAgICAgICAgICAgICBjb25zdCByYXdWYWx1ZSA9IGlucHV0LnZhbHVlOwogICAgICAgICAgICAgIGlmIChyYXdWYWx1ZSAhPT0gJycgJiYgIWlzTmFOKHJhd1ZhbHVlKSkgewogICAgICAgICAgICAgICAgY29uc3Qgb3BhY2l0eSA9IHBhcnNlRmxvYXQocmF3VmFsdWUpOwogICAgICAgICAgICAgICAgcC5ib2R5W3Jvd11bY29sXS5maWxsT3BhY2l0eSA9IGlzTmFOKG9wYWNpdHkpID8gMSA6IG9wYWNpdHk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CgogICAgICAgICAgLy8gTGlzdGVuZXJzIHBhcmEgcm93U3BhbiBlIGNvbFNwYW4KICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJsZS1jZWxsLXJvd3NwYW4nKS5mb3JFYWNoKGlucHV0ID0+IHsKICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgY29uc3Qgcm93ID0gcGFyc2VJbnQoaW5wdXQuZGF0YXNldC5yb3cgfHwgMCk7CiAgICAgICAgICAgICAgY29uc3QgY29sID0gcGFyc2VJbnQoaW5wdXQuZGF0YXNldC5jb2wgfHwgMCk7CgogICAgICAgICAgICAgIGlmICghcC5ib2R5W3Jvd10gfHwgIXAuYm9keVtyb3ddW2NvbF0pIHJldHVybjsKICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIHByb2Nlc3NhciBvIHZhbG9yIGltZWRpYXRhbWVudGUgcGFyYSBpbnB1dHMgbnVtYmVyCiAgICAgICAgICAgICAgY29uc3QgcmF3VmFsdWUgPSBpbnB1dC52YWx1ZTsKICAgICAgICAgICAgICBpZiAocmF3VmFsdWUgIT09ICcnICYmICFpc05hTihyYXdWYWx1ZSkpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHJvd1NwYW4gPSBwYXJzZUludChyYXdWYWx1ZSkgfHwgMTsKICAgICAgICAgICAgICAgIHAuYm9keVtyb3ddW2NvbF0ucm93U3BhbiA9IHJvd1NwYW4gPiAxID8gcm93U3BhbiA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFibGUtY2VsbC1jb2xzcGFuJykuZm9yRWFjaChpbnB1dCA9PiB7CiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHBhcnNlSW50KGlucHV0LmRhdGFzZXQucm93IHx8IDApOwogICAgICAgICAgICAgIGNvbnN0IGNvbCA9IHBhcnNlSW50KGlucHV0LmRhdGFzZXQuY29sIHx8IDApOwoKICAgICAgICAgICAgICBpZiAoIXAuYm9keVtyb3ddIHx8ICFwLmJvZHlbcm93XVtjb2xdKSByZXR1cm47CiAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBwcm9jZXNzYXIgbyB2YWxvciBpbWVkaWF0YW1lbnRlIHBhcmEgaW5wdXRzIG51bWJlcgogICAgICAgICAgICAgIGNvbnN0IHJhd1ZhbHVlID0gaW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgaWYgKHJhd1ZhbHVlICE9PSAnJyAmJiAhaXNOYU4ocmF3VmFsdWUpKSB7CiAgICAgICAgICAgICAgICBjb25zdCBjb2xTcGFuID0gcGFyc2VJbnQocmF3VmFsdWUpIHx8IDE7CiAgICAgICAgICAgICAgICBwLmJvZHlbcm93XVtjb2xdLmNvbFNwYW4gPSBjb2xTcGFuID4gMSA/IGNvbFNwYW4gOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CgogICAgICAgICAgLy8gTGlzdGVuZXJzIHBhcmEgYm9yZGVyIChjaGVja2JveGVzKQogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYmxlLWNlbGwtYm9yZGVyJykuZm9yRWFjaChjaGVja2JveCA9PiB7CiAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgICBjb25zdCByb3cgPSBwYXJzZUludChjaGVja2JveC5kYXRhc2V0LnJvdyB8fCAwKTsKICAgICAgICAgICAgICBjb25zdCBjb2wgPSBwYXJzZUludChjaGVja2JveC5kYXRhc2V0LmNvbCB8fCAwKTsKICAgICAgICAgICAgICBjb25zdCBzaWRlID0gcGFyc2VJbnQoY2hlY2tib3guZGF0YXNldC5zaWRlIHx8IDApOwoKICAgICAgICAgICAgICBpZiAoIXAuYm9keVtyb3ddIHx8ICFwLmJvZHlbcm93XVtjb2xdKSByZXR1cm47CgogICAgICAgICAgICAgIGlmICghcC5ib2R5W3Jvd11bY29sXS5ib3JkZXIpIHsKICAgICAgICAgICAgICAgIHAuYm9keVtyb3ddW2NvbF0uYm9yZGVyID0gW3RydWUsIHRydWUsIHRydWUsIHRydWVdOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcC5ib2R5W3Jvd11bY29sXS5ib3JkZXJbc2lkZV0gPSBjaGVja2JveC5jaGVja2VkOwoKICAgICAgICAgICAgICAvLyBTZSB0b2RhcyBhcyBib3JkYXMgZm9yZW0gdHJ1ZSwgcG9kZSByZW1vdmVyIGEgcHJvcHJpZWRhZGUgKHVzYSBwYWRyw6NvKQogICAgICAgICAgICAgIGlmIChwLmJvZHlbcm93XVtjb2xdLmJvcmRlci5ldmVyeShiID0+IGIgPT09IHRydWUpKSB7CiAgICAgICAgICAgICAgICBwLmJvZHlbcm93XVtjb2xdLmJvcmRlciA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICAvLyBMaXN0ZW5lcnMgcGFyYSBib3JkZXJDb2xvcgogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYmxlLWNlbGwtYm9yZGVyLWNvbG9yJykuZm9yRWFjaChpbnB1dCA9PiB7CiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgICBjb25zdCByb3cgPSBwYXJzZUludChpbnB1dC5kYXRhc2V0LnJvdyB8fCAwKTsKICAgICAgICAgICAgICBjb25zdCBjb2wgPSBwYXJzZUludChpbnB1dC5kYXRhc2V0LmNvbCB8fCAwKTsKICAgICAgICAgICAgICBjb25zdCBzaWRlID0gcGFyc2VJbnQoaW5wdXQuZGF0YXNldC5zaWRlIHx8IDApOwoKICAgICAgICAgICAgICBpZiAoIXAuYm9keVtyb3ddIHx8ICFwLmJvZHlbcm93XVtjb2xdKSByZXR1cm47CgogICAgICAgICAgICAgIGlmICghcC5ib2R5W3Jvd11bY29sXS5ib3JkZXJDb2xvcikgewogICAgICAgICAgICAgICAgcC5ib2R5W3Jvd11bY29sXS5ib3JkZXJDb2xvciA9IFsnJywgJycsICcnLCAnJ107CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBwLmJvZHlbcm93XVtjb2xdLmJvcmRlckNvbG9yW3NpZGVdID0gaW5wdXQudmFsdWUgfHwgJyc7CgogICAgICAgICAgICAgIC8vIFNlIHRvZGFzIGFzIGNvcmVzIGZvcmVtIHZhemlhcywgcG9kZSByZW1vdmVyIGEgcHJvcHJpZWRhZGUKICAgICAgICAgICAgICBpZiAocC5ib2R5W3Jvd11bY29sXS5ib3JkZXJDb2xvci5ldmVyeShjID0+ICFjKSkgewogICAgICAgICAgICAgICAgcC5ib2R5W3Jvd11bY29sXS5ib3JkZXJDb2xvciA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICAvLyBMaXN0ZW5lcnMgcGFyYSBoZWlnaHRzCiAgICAgICAgICBjb25zdCBoZWlnaHRzVHlwZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXRhYmxlSGVpZ2h0c1R5cGUnKTsKICAgICAgICAgIGNvbnN0IGhlaWdodHNGaXhlZElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtdGFibGVIZWlnaHRzRml4ZWQnKTsKCiAgICAgICAgICBpZiAoaGVpZ2h0c1R5cGVTZWxlY3QpIHsKICAgICAgICAgICAgaGVpZ2h0c1R5cGVTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBoZWlnaHRzVHlwZVNlbGVjdC52YWx1ZTsKICAgICAgICAgICAgICBjb25zdCBmaXhlZENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJsZS1oZWlnaHRzLWZpeGVkJyk7CgogICAgICAgICAgICAgIGlmICh0eXBlID09PSAnbm9uZScpIHsKICAgICAgICAgICAgICAgIHAuaGVpZ2h0cyA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIGlmIChmaXhlZENvbnRhaW5lcikgZml4ZWRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdmaXhlZCcpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGZpeGVkVmFsdWUgPSBoZWlnaHRzRml4ZWRJbnB1dCA/IHBhcnNlRmxvYXQoaGVpZ2h0c0ZpeGVkSW5wdXQudmFsdWUpIHx8IDQwIDogNDA7CiAgICAgICAgICAgICAgICBwLmhlaWdodHMgPSBmaXhlZFZhbHVlOwogICAgICAgICAgICAgICAgaWYgKGZpeGVkQ29udGFpbmVyKSBmaXhlZENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnYXJyYXknKSB7CiAgICAgICAgICAgICAgICBjb25zdCBudW1Sb3dzID0gcC5ib2R5Py5sZW5ndGggfHwgMjsKICAgICAgICAgICAgICAgIHAuaGVpZ2h0cyA9IEFycmF5KG51bVJvd3MpLmZpbGwoNDApOwogICAgICAgICAgICAgICAgaWYgKGZpeGVkQ29udGFpbmVyKSBmaXhlZENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgLy8gUmUtcmVuZGVyaXphciBwYXJhIG1vc3RyYXIgb3MgaW5wdXRzIGRlIGFycmF5CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckluc3BlY3RvciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVySW5zcGVjdG9yKCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChoZWlnaHRzRml4ZWRJbnB1dCkgewogICAgICAgICAgICBoZWlnaHRzRml4ZWRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlRmxvYXQoaGVpZ2h0c0ZpeGVkSW5wdXQudmFsdWUpIHx8IDQwOwogICAgICAgICAgICAgIHAuaGVpZ2h0cyA9IHZhbHVlOwoKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIExpc3RlbmVycyBwYXJhIGFsdHVyYXMgcG9yIGxpbmhhIChhcnJheSkKICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJsZS1yb3ctaGVpZ2h0JykuZm9yRWFjaChpbnB1dCA9PiB7CiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHBhcnNlSW50KGlucHV0LmRhdGFzZXQucm93IHx8IDApOwogICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VGbG9hdChpbnB1dC52YWx1ZSkgfHwgNDA7CgogICAgICAgICAgICAgIGlmICghcC5oZWlnaHRzIHx8ICFBcnJheS5pc0FycmF5KHAuaGVpZ2h0cykpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG51bVJvd3MgPSBwLmJvZHk/Lmxlbmd0aCB8fCAyOwogICAgICAgICAgICAgICAgcC5oZWlnaHRzID0gQXJyYXkobnVtUm93cykuZmlsbCg0MCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBwLmhlaWdodHNbcm93XSA9IHZhbHVlOwoKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CgogICAgICAgICAgLy8gTGlzdGVuZXJzIHBhcmEgaExpbmVTdHlsZSBlIHZMaW5lU3R5bGUKICAgICAgICAgIGNvbnN0IGhMaW5lU3R5bGVDaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXRhYmxlSExpbmVTdHlsZScpOwogICAgICAgICAgY29uc3QgdkxpbmVTdHlsZUNoZWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtdGFibGVWTGluZVN0eWxlJyk7CiAgICAgICAgICBjb25zdCBkZWZhdWx0Qm9yZGVyQ2hlY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC10YWJsZURlZmF1bHRCb3JkZXInKTsKCiAgICAgICAgICBpZiAoaExpbmVTdHlsZUNoZWNrKSB7CiAgICAgICAgICAgIGhMaW5lU3R5bGVDaGVjay5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKCFwLmN1c3RvbUxheW91dCkgcC5jdXN0b21MYXlvdXQgPSB7fTsKICAgICAgICAgICAgICBpZiAoaExpbmVTdHlsZUNoZWNrLmNoZWNrZWQpIHsKICAgICAgICAgICAgICAgIHAuY3VzdG9tTGF5b3V0LmhMaW5lU3R5bGUgPSB0cnVlOyAvLyBTZXLDoSBjb252ZXJ0aWRvIHBhcmEgZnVuw6fDo28gbmEgZ2VyYcOnw6NvCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHAuY3VzdG9tTGF5b3V0LmhMaW5lU3R5bGUgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2TGluZVN0eWxlQ2hlY2spIHsKICAgICAgICAgICAgdkxpbmVTdHlsZUNoZWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgICBpZiAoIXAuY3VzdG9tTGF5b3V0KSBwLmN1c3RvbUxheW91dCA9IHt9OwogICAgICAgICAgICAgIGlmICh2TGluZVN0eWxlQ2hlY2suY2hlY2tlZCkgewogICAgICAgICAgICAgICAgcC5jdXN0b21MYXlvdXQudkxpbmVTdHlsZSA9IHRydWU7IC8vIFNlcsOhIGNvbnZlcnRpZG8gcGFyYSBmdW7Dp8OjbyBuYSBnZXJhw6fDo28KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcC5jdXN0b21MYXlvdXQudkxpbmVTdHlsZSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGRlZmF1bHRCb3JkZXJDaGVjaykgewogICAgICAgICAgICBkZWZhdWx0Qm9yZGVyQ2hlY2suYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIGlmICghcC5jdXN0b21MYXlvdXQpIHAuY3VzdG9tTGF5b3V0ID0ge307CiAgICAgICAgICAgICAgcC5jdXN0b21MYXlvdXQuZGVmYXVsdEJvcmRlciA9IGRlZmF1bHRCb3JkZXJDaGVjay5jaGVja2VkOwoKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIExpc3RlbmVycyBwYXJhIGxhcmd1cmFzIGRhcyBjb2x1bmFzIGRhIHRhYmVsYQogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYmxlLWNvbC13aWR0aC10eXBlJykuZm9yRWFjaChzZWxlY3QgPT4gewogICAgICAgICAgICBzZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IGNvbEluZGV4ID0gcGFyc2VJbnQoc2VsZWN0LmRhdGFzZXQuY29sSW5kZXggfHwgMCk7CiAgICAgICAgICAgICAgY29uc3Qgd2lkdGhUeXBlID0gc2VsZWN0LnZhbHVlOwogICAgICAgICAgICAgIGNvbnN0IHZhbHVlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAudGFibGUtY29sLXdpZHRoLXZhbHVlW2RhdGEtY29sLWluZGV4PSIke2NvbEluZGV4fSJdYCk7CiAgICAgICAgICAgICAgY29uc3QgdmFsdWVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgdGFibGUtY29sLXdpZHRoLXZhbHVlLSR7Y29sSW5kZXh9YCk7CgogICAgICAgICAgICAgIGlmICghcC53aWR0aHMpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGJvZHkgPSBwLmJvZHkgfHwgW107CiAgICAgICAgICAgICAgICBjb25zdCBudW1Db2xzID0gYm9keVswXT8ubGVuZ3RoIHx8IDM7CiAgICAgICAgICAgICAgICBwLndpZHRocyA9IEFycmF5KG51bUNvbHMpLmZpbGwoJyonKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICh3aWR0aFR5cGUgPT09ICdhdXRvJykgewogICAgICAgICAgICAgICAgcC53aWR0aHNbY29sSW5kZXhdID0gJyonOwogICAgICAgICAgICAgICAgaWYgKHZhbHVlQ29udGFpbmVyKSB2YWx1ZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAodmFsdWVDb250YWluZXIpIHZhbHVlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHZhbHVlSW5wdXQgPyBwYXJzZUZsb2F0KHZhbHVlSW5wdXQudmFsdWUpIHx8IDAgOiAwOwogICAgICAgICAgICAgICAgaWYgKHdpZHRoVHlwZSA9PT0gJ3BpeGVscycpIHsKICAgICAgICAgICAgICAgICAgcC53aWR0aHNbY29sSW5kZXhdID0gY3VycmVudFZhbHVlIHx8IDEwMDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAod2lkdGhUeXBlID09PSAncGVyY2VudGFnZScpIHsKICAgICAgICAgICAgICAgICAgcC53aWR0aHNbY29sSW5kZXhdID0gY3VycmVudFZhbHVlID8gYCR7Y3VycmVudFZhbHVlfSVgIDogJzUwJSc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CgogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYmxlLWNvbC13aWR0aC12YWx1ZScpLmZvckVhY2goaW5wdXQgPT4gewogICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBjb25zdCBjb2xJbmRleCA9IHBhcnNlSW50KGlucHV0LmRhdGFzZXQuY29sSW5kZXggfHwgMCk7CiAgICAgICAgICAgICAgY29uc3QgdHlwZVNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC50YWJsZS1jb2wtd2lkdGgtdHlwZVtkYXRhLWNvbC1pbmRleD0iJHtjb2xJbmRleH0iXWApOwogICAgICAgICAgICAgIGNvbnN0IHdpZHRoVHlwZSA9IHR5cGVTZWxlY3QgPyB0eXBlU2VsZWN0LnZhbHVlIDogJ2F1dG8nOwogICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VGbG9hdChpbnB1dC52YWx1ZSkgfHwgMDsKCiAgICAgICAgICAgICAgaWYgKCFwLndpZHRocykgewogICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IHAuYm9keSB8fCBbXTsKICAgICAgICAgICAgICAgIGNvbnN0IG51bUNvbHMgPSBib2R5WzBdPy5sZW5ndGggfHwgMzsKICAgICAgICAgICAgICAgIHAud2lkdGhzID0gQXJyYXkobnVtQ29scykuZmlsbCgnKicpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHdpZHRoVHlwZSA9PT0gJ3BpeGVscycpIHsKICAgICAgICAgICAgICAgIHAud2lkdGhzW2NvbEluZGV4XSA9IHZhbHVlIHx8IDEwMDsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHdpZHRoVHlwZSA9PT0gJ3BlcmNlbnRhZ2UnKSB7CiAgICAgICAgICAgICAgICBwLndpZHRoc1tjb2xJbmRleF0gPSB2YWx1ZSA/IGAke3ZhbHVlfSVgIDogJzUwJSc7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CgogICAgICAgICAgLy8gTGlzdGVuZXIgcGFyYSBkZWxldGFyIGNvbHVuYSBkYSB0YWJlbGEKICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idG4tZGVsZXRlLXRhYmxlLWNvbCcpLmZvckVhY2goYnRuID0+IHsKICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IGNvbEluZGV4ID0gcGFyc2VJbnQoYnRuLmRhdGFzZXQuY29sSW5kZXggfHwgMCk7CiAgICAgICAgICAgICAgY29uc3QgYm9keSA9IHAuYm9keSB8fCBbXTsKICAgICAgICAgICAgICBjb25zdCBudW1Db2xzID0gYm9keVswXT8ubGVuZ3RoIHx8IDA7CgogICAgICAgICAgICAgIGlmIChjb2xJbmRleCA+IDAgJiYgbnVtQ29scyA+IDEpIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2hvd0NvbmZpcm1Nb2RhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICBzaG93Q29uZmlybU1vZGFsKAogICAgICAgICAgICAgICAgICAgICdEZWxldGFyIENvbHVuYScsCiAgICAgICAgICAgICAgICAgICAgYFRlbSBjZXJ0ZXphIHF1ZSBkZXNlamEgZGVsZXRhciBhIENvbHVuYSAke2NvbEluZGV4ICsgMX0/YCwKICAgICAgICAgICAgICAgICAgICAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmVyIGNvbHVuYSBkZSB0b2RhcyBhcyBsaW5oYXMKICAgICAgICAgICAgICAgICAgICAgIGJvZHkuZm9yRWFjaChyb3cgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93ICYmIEFycmF5LmlzQXJyYXkocm93KSAmJiByb3dbY29sSW5kZXhdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LnNwbGljZShjb2xJbmRleCwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZXIgbGFyZ3VyYSBjb3JyZXNwb25kZW50ZQogICAgICAgICAgICAgICAgICAgICAgaWYgKHAud2lkdGhzICYmIHAud2lkdGhzW2NvbEluZGV4XSkgewogICAgICAgICAgICAgICAgICAgICAgICBwLndpZHRocy5zcGxpY2UoY29sSW5kZXgsIDEpOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIC8vIEF0dWFsaXphciBuw7ptZXJvIGRlIGNvbHVuYXMKICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZUNvbHNJbnB1dCkgewogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUNvbHNJbnB1dC52YWx1ZSA9IG51bUNvbHMgLSAxOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckFsbCgpOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcigpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVySW5zcGVjdG9yID09PSAnZnVuY3Rpb24nKSByZW5kZXJJbnNwZWN0b3IoKTsKICAgICAgICAgICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnaW1hZ2UnOgogICAgICAgICAgY29uc3QgaW1hZ2VVcmxJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWltYWdlVXJsJyk7CiAgICAgICAgICBjb25zdCBpbWFnZVNpemVNb2RlU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaW1hZ2VTaXplTW9kZScpOwogICAgICAgICAgY29uc3QgaW1hZ2VXaWR0aElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaW1hZ2VXaWR0aCcpOwogICAgICAgICAgY29uc3QgaW1hZ2VIZWlnaHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWltYWdlSGVpZ2h0Jyk7CiAgICAgICAgICBjb25zdCBpbWFnZUZpdFdpZHRoSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1pbWFnZUZpdFdpZHRoJyk7CiAgICAgICAgICBjb25zdCBpbWFnZUZpdEhlaWdodElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaW1hZ2VGaXRIZWlnaHQnKTsKICAgICAgICAgIGNvbnN0IGltYWdlQ292ZXJXaWR0aElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaW1hZ2VDb3ZlcldpZHRoJyk7CiAgICAgICAgICBjb25zdCBpbWFnZUNvdmVySGVpZ2h0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1pbWFnZUNvdmVySGVpZ2h0Jyk7CiAgICAgICAgICBjb25zdCBpbWFnZUNvdmVyQWxpZ25TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1pbWFnZUNvdmVyQWxpZ24nKTsKICAgICAgICAgIGNvbnN0IGltYWdlQ292ZXJWYWxpZ25TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1pbWFnZUNvdmVyVmFsaWduJyk7CiAgICAgICAgICBjb25zdCBpbWFnZUJvcmRlclJhZGl1c0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaW1hZ2VCb3JkZXJSYWRpdXMnKTsKICAgICAgICAgIGNvbnN0IGltYWdlT3BhY2l0eUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaW1hZ2VPcGFjaXR5Jyk7CiAgICAgICAgICBjb25zdCBpbWFnZUFsaWdubWVudFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWltYWdlQWxpZ25tZW50Jyk7CiAgICAgICAgICBjb25zdCBpbWFnZVBvc2l0aW9uVHlwZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWltYWdlUG9zaXRpb25UeXBlJyk7CiAgICAgICAgICBjb25zdCBpbWFnZUFic29sdXRlWElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaW1hZ2VBYnNvbHV0ZVgnKTsKICAgICAgICAgIGNvbnN0IGltYWdlQWJzb2x1dGVZSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1pbWFnZUFic29sdXRlWScpOwogICAgICAgICAgY29uc3QgaW1hZ2VSZWxhdGl2ZVhJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWltYWdlUmVsYXRpdmVYJyk7CiAgICAgICAgICBjb25zdCBpbWFnZVJlbGF0aXZlWUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaW1hZ2VSZWxhdGl2ZVknKTsKCiAgICAgICAgICAvLyBNb2RvIGRlIGRpbWVuc2lvbmFtZW50bwogICAgICAgICAgaWYgKGltYWdlU2l6ZU1vZGVTZWxlY3QpIHsKICAgICAgICAgICAgaW1hZ2VTaXplTW9kZVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgbW9kZSA9IGltYWdlU2l6ZU1vZGVTZWxlY3QudmFsdWU7CiAgICAgICAgICAgICAgLy8gTGltcGFyIHByb3ByaWVkYWRlcyBuw6NvIHVzYWRhcwogICAgICAgICAgICAgIGlmIChtb2RlID09PSAnd2lkdGhIZWlnaHQnKSB7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5maXQ7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5jb3ZlcjsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdmaXQnKSB7CiAgICAgICAgICAgICAgICBkZWxldGUgcC53aWR0aDsKICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmhlaWdodDsKICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmNvdmVyOwogICAgICAgICAgICAgICAgaWYgKCFwLmZpdCkgcC5maXQgPSBbMTAwLCAxMDBdOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2NvdmVyJykgewogICAgICAgICAgICAgICAgZGVsZXRlIHAud2lkdGg7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5oZWlnaHQ7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5maXQ7CiAgICAgICAgICAgICAgICBpZiAoIXAuY292ZXIpIHAuY292ZXIgPSB7IHdpZHRoOiAzMDAsIGhlaWdodDogMTUwLCBhbGlnbjogJ2NlbnRlcicsIHZhbGlnbjogJ2NlbnRlcicgfTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gQXR1YWxpemFyIFVJCiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckluc3BlY3RvciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVySW5zcGVjdG9yKCk7CiAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaW1hZ2VVcmxJbnB1dCkgewogICAgICAgICAgICBjb25zdCBpbWFnZVVybEVycm9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtaW1hZ2VVcmxFcnJvcicpOwoKICAgICAgICAgICAgLy8gRnVuw6fDo28gZGUgdmFsaWRhw6fDo28gZGUgVVJMCiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRlSW1hZ2VVcmwgPSAodXJsKSA9PiB7CiAgICAgICAgICAgICAgaWYgKCF1cmwpIHsKICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybEVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGltYWdlVXJsRXJyb3Iuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNlIMOpIFVSTCB2w6FsaWRhIG91IGRhdGEgVVJJCiAgICAgICAgICAgICAgY29uc3QgaXNWYWxpZFVybCA9IHVybC5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgdXJsLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykgfHwgdXJsLnN0YXJ0c1dpdGgoJ2RhdGE6aW1hZ2UvJyk7CiAgICAgICAgICAgICAgY29uc3QgaXNWYWxpZEZvcm1hdCA9IC9cLihqcGd8anBlZ3xwbmd8Z2lmfHdlYnB8c3ZnKShcPy4qKT8kL2kudGVzdCh1cmwpIHx8IHVybC5zdGFydHNXaXRoKCdkYXRhOmltYWdlLycpOwoKICAgICAgICAgICAgICBpZiAoIWlzVmFsaWRVcmwgJiYgIXVybC5zdGFydHNXaXRoKCdkYXRhOmltYWdlLycpKSB7CiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmxFcnJvcikgewogICAgICAgICAgICAgICAgICBpbWFnZVVybEVycm9yLnRleHRDb250ZW50ID0gJ+KaoO+4jyBVUkwgaW52w6FsaWRhLiBVc2UgaHR0cDovLywgaHR0cHM6Ly8gb3UgZGF0YTppbWFnZS8nOwogICAgICAgICAgICAgICAgICBpbWFnZVVybEVycm9yLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGltYWdlVXJsRXJyb3IpIHsKICAgICAgICAgICAgICAgIGltYWdlVXJsRXJyb3Iuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBpbWFnZVVybElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHVybCA9IGltYWdlVXJsSW5wdXQudmFsdWUudHJpbSgpOwoKICAgICAgICAgICAgICAvLyBWYWxpZGFyIFVSTAogICAgICAgICAgICAgIGlmICghdmFsaWRhdGVJbWFnZVVybCh1cmwpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBwLnVybCA9IHVybDsKCiAgICAgICAgICAgICAgLy8gQ29udmVydGVyIFVSTCBwYXJhIGJhc2U2NCBhcGVuYXMgcGFyYSBwcmV2aWV3IHZpc3VhbAogICAgICAgICAgICAgIGlmICh1cmwgJiYgKHVybC5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgdXJsLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykgfHwgdXJsLnN0YXJ0c1dpdGgoJ2RhdGE6JykpKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjQgPSBhd2FpdCBjb252ZXJ0SW1hZ2VVcmxUb0Jhc2U2NCh1cmwpOwogICAgICAgICAgICAgICAgICBpZiAoYmFzZTY0KSB7CiAgICAgICAgICAgICAgICAgICAgcC5fYmFzZTY0UHJldmlldyA9IGJhc2U2NDsgLy8gQXJtYXplbmFyIGJhc2U2NCBhcGVuYXMgcGFyYSBwcmV2aWV3CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHAuX2Jhc2U2NFByZXZpZXc7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvIGFvIGNvbnZlcnRlciBpbWFnZW0gcGFyYSBiYXNlNjQ6JywgZSk7CiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBwLl9iYXNlNjRQcmV2aWV3OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBkZWxldGUgcC5fYmFzZTY0UHJldmlldzsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gV2lkdGggZSBIZWlnaHQKICAgICAgICAgIGlmIChpbWFnZVdpZHRoSW5wdXQpIHsKICAgICAgICAgICAgaW1hZ2VXaWR0aElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHZhbCA9IGltYWdlV2lkdGhJbnB1dC52YWx1ZS50cmltKCk7CiAgICAgICAgICAgICAgcC53aWR0aCA9IHZhbCA/IHBhcnNlSW50KHZhbCkgOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpbWFnZUhlaWdodElucHV0KSB7CiAgICAgICAgICAgIGltYWdlSGVpZ2h0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgdmFsID0gaW1hZ2VIZWlnaHRJbnB1dC52YWx1ZS50cmltKCk7CiAgICAgICAgICAgICAgcC5oZWlnaHQgPSB2YWwgPyBwYXJzZUludCh2YWwpIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gRml0CiAgICAgICAgICBpZiAoaW1hZ2VGaXRXaWR0aElucHV0KSB7CiAgICAgICAgICAgIGltYWdlRml0V2lkdGhJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocC5maXQpKSBwLmZpdCA9IFsxMDAsIDEwMF07CiAgICAgICAgICAgICAgcC5maXRbMF0gPSBwYXJzZUludChpbWFnZUZpdFdpZHRoSW5wdXQudmFsdWUpIHx8IDEwMDsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGltYWdlRml0SGVpZ2h0SW5wdXQpIHsKICAgICAgICAgICAgaW1hZ2VGaXRIZWlnaHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocC5maXQpKSBwLmZpdCA9IFsxMDAsIDEwMF07CiAgICAgICAgICAgICAgcC5maXRbMV0gPSBwYXJzZUludChpbWFnZUZpdEhlaWdodElucHV0LnZhbHVlKSB8fCAxMDA7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBDb3ZlcgogICAgICAgICAgaWYgKGltYWdlQ292ZXJXaWR0aElucHV0KSB7CiAgICAgICAgICAgIGltYWdlQ292ZXJXaWR0aElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGlmICghcC5jb3ZlcikgcC5jb3ZlciA9IHsgd2lkdGg6IDMwMCwgaGVpZ2h0OiAxNTAsIGFsaWduOiAnY2VudGVyJywgdmFsaWduOiAnY2VudGVyJyB9OwogICAgICAgICAgICAgIHAuY292ZXIud2lkdGggPSBwYXJzZUludChpbWFnZUNvdmVyV2lkdGhJbnB1dC52YWx1ZSkgfHwgMzAwOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaW1hZ2VDb3ZlckhlaWdodElucHV0KSB7CiAgICAgICAgICAgIGltYWdlQ292ZXJIZWlnaHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBpZiAoIXAuY292ZXIpIHAuY292ZXIgPSB7IHdpZHRoOiAzMDAsIGhlaWdodDogMTUwLCBhbGlnbjogJ2NlbnRlcicsIHZhbGlnbjogJ2NlbnRlcicgfTsKICAgICAgICAgICAgICBwLmNvdmVyLmhlaWdodCA9IHBhcnNlSW50KGltYWdlQ292ZXJIZWlnaHRJbnB1dC52YWx1ZSkgfHwgMTUwOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaW1hZ2VDb3ZlckFsaWduU2VsZWN0KSB7CiAgICAgICAgICAgIGltYWdlQ292ZXJBbGlnblNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKCFwLmNvdmVyKSBwLmNvdmVyID0geyB3aWR0aDogMzAwLCBoZWlnaHQ6IDE1MCwgYWxpZ246ICdjZW50ZXInLCB2YWxpZ246ICdjZW50ZXInIH07CiAgICAgICAgICAgICAgcC5jb3Zlci5hbGlnbiA9IGltYWdlQ292ZXJBbGlnblNlbGVjdC52YWx1ZTsKICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpbWFnZUNvdmVyVmFsaWduU2VsZWN0KSB7CiAgICAgICAgICAgIGltYWdlQ292ZXJWYWxpZ25TZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIGlmICghcC5jb3ZlcikgcC5jb3ZlciA9IHsgd2lkdGg6IDMwMCwgaGVpZ2h0OiAxNTAsIGFsaWduOiAnY2VudGVyJywgdmFsaWduOiAnY2VudGVyJyB9OwogICAgICAgICAgICAgIHAuY292ZXIudmFsaWduID0gaW1hZ2VDb3ZlclZhbGlnblNlbGVjdC52YWx1ZTsKICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaW1hZ2VCb3JkZXJSYWRpdXNJbnB1dCkgewogICAgICAgICAgICBpbWFnZUJvcmRlclJhZGl1c0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIHAuYm9yZGVyUmFkaXVzID0gcGFyc2VJbnQoaW1hZ2VCb3JkZXJSYWRpdXNJbnB1dC52YWx1ZSkgfHwgMDsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChpbWFnZU9wYWNpdHlJbnB1dCkgewogICAgICAgICAgICBpbWFnZU9wYWNpdHlJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBjb25zdCB2YWwgPSBpbWFnZU9wYWNpdHlJbnB1dC52YWx1ZS50cmltKCk7CiAgICAgICAgICAgICAgcC5vcGFjaXR5ID0gdmFsID8gcGFyc2VGbG9hdCh2YWwpIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgIGlmIChwLm9wYWNpdHkgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgcC5vcGFjaXR5ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgcC5vcGFjaXR5KSk7IC8vIENsYW1wIGVudHJlIDAgZSAxCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGltYWdlQWxpZ25tZW50U2VsZWN0KSB7CiAgICAgICAgICAgIGltYWdlQWxpZ25tZW50U2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgICBwLmFsaWdubWVudCA9IGltYWdlQWxpZ25tZW50U2VsZWN0LnZhbHVlOwogICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIFRpcG8gZGUgcG9zaWNpb25hbWVudG8KICAgICAgICAgIGlmIChpbWFnZVBvc2l0aW9uVHlwZVNlbGVjdCkgewogICAgICAgICAgICBpbWFnZVBvc2l0aW9uVHlwZVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgcG9zVHlwZSA9IGltYWdlUG9zaXRpb25UeXBlU2VsZWN0LnZhbHVlOwogICAgICAgICAgICAgIGlmIChwb3NUeXBlID09PSAnbm9uZScpIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmFic29sdXRlUG9zaXRpb247CiAgICAgICAgICAgICAgICBkZWxldGUgcC5yZWxhdGl2ZVBvc2l0aW9uOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocG9zVHlwZSA9PT0gJ2Fic29sdXRlJykgewogICAgICAgICAgICAgICAgZGVsZXRlIHAucmVsYXRpdmVQb3NpdGlvbjsKICAgICAgICAgICAgICAgIGlmICghcC5hYnNvbHV0ZVBvc2l0aW9uKSBwLmFic29sdXRlUG9zaXRpb24gPSB7IHg6IDAsIHk6IDAgfTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBvc1R5cGUgPT09ICdyZWxhdGl2ZScpIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSBwLmFic29sdXRlUG9zaXRpb247CiAgICAgICAgICAgICAgICBpZiAoIXAucmVsYXRpdmVQb3NpdGlvbikgcC5yZWxhdGl2ZVBvc2l0aW9uID0geyB4OiAwLCB5OiAwIH07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIEF0dWFsaXphciBVSQogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJJbnNwZWN0b3IgPT09ICdmdW5jdGlvbicpIHJlbmRlckluc3BlY3RvcigpOwogICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gUG9zacOnw6NvIGFic29sdXRhCiAgICAgICAgICBpZiAoaW1hZ2VBYnNvbHV0ZVhJbnB1dCkgewogICAgICAgICAgICBpbWFnZUFic29sdXRlWElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGlmICghcC5hYnNvbHV0ZVBvc2l0aW9uKSBwLmFic29sdXRlUG9zaXRpb24gPSB7IHg6IDAsIHk6IDAgfTsKICAgICAgICAgICAgICBwLmFic29sdXRlUG9zaXRpb24ueCA9IHBhcnNlSW50KGltYWdlQWJzb2x1dGVYSW5wdXQudmFsdWUpIHx8IDA7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpbWFnZUFic29sdXRlWUlucHV0KSB7CiAgICAgICAgICAgIGltYWdlQWJzb2x1dGVZSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKCFwLmFic29sdXRlUG9zaXRpb24pIHAuYWJzb2x1dGVQb3NpdGlvbiA9IHsgeDogMCwgeTogMCB9OwogICAgICAgICAgICAgIHAuYWJzb2x1dGVQb3NpdGlvbi55ID0gcGFyc2VJbnQoaW1hZ2VBYnNvbHV0ZVlJbnB1dC52YWx1ZSkgfHwgMDsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIFBvc2nDp8OjbyByZWxhdGl2YQogICAgICAgICAgaWYgKGltYWdlUmVsYXRpdmVYSW5wdXQpIHsKICAgICAgICAgICAgaW1hZ2VSZWxhdGl2ZVhJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBpZiAoIXAucmVsYXRpdmVQb3NpdGlvbikgcC5yZWxhdGl2ZVBvc2l0aW9uID0geyB4OiAwLCB5OiAwIH07CiAgICAgICAgICAgICAgcC5yZWxhdGl2ZVBvc2l0aW9uLnggPSBwYXJzZUludChpbWFnZVJlbGF0aXZlWElucHV0LnZhbHVlKSB8fCAwOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaW1hZ2VSZWxhdGl2ZVlJbnB1dCkgewogICAgICAgICAgICBpbWFnZVJlbGF0aXZlWUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGlmICghcC5yZWxhdGl2ZVBvc2l0aW9uKSBwLnJlbGF0aXZlUG9zaXRpb24gPSB7IHg6IDAsIHk6IDAgfTsKICAgICAgICAgICAgICBwLnJlbGF0aXZlUG9zaXRpb24ueSA9IHBhcnNlSW50KGltYWdlUmVsYXRpdmVZSW5wdXQudmFsdWUpIHx8IDA7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdtYXJnaW4nOgogICAgICAgICAgY29uc3QgbWFyZ2luTGVmdElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtbWFyZ2luTGVmdCcpOwogICAgICAgICAgY29uc3QgbWFyZ2luVG9wSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1tYXJnaW5Ub3AnKTsKICAgICAgICAgIGNvbnN0IG1hcmdpblJpZ2h0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1tYXJnaW5SaWdodCcpOwogICAgICAgICAgY29uc3QgbWFyZ2luQm90dG9tSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1tYXJnaW5Cb3R0b20nKTsKCiAgICAgICAgICBjb25zdCB1cGRhdGVNYXJnaW4gPSAoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBwYXJzZUludChtYXJnaW5MZWZ0SW5wdXQ/LnZhbHVlIHx8IDApIHx8IDA7CiAgICAgICAgICAgIGNvbnN0IHRvcCA9IHBhcnNlSW50KG1hcmdpblRvcElucHV0Py52YWx1ZSB8fCAwKSB8fCAwOwogICAgICAgICAgICBjb25zdCByaWdodCA9IHBhcnNlSW50KG1hcmdpblJpZ2h0SW5wdXQ/LnZhbHVlIHx8IDApIHx8IDA7CiAgICAgICAgICAgIGNvbnN0IGJvdHRvbSA9IHBhcnNlSW50KG1hcmdpbkJvdHRvbUlucHV0Py52YWx1ZSB8fCAwKSB8fCAwOwogICAgICAgICAgICBwLm1hcmdpbiA9IFtsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b21dOwogICAgICAgICAgICAvLyBNYW50ZXIgY29tcGF0aWJpbGlkYWRlIGNvbSBvIGZvcm1hdG8gYW50aWdvIChzaXplKQogICAgICAgICAgICBpZiAodG9wID4gMCAmJiBsZWZ0ID09PSAwICYmIHJpZ2h0ID09PSAwICYmIGJvdHRvbSA9PT0gMCkgewogICAgICAgICAgICAgIHAuc2l6ZSA9IHRvcDsKICAgICAgICAgICAgfQogICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIGlmIChtYXJnaW5MZWZ0SW5wdXQpIG1hcmdpbkxlZnRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZU1hcmdpbik7CiAgICAgICAgICBpZiAobWFyZ2luVG9wSW5wdXQpIG1hcmdpblRvcElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdXBkYXRlTWFyZ2luKTsKICAgICAgICAgIGlmIChtYXJnaW5SaWdodElucHV0KSBtYXJnaW5SaWdodElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdXBkYXRlTWFyZ2luKTsKICAgICAgICAgIGlmIChtYXJnaW5Cb3R0b21JbnB1dCkgbWFyZ2luQm90dG9tSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB1cGRhdGVNYXJnaW4pOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ2dyb3VwJzoKICAgICAgICAgIGNvbnN0IGdyb3VwT3JpZW50YXRpb25TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1ncm91cE9yaWVudGF0aW9uJyk7CiAgICAgICAgICBjb25zdCBncm91cEFsaWdubWVudFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWdyb3VwQWxpZ25tZW50Jyk7CiAgICAgICAgICBjb25zdCBncm91cEdhcElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtZ3JvdXBHYXAnKTsKCiAgICAgICAgICBpZiAoZ3JvdXBPcmllbnRhdGlvblNlbGVjdCkgewogICAgICAgICAgICBncm91cE9yaWVudGF0aW9uU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgICBwLm9yaWVudGF0aW9uID0gZ3JvdXBPcmllbnRhdGlvblNlbGVjdC52YWx1ZTsKICAgICAgICAgICAgICAvLyBSZWNhbGN1bGFyIGxhcmd1cmFzIHF1YW5kbyBvcmllbnRhw6fDo28gbXVkYQogICAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlR3JvdXBDaGlsZHJlbldpZHRocyA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgdXBkYXRlR3JvdXBDaGlsZHJlbldpZHRocyhlbGVtZW50KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVHcm91cERpbWVuc2lvbnMgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIHVwZGF0ZUdyb3VwRGltZW5zaW9ucyhlbGVtZW50KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIHJlbmRlckFsbCgpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChncm91cEFsaWdubWVudFNlbGVjdCkgZ3JvdXBBbGlnbm1lbnRTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICBwLmFsaWdubWVudCA9IGdyb3VwQWxpZ25tZW50U2VsZWN0LnZhbHVlOwogICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKGdyb3VwR2FwSW5wdXQpIHsKICAgICAgICAgICAgZ3JvdXBHYXBJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBwLmdhcCA9IHBhcnNlSW50KGdyb3VwR2FwSW5wdXQudmFsdWUpIHx8IDEwOwogICAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlR3JvdXBEaW1lbnNpb25zID09PSAnZnVuY3Rpb24nKSB1cGRhdGVHcm91cERpbWVuc2lvbnMoZWxlbWVudCk7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIFBhZGRpbmcgc2VtcHJlIDAgKHJlbW92aWRvIGNvbmZvcm1lIHNvbGljaXRhZG8pCiAgICAgICAgICBwLnBhZGRpbmcgPSAwOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ3FyJzoKICAgICAgICAgIGNvbnN0IHFyVGV4dElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtcXJUZXh0Jyk7CiAgICAgICAgICBjb25zdCBxckZpdElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtcXJGaXQnKTsKICAgICAgICAgIGNvbnN0IHFyRWNjTGV2ZWxTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1xckVjY0xldmVsJyk7CiAgICAgICAgICBjb25zdCBxckZvcmVncm91bmRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXFyRm9yZWdyb3VuZCcpOwogICAgICAgICAgY29uc3QgcXJGb3JlZ3JvdW5kVGV4dElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtcXJGb3JlZ3JvdW5kVGV4dCcpOwogICAgICAgICAgY29uc3QgcXJCYWNrZ3JvdW5kSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1xckJhY2tncm91bmQnKTsKICAgICAgICAgIGNvbnN0IHFyQmFja2dyb3VuZFRleHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXFyQmFja2dyb3VuZFRleHQnKTsKICAgICAgICAgIGNvbnN0IHFyQWxpZ25tZW50U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtcXJBbGlnbm1lbnQnKTsKCiAgICAgICAgICBpZiAocXJUZXh0SW5wdXQpIHsKICAgICAgICAgICAgcXJUZXh0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC50ZXh0ID0gcXJUZXh0SW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChxckZpdElucHV0KSB7CiAgICAgICAgICAgIHFyRml0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC5maXQgPSBwYXJzZUludChxckZpdElucHV0LnZhbHVlKSB8fCAxMDA7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChxckVjY0xldmVsU2VsZWN0KSB7CiAgICAgICAgICAgIHFyRWNjTGV2ZWxTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIHAuZWNjTGV2ZWwgPSBxckVjY0xldmVsU2VsZWN0LnZhbHVlOwogICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHFyRm9yZWdyb3VuZElucHV0ICYmIHFyRm9yZWdyb3VuZFRleHRJbnB1dCkgewogICAgICAgICAgICBxckZvcmVncm91bmRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBxckZvcmVncm91bmRUZXh0SW5wdXQudmFsdWUgPSBxckZvcmVncm91bmRJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICBwLmZvcmVncm91bmQgPSBxckZvcmVncm91bmRJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBxckZvcmVncm91bmRUZXh0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKC9eI1swLTlBLUZdezZ9JC9pLnRlc3QocXJGb3JlZ3JvdW5kVGV4dElucHV0LnZhbHVlKSkgewogICAgICAgICAgICAgICAgcXJGb3JlZ3JvdW5kSW5wdXQudmFsdWUgPSBxckZvcmVncm91bmRUZXh0SW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgICBwLmZvcmVncm91bmQgPSBxckZvcmVncm91bmRUZXh0SW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChxckJhY2tncm91bmRJbnB1dCAmJiBxckJhY2tncm91bmRUZXh0SW5wdXQpIHsKICAgICAgICAgICAgcXJCYWNrZ3JvdW5kSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcXJCYWNrZ3JvdW5kVGV4dElucHV0LnZhbHVlID0gcXJCYWNrZ3JvdW5kSW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgcC5iYWNrZ3JvdW5kID0gcXJCYWNrZ3JvdW5kSW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcXJCYWNrZ3JvdW5kVGV4dElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGlmICgvXiNbMC05QS1GXXs2fSQvaS50ZXN0KHFyQmFja2dyb3VuZFRleHRJbnB1dC52YWx1ZSkpIHsKICAgICAgICAgICAgICAgIHFyQmFja2dyb3VuZElucHV0LnZhbHVlID0gcXJCYWNrZ3JvdW5kVGV4dElucHV0LnZhbHVlOwogICAgICAgICAgICAgICAgcC5iYWNrZ3JvdW5kID0gcXJCYWNrZ3JvdW5kVGV4dElucHV0LnZhbHVlOwogICAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAocXJBbGlnbm1lbnRTZWxlY3QpIHsKICAgICAgICAgICAgcXJBbGlnbm1lbnRTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIHAuYWxpZ25tZW50ID0gcXJBbGlnbm1lbnRTZWxlY3QudmFsdWU7CiAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnc3ZnJzoKICAgICAgICAgIGNvbnN0IHN2Z0NvZGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXN2Z0NvZGUnKTsKICAgICAgICAgIGNvbnN0IHN2Z1dpZHRoSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1zdmdXaWR0aCcpOwogICAgICAgICAgY29uc3Qgc3ZnSGVpZ2h0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1zdmdIZWlnaHQnKTsKICAgICAgICAgIGNvbnN0IHN2Z0NvbG9ySW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1zdmdDb2xvcicpOwogICAgICAgICAgY29uc3Qgc3ZnQ29sb3JUZXh0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1zdmdDb2xvclRleHQnKTsKICAgICAgICAgIGNvbnN0IHN2Z0FsaWdubWVudFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXN2Z0FsaWdubWVudCcpOwoKICAgICAgICAgIGlmIChzdmdDb2RlSW5wdXQpIHsKICAgICAgICAgICAgc3ZnQ29kZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIHAuc3ZnID0gc3ZnQ29kZUlucHV0LnZhbHVlOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc3ZnV2lkdGhJbnB1dCkgewogICAgICAgICAgICBzdmdXaWR0aElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIHAud2lkdGggPSBwYXJzZUludChzdmdXaWR0aElucHV0LnZhbHVlKSB8fCAxMDA7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzdmdIZWlnaHRJbnB1dCkgewogICAgICAgICAgICBzdmdIZWlnaHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBwLmhlaWdodCA9IHBhcnNlSW50KHN2Z0hlaWdodElucHV0LnZhbHVlKSB8fCAxMDA7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVEU6IE7Do28gYWp1c3RhciB0YW1hbmhvIGRvIGNhbnZhcyBkdXJhbnRlIGVkacOnw7VlcyBkZSBwcm9wcmllZGFkZXMKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzdmdDb2xvcklucHV0ICYmIHN2Z0NvbG9yVGV4dElucHV0KSB7CiAgICAgICAgICAgIHN2Z0NvbG9ySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgc3ZnQ29sb3JUZXh0SW5wdXQudmFsdWUgPSBzdmdDb2xvcklucHV0LnZhbHVlOwogICAgICAgICAgICAgIHAuY29sb3IgPSBzdmdDb2xvcklucHV0LnZhbHVlOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHN2Z0NvbG9yVGV4dElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGlmICgvXiNbMC05QS1GXXs2fSQvaS50ZXN0KHN2Z0NvbG9yVGV4dElucHV0LnZhbHVlKSkgewogICAgICAgICAgICAgICAgc3ZnQ29sb3JJbnB1dC52YWx1ZSA9IHN2Z0NvbG9yVGV4dElucHV0LnZhbHVlOwogICAgICAgICAgICAgICAgcC5jb2xvciA9IHN2Z0NvbG9yVGV4dElucHV0LnZhbHVlOwogICAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc3ZnQWxpZ25tZW50U2VsZWN0KSB7CiAgICAgICAgICAgIHN2Z0FsaWdubWVudFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC5hbGlnbm1lbnQgPSBzdmdBbGlnbm1lbnRTZWxlY3QudmFsdWU7CiAgICAgICAgICAgICAgLy8gSU1QT1JUQU5URTogTsOjbyBhanVzdGFyIHRhbWFuaG8gZG8gY2FudmFzIGR1cmFudGUgZWRpw6fDtWVzIGRlIHByb3ByaWVkYWRlcwogICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnYmFyY29kZSc6CiAgICAgICAgICBjb25zdCBiYXJjb2RlVmFsdWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWJhcmNvZGVWYWx1ZScpOwogICAgICAgICAgY29uc3QgYmFyY29kZUZvcm1hdFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWJhcmNvZGVGb3JtYXQnKTsKICAgICAgICAgIGNvbnN0IGJhcmNvZGVMaW5lV2lkdGhJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWJhcmNvZGVMaW5lV2lkdGgnKTsKICAgICAgICAgIGNvbnN0IGJhcmNvZGVIZWlnaHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWJhcmNvZGVIZWlnaHQnKTsKICAgICAgICAgIGNvbnN0IGJhcmNvZGVEaXNwbGF5VmFsdWVDaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWJhcmNvZGVEaXNwbGF5VmFsdWUnKTsKICAgICAgICAgIGNvbnN0IGJhcmNvZGVGb250U2l6ZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtYmFyY29kZUZvbnRTaXplJyk7CiAgICAgICAgICBjb25zdCBiYXJjb2RlTWFyZ2luSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1iYXJjb2RlTWFyZ2luJyk7CiAgICAgICAgICBjb25zdCBiYXJjb2RlRml0V0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtYmFyY29kZUZpdFcnKTsKICAgICAgICAgIGNvbnN0IGJhcmNvZGVGaXRISW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1iYXJjb2RlRml0SCcpOwogICAgICAgICAgY29uc3QgYmFyY29kZUFsaWdubWVudFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWJhcmNvZGVBbGlnbm1lbnQnKTsKCiAgICAgICAgICBpZiAoYmFyY29kZVZhbHVlSW5wdXQpIHsKICAgICAgICAgICAgYmFyY29kZVZhbHVlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC5iYXJjb2RlVmFsdWUgPSBiYXJjb2RlVmFsdWVJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGJhcmNvZGVGb3JtYXRTZWxlY3QpIHsKICAgICAgICAgICAgYmFyY29kZUZvcm1hdFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC5mb3JtYXQgPSBiYXJjb2RlRm9ybWF0U2VsZWN0LnZhbHVlOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoYmFyY29kZUxpbmVXaWR0aElucHV0KSB7CiAgICAgICAgICAgIGJhcmNvZGVMaW5lV2lkdGhJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBjb25zdCByYXdWYWx1ZSA9IGJhcmNvZGVMaW5lV2lkdGhJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICBpZiAocmF3VmFsdWUgIT09ICcnICYmICFpc05hTihyYXdWYWx1ZSkpIHsKICAgICAgICAgICAgICAgIHAubGluZVdpZHRoID0gcGFyc2VGbG9hdChyYXdWYWx1ZSkgfHwgMS41OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGJhcmNvZGVIZWlnaHRJbnB1dCkgewogICAgICAgICAgICBiYXJjb2RlSGVpZ2h0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgcmF3VmFsdWUgPSBiYXJjb2RlSGVpZ2h0SW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgaWYgKHJhd1ZhbHVlICE9PSAnJyAmJiAhaXNOYU4ocmF3VmFsdWUpKSB7CiAgICAgICAgICAgICAgICBwLmJhckhlaWdodCA9IHBhcnNlSW50KHJhd1ZhbHVlKSB8fCAzMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChiYXJjb2RlRGlzcGxheVZhbHVlQ2hlY2spIHsKICAgICAgICAgICAgYmFyY29kZURpc3BsYXlWYWx1ZUNoZWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgICBwLmRpc3BsYXlWYWx1ZSA9IGJhcmNvZGVEaXNwbGF5VmFsdWVDaGVjay5jaGVja2VkOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoYmFyY29kZUZvbnRTaXplSW5wdXQpIHsKICAgICAgICAgICAgYmFyY29kZUZvbnRTaXplSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgcmF3VmFsdWUgPSBiYXJjb2RlRm9udFNpemVJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICBpZiAocmF3VmFsdWUgIT09ICcnICYmICFpc05hTihyYXdWYWx1ZSkpIHsKICAgICAgICAgICAgICAgIHAuZm9udFNpemUgPSBwYXJzZUludChyYXdWYWx1ZSkgfHwgMTA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoYmFyY29kZU1hcmdpbklucHV0KSB7CiAgICAgICAgICAgIGJhcmNvZGVNYXJnaW5JbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBjb25zdCByYXdWYWx1ZSA9IGJhcmNvZGVNYXJnaW5JbnB1dC52YWx1ZTsKICAgICAgICAgICAgICBpZiAocmF3VmFsdWUgIT09ICcnICYmICFpc05hTihyYXdWYWx1ZSkpIHsKICAgICAgICAgICAgICAgIHAubWFyZ2luID0gcGFyc2VJbnQocmF3VmFsdWUpIHx8IDA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoYmFyY29kZUZpdFdJbnB1dCkgewogICAgICAgICAgICBiYXJjb2RlRml0V0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHJhd1ZhbHVlID0gYmFyY29kZUZpdFdJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICBpZiAocmF3VmFsdWUgIT09ICcnICYmICFpc05hTihyYXdWYWx1ZSkpIHsKICAgICAgICAgICAgICAgIGlmICghcC5maXQpIHAuZml0ID0gWzIwMSwgNDJdOwogICAgICAgICAgICAgICAgcC5maXRbMF0gPSBwYXJzZUludChyYXdWYWx1ZSkgfHwgMjAxOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGJhcmNvZGVGaXRISW5wdXQpIHsKICAgICAgICAgICAgYmFyY29kZUZpdEhJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBjb25zdCByYXdWYWx1ZSA9IGJhcmNvZGVGaXRISW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgaWYgKHJhd1ZhbHVlICE9PSAnJyAmJiAhaXNOYU4ocmF3VmFsdWUpKSB7CiAgICAgICAgICAgICAgICBpZiAoIXAuZml0KSBwLmZpdCA9IFsyMDEsIDQyXTsKICAgICAgICAgICAgICAgIHAuZml0WzFdID0gcGFyc2VJbnQocmF3VmFsdWUpIHx8IDQyOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGJhcmNvZGVBbGlnbm1lbnRTZWxlY3QpIHsKICAgICAgICAgICAgYmFyY29kZUFsaWdubWVudFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC5hbGlnbm1lbnQgPSBiYXJjb2RlQWxpZ25tZW50U2VsZWN0LnZhbHVlOwogICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnc3RhbXAnOgogICAgICAgICAgY29uc3Qgc3RhbXBTb3VyY2VUeXBlU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3Atc3RhbXBTb3VyY2VUeXBlJyk7CiAgICAgICAgICBjb25zdCBzdGFtcFZhbHVlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1zdGFtcFZhbHVlJyk7CiAgICAgICAgICBjb25zdCBzdGFtcFZhbHVlRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1zdGFtcFZhbHVlRmllbGQnKTsKICAgICAgICAgIGNvbnN0IHN0YW1wVmFsdWVMYWJlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXN0YW1wVmFsdWVMYWJlbCcpOwogICAgICAgICAgY29uc3Qgc3RhbXBGaXRXSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1zdGFtcEZpdFcnKTsKICAgICAgICAgIGNvbnN0IHN0YW1wRml0SElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3Atc3RhbXBGaXRIJyk7CiAgICAgICAgICBjb25zdCBzdGFtcEFsaWdubWVudFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXN0YW1wQWxpZ25tZW50Jyk7CiAgICAgICAgICBjb25zdCBzdGFtcE9wYWNpdHlJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLXN0YW1wT3BhY2l0eScpOwoKICAgICAgICAgIGlmIChzdGFtcFNvdXJjZVR5cGVTZWxlY3QpIHsKICAgICAgICAgICAgc3RhbXBTb3VyY2VUeXBlU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgICBwLnNvdXJjZVR5cGUgPSBzdGFtcFNvdXJjZVR5cGVTZWxlY3QudmFsdWU7CiAgICAgICAgICAgICAgLy8gQXR1YWxpemFyIGNhbXBvIGRlIHZhbG9yIGJhc2VhZG8gbm8gdGlwbwogICAgICAgICAgICAgIGlmIChzdGFtcFZhbHVlRmllbGQgJiYgc3RhbXBWYWx1ZUxhYmVsKSB7CiAgICAgICAgICAgICAgICBpZiAocC5zb3VyY2VUeXBlID09PSAnc3ZnJykgewogICAgICAgICAgICAgICAgICBzdGFtcFZhbHVlTGFiZWwudGV4dENvbnRlbnQgPSAnQ8OzZGlnbyBTVkcnOwogICAgICAgICAgICAgICAgICBzdGFtcFZhbHVlRmllbGQuaW5uZXJIVE1MID0gYDx0ZXh0YXJlYSBpZD0iaW5zcC1zdGFtcFZhbHVlIiByb3dzPSI2IiBwbGFjZWhvbGRlcj0iPHN2Zz4uLi48L3N2Zz4iPiR7ZXNjYXBlSHRtbChwLnZhbHVlIHx8ICcnKX08L3RleHRhcmVhPmA7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBzdGFtcFZhbHVlTGFiZWwudGV4dENvbnRlbnQgPSAnVVJMIG91IERhdGFVUkwnOwogICAgICAgICAgICAgICAgICBzdGFtcFZhbHVlRmllbGQuaW5uZXJIVE1MID0gYDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5zcC1zdGFtcFZhbHVlIiB2YWx1ZT0iJHtlc2NhcGVIdG1sKHAudmFsdWUgfHwgJycpfSIgcGxhY2Vob2xkZXI9Imh0dHBzOi8vZXhlbXBsby5jb20vaW1hZ2VtLnBuZyBvdSBkYXRhOmltYWdlLy4uLiI+YDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIFJlLWF0dGFjaCBsaXN0ZW5lcgogICAgICAgICAgICAgICAgY29uc3QgbmV3SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1zdGFtcFZhbHVlJyk7CiAgICAgICAgICAgICAgICBpZiAobmV3SW5wdXQpIHsKICAgICAgICAgICAgICAgICAgbmV3SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcC52YWx1ZSA9IG5ld0lucHV0LnZhbHVlOwogICAgICAgICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHN0YW1wVmFsdWVJbnB1dCkgewogICAgICAgICAgICBzdGFtcFZhbHVlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC52YWx1ZSA9IHN0YW1wVmFsdWVJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChzdGFtcEZpdFdJbnB1dCkgewogICAgICAgICAgICBzdGFtcEZpdFdJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocC5maXQpKSBwLmZpdCA9IFsxMjAsIDEyMF07CiAgICAgICAgICAgICAgcC5maXRbMF0gPSBwYXJzZUludChzdGFtcEZpdFdJbnB1dC52YWx1ZSkgfHwgMTIwOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHN0YW1wRml0SElucHV0KSB7CiAgICAgICAgICAgIHN0YW1wRml0SElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwLmZpdCkpIHAuZml0ID0gWzEyMCwgMTIwXTsKICAgICAgICAgICAgICBwLmZpdFsxXSA9IHBhcnNlSW50KHN0YW1wRml0SElucHV0LnZhbHVlKSB8fCAxMjA7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc3RhbXBBbGlnbm1lbnRTZWxlY3QpIHsKICAgICAgICAgICAgc3RhbXBBbGlnbm1lbnRTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIHAuYWxpZ25tZW50ID0gc3RhbXBBbGlnbm1lbnRTZWxlY3QudmFsdWU7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc3RhbXBPcGFjaXR5SW5wdXQpIHsKICAgICAgICAgICAgc3RhbXBPcGFjaXR5SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC5vcGFjaXR5ID0gcGFyc2VGbG9hdChzdGFtcE9wYWNpdHlJbnB1dC52YWx1ZSkgfHwgMTsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ2NoZWNrYm94JzoKICAgICAgICBjYXNlICdyYWRpbyc6CiAgICAgICAgICBjb25zdCBjaG9pY2VUZXh0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1jaG9pY2VUZXh0Jyk7CiAgICAgICAgICBjb25zdCBjaG9pY2VDaGVja2VkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtY2hvaWNlQ2hlY2tlZCcpOwogICAgICAgICAgY29uc3QgY2hvaWNlSWNvblBvc2l0aW9uU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtY2hvaWNlSWNvblBvc2l0aW9uJyk7CiAgICAgICAgICBjb25zdCBjaG9pY2VJY29uU2l6ZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtY2hvaWNlSWNvblNpemUnKTsKICAgICAgICAgIGNvbnN0IGNob2ljZUdhcElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtY2hvaWNlR2FwJyk7CiAgICAgICAgICBjb25zdCBjaG9pY2VBbGlnbm1lbnRTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1jaG9pY2VBbGlnbm1lbnQnKTsKCiAgICAgICAgICAvLyBHYXJhbnRpciBxdWUgY2hvaWNlVHlwZSBlc3TDoSBkZWZpbmlkbwogICAgICAgICAgaWYgKCFwLmNob2ljZVR5cGUpIHsKICAgICAgICAgICAgcC5jaG9pY2VUeXBlID0gZWxlbWVudC50eXBlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjaG9pY2VUZXh0SW5wdXQpIHsKICAgICAgICAgICAgY2hvaWNlVGV4dElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIHAuY2hvaWNlVGV4dCA9IGNob2ljZVRleHRJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjaG9pY2VDaGVja2VkKSB7CiAgICAgICAgICAgIGNob2ljZUNoZWNrZWQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgIHAuY2hvaWNlQ2hlY2tlZCA9IGNob2ljZUNoZWNrZWQuY2hlY2tlZDsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjaG9pY2VJY29uUG9zaXRpb25TZWxlY3QpIHsKICAgICAgICAgICAgY2hvaWNlSWNvblBvc2l0aW9uU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgICBwLmNob2ljZUljb25Qb3NpdGlvbiA9IGNob2ljZUljb25Qb3NpdGlvblNlbGVjdC52YWx1ZTsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjaG9pY2VJY29uU2l6ZUlucHV0KSB7CiAgICAgICAgICAgIGNob2ljZUljb25TaXplSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC5jaG9pY2VJY29uU2l6ZSA9IHBhcnNlSW50KGNob2ljZUljb25TaXplSW5wdXQudmFsdWUpIHx8IDEyOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGNob2ljZUdhcElucHV0KSB7CiAgICAgICAgICAgIGNob2ljZUdhcElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIHAuY2hvaWNlR2FwID0gcGFyc2VJbnQoY2hvaWNlR2FwSW5wdXQudmFsdWUpIHx8IDg7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoY2hvaWNlQWxpZ25tZW50U2VsZWN0KSB7CiAgICAgICAgICAgIGNob2ljZUFsaWdubWVudFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC5hbGlnbm1lbnQgPSBjaG9pY2VBbGlnbm1lbnRTZWxlY3QudmFsdWU7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdmaWxsTGluZSc6CiAgICAgICAgICBjb25zdCBmaWxsTGluZVdpZHRoSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1maWxsTGluZVdpZHRoJyk7CiAgICAgICAgICBjb25zdCBmaWxsTGluZVRoaWNrbmVzc0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtZmlsbExpbmVUaGlja25lc3MnKTsKICAgICAgICAgIGNvbnN0IGZpbGxMaW5lQ29sb3JJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWZpbGxMaW5lQ29sb3InKTsKICAgICAgICAgIGNvbnN0IGZpbGxMaW5lQWxpZ25tZW50U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtZmlsbExpbmVBbGlnbm1lbnQnKTsKCiAgICAgICAgICBpZiAoZmlsbExpbmVXaWR0aElucHV0KSB7CiAgICAgICAgICAgIGZpbGxMaW5lV2lkdGhJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBwLmxpbmVXaWR0aCA9IHBhcnNlSW50KGZpbGxMaW5lV2lkdGhJbnB1dC52YWx1ZSkgfHwgMjAwOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGZpbGxMaW5lVGhpY2tuZXNzSW5wdXQpIHsKICAgICAgICAgICAgZmlsbExpbmVUaGlja25lc3NJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBwLnRoaWNrbmVzcyA9IHBhcnNlRmxvYXQoZmlsbExpbmVUaGlja25lc3NJbnB1dC52YWx1ZSkgfHwgMC44OwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGZpbGxMaW5lQ29sb3JJbnB1dCkgewogICAgICAgICAgICBmaWxsTGluZUNvbG9ySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC5jb2xvciA9IGZpbGxMaW5lQ29sb3JJbnB1dC52YWx1ZTsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChmaWxsTGluZUFsaWdubWVudFNlbGVjdCkgewogICAgICAgICAgICBmaWxsTGluZUFsaWdubWVudFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC5hbGlnbm1lbnQgPSBmaWxsTGluZUFsaWdubWVudFNlbGVjdC52YWx1ZTsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ2NoYXJ0JzoKICAgICAgICAgIGNvbnN0IGNoYXJ0VHlwZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWNoYXJ0VHlwZScpOwogICAgICAgICAgY29uc3QgY2hhcnRXaWR0aElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtY2hhcnRXaWR0aCcpOwogICAgICAgICAgY29uc3QgY2hhcnRIZWlnaHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWNoYXJ0SGVpZ2h0Jyk7CiAgICAgICAgICBjb25zdCBjaGFydEZpdFdJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWNoYXJ0Rml0VycpOwogICAgICAgICAgY29uc3QgY2hhcnRGaXRISW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1jaGFydEZpdEgnKTsKICAgICAgICAgIGNvbnN0IGNoYXJ0QmFja2dyb3VuZENvbG9ySW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1jaGFydEJhY2tncm91bmRDb2xvcicpOwogICAgICAgICAgY29uc3QgY2hhcnREZXZpY2VQaXhlbFJhdGlvSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1jaGFydERldmljZVBpeGVsUmF0aW8nKTsKICAgICAgICAgIGNvbnN0IGNoYXJ0RGF0YUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3AtY2hhcnREYXRhJyk7CiAgICAgICAgICBjb25zdCBjaGFydE9wdGlvbnNJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwLWNoYXJ0T3B0aW9ucycpOwogICAgICAgICAgY29uc3QgY2hhcnRBbGlnbm1lbnRTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcC1jaGFydEFsaWdubWVudCcpOwoKICAgICAgICAgIGlmIChjaGFydFR5cGVTZWxlY3QpIHsKICAgICAgICAgICAgY2hhcnRUeXBlU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgICAgICBwLmNoYXJ0VHlwZSA9IGNoYXJ0VHlwZVNlbGVjdC52YWx1ZTsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjaGFydFdpZHRoSW5wdXQpIHsKICAgICAgICAgICAgY2hhcnRXaWR0aElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIHAuY2hhcnRXaWR0aCA9IHBhcnNlSW50KGNoYXJ0V2lkdGhJbnB1dC52YWx1ZSkgfHwgNDAwOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGNoYXJ0SGVpZ2h0SW5wdXQpIHsKICAgICAgICAgICAgY2hhcnRIZWlnaHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICBwLmNoYXJ0SGVpZ2h0ID0gcGFyc2VJbnQoY2hhcnRIZWlnaHRJbnB1dC52YWx1ZSkgfHwgMjAwOwogICAgICAgICAgICAgIHVwZGF0ZVdpdGhvdXRMb3NpbmdGb2N1cygoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlckFsbCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyQWxsKGZhbHNlKTsgZWxzZSBpZiAodHlwZW9mIHJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyKCk7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGNoYXJ0Rml0V0lucHV0KSB7CiAgICAgICAgICAgIGNoYXJ0Rml0V0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwLmNoYXJ0Rml0KSkgcC5jaGFydEZpdCA9IFs0MDAsIDIwMF07CiAgICAgICAgICAgICAgcC5jaGFydEZpdFswXSA9IHBhcnNlSW50KGNoYXJ0Rml0V0lucHV0LnZhbHVlKSB8fCA0MDA7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoY2hhcnRGaXRISW5wdXQpIHsKICAgICAgICAgICAgY2hhcnRGaXRISW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHAuY2hhcnRGaXQpKSBwLmNoYXJ0Rml0ID0gWzQwMCwgMjAwXTsKICAgICAgICAgICAgICBwLmNoYXJ0Rml0WzFdID0gcGFyc2VJbnQoY2hhcnRGaXRISW5wdXQudmFsdWUpIHx8IDIwMDsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjaGFydEJhY2tncm91bmRDb2xvcklucHV0KSB7CiAgICAgICAgICAgIGNoYXJ0QmFja2dyb3VuZENvbG9ySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC5jaGFydEJhY2tncm91bmRDb2xvciA9IGNoYXJ0QmFja2dyb3VuZENvbG9ySW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgdXBkYXRlV2l0aG91dExvc2luZ0ZvY3VzKCgpID0+IHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSByZW5kZXJBbGwoZmFsc2UpOyBlbHNlIGlmICh0eXBlb2YgcmVuZGVyID09PSAnZnVuY3Rpb24nKSByZW5kZXIoKTsKICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoY2hhcnREZXZpY2VQaXhlbFJhdGlvSW5wdXQpIHsKICAgICAgICAgICAgY2hhcnREZXZpY2VQaXhlbFJhdGlvSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC5jaGFydERldmljZVBpeGVsUmF0aW8gPSBwYXJzZUludChjaGFydERldmljZVBpeGVsUmF0aW9JbnB1dC52YWx1ZSkgfHwgMjsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjaGFydERhdGFJbnB1dCkgewogICAgICAgICAgICBjaGFydERhdGFJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShjaGFydERhdGFJbnB1dC52YWx1ZSk7CiAgICAgICAgICAgICAgICBwLmNoYXJ0RGF0YSA9IHBhcnNlZDsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAvLyBJZ25vcmFyIEpTT04gaW52w6FsaWRvIHRlbXBvcmFyaWFtZW50ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjaGFydE9wdGlvbnNJbnB1dCkgewogICAgICAgICAgICBjaGFydE9wdGlvbnNJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShjaGFydE9wdGlvbnNJbnB1dC52YWx1ZSk7CiAgICAgICAgICAgICAgICAvLyBHYXJhbnRpciBxdWUgYW5pbWF0aW9uLmR1cmF0aW9uIHNlamEgMAogICAgICAgICAgICAgICAgaWYgKCFwYXJzZWQuYW5pbWF0aW9uKSBwYXJzZWQuYW5pbWF0aW9uID0ge307CiAgICAgICAgICAgICAgICBwYXJzZWQuYW5pbWF0aW9uLmR1cmF0aW9uID0gMDsKICAgICAgICAgICAgICAgIHBhcnNlZC5yZXNwb25zaXZlID0gZmFsc2U7CiAgICAgICAgICAgICAgICBwLmNoYXJ0T3B0aW9ucyA9IHBhcnNlZDsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAvLyBJZ25vcmFyIEpTT04gaW52w6FsaWRvIHRlbXBvcmFyaWFtZW50ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjaGFydEFsaWdubWVudFNlbGVjdCkgewogICAgICAgICAgICBjaGFydEFsaWdubWVudFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgcC5hbGlnbm1lbnQgPSBjaGFydEFsaWdubWVudFNlbGVjdC52YWx1ZTsKICAgICAgICAgICAgICB1cGRhdGVXaXRob3V0TG9zaW5nRm9jdXMoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJBbGwgPT09ICdmdW5jdGlvbicpIHJlbmRlckFsbChmYWxzZSk7IGVsc2UgaWYgKHR5cGVvZiByZW5kZXIgPT09ICdmdW5jdGlvbicpIHJlbmRlcigpOwogICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gUERGTWFrZSBCdWlsZGVyIChuZXN0ZWQpCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gZWxlbWVudFRvUGRmbWFrZShlbCwgY29udGV4dCA9IHt9KSB7CiAgICAgIGNvbnN0IHAgPSBlbC5wcm9wZXJ0aWVzIHx8IHt9OwogICAgICBjb25zdCB7IGluSGVhZGVyID0gZmFsc2UsIGluRm9vdGVyID0gZmFsc2UsIGluVGFibGVDZWxsID0gZmFsc2UgfSA9IGNvbnRleHQ7CgogICAgICAvLyBoZWxwZXIgZm9yIGNvbW1vbiBwcm9wcwogICAgICBjb25zdCBjb21tb24gPSB7fTsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkocC5tYXJnaW4pKSBjb21tb24ubWFyZ2luID0gcC5tYXJnaW47CiAgICAgIGlmIChwLmFsaWdubWVudCkgY29tbW9uLmFsaWdubWVudCA9IHAuYWxpZ25tZW50OwogICAgICBpZiAocC5zdHlsZSkgY29tbW9uLnN0eWxlID0gcC5zdHlsZTsKCiAgICAgIGlmIChlbC50eXBlID09PSAnaGVhZGVyJykgewogICAgICAgIGNvbnN0IGhlYWRlck9iaiA9IHsKICAgICAgICAgIC4uLmNvbW1vbiwKICAgICAgICAgIHRleHQ6IHAudGV4dCB8fCAnJywKICAgICAgICAgIGZvbnRTaXplOiBOdW1iZXIocC5mb250U2l6ZSB8fCAxOCksCiAgICAgICAgICBib2xkOiAhIXAuYm9sZAogICAgICAgIH07CgogICAgICAgIC8vIElEIGRvIGVsZW1lbnRvIChwYXJhIGxpbmtUb0Rlc3RpbmF0aW9uKQogICAgICAgIGlmIChwLmlkICYmIHAuaWQudHJpbSgpKSB7CiAgICAgICAgICBoZWFkZXJPYmouaWQgPSBwLmlkLnRyaW0oKTsKICAgICAgICB9CgogICAgICAgIC8vIFN0eWxpbmcgY29tcGxldG8KICAgICAgICBpZiAocC5jb2xvcikgaGVhZGVyT2JqLmNvbG9yID0gcC5jb2xvcjsKICAgICAgICBpZiAocC5iYWNrZ3JvdW5kKSBoZWFkZXJPYmouYmFja2dyb3VuZCA9IHAuYmFja2dyb3VuZDsKICAgICAgICBpZiAocC5mb250KSBoZWFkZXJPYmouZm9udCA9IHAuZm9udDsKICAgICAgICBpZiAocC5kZWNvcmF0aW9uKSBoZWFkZXJPYmouZGVjb3JhdGlvbiA9IHAuZGVjb3JhdGlvbjsKICAgICAgICBpZiAocC5hbGlnbm1lbnQpIGhlYWRlck9iai5hbGlnbm1lbnQgPSBwLmFsaWdubWVudDsKICAgICAgICBpZiAocC5pdGFsaWNzKSBoZWFkZXJPYmouaXRhbGljcyA9IHRydWU7CiAgICAgICAgaWYgKHAubGluZUhlaWdodCAhPT0gdW5kZWZpbmVkKSBoZWFkZXJPYmoubGluZUhlaWdodCA9IHAubGluZUhlaWdodDsKICAgICAgICBpZiAocC5jaGFyYWN0ZXJTcGFjaW5nICE9PSB1bmRlZmluZWQpIGhlYWRlck9iai5jaGFyYWN0ZXJTcGFjaW5nID0gcC5jaGFyYWN0ZXJTcGFjaW5nOwogICAgICAgIGlmIChwLmRlY29yYXRpb25TdHlsZSkgaGVhZGVyT2JqLmRlY29yYXRpb25TdHlsZSA9IHAuZGVjb3JhdGlvblN0eWxlOwogICAgICAgIGlmIChwLmRlY29yYXRpb25Db2xvcikgaGVhZGVyT2JqLmRlY29yYXRpb25Db2xvciA9IHAuZGVjb3JhdGlvbkNvbG9yOwogICAgICAgIGlmIChwLmZvbnRGZWF0dXJlcyAmJiBBcnJheS5pc0FycmF5KHAuZm9udEZlYXR1cmVzKSAmJiBwLmZvbnRGZWF0dXJlcy5sZW5ndGggPiAwKSBoZWFkZXJPYmouZm9udEZlYXR1cmVzID0gcC5mb250RmVhdHVyZXM7CgogICAgICAgIC8vIExpbmsKICAgICAgICBpZiAocC5saW5rICYmIHAubGluay50cmltKCkpIHsKICAgICAgICAgIGhlYWRlck9iai5saW5rID0gcC5saW5rLnRyaW0oKTsKICAgICAgICB9IGVsc2UgaWYgKHAubGlua1RvUGFnZSkgewogICAgICAgICAgaGVhZGVyT2JqLmxpbmtUb1BhZ2UgPSBwLmxpbmtUb1BhZ2U7CiAgICAgICAgfSBlbHNlIGlmIChwLmxpbmtUb0Rlc3RpbmF0aW9uKSB7CiAgICAgICAgICBoZWFkZXJPYmoubGlua1RvRGVzdGluYXRpb24gPSBwLmxpbmtUb0Rlc3RpbmF0aW9uOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGhlYWRlck9iajsKICAgICAgfQoKICAgICAgaWYgKGVsLnR5cGUgPT09ICd0ZXh0JykgewogICAgICAgIGxldCB0ZXh0VmFsdWUgPSBwLnRleHQgfHwgJyc7CgogICAgICAgIC8vIFNlIG8gdGV4dG8gZXN0aXZlciBkZW50cm8gZGUgaGVhZGVyL2Zvb3RlciBlIGNvbnRpdmVyIHBsYWNlaG9sZGVycywgc3Vic3RpdHVpciBhdXRvbWF0aWNhbWVudGUKICAgICAgICAvLyBVc2FyIGNvbnRleHRvIHBhc3NhZG8gb3UgdmVyaWZpY2FyIGRpcmV0YW1lbnRlCiAgICAgICAgY29uc3QgaXNJbkhlYWRlckZvb3RlciA9IGluSGVhZGVyIHx8IGluRm9vdGVyIHx8IGlzRWxlbWVudEluSGVhZGVyKGVsLmlkKSB8fCBpc0VsZW1lbnRJbkZvb3RlcihlbC5pZCk7CgogICAgICAgIGlmIChpc0luSGVhZGVyRm9vdGVyICYmIHRleHRWYWx1ZS5pbmNsdWRlcygne3snKSkgewogICAgICAgICAgLy8gU3Vic3RpdHVpciBwbGFjZWhvbGRlcnMgcG9yIHRlbXBsYXRlIGxpdGVyYWxzIHF1ZSBzZXLDo28gYXZhbGlhZG9zIG5hIGZ1bsOnw6NvIGhlYWRlci9mb290ZXIKICAgICAgICAgIC8vIE8gUERGTWFrZSBlc3BlcmEgcXVlIGlzc28gc2VqYSB1bWEgc3RyaW5nIGNvbSAke2N1cnJlbnRQYWdlfSBlICR7cGFnZUNvdW50fQogICAgICAgICAgdGV4dFZhbHVlID0gdGV4dFZhbHVlCiAgICAgICAgICAgIC5yZXBsYWNlKC9ce1x7cGFnZU51bWJlclx9XH0vZywgJyR7Y3VycmVudFBhZ2V9JykKICAgICAgICAgICAgLnJlcGxhY2UoL1x7XHt0b3RhbFBhZ2VzXH1cfS9nLCAnJHtwYWdlQ291bnR9Jyk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCB0ZXh0T2JqID0gewogICAgICAgICAgLi4uY29tbW9uLAogICAgICAgICAgdGV4dDogdGV4dFZhbHVlLAogICAgICAgICAgZm9udFNpemU6IE51bWJlcihwLmZvbnRTaXplIHx8IDE0KQogICAgICAgIH07CgogICAgICAgIC8vIElEIGRvIGVsZW1lbnRvIChwYXJhIGxpbmtUb0Rlc3RpbmF0aW9uKQogICAgICAgIGlmIChwLmlkICYmIHAuaWQudHJpbSgpKSB7CiAgICAgICAgICB0ZXh0T2JqLmlkID0gcC5pZC50cmltKCk7CiAgICAgICAgfQoKICAgICAgICAvLyBTdHlsaW5nIGNvbXBsZXRvCiAgICAgICAgaWYgKHAuY29sb3IpIHRleHRPYmouY29sb3IgPSBwLmNvbG9yOwogICAgICAgIGlmIChwLmJhY2tncm91bmQpIHRleHRPYmouYmFja2dyb3VuZCA9IHAuYmFja2dyb3VuZDsKICAgICAgICBpZiAocC5mb250KSB0ZXh0T2JqLmZvbnQgPSBwLmZvbnQ7CiAgICAgICAgaWYgKHAuZGVjb3JhdGlvbikgdGV4dE9iai5kZWNvcmF0aW9uID0gcC5kZWNvcmF0aW9uOwogICAgICAgIGlmIChwLmFsaWdubWVudCkgdGV4dE9iai5hbGlnbm1lbnQgPSBwLmFsaWdubWVudDsKICAgICAgICBpZiAocC5ib2xkKSB0ZXh0T2JqLmJvbGQgPSB0cnVlOwogICAgICAgIGlmIChwLml0YWxpY3MpIHRleHRPYmouaXRhbGljcyA9IHRydWU7CiAgICAgICAgaWYgKHAubGluZUhlaWdodCAhPT0gdW5kZWZpbmVkKSB0ZXh0T2JqLmxpbmVIZWlnaHQgPSBwLmxpbmVIZWlnaHQ7CiAgICAgICAgaWYgKHAuY2hhcmFjdGVyU3BhY2luZyAhPT0gdW5kZWZpbmVkKSB0ZXh0T2JqLmNoYXJhY3RlclNwYWNpbmcgPSBwLmNoYXJhY3RlclNwYWNpbmc7CiAgICAgICAgaWYgKHAuZGVjb3JhdGlvblN0eWxlKSB0ZXh0T2JqLmRlY29yYXRpb25TdHlsZSA9IHAuZGVjb3JhdGlvblN0eWxlOwogICAgICAgIGlmIChwLmRlY29yYXRpb25Db2xvcikgdGV4dE9iai5kZWNvcmF0aW9uQ29sb3IgPSBwLmRlY29yYXRpb25Db2xvcjsKICAgICAgICBpZiAocC5mb250RmVhdHVyZXMgJiYgQXJyYXkuaXNBcnJheShwLmZvbnRGZWF0dXJlcykgJiYgcC5mb250RmVhdHVyZXMubGVuZ3RoID4gMCkgdGV4dE9iai5mb250RmVhdHVyZXMgPSBwLmZvbnRGZWF0dXJlczsKCiAgICAgICAgLy8gTGluawogICAgICAgIGlmIChwLmxpbmsgJiYgcC5saW5rLnRyaW0oKSkgewogICAgICAgICAgdGV4dE9iai5saW5rID0gcC5saW5rLnRyaW0oKTsKICAgICAgICB9IGVsc2UgaWYgKHAubGlua1RvUGFnZSkgewogICAgICAgICAgdGV4dE9iai5saW5rVG9QYWdlID0gcC5saW5rVG9QYWdlOwogICAgICAgIH0gZWxzZSBpZiAocC5saW5rVG9EZXN0aW5hdGlvbikgewogICAgICAgICAgdGV4dE9iai5saW5rVG9EZXN0aW5hdGlvbiA9IHAubGlua1RvRGVzdGluYXRpb247CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGV4dE9iajsKICAgICAgfQoKICAgICAgaWYgKGVsLnR5cGUgPT09ICdpbWFnZScpIHsKICAgICAgICBjb25zdCBvdXQgPSB7CiAgICAgICAgICAuLi5jb21tb24sCiAgICAgICAgICBpbWFnZTogcC51cmwgfHwgJycKICAgICAgICB9OwoKICAgICAgICAvLyBEaW1lbnNpb25hbWVudG86IHdpZHRoL2hlaWdodCwgZml0IG91IGNvdmVyIChtdXR1YW1lbnRlIGV4Y2x1c2l2b3MpCiAgICAgICAgaWYgKHAuZml0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIG91dC5maXQgPSBBcnJheS5pc0FycmF5KHAuZml0KSA/IFtOdW1iZXIocC5maXRbMF0pLCBOdW1iZXIocC5maXRbMV0pXSA6IE51bWJlcihwLmZpdCk7CiAgICAgICAgfSBlbHNlIGlmIChwLmNvdmVyICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIG91dC5jb3ZlciA9IHsKICAgICAgICAgICAgd2lkdGg6IE51bWJlcihwLmNvdmVyLndpZHRoIHx8IDMwMCksCiAgICAgICAgICAgIGhlaWdodDogTnVtYmVyKHAuY292ZXIuaGVpZ2h0IHx8IDE1MCksCiAgICAgICAgICAgIC4uLihwLmNvdmVyLmFsaWduID8geyBhbGlnbjogcC5jb3Zlci5hbGlnbiB9IDoge30pLAogICAgICAgICAgICAuLi4ocC5jb3Zlci52YWxpZ24gPyB7IHZhbGlnbjogcC5jb3Zlci52YWxpZ24gfSA6IHt9KQogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHAud2lkdGggIT09IHVuZGVmaW5lZCkgb3V0LndpZHRoID0gTnVtYmVyKHAud2lkdGgpOwogICAgICAgICAgaWYgKHAuaGVpZ2h0ICE9PSB1bmRlZmluZWQpIG91dC5oZWlnaHQgPSBOdW1iZXIocC5oZWlnaHQpOwogICAgICAgIH0KCiAgICAgICAgLy8gT3V0cmFzIHByb3ByaWVkYWRlcwogICAgICAgIGlmIChwLmFsaWdubWVudCkgb3V0LmFsaWdubWVudCA9IHAuYWxpZ25tZW50OwogICAgICAgIGlmIChwLm9wYWNpdHkgIT09IHVuZGVmaW5lZCkgb3V0Lm9wYWNpdHkgPSBOdW1iZXIocC5vcGFjaXR5KTsKICAgICAgICBpZiAocC5ib3JkZXJSYWRpdXMgJiYgcC5ib3JkZXJSYWRpdXMgPiAwKSBvdXQuYm9yZGVyUmFkaXVzID0gTnVtYmVyKHAuYm9yZGVyUmFkaXVzKTsKICAgICAgICBpZiAocC5hYnNvbHV0ZVBvc2l0aW9uKSB7CiAgICAgICAgICBvdXQuYWJzb2x1dGVQb3NpdGlvbiA9IHsKICAgICAgICAgICAgeDogTnVtYmVyKHAuYWJzb2x1dGVQb3NpdGlvbi54IHx8IDApLAogICAgICAgICAgICB5OiBOdW1iZXIocC5hYnNvbHV0ZVBvc2l0aW9uLnkgfHwgMCkKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGlmIChwLnJlbGF0aXZlUG9zaXRpb24pIHsKICAgICAgICAgIG91dC5yZWxhdGl2ZVBvc2l0aW9uID0gewogICAgICAgICAgICB4OiBOdW1iZXIocC5yZWxhdGl2ZVBvc2l0aW9uLnggfHwgMCksCiAgICAgICAgICAgIHk6IE51bWJlcihwLnJlbGF0aXZlUG9zaXRpb24ueSB8fCAwKQogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBvdXQ7CiAgICAgIH0KCiAgICAgIGlmIChlbC50eXBlID09PSAnbWFyZ2luJykgewogICAgICAgIC8vIE5vIHBkZm1ha2UsIHVtICJ0ZXh0byB2YXppbyIgY29tIG1hcmdpbiBvdSB1bSBjYW52YXM7IGFxdWkgdXNhbW9zIHVtIHRleHRvIGludmlzw612ZWwKICAgICAgICAvLyBTdXBvcnRhciB0YW50byBvIGZvcm1hdG8gYW50aWdvIChzaXplKSBxdWFudG8gbyBub3ZvIChtYXJnaW4gYXJyYXkpCiAgICAgICAgY29uc3QgbWFyZ2luQXJyYXkgPSBwLm1hcmdpbiB8fCAocC5zaXplID8gWzAsIHAuc2l6ZSwgMCwgMF0gOiBbMCwgMjAsIDAsIDBdKTsKICAgICAgICByZXR1cm4geyB0ZXh0OiAnICcsIG1hcmdpbjogbWFyZ2luQXJyYXkgfTsKICAgICAgfQoKICAgICAgaWYgKGVsLnR5cGUgPT09ICdwYWdlQnJlYWsnKSB7CiAgICAgICAgcmV0dXJuIHsgdGV4dDogJyAnLCBwYWdlQnJlYWs6ICdhZnRlcicgfTsKICAgICAgfQoKICAgICAgaWYgKGVsLnR5cGUgPT09ICdxcicpIHsKICAgICAgICBjb25zdCBxck9iaiA9IHsKICAgICAgICAgIC4uLmNvbW1vbiwKICAgICAgICAgIHFyOiBwLnRleHQgfHwgJ2h0dHBzOi8vZXhlbXBsby5jb20nLAogICAgICAgICAgZml0OiBOdW1iZXIocC5maXQgfHwgMTAwKQogICAgICAgIH07CiAgICAgICAgaWYgKHAuZWNjTGV2ZWwpIHFyT2JqLmVjY0xldmVsID0gcC5lY2NMZXZlbDsKICAgICAgICAvLyBTZW1wcmUgYXBsaWNhciBmb3JlZ3JvdW5kIGUgYmFja2dyb3VuZCAobWVzbW8gcXVlIHNlamFtIG9zIHBhZHLDtWVzKQogICAgICAgIHFyT2JqLmZvcmVncm91bmQgPSBwLmZvcmVncm91bmQgfHwgJyMwMDAwMDAnOwogICAgICAgIHFyT2JqLmJhY2tncm91bmQgPSBwLmJhY2tncm91bmQgfHwgJyNmZmZmZmYnOwogICAgICAgIGlmIChwLmFsaWdubWVudCkgcXJPYmouYWxpZ25tZW50ID0gcC5hbGlnbm1lbnQ7CiAgICAgICAgcmV0dXJuIHFyT2JqOwogICAgICB9CgogICAgICBpZiAoZWwudHlwZSA9PT0gJ3N2ZycpIHsKICAgICAgICBjb25zdCBzdmdPYmogPSB7CiAgICAgICAgICAuLi5jb21tb24sCiAgICAgICAgICBzdmc6IHAuc3ZnIHx8ICc8c3ZnPjwvc3ZnPicKICAgICAgICB9OwogICAgICAgIGlmIChwLndpZHRoKSBzdmdPYmoud2lkdGggPSBOdW1iZXIocC53aWR0aCk7CiAgICAgICAgaWYgKHAuaGVpZ2h0KSBzdmdPYmouaGVpZ2h0ID0gTnVtYmVyKHAuaGVpZ2h0KTsKICAgICAgICBpZiAocC5jb2xvcikgc3ZnT2JqLmNvbG9yID0gcC5jb2xvcjsKICAgICAgICBpZiAocC5hbGlnbm1lbnQpIHN2Z09iai5hbGlnbm1lbnQgPSBwLmFsaWdubWVudDsKICAgICAgICByZXR1cm4gc3ZnT2JqOwogICAgICB9CgogICAgICBpZiAoZWwudHlwZSA9PT0gJ3N0YW1wJykgewogICAgICAgIGNvbnN0IHN0YW1wT2JqID0gewogICAgICAgICAgc3RhbXBUeXBlOiBwLnNvdXJjZVR5cGUgfHwgJ2ltYWdlJywKICAgICAgICAgIHN0YW1wOiBwLnZhbHVlIHx8ICcnLAogICAgICAgICAgZml0OiBBcnJheS5pc0FycmF5KHAuZml0KSA/IHAuZml0IDogW3AuZml0IHx8IDEyMCwgcC5maXQgfHwgMTIwXSwKICAgICAgICAgIGFsaWdubWVudDogcC5hbGlnbm1lbnQgfHwgJ2NlbnRlcicsCiAgICAgICAgICBtYXJnaW46IEFycmF5LmlzQXJyYXkocC5tYXJnaW4pID8gcC5tYXJnaW4gOiBbMCwgMCwgMCwgMF0KICAgICAgICB9OwoKICAgICAgICBpZiAocC5vcGFjaXR5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHN0YW1wT2JqLm9wYWNpdHkgPSBOdW1iZXIocC5vcGFjaXR5KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzdGFtcE9iajsKICAgICAgfQoKICAgICAgaWYgKGVsLnR5cGUgPT09ICdjaGVja2JveCcgfHwgZWwudHlwZSA9PT0gJ3JhZGlvJykgewogICAgICAgIGNvbnN0IGNob2ljZVR5cGUgPSBwLmNob2ljZVR5cGUgfHwgZWwudHlwZTsKICAgICAgICBjb25zdCBjaG9pY2VUZXh0ID0gcC5jaG9pY2VUZXh0IHx8ICdUZXh0by4uLic7CiAgICAgICAgY29uc3QgY2hvaWNlQ2hlY2tlZCA9IHAuY2hvaWNlQ2hlY2tlZCA9PT0gdHJ1ZTsKICAgICAgICBjb25zdCBjaG9pY2VJY29uUG9zaXRpb24gPSBwLmNob2ljZUljb25Qb3NpdGlvbiB8fCAnYmVmb3JlJzsKICAgICAgICBjb25zdCBjaG9pY2VHYXAgPSBOdW1iZXIocC5jaG9pY2VHYXAgfHwgOCk7CiAgICAgICAgY29uc3QgY2hvaWNlSWNvblNpemUgPSBOdW1iZXIocC5jaG9pY2VJY29uU2l6ZSB8fCAxMik7CiAgICAgICAgY29uc3QgYWxpZ25tZW50ID0gcC5hbGlnbm1lbnQgfHwgJ2xlZnQnOwogICAgICAgIGNvbnN0IG1hcmdpbiA9IEFycmF5LmlzQXJyYXkocC5tYXJnaW4pID8gcC5tYXJnaW4gOiBbMCwgMCwgMCwgMTBdOwoKICAgICAgICAvLyBGdW7Dp8OjbyBwYXJhIGdlcmFyIFNWRyBkbyDDrWNvbmUKICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZUNob2ljZVNWRyh0eXBlLCBjaGVja2VkLCBzaXplKSB7CiAgICAgICAgICBpZiAodHlwZSA9PT0gJ2NoZWNrYm94JykgewogICAgICAgICAgICBpZiAoY2hlY2tlZCkgewogICAgICAgICAgICAgIHJldHVybiBgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIke3NpemV9IiBoZWlnaHQ9IiR7c2l6ZX0iIHZpZXdCb3g9IjAgMCAke3NpemV9ICR7c2l6ZX0iPjxyZWN0IHg9IjEiIHk9IjEiIHdpZHRoPSIke3NpemUgLSAyfSIgaGVpZ2h0PSIke3NpemUgLSAyfSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDMgJHtzaXplICogMC41fSBMICR7c2l6ZSAqIDAuNH0gJHtzaXplICogMC43fSBMICR7c2l6ZSAqIDAuOH0gJHtzaXplICogMC4zfSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEuMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+YDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gYDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iJHtzaXplfSIgaGVpZ2h0PSIke3NpemV9IiB2aWV3Qm94PSIwIDAgJHtzaXplfSAke3NpemV9Ij48cmVjdCB4PSIxIiB5PSIxIiB3aWR0aD0iJHtzaXplIC0gMn0iIGhlaWdodD0iJHtzaXplIC0gMn0iIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9zdmc+YDsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncmFkaW8nKSB7CiAgICAgICAgICAgIGlmIChjaGVja2VkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IiR7c2l6ZX0iIGhlaWdodD0iJHtzaXplfSIgdmlld0JveD0iMCAwICR7c2l6ZX0gJHtzaXplfSI+PGNpcmNsZSBjeD0iJHtzaXplIC8gMn0iIGN5PSIke3NpemUgLyAyfSIgcj0iJHtzaXplIC8gMiAtIDF9IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMSIvPjxjaXJjbGUgY3g9IiR7c2l6ZSAvIDJ9IiBjeT0iJHtzaXplIC8gMn0iIHI9IiR7c2l6ZSAvIDR9IiBmaWxsPSIjMDAwIi8+PC9zdmc+YDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gYDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iJHtzaXplfSIgaGVpZ2h0PSIke3NpemV9IiB2aWV3Qm94PSIwIDAgJHtzaXplfSAke3NpemV9Ij48Y2lyY2xlIGN4PSIke3NpemUgLyAyfSIgY3k9IiR7c2l6ZSAvIDJ9IiByPSIke3NpemUgLyAyIC0gMX0iIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9zdmc+YDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuICcnOwogICAgICAgIH0KCiAgICAgICAgY29uc3Qgc3ZnU3RyaW5nID0gZ2VuZXJhdGVDaG9pY2VTVkcoY2hvaWNlVHlwZSwgY2hvaWNlQ2hlY2tlZCwgY2hvaWNlSWNvblNpemUpOwoKICAgICAgICAvLyBNb250YXIgY8OpbHVsYXMgZGEgdGFiZWxhCiAgICAgICAgY29uc3QgaWNvbkNlbGwgPSB7CiAgICAgICAgICBzdmc6IHN2Z1N0cmluZywKICAgICAgICAgIHdpZHRoOiBjaG9pY2VJY29uU2l6ZSwKICAgICAgICAgIGhlaWdodDogY2hvaWNlSWNvblNpemUsCiAgICAgICAgICBhbGlnbm1lbnQ6ICdjZW50ZXInLAogICAgICAgICAgbWFyZ2luOiBjaG9pY2VJY29uUG9zaXRpb24gPT09ICdiZWZvcmUnID8gWzAsIDAsIGNob2ljZUdhcCwgMF0gOiBbY2hvaWNlR2FwLCAwLCAwLCAwXQogICAgICAgIH07CgogICAgICAgIGNvbnN0IHRleHRDZWxsID0gewogICAgICAgICAgdGV4dDogY2hvaWNlVGV4dCwKICAgICAgICAgIGZvbnRTaXplOiAxMCwKICAgICAgICAgIG1hcmdpbjogWzAsIDAsIDAsIDBdCiAgICAgICAgfTsKCiAgICAgICAgLy8gRGVmaW5pciBsYXJndXJhcyBlIG9yZGVtIGRhcyBjb2x1bmFzIGJhc2VhZG8gbmEgcG9zacOnw6NvIGRvIMOtY29uZQogICAgICAgIGxldCB3aWR0aHMsIGJvZHk7CiAgICAgICAgaWYgKGNob2ljZUljb25Qb3NpdGlvbiA9PT0gJ2JlZm9yZScpIHsKICAgICAgICAgIHdpZHRocyA9IFtjaG9pY2VJY29uU2l6ZSwgJyonXTsKICAgICAgICAgIGJvZHkgPSBbW2ljb25DZWxsLCB0ZXh0Q2VsbF1dOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3aWR0aHMgPSBbJyonLCBjaG9pY2VJY29uU2l6ZV07CiAgICAgICAgICBib2R5ID0gW1t0ZXh0Q2VsbCwgaWNvbkNlbGxdXTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBhbGlnbm1lbnQ6IGFsaWdubWVudCwKICAgICAgICAgIG1hcmdpbjogbWFyZ2luLAogICAgICAgICAgdGFibGU6IHsKICAgICAgICAgICAgd2lkdGhzOiB3aWR0aHMsCiAgICAgICAgICAgIGJvZHk6IGJvZHkKICAgICAgICAgIH0sCiAgICAgICAgICBsYXlvdXQ6ICdub0JvcmRlcnMnCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKGVsLnR5cGUgPT09ICdmaWxsTGluZScpIHsKICAgICAgICBjb25zdCBmaWxsTGluZU9iaiA9IHsKICAgICAgICAgIGZpbGxMaW5lOiB0cnVlLAogICAgICAgICAgbGluZVdpZHRoOiBOdW1iZXIocC5saW5lV2lkdGggfHwgMjAwKSwKICAgICAgICAgIHRoaWNrbmVzczogTnVtYmVyKHAudGhpY2tuZXNzIHx8IDAuOCksCiAgICAgICAgICBjb2xvcjogcC5jb2xvciB8fCAnIzAwMDAwMCcsCiAgICAgICAgICBhbGlnbm1lbnQ6IHAuYWxpZ25tZW50IHx8ICdsZWZ0JywKICAgICAgICAgIG1hcmdpbjogQXJyYXkuaXNBcnJheShwLm1hcmdpbikgPyBwLm1hcmdpbiA6IFswLCAwLCAwLCAwXQogICAgICAgIH07CgogICAgICAgIHJldHVybiBmaWxsTGluZU9iajsKICAgICAgfQoKICAgICAgaWYgKGVsLnR5cGUgPT09ICdjaGFydCcpIHsKICAgICAgICBjb25zdCBjaGFydE9iaiA9IHsKICAgICAgICAgIGNoYXJ0OiB0cnVlLAogICAgICAgICAgY2hhcnRUeXBlOiBwLmNoYXJ0VHlwZSB8fCAnYmFyJywKICAgICAgICAgIGNoYXJ0V2lkdGg6IE51bWJlcihwLmNoYXJ0V2lkdGggfHwgNDAwKSwKICAgICAgICAgIGNoYXJ0SGVpZ2h0OiBOdW1iZXIocC5jaGFydEhlaWdodCB8fCAyMDApLAogICAgICAgICAgY2hhcnRGaXQ6IEFycmF5LmlzQXJyYXkocC5jaGFydEZpdCkgPyBwLmNoYXJ0Rml0IDogW3AuY2hhcnRGaXQgfHwgNDAwLCBwLmNoYXJ0Rml0IHx8IDIwMF0sCiAgICAgICAgICBjaGFydEJhY2tncm91bmRDb2xvcjogcC5jaGFydEJhY2tncm91bmRDb2xvciB8fCAnI0ZGRkZGRicsCiAgICAgICAgICBjaGFydERldmljZVBpeGVsUmF0aW86IE51bWJlcihwLmNoYXJ0RGV2aWNlUGl4ZWxSYXRpbyB8fCAyKSwKICAgICAgICAgIGNoYXJ0RGF0YTogcC5jaGFydERhdGEgfHwgeyBsYWJlbHM6IFtdLCBkYXRhc2V0czogW10gfSwKICAgICAgICAgIGNoYXJ0T3B0aW9uczogcC5jaGFydE9wdGlvbnMgfHwgeyByZXNwb25zaXZlOiBmYWxzZSwgYW5pbWF0aW9uOiB7IGR1cmF0aW9uOiAwIH0gfSwKICAgICAgICAgIGFsaWdubWVudDogcC5hbGlnbm1lbnQgfHwgJ2NlbnRlcicsCiAgICAgICAgICBtYXJnaW46IEFycmF5LmlzQXJyYXkocC5tYXJnaW4pID8gcC5tYXJnaW4gOiBbMCwgMCwgMCwgMF0KICAgICAgICB9OwoKICAgICAgICByZXR1cm4gY2hhcnRPYmo7CiAgICAgIH0KCiAgICAgIGlmIChlbC50eXBlID09PSAnYmFyY29kZScpIHsKICAgICAgICAvLyBGb3JtYXRvIG9icmlnYXTDs3JpbzogeyBhbGlnbm1lbnQ6ICdjZW50ZXInLCB2ZXJ0aWNhbEFsaWdubWVudDogJ21pZGRsZScsIHN0YWNrOiBbeyBiYXJjb2RlOiAnVkFMT1InLCBmaXQ6IFsyMDEsIDQyXSB9XSB9CiAgICAgICAgY29uc3QgYmFyY29kZU9iaiA9IHsKICAgICAgICAgIGJhcmNvZGU6IHAuYmFyY29kZVZhbHVlIHx8ICdBQkMxMjM0NTY3ODknLAogICAgICAgICAgZml0OiBwLmZpdCB8fCBbMjAxLCA0Ml0KICAgICAgICB9OwoKICAgICAgICAvLyBBZGljaW9uYXIgcHJvcHJpZWRhZGVzIGV4dHJhcyBzZSBuZWNlc3PDoXJpbyAocGFyYSBvIHNjcmlwdF9maXhvIGRvIEJ1YmJsZSkKICAgICAgICBpZiAocC5mb3JtYXQpIGJhcmNvZGVPYmouYmFyY29kZUZvcm1hdCA9IHAuZm9ybWF0OwogICAgICAgIGlmIChwLmxpbmVXaWR0aCAhPT0gdW5kZWZpbmVkKSBiYXJjb2RlT2JqLmJhcmNvZGVXaWR0aCA9IE51bWJlcihwLmxpbmVXaWR0aCk7CiAgICAgICAgaWYgKHAuYmFySGVpZ2h0ICE9PSB1bmRlZmluZWQpIGJhcmNvZGVPYmouYmFyY29kZUhlaWdodCA9IE51bWJlcihwLmJhckhlaWdodCk7CiAgICAgICAgaWYgKHAuZGlzcGxheVZhbHVlICE9PSB1bmRlZmluZWQpIGJhcmNvZGVPYmouYmFyY29kZURpc3BsYXlWYWx1ZSA9IHAuZGlzcGxheVZhbHVlOwogICAgICAgIGlmIChwLmZvbnRTaXplICE9PSB1bmRlZmluZWQpIGJhcmNvZGVPYmouYmFyY29kZUZvbnRTaXplID0gTnVtYmVyKHAuZm9udFNpemUpOwogICAgICAgIGlmIChwLm1hcmdpbiAhPT0gdW5kZWZpbmVkKSBiYXJjb2RlT2JqLmJhcmNvZGVNYXJnaW4gPSBOdW1iZXIocC5tYXJnaW4pOwoKICAgICAgICBjb25zdCBzdGFja09iaiA9IHsKICAgICAgICAgIGFsaWdubWVudDogcC5hbGlnbm1lbnQgfHwgJ2NlbnRlcicsCiAgICAgICAgICBzdGFjazogW2JhcmNvZGVPYmpdCiAgICAgICAgfTsKCiAgICAgICAgLy8gU2UgZXN0aXZlciBkZW50cm8gZGUgY8OpbHVsYSBkZSB0YWJlbGEsIGFkaWNpb25hciB2ZXJ0aWNhbEFsaWdubWVudAogICAgICAgIGlmIChpblRhYmxlQ2VsbCkgewogICAgICAgICAgc3RhY2tPYmoudmVydGljYWxBbGlnbm1lbnQgPSBwLnZlcnRpY2FsQWxpZ25tZW50IHx8ICdtaWRkbGUnOwogICAgICAgIH0gZWxzZSBpZiAocC52ZXJ0aWNhbEFsaWdubWVudCkgewogICAgICAgICAgc3RhY2tPYmoudmVydGljYWxBbGlnbm1lbnQgPSBwLnZlcnRpY2FsQWxpZ25tZW50OwogICAgICAgIH0KCiAgICAgICAgLy8gQXBsaWNhciBtYXJnaW4gc2UgZXhpc3RpcgogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHAubWFyZ2luKSkgewogICAgICAgICAgc3RhY2tPYmoubWFyZ2luID0gcC5tYXJnaW47CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc3RhY2tPYmo7CiAgICAgIH0KCiAgICAgIGlmIChlbC50eXBlID09PSAnZ3JvdXAnKSB7CiAgICAgICAgLy8gZ3JvdXAgbm8gZWRpdG9yID0gc3RhY2sgbm8gUERGCiAgICAgICAgLy8gUGFzc2FyIGNvbnRleHRvIHBhcmEgZWxlbWVudG9zIGZpbGhvcyAoc2UgZXN0aXZlciBlbSBoZWFkZXIvZm9vdGVyLCBtYW50ZXIgY29udGV4dG8pCiAgICAgICAgY29uc3Qga2lkcyA9IChwLmNoaWxkcmVuIHx8IFtdKS5tYXAoY2ggPT4gZWxlbWVudFRvUGRmbWFrZShjaCwgY29udGV4dCkpOwogICAgICAgIHJldHVybiBraWRzLmxlbmd0aCA8PSAxID8gKGtpZHNbMF0gfHwgeyB0ZXh0OiAnJyB9KSA6IHsgc3RhY2s6IGtpZHMgfTsKICAgICAgfQoKICAgICAgaWYgKGVsLnR5cGUgPT09ICdjb2x1bW5zJykgewogICAgICAgIGNvbnN0IGNvbHMgPSAocC5jb2x1bW5zIHx8IFtdKS5tYXAoY29sID0+IHsKICAgICAgICAgIC8vIFBhc3NhciBjb250ZXh0byBwYXJhIGVsZW1lbnRvcyBmaWxob3MKICAgICAgICAgIGNvbnN0IGtpZHMgPSAoY29sLmNoaWxkcmVuIHx8IFtdKS5tYXAoY2ggPT4gZWxlbWVudFRvUGRmbWFrZShjaCwgY29udGV4dCkpOwogICAgICAgICAgY29uc3QgY29udGVudE5vZGUgPSBraWRzLmxlbmd0aCA8PSAxID8gKGtpZHNbMF0gfHwgeyB0ZXh0OiAnJyB9KSA6IHsgc3RhY2s6IGtpZHMgfTsKCiAgICAgICAgICAvLyBQcm9jZXNzYXIgd2lkdGg6IHBvZGUgc2VyICcqJywgbsO6bWVybywgb3Ugc3RyaW5nIGNvbSAnJScKICAgICAgICAgIGxldCB3aWR0aCA9IGNvbC53aWR0aCB8fCAnKic7CiAgICAgICAgICBpZiAodHlwZW9mIHdpZHRoID09PSAnc3RyaW5nJyAmJiB3aWR0aC5lbmRzV2l0aCgnJScpKSB7CiAgICAgICAgICAgIC8vIE1hbnRlciBjb21vIHN0cmluZyBjb20gJSBwYXJhIFBERk1ha2UKICAgICAgICAgICAgd2lkdGggPSB3aWR0aDsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpZHRoID09PSAnbnVtYmVyJykgewogICAgICAgICAgICAvLyBOw7ptZXJvID0gcGl4ZWxzCiAgICAgICAgICAgIHdpZHRoID0gd2lkdGg7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyAnKicgb3UgJ2F1dG8nID0gYXV0b23DoXRpY28KICAgICAgICAgICAgd2lkdGggPSAnKic7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHsgd2lkdGgsIC4uLmNvbnRlbnROb2RlIH07CiAgICAgICAgfSk7CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5jb21tb24sCiAgICAgICAgICBjb2x1bW5HYXA6IE51bWJlcihwLmdhcCB8fCAxMCksCiAgICAgICAgICBjb2x1bW5zOiBjb2xzCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKGVsLnR5cGUgPT09ICdsaXN0JykgewogICAgICAgIGNvbnN0IGl0ZW1zID0gKHAuaXRlbXMgfHwgW10pLm1hcChpdCA9PiB7CiAgICAgICAgICBpZiAoIWl0KSByZXR1cm4gJyc7CiAgICAgICAgICBpZiAoaXQua2luZCA9PT0gJ3RleHQnKSByZXR1cm4gaXQudGV4dCB8fCAnJzsKICAgICAgICAgIGlmIChpdC5raW5kID09PSAnbm9kZScgJiYgaXQubm9kZSkgcmV0dXJuIGVsZW1lbnRUb1BkZm1ha2UoaXQubm9kZSwgY29udGV4dCk7CiAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgbGlzdFR5cGUgPSBwLmxpc3RUeXBlID09PSAnb2wnID8gJ29sJyA6ICd1bCc7CiAgICAgICAgY29uc3QgbGlzdE9iaiA9IHsKICAgICAgICAgIC4uLmNvbW1vbiwKICAgICAgICAgIFtsaXN0VHlwZV06IGl0ZW1zCiAgICAgICAgfTsKCiAgICAgICAgLy8gQWRpY2lvbmFyIHByb3ByaWVkYWRlcyBleHRyYXMgcGFyYSBsaXN0YXMgb3JkZW5hZGFzCiAgICAgICAgaWYgKGxpc3RUeXBlID09PSAnb2wnKSB7CiAgICAgICAgICBpZiAocC5zdGFydCAmJiBwLnN0YXJ0ICE9PSAxKSBsaXN0T2JqLnN0YXJ0ID0gcC5zdGFydDsKICAgICAgICAgIGlmIChwLnJldmVyc2VkKSBsaXN0T2JqLnJldmVyc2VkID0gdHJ1ZTsKICAgICAgICAgIGlmIChwLnR5cGUpIGxpc3RPYmoudHlwZSA9IHAudHlwZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gUGFyYSBsaXN0YXMgbsOjbyBvcmRlbmFkYXMsIGFwZW5hcyB0eXBlIGUgbWFya2VyQ29sb3IKICAgICAgICAgIGlmIChwLnR5cGUpIGxpc3RPYmoudHlwZSA9IHAudHlwZTsKICAgICAgICAgIGlmIChwLm1hcmtlckNvbG9yKSBsaXN0T2JqLm1hcmtlckNvbG9yID0gcC5tYXJrZXJDb2xvcjsKICAgICAgICB9CgogICAgICAgIHJldHVybiBsaXN0T2JqOwogICAgICB9CgogICAgICBpZiAoZWwudHlwZSA9PT0gJ3RhYmxlJykgewogICAgICAgIC8vIFByaW1laXJvLCBwcm9jZXNzYXIgbyBib2R5IGUgaWRlbnRpZmljYXIgY8OpbHVsYXMgY29tIHJvd1NwYW4vY29sU3BhbgogICAgICAgIGNvbnN0IHByb2Nlc3NlZEJvZHkgPSBbXTsKICAgICAgICBjb25zdCBvcmlnaW5hbEJvZHkgPSBwLmJvZHkgfHwgW107CgogICAgICAgIC8vIFJhc3RyZWFyIGPDqWx1bGFzIGNvYmVydGFzIHBvciBzcGFucwogICAgICAgIGNvbnN0IGNvdmVyZWRDZWxscyA9IG5ldyBTZXQoKTsKCiAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBvcmlnaW5hbEJvZHkubGVuZ3RoOyByKyspIHsKICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZFJvdyA9IFtdOwoKICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgb3JpZ2luYWxCb2R5W3JdLmxlbmd0aDsgYysrKSB7CiAgICAgICAgICAgIC8vIFB1bGFyIGPDqWx1bGFzIGrDoSBjb2JlcnRhcwogICAgICAgICAgICBpZiAoY292ZXJlZENlbGxzLmhhcyhgJHtyfS0ke2N9YCkpIHsKICAgICAgICAgICAgICBwcm9jZXNzZWRSb3cucHVzaCh7fSk7IC8vIEPDqWx1bGEgdmF6aWEgcGFyYSBQREZNYWtlCiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBvcmlnaW5hbEJvZHlbcl1bY107CgogICAgICAgICAgICAvLyBTZSBhIGPDqWx1bGEgw6kgbnVsbCBvdSBzdHJpbmcgdmF6aWEsIG1hbnRlciBjb21vIG9iamV0byB2YXppbwogICAgICAgICAgICBpZiAoIWNlbGwgfHwgKHR5cGVvZiBjZWxsID09PSAnc3RyaW5nJyAmJiBjZWxsID09PSAnJykpIHsKICAgICAgICAgICAgICBwcm9jZXNzZWRSb3cucHVzaCh7fSk7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFByb2Nlc3NhciBjb250ZcO6ZG8gZGEgY8OpbHVsYQogICAgICAgICAgICAvLyBQYXNzYXIgY29udGV4dG8gcGFyYSBlbGVtZW50b3MgZmlsaG9zIChzZSBlc3RpdmVyIGVtIGhlYWRlci9mb290ZXIsIG1hbnRlciBjb250ZXh0bykKICAgICAgICAgICAgLy8gQWRpY2lvbmFyIGZsYWcgaW5UYWJsZUNlbGwgcGFyYSBiYXJjb2RlIGFwbGljYXIgdmVydGljYWxBbGlnbm1lbnQKICAgICAgICAgICAgY29uc3Qga2lkcyA9IChjZWxsLmNoaWxkcmVuIHx8IFtdKS5tYXAoY2ggPT4gZWxlbWVudFRvUGRmbWFrZShjaCwgeyAuLi5jb250ZXh0LCBpblRhYmxlQ2VsbDogdHJ1ZSB9KSk7CiAgICAgICAgICAgIGNvbnN0IGNlbGxDb250ZW50ID0gKGtpZHMubGVuZ3RoIDw9IDEpID8gKGtpZHNbMF0gfHwgJycpIDogeyBzdGFjazoga2lkcyB9OwoKICAgICAgICAgICAgLy8gQXBsaWNhciBlc3RpbG9zIGRhIGPDqWx1bGEKICAgICAgICAgICAgLy8gU2UgYSBjw6lsdWxhIHRlbSB1bSBlc3RpbG8gZGVmaW5pZG8sIHVzYXIgcmVmZXLDqm5jaWEgYW8gZXN0aWxvCiAgICAgICAgICAgIC8vIENhc28gY29udHLDoXJpbywgYXBsaWNhciBwcm9wcmllZGFkZXMgaW5saW5lCiAgICAgICAgICAgIGNvbnN0IGNlbGxPYmogPSB0eXBlb2YgY2VsbENvbnRlbnQgPT09ICdzdHJpbmcnID8geyB0ZXh0OiBjZWxsQ29udGVudCB9IDogY2VsbENvbnRlbnQ7CgogICAgICAgICAgICAvLyBTZSBhIGPDqWx1bGEgdGVtIHVtIG5vbWUgZGUgZXN0aWxvLCB1c2FyIHJlZmVyw6puY2lhIGFvIGVzdGlsbwogICAgICAgICAgICAvLyBQcm9wcmllZGFkZXMgcXVlIHBvZGVtIGVzdGFyIG5vIGVzdGlsbzogZm9udFNpemUsIGFsaWdubWVudCwgbWFyZ2luLCBjb2xvciAodGV4dG8pLCBib2xkLCBpdGFsaWNzCiAgICAgICAgICAgIGlmIChjZWxsLl9zdHlsZU5hbWUpIHsKICAgICAgICAgICAgICBjZWxsT2JqLnN0eWxlID0gY2VsbC5fc3R5bGVOYW1lOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIEFwbGljYXIgcHJvcHJpZWRhZGVzIGlubGluZSAoZmFsbGJhY2sgc2UgbsOjbyBob3V2ZXIgZXN0aWxvKQogICAgICAgICAgICAgIGlmIChjZWxsLmZvbnRTaXplICE9PSB1bmRlZmluZWQpIGNlbGxPYmouZm9udFNpemUgPSBjZWxsLmZvbnRTaXplOwogICAgICAgICAgICAgIGlmIChjZWxsLmFsaWdubWVudCkgY2VsbE9iai5hbGlnbm1lbnQgPSBjZWxsLmFsaWdubWVudDsKICAgICAgICAgICAgICBpZiAoY2VsbC5tYXJnaW4gJiYgQXJyYXkuaXNBcnJheShjZWxsLm1hcmdpbikpIGNlbGxPYmoubWFyZ2luID0gY2VsbC5tYXJnaW47CiAgICAgICAgICAgICAgaWYgKGNlbGwuY29sb3IpIGNlbGxPYmouY29sb3IgPSBjZWxsLmNvbG9yOyAvLyBDb3IgZG8gdGV4dG8KICAgICAgICAgICAgICBpZiAoY2VsbC5ib2xkICE9PSB1bmRlZmluZWQpIGNlbGxPYmouYm9sZCA9IGNlbGwuYm9sZDsKICAgICAgICAgICAgICBpZiAoY2VsbC5pdGFsaWNzICE9PSB1bmRlZmluZWQpIGNlbGxPYmouaXRhbGljcyA9IGNlbGwuaXRhbGljczsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gUHJvcHJpZWRhZGVzIGVzcGVjw61maWNhcyBkYSBjw6lsdWxhIChudW5jYSBkZXZlbSBzZXIgZXN0aWxvcykKICAgICAgICAgICAgLy8gZmlsbENvbG9yID0gY29yIGRlIGZ1bmRvIGRhIGPDqWx1bGEgKGRpZmVyZW50ZSBkZSBjb2xvciA9IGNvciBkbyB0ZXh0bykKICAgICAgICAgICAgLy8gU8OzIGFwbGljYXIgZmlsbENvbG9yIGluZGl2aWR1YWwgc2UgemVicmEgbsOjbyBlc3RpdmVyIGF0aXZhZG8KICAgICAgICAgICAgaWYgKCFwLnplYnJhRW5hYmxlZCAmJiBjZWxsLmZpbGxDb2xvcikgY2VsbE9iai5maWxsQ29sb3IgPSBjZWxsLmZpbGxDb2xvcjsKICAgICAgICAgICAgaWYgKGNlbGwuZmlsbE9wYWNpdHkgIT09IHVuZGVmaW5lZCkgY2VsbE9iai5maWxsT3BhY2l0eSA9IE51bWJlcihjZWxsLmZpbGxPcGFjaXR5KTsKCiAgICAgICAgICAgIC8vIHJvd1NwYW4gZSBjb2xTcGFuIC0gSU1QT1JUQU5URTogbWFyY2FyIGPDqWx1bGFzIGNvYmVydGFzCiAgICAgICAgICAgIGlmIChjZWxsLnJvd1NwYW4gJiYgY2VsbC5yb3dTcGFuID4gMSkgewogICAgICAgICAgICAgIGNlbGxPYmoucm93U3BhbiA9IGNlbGwucm93U3BhbjsKICAgICAgICAgICAgICAvLyBNYXJjYXIgY8OpbHVsYXMgYWJhaXhvIGNvbW8gY29iZXJ0YXMKICAgICAgICAgICAgICBmb3IgKGxldCBzciA9IDE7IHNyIDwgY2VsbC5yb3dTcGFuOyBzcisrKSB7CiAgICAgICAgICAgICAgICBpZiAociArIHNyIDwgb3JpZ2luYWxCb2R5Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBjb3ZlcmVkQ2VsbHMuYWRkKGAke3IgKyBzcn0tJHtjfWApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY2VsbC5jb2xTcGFuICYmIGNlbGwuY29sU3BhbiA+IDEpIHsKICAgICAgICAgICAgICBjZWxsT2JqLmNvbFNwYW4gPSBjZWxsLmNvbFNwYW47CiAgICAgICAgICAgICAgLy8gTWFyY2FyIGPDqWx1bGFzIMOgIGRpcmVpdGEgY29tbyBjb2JlcnRhcwogICAgICAgICAgICAgIGZvciAobGV0IHNjID0gMTsgc2MgPCBjZWxsLmNvbFNwYW47IHNjKyspIHsKICAgICAgICAgICAgICAgIGlmIChjICsgc2MgPCBvcmlnaW5hbEJvZHlbcl0ubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIGNvdmVyZWRDZWxscy5hZGQoYCR7cn0tJHtjICsgc2N9YCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBib3JkZXIgKGFycmF5IGRlIDQgYm9vbGVhbm9zIFtsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b21dKQogICAgICAgICAgICBpZiAoY2VsbC5ib3JkZXIgJiYgQXJyYXkuaXNBcnJheShjZWxsLmJvcmRlcikpIHsKICAgICAgICAgICAgICAvLyBTZW1wcmUgYWRpY2lvbmFyIG8gYXJyYXkgZGUgYm9yZGVyLCBtZXNtbyBzZSBmb3IgW3RydWUsIHRydWUsIHRydWUsIHRydWVdCiAgICAgICAgICAgICAgLy8gTyBQREZNYWtlIHVzYSBpc3NvIHBhcmEgY29udHJvbGFyIHF1YWlzIGJvcmRhcyBtb3N0cmFyCiAgICAgICAgICAgICAgY2VsbE9iai5ib3JkZXIgPSBjZWxsLmJvcmRlci5tYXAoYiA9PiBCb29sZWFuKGIpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gYm9yZGVyQ29sb3IgKGFycmF5IGRlIDQgY29yZXMpCiAgICAgICAgICAgIGlmIChjZWxsLmJvcmRlckNvbG9yICYmIEFycmF5LmlzQXJyYXkoY2VsbC5ib3JkZXJDb2xvcikpIHsKICAgICAgICAgICAgICAvLyBTw7MgYWRpY2lvbmFyIHNlIGhvdXZlciBwZWxvIG1lbm9zIHVtYSBjb3IgZGVmaW5pZGEKICAgICAgICAgICAgICBpZiAoY2VsbC5ib3JkZXJDb2xvci5zb21lKGMgPT4gYyAmJiBjLnRyaW0oKSkpIHsKICAgICAgICAgICAgICAgIGNlbGxPYmouYm9yZGVyQ29sb3IgPSBjZWxsLmJvcmRlckNvbG9yLm1hcChjID0+IGMgfHwgJycpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gdmVydGljYWxBbGlnbm1lbnQgKGRldmUgZXN0YXIgbmEgY8OpbHVsYSwgbsOjbyBubyB0ZXh0bykKICAgICAgICAgICAgaWYgKGNlbGwudmVydGljYWxBbGlnbm1lbnQpIHsKICAgICAgICAgICAgICBjZWxsT2JqLnZlcnRpY2FsQWxpZ25tZW50ID0gY2VsbC52ZXJ0aWNhbEFsaWdubWVudDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHJvY2Vzc2VkUm93LnB1c2goY2VsbE9iaik7CiAgICAgICAgICB9CgogICAgICAgICAgcHJvY2Vzc2VkQm9keS5wdXNoKHByb2Nlc3NlZFJvdyk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBib2R5ID0gcHJvY2Vzc2VkQm9keTsKCiAgICAgICAgY29uc3QgdGFibGVPYmogPSB7CiAgICAgICAgICAuLi5jb21tb24sCiAgICAgICAgICB0YWJsZTogewogICAgICAgICAgICB3aWR0aHM6IChwLndpZHRocyB8fCAoYm9keVswXSA/IGJvZHlbMF0ubWFwKCgpID0+ICcqJykgOiBbJyonXSkpLAogICAgICAgICAgICBib2R5CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgLy8gaGVpZ2h0cyAocG9kZSBzZXIgbsO6bWVybywgYXJyYXkgb3UgZnVuw6fDo28pCiAgICAgICAgaWYgKHAuaGVpZ2h0cyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBpZiAodHlwZW9mIHAuaGVpZ2h0cyA9PT0gJ251bWJlcicpIHsKICAgICAgICAgICAgdGFibGVPYmoudGFibGUuaGVpZ2h0cyA9IHAuaGVpZ2h0czsKICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShwLmhlaWdodHMpKSB7CiAgICAgICAgICAgIHRhYmxlT2JqLnRhYmxlLmhlaWdodHMgPSBwLmhlaWdodHMubWFwKGggPT4gTnVtYmVyKGgpIHx8IDQwKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIEZ1bsOnw6NvIHNlcsOhIHRyYXRhZGEgc2VwYXJhZGFtZW50ZSBzZSBuZWNlc3PDoXJpbwogICAgICAgIH0KCiAgICAgICAgLy8gVGFiZWxhIHplYnJhZGEgdGVtIHByaW9yaWRhZGUgLSBzZSBhdGl2YWRhLCBzZW1wcmUgY3JpYXIgbGF5b3V0IGNvbW8gb2JqZXRvCiAgICAgICAgLy8gSU1QT1JUQU5URTogbGF5b3V0IGRldmUgZmljYXIgbm8gbWVzbW8gbsOtdmVsIHF1ZSB0YWJsZSwgbsOjbyBkZW50cm8gZGUgdGFibGUKICAgICAgICBpZiAocC56ZWJyYUVuYWJsZWQgJiYgcC56ZWJyYUNvbG9yKSB7CiAgICAgICAgICAvLyBDcmlhciBsYXlvdXQgY29tbyBvYmpldG8gKG7Do28gc3RyaW5nKSAtIG1lc21vIG7DrXZlbCBxdWUgdGFibGUKICAgICAgICAgIHRhYmxlT2JqLmxheW91dCA9IHt9OwoKICAgICAgICAgIC8vIFVzYXIgYSBjb3IgZGlyZXRhbWVudGUgY29tbyBzdHJpbmcgbm8gY8OzZGlnbyBkYSBmdW7Dp8OjbwogICAgICAgICAgLy8gQ3JpYXIgZnVuw6fDo28gdXNhbmRvIEZ1bmN0aW9uIGNvbnN0cnVjdG9yIHBhcmEgcXVlIGEgY29yIHNlamEgc3RyaW5nIGxpdGVyYWwgbm8gY8OzZGlnbyBmb250ZQogICAgICAgICAgY29uc3QgemVicmFDb2xvclN0ciA9IHAuemVicmFDb2xvcjsKICAgICAgICAgIC8vIENyaWFyIGZ1bsOnw6NvIHF1ZSBxdWFuZG8gc2VyaWFsaXphZGEgasOhIHRlcsOhIGEgY29yIGNvbW8gc3RyaW5nIGxpdGVyYWwKICAgICAgICAgIHRhYmxlT2JqLmxheW91dC5maWxsQ29sb3IgPSBuZXcgRnVuY3Rpb24oJ2knLCAnbm9kZScsCiAgICAgICAgICAgIGByZXR1cm4gKGkgJSAyID09PSAwKSA/ICcke3plYnJhQ29sb3JTdHJ9JyA6IG51bGw7YAogICAgICAgICAgKTsKICAgICAgICAgIC8vIEFybWF6ZW5hciBhIGNvciBjb21vIHByb3ByaWVkYWRlIHRhbWLDqW0gcGFyYSBiYWNrdXAgbmEgc2VyaWFsaXphw6fDo28KICAgICAgICAgIHRhYmxlT2JqLmxheW91dC5maWxsQ29sb3IuX3plYnJhQ29sb3IgPSB6ZWJyYUNvbG9yU3RyOwoKICAgICAgICAgIC8vIFNlIHplYnJhV2l0aExpbmVzIGVzdGl2ZXIgYXRpdmFkbywgYWRpY2lvbmFyIGxpbmhhcyBob3Jpem9udGFpcyAoc2VndWluZG8gbyBleGVtcGxvKQogICAgICAgICAgLy8gSU1QT1JUQU5URTogVXNhciBuZXcgRnVuY3Rpb24oKSBwYXJhIHF1ZSB2YWxvcmVzIHNlamFtIGxpdGVyYWlzIG5vIGPDs2RpZ28gZ2VyYWRvCiAgICAgICAgICBpZiAocC56ZWJyYVdpdGhMaW5lcyAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgdGFibGVPYmoubGF5b3V0LmhMaW5lV2lkdGggPSBuZXcgRnVuY3Rpb24oJ2knLCAnbm9kZScsCiAgICAgICAgICAgICAgYGlmIChpID09PSAwIHx8IGkgPT09IG5vZGUudGFibGUuYm9keS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gKGkgPT09IG5vZGUudGFibGUuaGVhZGVyUm93cykgPyAyIDogMTtgCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRhYmxlT2JqLmxheW91dC5oTGluZUNvbG9yID0gbmV3IEZ1bmN0aW9uKCdpJywKICAgICAgICAgICAgICBgcmV0dXJuIGkgPT09IDEgPyAnYmxhY2snIDogJyNhYWEnO2AKICAgICAgICAgICAgKTsKICAgICAgICAgICAgdGFibGVPYmoubGF5b3V0LnZMaW5lV2lkdGggPSBuZXcgRnVuY3Rpb24oJ2knLAogICAgICAgICAgICAgIGByZXR1cm4gMDtgCiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBTZW0gbGluaGFzIGhvcml6b250YWlzCiAgICAgICAgICAgIHRhYmxlT2JqLmxheW91dC5oTGluZVdpZHRoID0gbmV3IEZ1bmN0aW9uKCdpJywgJ25vZGUnLAogICAgICAgICAgICAgIGByZXR1cm4gMDtgCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRhYmxlT2JqLmxheW91dC52TGluZVdpZHRoID0gbmV3IEZ1bmN0aW9uKCdpJywKICAgICAgICAgICAgICBgcmV0dXJuIDA7YAogICAgICAgICAgICApOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIFBhZGRpbmcgcGFkcsOjbyAoc2UgbsOjbyBob3V2ZXIgY3VzdG9tTGF5b3V0KQogICAgICAgICAgLy8gSU1QT1JUQU5URTogVXNhciBuZXcgRnVuY3Rpb24oKSBwYXJhIHF1ZSB2YWxvcmVzIHNlamFtIGxpdGVyYWlzIG5vIGPDs2RpZ28gZ2VyYWRvCiAgICAgICAgICBpZiAoIXAuY3VzdG9tTGF5b3V0IHx8ICFwLmN1c3RvbUxheW91dC5wYWRkaW5nTGVmdCkgewogICAgICAgICAgICB0YWJsZU9iai5sYXlvdXQucGFkZGluZ0xlZnQgPSBuZXcgRnVuY3Rpb24oJ2knLAogICAgICAgICAgICAgIGByZXR1cm4gaSA9PT0gMCA/IDAgOiA4O2AKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghcC5jdXN0b21MYXlvdXQgfHwgIXAuY3VzdG9tTGF5b3V0LnBhZGRpbmdSaWdodCkgewogICAgICAgICAgICB0YWJsZU9iai5sYXlvdXQucGFkZGluZ1JpZ2h0ID0gbmV3IEZ1bmN0aW9uKCdpJywgJ25vZGUnLAogICAgICAgICAgICAgIGByZXR1cm4gKGkgPT09IG5vZGUudGFibGUud2lkdGhzLmxlbmd0aCAtIDEpID8gMCA6IDg7YAogICAgICAgICAgICApOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIFNlIGhvdXZlciBjdXN0b21MYXlvdXQsIGFwbGljYXIgc3VhcyBjb25maWd1cmHDp8O1ZXMgZGUgcGFkZGluZwogICAgICAgICAgLy8gSU1QT1JUQU5URTogVXNhciBuZXcgRnVuY3Rpb24oKSBwYXJhIHF1ZSB2YWxvcmVzIHNlamFtIGxpdGVyYWlzIG5vIGPDs2RpZ28gZ2VyYWRvCiAgICAgICAgICBpZiAocC5jdXN0b21MYXlvdXQpIHsKICAgICAgICAgICAgaWYgKHAuY3VzdG9tTGF5b3V0LnBhZGRpbmdMZWZ0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBjb25zdCBwYWRkaW5nTGVmdCA9IE51bWJlcihwLmN1c3RvbUxheW91dC5wYWRkaW5nTGVmdCk7CiAgICAgICAgICAgICAgdGFibGVPYmoubGF5b3V0LnBhZGRpbmdMZWZ0ID0gbmV3IEZ1bmN0aW9uKCdpJywKICAgICAgICAgICAgICAgIGByZXR1cm4gaSA9PT0gMCA/IDAgOiAke3BhZGRpbmdMZWZ0fTtgCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocC5jdXN0b21MYXlvdXQucGFkZGluZ1JpZ2h0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBjb25zdCBwYWRkaW5nUmlnaHQgPSBOdW1iZXIocC5jdXN0b21MYXlvdXQucGFkZGluZ1JpZ2h0KTsKICAgICAgICAgICAgICB0YWJsZU9iai5sYXlvdXQucGFkZGluZ1JpZ2h0ID0gbmV3IEZ1bmN0aW9uKCdpJywgJ25vZGUnLAogICAgICAgICAgICAgICAgYHJldHVybiAoaSA9PT0gbm9kZS50YWJsZS53aWR0aHMubGVuZ3RoIC0gMSkgPyAwIDogJHtwYWRkaW5nUmlnaHR9O2AKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChwLmN1c3RvbUxheW91dC5wYWRkaW5nVG9wICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBjb25zdCBwYWRkaW5nVG9wID0gTnVtYmVyKHAuY3VzdG9tTGF5b3V0LnBhZGRpbmdUb3ApOwogICAgICAgICAgICAgIHRhYmxlT2JqLmxheW91dC5wYWRkaW5nVG9wID0gbmV3IEZ1bmN0aW9uKCdpJywKICAgICAgICAgICAgICAgIGByZXR1cm4gJHtwYWRkaW5nVG9wfTtgCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocC5jdXN0b21MYXlvdXQucGFkZGluZ0JvdHRvbSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgY29uc3QgcGFkZGluZ0JvdHRvbSA9IE51bWJlcihwLmN1c3RvbUxheW91dC5wYWRkaW5nQm90dG9tKTsKICAgICAgICAgICAgICB0YWJsZU9iai5sYXlvdXQucGFkZGluZ0JvdHRvbSA9IG5ldyBGdW5jdGlvbignaScsCiAgICAgICAgICAgICAgICBgcmV0dXJuICR7cGFkZGluZ0JvdHRvbX07YAogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHAubGF5b3V0ID09PSAnY3VzdG9tJyAmJiBwLmN1c3RvbUxheW91dCkgewogICAgICAgICAgLy8gTGF5b3V0IGN1c3RvbWl6YWRvIChzZW0gemVicmEpCiAgICAgICAgICBjb25zdCBjdXN0b21MYXlvdXQgPSB7fTsKCiAgICAgICAgICAvLyBMaW5oYXMgaG9yaXpvbnRhaXMKICAgICAgICAgIC8vIElNUE9SVEFOVEU6IFVzYXIgbmV3IEZ1bmN0aW9uKCkgcGFyYSBxdWUgdmFsb3JlcyBzZWphbSBsaXRlcmFpcyBubyBjw7NkaWdvIGdlcmFkbwogICAgICAgICAgaWYgKHAuY3VzdG9tTGF5b3V0LmhMaW5lV2lkdGggIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb25zdCBoTGluZVdpZHRoID0gTnVtYmVyKHAuY3VzdG9tTGF5b3V0LmhMaW5lV2lkdGggfHwgMSk7CiAgICAgICAgICAgIGN1c3RvbUxheW91dC5oTGluZVdpZHRoID0gbmV3IEZ1bmN0aW9uKCdpJywgJ25vZGUnLAogICAgICAgICAgICAgIGByZXR1cm4gJHtoTGluZVdpZHRofTtgCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAocC5jdXN0b21MYXlvdXQuaExpbmVDb2xvcikgewogICAgICAgICAgICBjb25zdCBoTGluZUNvbG9yID0gcC5jdXN0b21MYXlvdXQuaExpbmVDb2xvcjsKICAgICAgICAgICAgY3VzdG9tTGF5b3V0LmhMaW5lQ29sb3IgPSBuZXcgRnVuY3Rpb24oJ2knLCAnbm9kZScsCiAgICAgICAgICAgICAgYHJldHVybiAnJHtoTGluZUNvbG9yfSc7YAogICAgICAgICAgICApOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIExpbmhhcyB2ZXJ0aWNhaXMKICAgICAgICAgIGlmIChwLmN1c3RvbUxheW91dC52TGluZVdpZHRoICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgY29uc3QgdkxpbmVXaWR0aCA9IE51bWJlcihwLmN1c3RvbUxheW91dC52TGluZVdpZHRoIHx8IDEpOwogICAgICAgICAgICBjdXN0b21MYXlvdXQudkxpbmVXaWR0aCA9IG5ldyBGdW5jdGlvbignaScsICdub2RlJywKICAgICAgICAgICAgICBgcmV0dXJuICR7dkxpbmVXaWR0aH07YAogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHAuY3VzdG9tTGF5b3V0LnZMaW5lQ29sb3IpIHsKICAgICAgICAgICAgY29uc3QgdkxpbmVDb2xvciA9IHAuY3VzdG9tTGF5b3V0LnZMaW5lQ29sb3I7CiAgICAgICAgICAgIGN1c3RvbUxheW91dC52TGluZUNvbG9yID0gbmV3IEZ1bmN0aW9uKCdpJywgJ25vZGUnLAogICAgICAgICAgICAgIGByZXR1cm4gJyR7dkxpbmVDb2xvcn0nO2AKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBQYWRkaW5nIChkZXZlIHNlciBmdW7Dp8OjbywgbsOjbyB2YWxvciBmaXhvKQogICAgICAgICAgLy8gVGVtcGxhdGUgb2ZpY2lhbDogZnVuw6fDtWVzIHNpbXBsZXMgcXVlIHJldG9ybmFtIHZhbG9yZXMgZml4b3MKICAgICAgICAgIGlmIChwLmN1c3RvbUxheW91dC5wYWRkaW5nTGVmdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGNvbnN0IHBhZGRpbmdMZWZ0ID0gTnVtYmVyKHAuY3VzdG9tTGF5b3V0LnBhZGRpbmdMZWZ0KTsKICAgICAgICAgICAgLy8gVGVtcGxhdGUgcGFkcsOjbzogZnVuw6fDo28gc2ltcGxlcyBzZW0gY29uZGnDp8O1ZXMKICAgICAgICAgICAgY3VzdG9tTGF5b3V0LnBhZGRpbmdMZWZ0ID0gbmV3IEZ1bmN0aW9uKCdpJywKICAgICAgICAgICAgICBgcmV0dXJuICR7cGFkZGluZ0xlZnR9O2AKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChwLmN1c3RvbUxheW91dC5wYWRkaW5nUmlnaHQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb25zdCBwYWRkaW5nUmlnaHQgPSBOdW1iZXIocC5jdXN0b21MYXlvdXQucGFkZGluZ1JpZ2h0KTsKICAgICAgICAgICAgLy8gVGVtcGxhdGUgcGFkcsOjbzogZnVuw6fDo28gc2ltcGxlcyBzZW0gY29uZGnDp8O1ZXMKICAgICAgICAgICAgY3VzdG9tTGF5b3V0LnBhZGRpbmdSaWdodCA9IG5ldyBGdW5jdGlvbignaScsICdub2RlJywKICAgICAgICAgICAgICBgcmV0dXJuICR7cGFkZGluZ1JpZ2h0fTtgCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAocC5jdXN0b21MYXlvdXQucGFkZGluZ1RvcCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGNvbnN0IHBhZGRpbmdUb3AgPSBOdW1iZXIocC5jdXN0b21MYXlvdXQucGFkZGluZ1RvcCk7CiAgICAgICAgICAgIGN1c3RvbUxheW91dC5wYWRkaW5nVG9wID0gbmV3IEZ1bmN0aW9uKCdpJywKICAgICAgICAgICAgICBgcmV0dXJuICR7cGFkZGluZ1RvcH07YAogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHAuY3VzdG9tTGF5b3V0LnBhZGRpbmdCb3R0b20gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb25zdCBwYWRkaW5nQm90dG9tID0gTnVtYmVyKHAuY3VzdG9tTGF5b3V0LnBhZGRpbmdCb3R0b20pOwogICAgICAgICAgICBjdXN0b21MYXlvdXQucGFkZGluZ0JvdHRvbSA9IG5ldyBGdW5jdGlvbignaScsCiAgICAgICAgICAgICAgYHJldHVybiAke3BhZGRpbmdCb3R0b219O2AKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBoTGluZVN0eWxlIGUgdkxpbmVTdHlsZSAoZGFzaGVkKQogICAgICAgICAgLy8gSU1QT1JUQU5URTogVXNhciBuZXcgRnVuY3Rpb24oKSBwYXJhIHF1ZSB2YWxvcmVzIHNlamFtIGxpdGVyYWlzIG5vIGPDs2RpZ28gZ2VyYWRvCiAgICAgICAgICBpZiAocC5jdXN0b21MYXlvdXQuaExpbmVTdHlsZSkgewogICAgICAgICAgICBjdXN0b21MYXlvdXQuaExpbmVTdHlsZSA9IG5ldyBGdW5jdGlvbignaScsICdub2RlJywKICAgICAgICAgICAgICBgaWYgKGkgPT09IDAgfHwgaSA9PT0gbm9kZS50YWJsZS5ib2R5Lmxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHsgZGFzaDogeyBsZW5ndGg6IDEwLCBzcGFjZTogNCB9IH07YAogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHAuY3VzdG9tTGF5b3V0LnZMaW5lU3R5bGUpIHsKICAgICAgICAgICAgY3VzdG9tTGF5b3V0LnZMaW5lU3R5bGUgPSBuZXcgRnVuY3Rpb24oJ2knLCAnbm9kZScsCiAgICAgICAgICAgICAgYGlmIChpID09PSAwIHx8IGkgPT09IG5vZGUudGFibGUud2lkdGhzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiB7IGRhc2g6IHsgbGVuZ3RoOiA0IH0gfTtgCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gZGVmYXVsdEJvcmRlcgogICAgICAgICAgaWYgKHAuY3VzdG9tTGF5b3V0LmRlZmF1bHRCb3JkZXIgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjdXN0b21MYXlvdXQuZGVmYXVsdEJvcmRlciA9IHAuY3VzdG9tTGF5b3V0LmRlZmF1bHRCb3JkZXI7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gZmlsbENvbG9yIHBhcmEgdGVtcGxhdGUgcGFkcsOjbyAocXVhbmRvIGZpbGxDb2xvciDDqSB0cnVlLCBzaWduaWZpY2EgdXNhciB0ZW1wbGF0ZSkKICAgICAgICAgIGlmIChwLmN1c3RvbUxheW91dC5maWxsQ29sb3IgPT09IHRydWUpIHsKICAgICAgICAgICAgLy8gVGVtcGxhdGUgb2ZpY2lhbDogZmlsbENvbG9yKHJvd0luZGV4KSBjb20gY2luemEgI0VERURFRCBzb21lbnRlIG5vIGhlYWRlciAocm93SW5kZXggPT09IDApCiAgICAgICAgICAgIGN1c3RvbUxheW91dC5maWxsQ29sb3IgPSBuZXcgRnVuY3Rpb24oJ3Jvd0luZGV4JywKICAgICAgICAgICAgICBgcmV0dXJuIHJvd0luZGV4ID09PSAwID8gJyNFREVERUQnIDogbnVsbDtgCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGN1c3RvbUxheW91dCkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAvLyBMYXlvdXQgZGV2ZSBmaWNhciBubyBtZXNtbyBuw612ZWwgcXVlIHRhYmxlLCBuw6NvIGRlbnRybyBkZSB0YWJsZQogICAgICAgICAgICB0YWJsZU9iai5sYXlvdXQgPSBjdXN0b21MYXlvdXQ7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChwLmxheW91dCAmJiBwLmxheW91dCAhPT0gJ2N1c3RvbScpIHsKICAgICAgICAgIC8vIExheW91dCBwYWRyw6NvIChzdHJpbmcpIC0gdGFtYsOpbSBubyBtZXNtbyBuw612ZWwgcXVlIHRhYmxlCiAgICAgICAgICB0YWJsZU9iai5sYXlvdXQgPSBwLmxheW91dDsKICAgICAgICB9CgogICAgICAgIC8vIEFkaWNpb25hciBwcm9wcmllZGFkZXMgZXh0cmFzIGRhIHRhYmVsYQogICAgICAgIC8vIGRvbnRCcmVha1Jvd3MgZSBrZWVwV2l0aEhlYWRlclJvd3MgZGV2ZW0gZXN0YXIgZGVudHJvIGRlIHRhYmxlLCBuw6NvIG5vIG9iamV0byBwcmluY2lwYWwKICAgICAgICBpZiAocC5kb250QnJlYWtSb3dzKSB0YWJsZU9iai50YWJsZS5kb250QnJlYWtSb3dzID0gdHJ1ZTsKICAgICAgICBpZiAocC5rZWVwV2l0aEhlYWRlclJvd3MpIHRhYmxlT2JqLnRhYmxlLmtlZXBXaXRoSGVhZGVyUm93cyA9IHAua2VlcFdpdGhIZWFkZXJSb3dzOwoKICAgICAgICAvLyBoZWFkZXJSb3dzIGRldmUgc2VyIGRlZmluaWRvIGNvbmZvcm1lIHByb3ByaWVkYWRlIGRhIHRhYmVsYSBvdSBwYWRyw6NvIDEKICAgICAgICBpZiAocC5oZWFkZXJSb3dzICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRhYmxlT2JqLnRhYmxlLmhlYWRlclJvd3MgPSBwLmhlYWRlclJvd3M7CiAgICAgICAgfSBlbHNlIGlmIChib2R5Lmxlbmd0aCA+IDApIHsKICAgICAgICAgIHRhYmxlT2JqLnRhYmxlLmhlYWRlclJvd3MgPSAxOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRhYmxlT2JqOwogICAgICB9CgogICAgICByZXR1cm4geyAuLi5jb21tb24sIHRleHQ6ICcnIH07CiAgICB9CgogICAgLy8gUHJvY2Vzc2FyIHZhcmnDoXZlaXMgZGluw6JtaWNhcyBlbSBoZWFkZXIvZm9vdGVyCiAgICBmdW5jdGlvbiBwcm9jZXNzSGVhZGVyRm9vdGVyVGV4dCh0ZXh0LCBjdXJyZW50UGFnZSwgdG90YWxQYWdlcykgewogICAgICBpZiAoIXRleHQpIHJldHVybiAnJzsKICAgICAgcmV0dXJuIHRleHQKICAgICAgICAucmVwbGFjZSgvXHtce3BhZ2VOdW1iZXJcfVx9L2csIGN1cnJlbnRQYWdlLnRvU3RyaW5nKCkpCiAgICAgICAgLnJlcGxhY2UoL1x7XHt0b3RhbFBhZ2VzXH1cfS9nLCB0b3RhbFBhZ2VzLnRvU3RyaW5nKCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1aWxkRG9jRGVmaW5pdGlvbigpIHsKICAgICAgY29uc3Qgcm9vdCA9IGdldFJvb3RHcm91cCgpOwoKICAgICAgLy8gUHJpbWVpcm8sIGNvbGV0YXIgZXN0aWxvcyBkYXMgY8OpbHVsYXMgQU5URVMgZGUgY29udmVydGVyIHBhcmEgUERGTWFrZQogICAgICBjb25zdCBjZWxsU3R5bGVzTWFwID0gbmV3IE1hcCgpOwogICAgICBsZXQgc3R5bGVDb3VudGVyID0gMDsKCiAgICAgIGZ1bmN0aW9uIGNvbGxlY3RUYWJsZUNlbGxTdHlsZXMoZWxlbWVudCkgewogICAgICAgIGlmICghZWxlbWVudCB8fCBlbGVtZW50LnR5cGUgIT09ICd0YWJsZScpIHJldHVybjsKICAgICAgICBjb25zdCBwID0gZWxlbWVudC5wcm9wZXJ0aWVzIHx8IHt9OwogICAgICAgIGNvbnN0IGJvZHkgPSBwLmJvZHkgfHwgW107CgogICAgICAgIGJvZHkuZm9yRWFjaChyb3cgPT4gewogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocm93KSkgewogICAgICAgICAgICByb3cuZm9yRWFjaChjZWxsID0+IHsKICAgICAgICAgICAgICBpZiAoY2VsbCAmJiB0eXBlb2YgY2VsbCA9PT0gJ29iamVjdCcgJiYgY2VsbC5jaGlsZHJlbikgewogICAgICAgICAgICAgICAgLy8gQ29sZXRhciBwcm9wcmllZGFkZXMgZGUgZXN0aWxvIGRhIGPDqWx1bGEKICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlUHJvcHMgPSB7fTsKICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBwcm9wcmllZGFkZXMgcXVlIHBvZGVtIHNlciBlc3RpbG9zCiAgICAgICAgICAgICAgICAvLyBOb3RhOiBmaWxsQ29sb3IsIGNvbG9yLCBmaWxsT3BhY2l0eSBzw6NvIGVzcGVjw61maWNvcyBkYSBjw6lsdWxhIGUgbsOjbyBkZXZlbSBzZXIgZXN0aWxvcwogICAgICAgICAgICAgICAgLy8gTWFzIGZvbnRTaXplLCBhbGlnbm1lbnQsIG1hcmdpbiwgYm9sZCBwb2RlbSBzZXIgZXN0aWxvcwoKICAgICAgICAgICAgICAgIC8vIENvbGV0YXIgZG8gb2JqZXRvIGNlbGwgZGlyZXRhbWVudGUgKHByb3ByaWVkYWRlcyBkYSBjw6lsdWxhKQogICAgICAgICAgICAgICAgLy8gRXNzYXMgcHJvcHJpZWRhZGVzIHbDqm0gZG8gZWRpdG9yIGRlIGPDqWx1bGFzCiAgICAgICAgICAgICAgICBjb25zdCBjZWxsU3R5bGVLZXkgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBjZWxsLmZvbnRTaXplLAogICAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGNlbGwuYWxpZ25tZW50LAogICAgICAgICAgICAgICAgICBtYXJnaW46IGNlbGwubWFyZ2luLAogICAgICAgICAgICAgICAgICBjb2xvcjogY2VsbC5jb2xvciwKICAgICAgICAgICAgICAgICAgYm9sZDogY2VsbC5ib2xkLAogICAgICAgICAgICAgICAgICBpdGFsaWNzOiBjZWxsLml0YWxpY3MKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICghY2VsbFN0eWxlc01hcC5oYXMoY2VsbFN0eWxlS2V5KSAmJiBjZWxsLmZvbnRTaXplKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlTmFtZSA9IGB0YWJsZUNlbGxTdHlsZSR7KytzdHlsZUNvdW50ZXJ9YDsKICAgICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVPYmogPSB7fTsKICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuZm9udFNpemUpIHN0eWxlT2JqLmZvbnRTaXplID0gY2VsbC5mb250U2l6ZTsKICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuYWxpZ25tZW50KSBzdHlsZU9iai5hbGlnbm1lbnQgPSBjZWxsLmFsaWdubWVudDsKICAgICAgICAgICAgICAgICAgaWYgKGNlbGwubWFyZ2luICYmIEFycmF5LmlzQXJyYXkoY2VsbC5tYXJnaW4pKSBzdHlsZU9iai5tYXJnaW4gPSBjZWxsLm1hcmdpbjsKICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuY29sb3IpIHN0eWxlT2JqLmNvbG9yID0gY2VsbC5jb2xvcjsKICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuYm9sZCAhPT0gdW5kZWZpbmVkKSBzdHlsZU9iai5ib2xkID0gY2VsbC5ib2xkOwogICAgICAgICAgICAgICAgICBpZiAoY2VsbC5pdGFsaWNzICE9PSB1bmRlZmluZWQpIHN0eWxlT2JqLml0YWxpY3MgPSBjZWxsLml0YWxpY3M7CgogICAgICAgICAgICAgICAgICBjZWxsU3R5bGVzTWFwLnNldChjZWxsU3R5bGVLZXksIHsgbmFtZTogc3R5bGVOYW1lLCBwcm9wczogc3R5bGVPYmogfSk7CiAgICAgICAgICAgICAgICAgIC8vIEFybWF6ZW5hciBvIG5vbWUgZG8gZXN0aWxvIG5hIGPDqWx1bGEgcGFyYSB1c28gcG9zdGVyaW9yCiAgICAgICAgICAgICAgICAgIGNlbGwuX3N0eWxlTmFtZSA9IHN0eWxlTmFtZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2VsbFN0eWxlc01hcC5oYXMoY2VsbFN0eWxlS2V5KSkgewogICAgICAgICAgICAgICAgICBjZWxsLl9zdHlsZU5hbWUgPSBjZWxsU3R5bGVzTWFwLmdldChjZWxsU3R5bGVLZXkpLm5hbWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8gQ29sZXRhciBlc3RpbG9zIHJlY3Vyc2l2YW1lbnRlIGRlIHRvZGFzIGFzIHRhYmVsYXMKICAgICAgZnVuY3Rpb24gdHJhdmVyc2VFbGVtZW50cyhlbCkgewogICAgICAgIGlmICghZWwpIHJldHVybjsKICAgICAgICBpZiAoZWwudHlwZSA9PT0gJ3RhYmxlJykgewogICAgICAgICAgY29sbGVjdFRhYmxlQ2VsbFN0eWxlcyhlbCk7CiAgICAgICAgfQogICAgICAgIGlmIChlbC5wcm9wZXJ0aWVzICYmIGVsLnByb3BlcnRpZXMuY2hpbGRyZW4pIHsKICAgICAgICAgIGVsLnByb3BlcnRpZXMuY2hpbGRyZW4uZm9yRWFjaCh0cmF2ZXJzZUVsZW1lbnRzKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdHJhdmVyc2VFbGVtZW50cyhyb290KTsKCiAgICAgIC8vIEFnb3JhIGNvbnZlcnRlciBwYXJhIFBERk1ha2UgKG9zIGVzdGlsb3MgasOhIGVzdMOjbyBtYXJjYWRvcyBuYXMgY8OpbHVsYXMpCiAgICAgIGNvbnN0IGNvbnRlbnQgPSByb290ID8gW2VsZW1lbnRUb1BkZm1ha2Uocm9vdCldIDogW107CgogICAgICBjb25zdCBkb2NEZWYgPSB7CiAgICAgICAgcGFnZVNpemUsCiAgICAgICAgcGFnZU9yaWVudGF0aW9uOiBvcmllbnRhdGlvbiwKICAgICAgICBwYWdlTWFyZ2lucywKICAgICAgICBjb250ZW50CiAgICAgIH07CgogICAgICAvLyBBZGljaW9uYXIgZXN0aWxvcyBjb2xldGFkb3MgYW8gZG9jRGVmCiAgICAgIGlmIChjZWxsU3R5bGVzTWFwLnNpemUgPiAwKSB7CiAgICAgICAgZG9jRGVmLnN0eWxlcyA9IHt9OwogICAgICAgIGNlbGxTdHlsZXNNYXAuZm9yRWFjaCgoeyBuYW1lLCBwcm9wcyB9KSA9PiB7CiAgICAgICAgICBkb2NEZWYuc3R5bGVzW25hbWVdID0gcHJvcHM7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIC8vIEFkaWNpb25hciBoZWFkZXIgc2UgY29uZmlndXJhZG8gKHVzYW5kbyBjb250YWluZXIgdmlzdWFsKQogICAgICBpZiAoZG9jdW1lbnRIZWFkZXIgJiYgZG9jdW1lbnRIZWFkZXIuZW5hYmxlZCAmJiBkb2N1bWVudEhlYWRlci5yb290KSB7CiAgICAgICAgY29uc3QgaGVhZGVyQ2hpbGRyZW4gPSBkb2N1bWVudEhlYWRlci5yb290LnByb3BlcnRpZXMuY2hpbGRyZW4gfHwgW107CiAgICAgICAgaWYgKGhlYWRlckNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgICAgIC8vIENvbnZlcnRlciBlbGVtZW50b3MgZG8gaGVhZGVyIHBhcmEgUERGTWFrZQogICAgICAgICAgLy8gUGFzc2FyIGNvbnRleHRvIHBhcmEgcHJvY2Vzc2FyIHBsYWNlaG9sZGVycyBjb3JyZXRhbWVudGUKICAgICAgICAgIGNvbnN0IGhlYWRlckNvbnRlbnQgPSBoZWFkZXJDaGlsZHJlbi5tYXAoZWwgPT4gZWxlbWVudFRvUGRmbWFrZShlbCwgeyBpbkhlYWRlcjogdHJ1ZSB9KSk7CgogICAgICAgICAgLy8gQ3JpYXIgZnVuw6fDo28gcXVlIHJldG9ybmEgbyBhcnJheSBkZSBjb250ZcO6ZG8KICAgICAgICAgIGRvY0RlZi5oZWFkZXIgPSBmdW5jdGlvbiAoY3VycmVudFBhZ2UsIHBhZ2VDb3VudCwgcGFnZVNpemUpIHsKICAgICAgICAgICAgcmV0dXJuIGhlYWRlckNvbnRlbnQ7CiAgICAgICAgICB9OwogICAgICAgICAgLy8gQXJtYXplbmFyIGNvbnRlw7pkbyBzZXJpYWxpemFkbyBwYXJhIHVzbyBuYSBnZXJhw6fDo28gZGUgY8OzZGlnbwogICAgICAgICAgZG9jRGVmLmhlYWRlci5fY29udGVudCA9IGhlYWRlckNvbnRlbnQ7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBBZGljaW9uYXIgZm9vdGVyIHNlIGNvbmZpZ3VyYWRvICh1c2FuZG8gY29udGFpbmVyIHZpc3VhbCkKICAgICAgaWYgKGRvY3VtZW50Rm9vdGVyICYmIGRvY3VtZW50Rm9vdGVyLmVuYWJsZWQgJiYgZG9jdW1lbnRGb290ZXIucm9vdCkgewogICAgICAgIGNvbnN0IGZvb3RlckNoaWxkcmVuID0gZG9jdW1lbnRGb290ZXIucm9vdC5wcm9wZXJ0aWVzLmNoaWxkcmVuIHx8IFtdOwogICAgICAgIGlmIChmb290ZXJDaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgICAgICAvLyBDb252ZXJ0ZXIgZWxlbWVudG9zIGRvIGZvb3RlciBwYXJhIFBERk1ha2UKICAgICAgICAgIC8vIFBhc3NhciBjb250ZXh0byBwYXJhIHByb2Nlc3NhciBwbGFjZWhvbGRlcnMgY29ycmV0YW1lbnRlCiAgICAgICAgICBjb25zdCBmb290ZXJDb250ZW50ID0gZm9vdGVyQ2hpbGRyZW4ubWFwKGVsID0+IGVsZW1lbnRUb1BkZm1ha2UoZWwsIHsgaW5Gb290ZXI6IHRydWUgfSkpOwoKICAgICAgICAgIC8vIENyaWFyIGZ1bsOnw6NvIHF1ZSByZXRvcm5hIG8gYXJyYXkgZGUgY29udGXDumRvCiAgICAgICAgICBkb2NEZWYuZm9vdGVyID0gZnVuY3Rpb24gKGN1cnJlbnRQYWdlLCBwYWdlQ291bnQsIHBhZ2VTaXplKSB7CiAgICAgICAgICAgIHJldHVybiBmb290ZXJDb250ZW50OwogICAgICAgICAgfTsKICAgICAgICAgIC8vIEFybWF6ZW5hciBjb250ZcO6ZG8gc2VyaWFsaXphZG8gcGFyYSB1c28gbmEgZ2VyYcOnw6NvIGRlIGPDs2RpZ28KICAgICAgICAgIGRvY0RlZi5mb290ZXIuX2NvbnRlbnQgPSBmb290ZXJDb250ZW50OwogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gQWRpY2lvbmFyIHdhdGVybWFyayBzZSBjb25maWd1cmFkbyAoYXBlbmFzIHRleHRvIC0gUERGTWFrZSBuw6NvIHN1cG9ydGEgaW1hZ2VucykKICAgICAgaWYgKGRvY3VtZW50V2F0ZXJtYXJrICYmIGRvY3VtZW50V2F0ZXJtYXJrLnRleHQgJiYgZG9jdW1lbnRXYXRlcm1hcmsudGV4dC50cmltKCkpIHsKICAgICAgICBkb2NEZWYud2F0ZXJtYXJrID0gewogICAgICAgICAgdGV4dDogZG9jdW1lbnRXYXRlcm1hcmsudGV4dCwKICAgICAgICAgIGZvbnRTaXplOiBkb2N1bWVudFdhdGVybWFyay5mb250U2l6ZSB8fCA0OCwKICAgICAgICAgIGNvbG9yOiBkb2N1bWVudFdhdGVybWFyay5jb2xvciB8fCAnI2NjY2NjYycsCiAgICAgICAgICBvcGFjaXR5OiBkb2N1bWVudFdhdGVybWFyay5vcGFjaXR5ICE9PSB1bmRlZmluZWQgPyBkb2N1bWVudFdhdGVybWFyay5vcGFjaXR5IDogMC4zLAogICAgICAgICAgYW5nbGU6IGRvY3VtZW50V2F0ZXJtYXJrLmFuZ2xlICE9PSB1bmRlZmluZWQgPyBkb2N1bWVudFdhdGVybWFyay5hbmdsZSA6IC00NQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIC8vIEFkaWNpb25hciBUT0Mgc2UgY29uZmlndXJhZG8KICAgICAgaWYgKGRvY3VtZW50VE9DICYmIGRvY3VtZW50VE9DLmVuYWJsZWQpIHsKICAgICAgICAvLyBPIFRPQyBzZXLDoSBhZGljaW9uYWRvIG5vIGluw61jaW8gZG8gY29udGVudAogICAgICAgIGNvbnN0IHRvY0l0ZW0gPSB7CiAgICAgICAgICB0b2M6IHsKICAgICAgICAgICAgdGl0bGU6IHsgdGV4dDogZG9jdW1lbnRUT0MudGl0bGUgfHwgJ8ONbmRpY2UnLCAuLi4oZG9jdW1lbnRUT0MudGl0bGVTdHlsZSB8fCB7fSkgfSwKICAgICAgICAgICAgdGV4dFN0eWxlOiBkb2N1bWVudFRPQy50ZXh0U3R5bGUgfHwge30sCiAgICAgICAgICAgIG51bWJlclN0eWxlOiBkb2N1bWVudFRPQy5udW1iZXJTdHlsZSB8fCB7fSwKICAgICAgICAgICAgbWFyZ2luOiBkb2N1bWVudFRPQy5tYXJnaW4gfHwgWzAsIDAsIDAsIDIwXQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgZG9jRGVmLmNvbnRlbnQudW5zaGlmdCh0b2NJdGVtKTsKICAgICAgfQoKICAgICAgLy8gQWRpY2lvbmFyIFNlY3VyaXR5IHNlIGNvbmZpZ3VyYWRvCiAgICAgIGlmIChkb2N1bWVudFNlY3VyaXR5ICYmIGRvY3VtZW50U2VjdXJpdHkuZW5hYmxlZCAmJiBkb2N1bWVudFNlY3VyaXR5LnVzZXJQYXNzd29yZCkgewogICAgICAgIGRvY0RlZi51c2VyUGFzc3dvcmQgPSBkb2N1bWVudFNlY3VyaXR5LnVzZXJQYXNzd29yZDsKICAgICAgICBpZiAoZG9jdW1lbnRTZWN1cml0eS5vd25lclBhc3N3b3JkKSB7CiAgICAgICAgICBkb2NEZWYub3duZXJQYXNzd29yZCA9IGRvY3VtZW50U2VjdXJpdHkub3duZXJQYXNzd29yZDsKICAgICAgICB9CiAgICAgICAgaWYgKGRvY3VtZW50U2VjdXJpdHkucGVybWlzc2lvbnMpIHsKICAgICAgICAgIGRvY0RlZi5wZXJtaXNzaW9ucyA9IHsKICAgICAgICAgICAgcHJpbnRpbmc6IGRvY3VtZW50U2VjdXJpdHkucGVybWlzc2lvbnMucHJpbnRpbmcgIT09IGZhbHNlID8gJ2hpZ2hSZXNvbHV0aW9uJyA6IGZhbHNlLAogICAgICAgICAgICBtb2RpZnlpbmc6IGRvY3VtZW50U2VjdXJpdHkucGVybWlzc2lvbnMubW9kaWZ5aW5nICE9PSBmYWxzZSwKICAgICAgICAgICAgY29weWluZzogZG9jdW1lbnRTZWN1cml0eS5wZXJtaXNzaW9ucy5jb3B5aW5nICE9PSBmYWxzZSwKICAgICAgICAgICAgYW5ub3RhdGluZzogZG9jdW1lbnRTZWN1cml0eS5wZXJtaXNzaW9ucy5hbm5vdGF0aW5nICE9PSBmYWxzZQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIEFkaWNpb25hciBJbmZvIChNZXRhZGFkb3MpIHNlIGNvbmZpZ3VyYWRvCiAgICAgIGlmIChkb2N1bWVudFBhZ2VJbmZvICYmIChkb2N1bWVudFBhZ2VJbmZvLmF1dGhvciB8fCBkb2N1bWVudFBhZ2VJbmZvLnRpdGxlIHx8IGRvY3VtZW50UGFnZUluZm8uc3ViamVjdCB8fCBkb2N1bWVudFBhZ2VJbmZvLmtleXdvcmRzKSkgewogICAgICAgIGRvY0RlZi5pbmZvID0ge307CiAgICAgICAgaWYgKGRvY3VtZW50UGFnZUluZm8uYXV0aG9yKSBkb2NEZWYuaW5mby5hdXRob3IgPSBkb2N1bWVudFBhZ2VJbmZvLmF1dGhvcjsKICAgICAgICBpZiAoZG9jdW1lbnRQYWdlSW5mby50aXRsZSkgZG9jRGVmLmluZm8udGl0bGUgPSBkb2N1bWVudFBhZ2VJbmZvLnRpdGxlOwogICAgICAgIGlmIChkb2N1bWVudFBhZ2VJbmZvLnN1YmplY3QpIGRvY0RlZi5pbmZvLnN1YmplY3QgPSBkb2N1bWVudFBhZ2VJbmZvLnN1YmplY3Q7CiAgICAgICAgaWYgKGRvY3VtZW50UGFnZUluZm8ua2V5d29yZHMpIGRvY0RlZi5pbmZvLmtleXdvcmRzID0gZG9jdW1lbnRQYWdlSW5mby5rZXl3b3JkczsKICAgICAgfQoKICAgICAgLy8gQWRpY2lvbmFyIENvbXByZXNzIHNlIGNvbmZpZ3VyYWRvCiAgICAgIGlmIChkb2N1bWVudENvbXByZXNzKSB7CiAgICAgICAgZG9jRGVmLmNvbXByZXNzID0gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGRvY0RlZjsKICAgIH0KCgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIENvbmZpcm0gTW9kYWwgSGVscGVycwogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGxldCBjb25maXJtTW9kYWxDYWxsYmFjayA9IG51bGw7CgogICAgZnVuY3Rpb24gc2hvd0NvbmZpcm1Nb2RhbCh0aXRsZSwgbWVzc2FnZSwgY2FsbGJhY2spIHsKICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybU1vZGFsJyk7CiAgICAgIGNvbnN0IHRpdGxlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybU1vZGFsVGl0bGUnKTsKICAgICAgY29uc3QgbWVzc2FnZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpcm1Nb2RhbE1lc3NhZ2UnKTsKCiAgICAgIGlmICghbW9kYWwgfHwgIXRpdGxlRWwgfHwgIW1lc3NhZ2VFbCkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ01vZGFsIGRlIGNvbmZpcm1hw6fDo28gbsOjbyBlbmNvbnRyYWRvJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aXRsZUVsLnRleHRDb250ZW50ID0gdGl0bGUgfHwgJ0NvbmZpcm1hciBhw6fDo28nOwogICAgICBtZXNzYWdlRWwudGV4dENvbnRlbnQgPSBtZXNzYWdlIHx8ICdUZW0gY2VydGV6YSBxdWUgZGVzZWphIHJlYWxpemFyIGVzdGEgYcOnw6NvPyc7CiAgICAgIGNvbmZpcm1Nb2RhbENhbGxiYWNrID0gY2FsbGJhY2s7CgogICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgIH0KICAgIHdpbmRvdy5zaG93Q29uZmlybU1vZGFsID0gc2hvd0NvbmZpcm1Nb2RhbDsgLy8gVG9ybmFyIGdsb2JhbAoKICAgIGZ1bmN0aW9uIGNvbmZpcm1Nb2RhbEFjdGlvbigpIHsKICAgICAgaWYgKGNvbmZpcm1Nb2RhbENhbGxiYWNrKSB7CiAgICAgICAgY29uZmlybU1vZGFsQ2FsbGJhY2soKTsKICAgICAgfQogICAgICBjbG9zZUNvbmZpcm1Nb2RhbCgpOwogICAgfQogICAgd2luZG93LmNvbmZpcm1Nb2RhbEFjdGlvbiA9IGNvbmZpcm1Nb2RhbEFjdGlvbjsgLy8gVG9ybmFyIGdsb2JhbCBwYXJhIHVzbyBubyBvbmNsaWNrCgogICAgZnVuY3Rpb24gY2xvc2VDb25maXJtTW9kYWwoKSB7CiAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpcm1Nb2RhbCcpOwogICAgICBpZiAobW9kYWwpIHsKICAgICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgfQogICAgICBjb25maXJtTW9kYWxDYWxsYmFjayA9IG51bGw7CiAgICB9CiAgICB3aW5kb3cuY2xvc2VDb25maXJtTW9kYWwgPSBjbG9zZUNvbmZpcm1Nb2RhbDsgLy8gVG9ybmFyIGdsb2JhbCBwYXJhIHVzbyBubyBvbmNsaWNrCgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIEFsZXJ0IE1vZGFsIEhlbHBlcnMKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBzaG93QWxlcnRNb2RhbCh0aXRsZSwgbWVzc2FnZSkgewogICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGVydE1vZGFsJyk7CiAgICAgIGNvbnN0IHRpdGxlRWwgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuY3VzdG9tLW1vZGFsLWhlYWRlciBoMycpOwogICAgICBjb25zdCBtZXNzYWdlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxlcnRNb2RhbE1lc3NhZ2UnKTsKCiAgICAgIGlmICh0aXRsZUVsKSB0aXRsZUVsLnRleHRDb250ZW50ID0gdGl0bGUgfHwgJ0F2aXNvJzsKICAgICAgaWYgKG1lc3NhZ2VFbCkgbWVzc2FnZUVsLnRleHRDb250ZW50ID0gbWVzc2FnZSB8fCAnTWVuc2FnZW0gZGUgYWxlcnRhJzsKCiAgICAgIGlmIChtb2RhbCkgewogICAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICB9CiAgICB9CiAgICB3aW5kb3cuc2hvd0FsZXJ0TW9kYWwgPSBzaG93QWxlcnRNb2RhbDsgLy8gVG9ybmFyIGdsb2JhbAoKICAgIGZ1bmN0aW9uIGNsb3NlQWxlcnRNb2RhbCgpIHsKICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxlcnRNb2RhbCcpOwogICAgICBpZiAobW9kYWwpIHsKICAgICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgfQogICAgfQogICAgd2luZG93LmNsb3NlQWxlcnRNb2RhbCA9IGNsb3NlQWxlcnRNb2RhbDsgLy8gVG9ybmFyIGdsb2JhbCBwYXJhIHVzbyBubyBvbmNsaWNrCgogICAgLy8gRmVjaGFyIG1vZGFsIGRlIHByZXZpZXcgZG8gUERGCiAgICBmdW5jdGlvbiBjbG9zZVByZXZpZXdNb2RhbCgpIHsKICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlld01vZGFsJyk7CiAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3SWZyYW1lJyk7CgogICAgICBpZiAobW9kYWwpIHsKICAgICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgfQoKICAgICAgLy8gTGltcGFyIG8gc3JjIGRvIGlmcmFtZSBwYXJhIGxpYmVyYXIgbWVtw7NyaWEKICAgICAgaWYgKGlmcmFtZSAmJiBpZnJhbWUuc3JjKSB7CiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChpZnJhbWUuc3JjKTsKICAgICAgICBpZnJhbWUuc3JjID0gJyc7CiAgICAgIH0KICAgIH0KICAgIHdpbmRvdy5jbG9zZVByZXZpZXdNb2RhbCA9IGNsb3NlUHJldmlld01vZGFsOyAvLyBUb3JuYXIgZ2xvYmFsIHBhcmEgdXNvIG5vIG9uY2xpY2sKCiAgICBmdW5jdGlvbiBjbG9zZUJ1YmJsZVRlc3RNb2RhbCgpIHsKICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnViYmxlVGVzdE1vZGFsJyk7CiAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidWJibGVUZXN0SWZyYW1lJyk7CgogICAgICBpZiAobW9kYWwpIHsKICAgICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgfQoKICAgICAgLy8gTGltcGFyIG8gc3JjIGRvIGlmcmFtZQogICAgICBpZiAoaWZyYW1lKSB7CiAgICAgICAgaWZyYW1lLnNyYyA9ICcnOwogICAgICB9CiAgICB9CiAgICB3aW5kb3cuY2xvc2VCdWJibGVUZXN0TW9kYWwgPSBjbG9zZUJ1YmJsZVRlc3RNb2RhbDsgLy8gVG9ybmFyIGdsb2JhbAoKICAgIC8vIEZ1bsOnw7VlcyBwYXJhIGNvbnRyb2xhciBtb2RhbCBkZSBsb2FkaW5nIGRlIGPDs2RpZ28KICAgIGZ1bmN0aW9uIHNob3dMb2FkaW5nQ29kZU1vZGFsKCkgewogICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nQ29kZU1vZGFsJyk7CiAgICAgIGlmIChtb2RhbCkgewogICAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaGlkZUxvYWRpbmdDb2RlTW9kYWwoKSB7CiAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdDb2RlTW9kYWwnKTsKICAgICAgaWYgKG1vZGFsKSB7CiAgICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBGZWNoYXIgbW9kYWlzIGNvbSBFU0MKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4gewogICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7CiAgICAgICAgY2xvc2VDb25maXJtTW9kYWwoKTsKICAgICAgICBjbG9zZVByZXZpZXdNb2RhbCgpOwogICAgICAgIGNsb3NlQnViYmxlVGVzdE1vZGFsKCk7CiAgICAgICAgaGlkZUxvYWRpbmdDb2RlTW9kYWwoKTsKICAgICAgfQogICAgfSk7CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIENvZGUgdGFiCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgCiAgICAvLyBGdW7Dp8OjbyBwYXJhIGNvbGV0YXIgYXBlbmFzIGFzIGNvbmZpZ3VyYcOnw7VlcyBkb3MgZWxlbWVudG9zIChzZW0gZ2VyYXIgY8OzZGlnbykKICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRDb25maWd1cmF0aW9ucygpIHsKICAgICAgY29uc3Qgcm9vdCA9IGdldFJvb3RHcm91cCgpOwogICAgICAKICAgICAgLy8gQ29sZXRhciBjb25maWd1cmHDp8O1ZXMgZGUgZWxlbWVudG9zIChkZWVwIGNsb25lIHBhcmEgZXZpdGFyIHJlZmVyw6puY2lhcykKICAgICAgY29uc3QgY2xlYW5lZEVsZW1lbnRzID0gY2xlYW5FbGVtZW50c0ZvclN0b3JhZ2UoZWxlbWVudHMpOwogICAgICAKICAgICAgcmV0dXJuIHsKICAgICAgICBlbGVtZW50czogY2xlYW5lZEVsZW1lbnRzLAogICAgICAgIHBhZ2VTaXplOiBwYWdlU2l6ZSwKICAgICAgICBvcmllbnRhdGlvbjogb3JpZW50YXRpb24sCiAgICAgICAgcGFnZU1hcmdpbnM6IHBhZ2VNYXJnaW5zLAogICAgICAgIGRvY3VtZW50SGVhZGVyOiBkb2N1bWVudEhlYWRlciA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZG9jdW1lbnRIZWFkZXIpKSA6IG51bGwsCiAgICAgICAgZG9jdW1lbnRGb290ZXI6IGRvY3VtZW50Rm9vdGVyID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkb2N1bWVudEZvb3RlcikpIDogbnVsbCwKICAgICAgICBkb2N1bWVudFdhdGVybWFyazogZG9jdW1lbnRXYXRlcm1hcmsgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRvY3VtZW50V2F0ZXJtYXJrKSkgOiBudWxsLAogICAgICAgIGRvY3VtZW50VE9DOiBkb2N1bWVudFRPQyA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZG9jdW1lbnRUT0MpKSA6IG51bGwsCiAgICAgICAgZG9jdW1lbnRTZWN1cml0eTogZG9jdW1lbnRTZWN1cml0eSA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZG9jdW1lbnRTZWN1cml0eSkpIDogbnVsbCwKICAgICAgICBkb2N1bWVudFBhZ2VJbmZvOiBkb2N1bWVudFBhZ2VJbmZvID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkb2N1bWVudFBhZ2VJbmZvKSkgOiBudWxsLAogICAgICAgIGRvY3VtZW50Q29tcHJlc3M6IGRvY3VtZW50Q29tcHJlc3MKICAgICAgfTsKICAgIH0KCiAgICAvLyBGdW7Dp8OjbyBwYXJhIGNvbnN0cnVpciBvYmpldG8gZGQgc2VtIGZ1bsOnw7VlcyAoYXBlbmFzIGRhZG9zIHNlcmlhbGl6w6F2ZWlzKQogICAgZnVuY3Rpb24gYnVpbGREb2NEZWZpbml0aW9uRm9yU2VyaWFsaXphdGlvbigpIHsKICAgICAgY29uc3QgZGQgPSBidWlsZERvY0RlZmluaXRpb24oKTsKICAgICAgCiAgICAgIC8vIENvbnZlcnRlciBmdW7Dp8O1ZXMgZW0gb2JqZXRvcyBzZXJpYWxpesOhdmVpcwogICAgICAvLyBQYXJhIGhlYWRlci9mb290ZXIsIHVzYXIgX2NvbnRlbnQgc2UgZGlzcG9uw612ZWwKICAgICAgaWYgKGRkLmhlYWRlciAmJiB0eXBlb2YgZGQuaGVhZGVyID09PSAnZnVuY3Rpb24nICYmIGRkLmhlYWRlci5fY29udGVudCkgewogICAgICAgIGRkLmhlYWRlciA9IHsgX2lzRnVuY3Rpb246IHRydWUsIF9jb250ZW50OiBkZC5oZWFkZXIuX2NvbnRlbnQgfTsKICAgICAgfQogICAgICBpZiAoZGQuZm9vdGVyICYmIHR5cGVvZiBkZC5mb290ZXIgPT09ICdmdW5jdGlvbicgJiYgZGQuZm9vdGVyLl9jb250ZW50KSB7CiAgICAgICAgZGQuZm9vdGVyID0geyBfaXNGdW5jdGlvbjogdHJ1ZSwgX2NvbnRlbnQ6IGRkLmZvb3Rlci5fY29udGVudCB9OwogICAgICB9CiAgICAgIAogICAgICAvLyBQYXJhIGZ1bsOnw7VlcyBlbSBsYXlvdXRzIGRlIHRhYmVsYSwgcHJlY2lzYW1vcyBleHRyYWlyIG9zIHZhbG9yZXMKICAgICAgLy8gSXNzbyBzZXLDoSBmZWl0byBuYSBFZGdlIEZ1bmN0aW9uCiAgICAgIAogICAgICByZXR1cm4gZGQ7CiAgICB9CgogICAgLy8gRnVuw6fDo28gcGFyYSBnZXJhciBjw7NkaWdvIHZpYSBFZGdlIEZ1bmN0aW9uIGUgcmV0b3JuYXIgbyBjw7NkaWdvIChzZW0gYXR1YWxpemFyIGNvZGVFZGl0b3IpCiAgICBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUNvZGVWaWFTdXBhYmFzZSgpIHsKICAgICAgdHJ5IHsKICAgICAgICAvLyBDb25zdHJ1aXIgb2JqZXRvIGRkIChzZW0gZnVuw6fDtWVzLCBhcGVuYXMgZGFkb3MpCiAgICAgICAgY29uc3QgZGQgPSBidWlsZERvY0RlZmluaXRpb25Gb3JTZXJpYWxpemF0aW9uKCk7CiAgICAgICAgCiAgICAgICAgLy8gVXNhciBmZXRjaCBkaXJldG8gcGFyYSBnYXJhbnRpciBxdWUgb3MgaGVhZGVycyBzZWphbSBlbnZpYWRvcyBjb3JyZXRhbWVudGUKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke1NVUEFCQVNFX1VSTH0vZnVuY3Rpb25zL3YxL2dlbmVyYXRlLXBkZi1jb2RlYCwgewogICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke1NVUEFCQVNFX0FOT05fS0VZfWAsCiAgICAgICAgICAgICdhcGlrZXknOiBTVVBBQkFTRV9BTk9OX0tFWQogICAgICAgICAgfSwKICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZGQ6IGRkIH0pCiAgICAgICAgfSk7CgogICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJybyAke3Jlc3BvbnNlLnN0YXR1c306ICR7ZXJyb3JUZXh0IHx8IHJlc3BvbnNlLnN0YXR1c1RleHR9YCk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CgogICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LmNvZGUpIHsKICAgICAgICAgIC8vIFNhbHZhciBjw7NkaWdvIGdlcmFkbyBubyBsb2NhbFN0b3JhZ2UKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfQ09ERV9LRVksIHJlc3VsdC5jb2RlKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvIGFvIHNhbHZhciBjw7NkaWdvIG5vIGxvY2FsU3RvcmFnZTonLCBlKTsKICAgICAgICAgIH0KICAgICAgICAgIAogICAgICAgICAgcmV0dXJuIHJlc3VsdC5jb2RlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc3Bvc3RhIGludsOhbGlkYSBkYSBFZGdlIEZ1bmN0aW9uOiBjw7NkaWdvIG7Do28gZW5jb250cmFkbycpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIGdlcmFyIGPDs2RpZ286JywgZXJyb3IpOwogICAgICAgIHRocm93IGVycm9yOwogICAgICB9CiAgICB9CgogICAgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVDb2RlVmlhRWRnZUZ1bmN0aW9uKCkgewogICAgICBjb25zdCBjb2RlRWRpdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvZGVFZGl0b3InKTsKICAgICAgaWYgKCFjb2RlRWRpdG9yKSByZXR1cm47CgogICAgICAvLyBNb3N0cmFyIGxvYWRpbmcKICAgICAgY29kZUVkaXRvci50ZXh0Q29udGVudCA9ICdHZXJhbmRvIGPDs2RpZ28uLi4gQWd1YXJkZS4nOwogICAgICAKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBjb2RlID0gYXdhaXQgZ2VuZXJhdGVDb2RlVmlhU3VwYWJhc2UoKTsKICAgICAgICAKICAgICAgICAvLyBFeGliaXIgY8OzZGlnbyBnZXJhZG8KICAgICAgICBjb2RlRWRpdG9yLnRleHRDb250ZW50ID0gY29kZTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIGdlcmFyIGPDs2RpZ286JywgZXJyb3IpOwogICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UgfHwgJ0Vycm8gZGVzY29uaGVjaWRvJzsKICAgICAgICBjb2RlRWRpdG9yLnRleHRDb250ZW50ID0gYC8vIEVycm8gYW8gZ2VyYXIgY8OzZGlnbzogJHtlcnJvck1lc3NhZ2V9XG5cblBvciBmYXZvciwgdmVyaWZpcXVlOlxuMS4gU2UgYSBFZGdlIEZ1bmN0aW9uIGVzdMOhIGNvbmZpZ3VyYWRhIGUgZGVwbG95YWRhIGNvcnJldGFtZW50ZVxuMi4gU2UgYSBVUkwgZGEgRWRnZSBGdW5jdGlvbiBlc3TDoSBjb3JyZXRhXG4zLiBTZSBow6EgZWxlbWVudG9zIG5vIGNhbnZhc1xuNC4gVmVyaWZpcXVlIG8gY29uc29sZSBwYXJhIG1haXMgZGV0YWxoZXNgOwogICAgICB9CiAgICB9CgogICAgLy8gRnVuw6fDo28gdXBkYXRlQ29kZSByZWZhdG9yYWRhIC0gYWdvcmEgY2hhbWEgYSBFZGdlIEZ1bmN0aW9uCiAgICBhc3luYyBmdW5jdGlvbiB1cGRhdGVDb2RlKCkgewogICAgICAvLyBWZXJpZmljYXIgc2UgaMOhIGVsZW1lbnRvcyBwYXJhIGdlcmFyIGPDs2RpZ28KICAgICAgY29uc3Qgcm9vdCA9IGdldFJvb3RHcm91cCgpOwogICAgICBpZiAoIXJvb3QgfHwgIXJvb3QucHJvcGVydGllcyB8fCAhcm9vdC5wcm9wZXJ0aWVzLmNoaWxkcmVuIHx8IHJvb3QucHJvcGVydGllcy5jaGlsZHJlbi5sZW5ndGggPT09IDApIHsKICAgICAgICBjb25zdCBjb2RlRWRpdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvZGVFZGl0b3InKTsKICAgICAgICBpZiAoY29kZUVkaXRvcikgewogICAgICAgICAgY29kZUVkaXRvci50ZXh0Q29udGVudCA9ICcvLyBBZGljaW9uZSBlbGVtZW50b3MgcGFyYSBnZXJhciBvIGPDs2RpZ28nOwogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIENoYW1hciBFZGdlIEZ1bmN0aW9uIHBhcmEgZ2VyYXIgY8OzZGlnbwogICAgICBhd2FpdCBnZW5lcmF0ZUNvZGVWaWFFZGdlRnVuY3Rpb24oKTsKICAgIH0KCiAgICAvLyBGdW7Dp8OjbyBhbnRpZ2EgbWFudGlkYSBwYXJhIHJlZmVyw6puY2lhIChzZXLDoSByZW1vdmlkYSBhcMOzcyBtaWdyYcOnw6NvIGNvbXBsZXRhKQogICAgLy8gRXN0YSBmdW7Dp8OjbyBjb250w6ltIHRvZGEgYSBsw7NnaWNhIGRlIHNlcmlhbGl6YcOnw6NvIHF1ZSBzZXLDoSBtb3ZpZGEgcGFyYSBhIEVkZ2UgRnVuY3Rpb24KICAgIGZ1bmN0aW9uIHVwZGF0ZUNvZGVfT0xEKCkgewogICAgICBjb25zdCBkZCA9IGJ1aWxkRG9jRGVmaW5pdGlvbigpOwoKICAgICAgLy8gTWFwZWFyIGZ1bsOnw7VlcyBwYXJhIHNldXMgdmFsb3JlcyBkZSB2YXJpw6F2ZWlzIGxvY2FpcyAocGFyYSBzdWJzdGl0dWnDp8OjbykKICAgICAgY29uc3QgZnVuY3Rpb25WYXJpYWJsZU1hcCA9IG5ldyBNYXAoKTsKCiAgICAgIC8vIENvbGV0YXIgaW5mb3JtYcOnw7VlcyBzb2JyZSBmdW7Dp8O1ZXMgZSBzdWFzIHZhcmnDoXZlaXMgbG9jYWlzCiAgICAgIC8vIEVzdGEgZnVuw6fDo28gY29sZXRhIHZhbG9yZXMgZGUgdmFyacOhdmVpcyB1c2FkYXMgZW0gZnVuw6fDtWVzIHBhcmEgc3Vic3RpdHVpw6fDo28gbmEgc2VyaWFsaXphw6fDo28KICAgICAgZnVuY3Rpb24gY29sbGVjdEZ1bmN0aW9uVmFyaWFibGVzKG9iaiwgcGF0aCA9ICcnKSB7CiAgICAgICAgaWYgKCFvYmogfHwgdHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHJldHVybjsKCiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkgewogICAgICAgICAgb2JqLmZvckVhY2goKGl0ZW0sIGlkeCkgPT4gewogICAgICAgICAgICBjb2xsZWN0RnVuY3Rpb25WYXJpYWJsZXMoaXRlbSwgYCR7cGF0aH1bJHtpZHh9XWApOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIFZlcmlmaWNhciBzZSDDqSB1bWEgdGFiZWxhIGNvbSBsYXlvdXQKICAgICAgICAgIGlmIChvYmoudGFibGUgJiYgb2JqLmxheW91dCAmJiB0eXBlb2Ygb2JqLmxheW91dCA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgY29uc3QgbGF5b3V0ID0gb2JqLmxheW91dDsKICAgICAgICAgICAgT2JqZWN0LmtleXMobGF5b3V0KS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsYXlvdXRba2V5XSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgY29uc3QgZnVuY1N0ciA9IGxheW91dFtrZXldLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UGF0aCA9IGAke3BhdGh9LmxheW91dC4ke2tleX1gOwoKICAgICAgICAgICAgICAgIC8vIFRlbnRhciBleGVjdXRhciBhIGZ1bsOnw6NvIHBhcmEgb2J0ZXIgdmFsb3JlcyBkZSByZXRvcm5vCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAvLyBQYXJhIGZpbGxDb2xvciwgdGVzdGFyIGNvbSBsaW5oYSBwYXIKICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2ZpbGxDb2xvcicpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gbGF5b3V0W2tleV0oMiwgeyB0YWJsZTogeyBib2R5OiBbW10sIFtdLCBbXV0gfSB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAodGVzdFJlc3VsdCAmJiB0eXBlb2YgdGVzdFJlc3VsdCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uVmFyaWFibGVNYXAuc2V0KGN1cnJlbnRQYXRoLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaWxsQ29sb3InLAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGVzdFJlc3VsdAogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIC8vIFBhcmEgcGFkZGluZywgdGVzdGFyIGNvbSBkaWZlcmVudGVzIMOtbmRpY2VzCiAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGtleS5zdGFydHNXaXRoKCdwYWRkaW5nJykpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gbGF5b3V0W2tleV0oMSwgeyB0YWJsZTogeyB3aWR0aHM6IFsnKicsICcqJ10gfSB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlc3RSZXN1bHQgPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvblZhcmlhYmxlTWFwLnNldChjdXJyZW50UGF0aCwgewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGFkZGluZycsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0ZXN0UmVzdWx0CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgLy8gUGFyYSBoTGluZVdpZHRoLCB2TGluZVdpZHRoCiAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGtleS5pbmNsdWRlcygnTGluZVdpZHRoJykpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gbGF5b3V0W2tleV0oMSwgeyB0YWJsZTogeyBib2R5OiBbW10sIFtdXSwgd2lkdGhzOiBbJyonLCAnKiddIH0gfSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXN0UmVzdWx0ID09PSAnbnVtYmVyJykgewogICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25WYXJpYWJsZU1hcC5zZXQoY3VycmVudFBhdGgsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2xpbmVXaWR0aCcsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0ZXN0UmVzdWx0CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgLy8gUGFyYSBoTGluZUNvbG9yLCB2TGluZUNvbG9yCiAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGtleS5pbmNsdWRlcygnTGluZUNvbG9yJykpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gbGF5b3V0W2tleV0oMSwge30pOwogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVzdFJlc3VsdCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uVmFyaWFibGVNYXAuc2V0KGN1cnJlbnRQYXRoLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdsaW5lQ29sb3InLAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGVzdFJlc3VsdAogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgIC8vIFNlIGZhbGhhciwgdGVudGFyIHVzYXIgcHJvcHJpZWRhZGVzIGFybWF6ZW5hZGFzCiAgICAgICAgICAgICAgICAgIGlmIChsYXlvdXRba2V5XS5femVicmFDb2xvcikgewogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uVmFyaWFibGVNYXAuc2V0KGN1cnJlbnRQYXRoLCB7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmlsbENvbG9yJywKICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBsYXlvdXRba2V5XS5femVicmFDb2xvcgogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goa2V5ID0+IHsKICAgICAgICAgICAgaWYgKGtleSAhPT0gJ2hlYWRlcicgJiYga2V5ICE9PSAnZm9vdGVyJykgewogICAgICAgICAgICAgIGNvbGxlY3RGdW5jdGlvblZhcmlhYmxlcyhvYmpba2V5XSwgcGF0aCA/IGAke3BhdGh9LiR7a2V5fWAgOiBrZXkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgY29sbGVjdEZ1bmN0aW9uVmFyaWFibGVzKGRkKTsKCiAgICAgIC8vIEZ1bsOnw6NvIHJlY3Vyc2l2YSBwYXJhIHNlcmlhbGl6YXIgb2JqZXRvIGluY2x1aW5kbyBmdW7Dp8O1ZXMgaW5saW5lCiAgICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZU9iamVjdChvYmosIGluZGVudCA9IDAsIGlzSW5BcnJheSA9IGZhbHNlLCBjdXJyZW50UGF0aCA9ICcnKSB7CiAgICAgICAgY29uc3QgaW5kZW50U3RyID0gJyAgJy5yZXBlYXQoaW5kZW50KTsKICAgICAgICBjb25zdCBuZXh0SW5kZW50ID0gaW5kZW50ICsgMTsKICAgICAgICBjb25zdCBuZXh0SW5kZW50U3RyID0gJyAgJy5yZXBlYXQobmV4dEluZGVudCk7CgogICAgICAgIGlmIChvYmogPT09IG51bGwpIHJldHVybiAnbnVsbCc7CiAgICAgICAgaWYgKG9iaiA9PT0gdW5kZWZpbmVkKSByZXR1cm4gJ3VuZGVmaW5lZCc7CgogICAgICAgIC8vIFJlbW92ZXIgcHJvcHJpZWRhZGVzIGludGVybmFzIGRvIFBERk1ha2UKICAgICAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkob2JqKSAmJiBvYmogIT09IG51bGwpIHsKICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0ge307CiAgICAgICAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goa2V5ID0+IHsKICAgICAgICAgICAgaWYgKCFrZXkuc3RhcnRzV2l0aCgnXycpKSB7CiAgICAgICAgICAgICAgZmlsdGVyZWRba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIG9iaiA9IGZpbHRlcmVkOwogICAgICAgIH0KCiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkgewogICAgICAgICAgaWYgKG9iai5sZW5ndGggPT09IDApIHJldHVybiAnW10nOwogICAgICAgICAgbGV0IHJlc3VsdCA9ICdbXG4nOwogICAgICAgICAgb2JqLmZvckVhY2goKGl0ZW0sIGlkeCkgPT4gewogICAgICAgICAgICByZXN1bHQgKz0gbmV4dEluZGVudFN0ciArIHNlcmlhbGl6ZU9iamVjdChpdGVtLCBuZXh0SW5kZW50LCB0cnVlLCBgJHtjdXJyZW50UGF0aH1bJHtpZHh9XWApOwogICAgICAgICAgICBpZiAoaWR4IDwgb2JqLmxlbmd0aCAtIDEpIHJlc3VsdCArPSAnLCc7CiAgICAgICAgICAgIHJlc3VsdCArPSAnXG4nOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXN1bHQgKz0gaW5kZW50U3RyICsgJ10nOwogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAvLyBQYXJhIGhlYWRlci9mb290ZXIsIHVzYXIgY29udGXDumRvIHNlcmlhbGl6YWRvIGFybWF6ZW5hZG8gZW0gX2NvbnRlbnQKICAgICAgICAgIGlmIChvYmouX2NvbnRlbnQgJiYgQXJyYXkuaXNBcnJheShvYmouX2NvbnRlbnQpKSB7CiAgICAgICAgICAgIC8vIFNlcmlhbGl6YXIgbyBjb250ZcO6ZG8gY29tbyBhcnJheSBsaXRlcmFsIGRlbnRybyBkYSBmdW7Dp8OjbwogICAgICAgICAgICAvLyBJTVBPUlRBTlRFOiBTZXJpYWxpemFyIGNhZGEgaXRlbSByZWN1cnNpdmFtZW50ZSBwYXJhIGdhcmFudGlyIHZhbG9yZXMgbGl0ZXJhaXMKICAgICAgICAgICAgbGV0IGNvbnRlbnRTdHIgPSAnJzsKICAgICAgICAgICAgaWYgKG9iai5fY29udGVudC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICBjb250ZW50U3RyID0gJ1tdJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IFtdOwogICAgICAgICAgICAgIG9iai5fY29udGVudC5mb3JFYWNoKChpdGVtLCBpZHgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1TdHIgPSBzZXJpYWxpemVPYmplY3QoaXRlbSwgbmV4dEluZGVudCArIDEsIHRydWUsIGAke2N1cnJlbnRQYXRofS5fY29udGVudFske2lkeH1dYCk7CiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW1TdHIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIC8vIEZvcm1hdGFyIGFycmF5IGNvbSBpbmRlbnRhw6fDo28gY29ycmV0YQogICAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGggPT09IDEgJiYgIWl0ZW1zWzBdLmluY2x1ZGVzKCdcbicpKSB7CiAgICAgICAgICAgICAgICAvLyBBcnJheSBkZSB1bSBpdGVtIHNpbXBsZXMgLSB1bWEgbGluaGEKICAgICAgICAgICAgICAgIGNvbnRlbnRTdHIgPSBgWyR7aXRlbXNbMF19XWA7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIEFycmF5IG11bHRpLWxpbmhhCiAgICAgICAgICAgICAgICBjb250ZW50U3RyID0gJ1tcbic7CiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKChpdGVtU3RyLCBpZHgpID0+IHsKICAgICAgICAgICAgICAgICAgLy8gQWRpY2lvbmFyIGluZGVudGHDp8OjbyBleHRyYSBwYXJhIGNhZGEgaXRlbQogICAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGl0ZW1TdHIuc3BsaXQoJ1xuJyk7CiAgICAgICAgICAgICAgICAgIGxpbmVzLmZvckVhY2goKGxpbmUsIGxpbmVJZHgpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAobGluZUlkeCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgY29udGVudFN0ciArPSBuZXh0SW5kZW50U3RyICsgJyAgJyArIGxpbmU7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRTdHIgKz0gJ1xuJyArIG5leHRJbmRlbnRTdHIgKyAnICAnICsgbGluZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBpZiAoaWR4IDwgaXRlbXMubGVuZ3RoIC0gMSkgY29udGVudFN0ciArPSAnLCc7CiAgICAgICAgICAgICAgICAgIGNvbnRlbnRTdHIgKz0gJ1xuJzsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29udGVudFN0ciArPSBuZXh0SW5kZW50U3RyICsgJ10nOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYGZ1bmN0aW9uKGN1cnJlbnRQYWdlLCBwYWdlQ291bnQsIHBhZ2VTaXplKSB7XG4ke25leHRJbmRlbnRTdHJ9cmV0dXJuICR7Y29udGVudFN0cn07XG4ke2luZGVudFN0cn19YDsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBTZXJpYWxpemFyIGZ1bsOnw6NvIGNvbW8gc3RyaW5nIGRlIGPDs2RpZ28gZm9ybWF0YWRhCiAgICAgICAgICBsZXQgZnVuY1N0ciA9IG9iai50b1N0cmluZygpOwoKICAgICAgICAgIC8vIE9idGVyIGluZm9ybWHDp8O1ZXMgZGEgdmFyacOhdmVsIG1hcGVhZGEKICAgICAgICAgIGNvbnN0IHZhckluZm8gPSBmdW5jdGlvblZhcmlhYmxlTWFwLmdldChjdXJyZW50UGF0aCk7CgogICAgICAgICAgLy8gU3Vic3RpdHVpciB2YXJpw6F2ZWlzIGNvbmhlY2lkYXMgcG9yIHZhbG9yZXMgbGl0ZXJhaXMKICAgICAgICAgIC8vIDEuIFNlIGEgZnVuw6fDo28gdGVtIHByb3ByaWVkYWRlIF96ZWJyYUNvbG9yLCB1c2FyIGRpcmV0YW1lbnRlCiAgICAgICAgICBpZiAob2JqLl96ZWJyYUNvbG9yKSB7CiAgICAgICAgICAgIGZ1bmNTdHIgPSBmdW5jU3RyLnJlcGxhY2UoL1xiemVicmFDb2xvclN0clxifFxiemVicmFDb2xvclxifFxiYmFzZUNvbG9yXGIvZywgYCcke29iai5femVicmFDb2xvcn0nYCk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyAyLiBTZSB0ZW1vcyBpbmZvcm1hw6fDo28gZG8gbWFwZWFtZW50bywgdXNhcgogICAgICAgICAgZWxzZSBpZiAodmFySW5mbykgewogICAgICAgICAgICBpZiAodmFySW5mby50eXBlID09PSAnZmlsbENvbG9yJyAmJiB2YXJJbmZvLmNvbG9yKSB7CiAgICAgICAgICAgICAgZnVuY1N0ciA9IGZ1bmNTdHIucmVwbGFjZSgvXGJ6ZWJyYUNvbG9yU3RyXGJ8XGJ6ZWJyYUNvbG9yXGJ8XGJiYXNlQ29sb3JcYi9nLCBgJyR7dmFySW5mby5jb2xvcn0nYCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFySW5mby50eXBlID09PSAncGFkZGluZycgJiYgdHlwZW9mIHZhckluZm8udmFsdWUgPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgICAgLy8gU3Vic3RpdHVpciB2YXJpw6F2ZWlzIGRlIHBhZGRpbmcgKHBhZGRpbmdMZWZ0LCBwYWRkaW5nUmlnaHQsIHBhZGRpbmdUb3AsIHBhZGRpbmdCb3R0b20pCiAgICAgICAgICAgICAgZnVuY1N0ciA9IGZ1bmNTdHIucmVwbGFjZSgvXGJwYWRkaW5nTGVmdFxifFxicGFkZGluZ1JpZ2h0XGJ8XGJwYWRkaW5nVG9wXGJ8XGJwYWRkaW5nQm90dG9tXGIvZywgdmFySW5mby52YWx1ZS50b1N0cmluZygpKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh2YXJJbmZvLnR5cGUgPT09ICdsaW5lV2lkdGgnICYmIHR5cGVvZiB2YXJJbmZvLnZhbHVlID09PSAnbnVtYmVyJykgewogICAgICAgICAgICAgIC8vIFN1YnN0aXR1aXIgdmFyacOhdmVpcyBkZSBsaW5lV2lkdGgKICAgICAgICAgICAgICBmdW5jU3RyID0gZnVuY1N0ci5yZXBsYWNlKC9cYmhMaW5lV2lkdGhcYnxcYnZMaW5lV2lkdGhcYi9nLCB2YXJJbmZvLnZhbHVlLnRvU3RyaW5nKCkpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHZhckluZm8udHlwZSA9PT0gJ2xpbmVDb2xvcicgJiYgdmFySW5mby5jb2xvcikgewogICAgICAgICAgICAgIC8vIFN1YnN0aXR1aXIgdmFyacOhdmVpcyBkZSBsaW5lQ29sb3IKICAgICAgICAgICAgICBmdW5jU3RyID0gZnVuY1N0ci5yZXBsYWNlKC9cYmhMaW5lQ29sb3JcYnxcYnZMaW5lQ29sb3JcYi9nLCBgJyR7dmFySW5mby5jb2xvcn0nYCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8vIDMuIFRlbnRhciBleGVjdXRhciBhIGZ1bsOnw6NvIHBhcmEgb2J0ZXIgdmFsb3JlcwogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgLy8gUGFyYSBmaWxsQ29sb3IKICAgICAgICAgICAgICBpZiAoZnVuY1N0ci5pbmNsdWRlcygnZmlsbENvbG9yJykgfHwgZnVuY1N0ci5pbmNsdWRlcygnemVicmFDb2xvcicpIHx8IGZ1bmNTdHIuaW5jbHVkZXMoJ2Jhc2VDb2xvcicpKSB7CiAgICAgICAgICAgICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gb2JqKDIsIHsgdGFibGU6IHsgYm9keTogW1tdLCBbXSwgW11dIH0gfSk7CiAgICAgICAgICAgICAgICBpZiAodGVzdFJlc3VsdCAmJiB0eXBlb2YgdGVzdFJlc3VsdCA9PT0gJ3N0cmluZycgJiYgdGVzdFJlc3VsdC5tYXRjaCgvXiNbMC05QS1GYS1mXXs2fSQvKSkgewogICAgICAgICAgICAgICAgICBmdW5jU3RyID0gZnVuY1N0ci5yZXBsYWNlKC9cYnplYnJhQ29sb3JTdHJcYnxcYnplYnJhQ29sb3JcYnxcYmJhc2VDb2xvclxiL2csIGAnJHt0ZXN0UmVzdWx0fSdgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gUGFyYSBwYWRkaW5nCiAgICAgICAgICAgICAgZWxzZSBpZiAoZnVuY1N0ci5pbmNsdWRlcygncGFkZGluZycpKSB7CiAgICAgICAgICAgICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gb2JqKDEsIHsgdGFibGU6IHsgd2lkdGhzOiBbJyonLCAnKiddIH0gfSk7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlc3RSZXN1bHQgPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgICAgICAgIC8vIEVuY29udHJhciBvIG5vbWUgZGEgdmFyacOhdmVsIGRlIHBhZGRpbmcgbm8gY8OzZGlnbwogICAgICAgICAgICAgICAgICBjb25zdCBwYWRkaW5nTWF0Y2ggPSBmdW5jU3RyLm1hdGNoKC9cYihwYWRkaW5nTGVmdHxwYWRkaW5nUmlnaHR8cGFkZGluZ1RvcHxwYWRkaW5nQm90dG9tKVxiLyk7CiAgICAgICAgICAgICAgICAgIGlmIChwYWRkaW5nTWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICBmdW5jU3RyID0gZnVuY1N0ci5yZXBsYWNlKG5ldyBSZWdFeHAoYFxcYiR7cGFkZGluZ01hdGNoWzFdfVxcYmAsICdnJyksIHRlc3RSZXN1bHQudG9TdHJpbmcoKSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gUGFyYSBsaW5lV2lkdGgKICAgICAgICAgICAgICBlbHNlIGlmIChmdW5jU3RyLmluY2x1ZGVzKCdMaW5lV2lkdGgnKSkgewogICAgICAgICAgICAgICAgY29uc3QgdGVzdFJlc3VsdCA9IG9iaigxLCB7IHRhYmxlOiB7IGJvZHk6IFtbXSwgW11dLCB3aWR0aHM6IFsnKicsICcqJ10gfSB9KTsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVzdFJlc3VsdCA9PT0gJ251bWJlcicpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgbGluZVdpZHRoTWF0Y2ggPSBmdW5jU3RyLm1hdGNoKC9cYihoTGluZVdpZHRofHZMaW5lV2lkdGgpXGIvKTsKICAgICAgICAgICAgICAgICAgaWYgKGxpbmVXaWR0aE1hdGNoKSB7CiAgICAgICAgICAgICAgICAgICAgZnVuY1N0ciA9IGZ1bmNTdHIucmVwbGFjZShuZXcgUmVnRXhwKGBcXGIke2xpbmVXaWR0aE1hdGNoWzFdfVxcYmAsICdnJyksIHRlc3RSZXN1bHQudG9TdHJpbmcoKSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gUGFyYSBsaW5lQ29sb3IKICAgICAgICAgICAgICBlbHNlIGlmIChmdW5jU3RyLmluY2x1ZGVzKCdMaW5lQ29sb3InKSkgewogICAgICAgICAgICAgICAgY29uc3QgdGVzdFJlc3VsdCA9IG9iaigxLCB7fSk7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlc3RSZXN1bHQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVDb2xvck1hdGNoID0gZnVuY1N0ci5tYXRjaCgvXGIoaExpbmVDb2xvcnx2TGluZUNvbG9yKVxiLyk7CiAgICAgICAgICAgICAgICAgIGlmIChsaW5lQ29sb3JNYXRjaCkgewogICAgICAgICAgICAgICAgICAgIGZ1bmNTdHIgPSBmdW5jU3RyLnJlcGxhY2UobmV3IFJlZ0V4cChgXFxiJHtsaW5lQ29sb3JNYXRjaFsxXX1cXGJgLCAnZycpLCBgJyR7dGVzdFJlc3VsdH0nYCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAvLyBJZ25vcmFyIGVycm8gLSBmdW7Dp8OjbyBwb2RlIG7Do28gc2VyIGV4ZWN1dMOhdmVsIG5lc3RlIGNvbnRleHRvCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvLyBTdWJzdGl0dWnDp8OjbyBmaW5hbDogcHJvY3VyYXIgcGFkcsO1ZXMgY29tdW5zIGRlIHZhcmnDoXZlaXMKICAgICAgICAgIC8vIFBhZHLDo286IHJldHVybiAoaSAlIDIgPT09IDApID8gemVicmFDb2xvclN0ciA6IG51bGw7CiAgICAgICAgICBjb25zdCByZXR1cm5NYXRjaCA9IGZ1bmNTdHIubWF0Y2goL3JldHVyblxzKlwoW14pXStcKVxzKlw/XHMqKFx3Kylccyo6Lyk7CiAgICAgICAgICBpZiAocmV0dXJuTWF0Y2gpIHsKICAgICAgICAgICAgY29uc3QgdmFyTmFtZSA9IHJldHVybk1hdGNoWzFdOwogICAgICAgICAgICAvLyBTZSBhaW5kYSBuw6NvIGZvaSBzdWJzdGl0dcOtZG8sIHRlbnRhciBvYnRlciBkbyBtYXBlYW1lbnRvIG91IHByb3ByaWVkYWRlCiAgICAgICAgICAgIGlmIChmdW5jU3RyLmluY2x1ZGVzKHZhck5hbWUpKSB7CiAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBvYmouX3plYnJhQ29sb3IgfHwgZnVuY3Rpb25WYXJpYWJsZU1hcC5nZXQoY3VycmVudFBhdGgpPy5jb2xvciB8fCBmdW5jdGlvblZhcmlhYmxlTWFwLmdldChjdXJyZW50UGF0aCk/LnZhbHVlOwogICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyBgJyR7dmFsdWV9J2AgOiB2YWx1ZS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgZnVuY1N0ciA9IGZ1bmNTdHIucmVwbGFjZShuZXcgUmVnRXhwKGBcXGIke3Zhck5hbWV9XFxiYCwgJ2cnKSwgcmVwbGFjZW1lbnQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIFJlbW92ZXIgcXVlYnJhcyBkZSBsaW5oYSBleHRyYXMgZSBmb3JtYXRhciBjb20gaW5kZW50YcOnw6NvIGNvcnJldGEKICAgICAgICAgIC8vIFNlIGEgZnVuw6fDo28gZm9pIGNyaWFkYSBjb20gbmV3IEZ1bmN0aW9uKCksIGVsYSBqw6EgdGVtIG8gZm9ybWF0byBjb3JyZXRvCiAgICAgICAgICAvLyBTZSBmb2kgY3JpYWRhIGNvbSBmdW5jdGlvbigpLCBwcmVjaXNhIHNlciBmb3JtYXRhZGEKICAgICAgICAgIGNvbnN0IGxpbmVzID0gZnVuY1N0ci5zcGxpdCgnXG4nKS5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKSAhPT0gJycpOwogICAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgLy8gRnVuw6fDo28gbXVsdGktbGluaGEgLSBmb3JtYXRhciBjb20gaW5kZW50YcOnw6NvCiAgICAgICAgICAgIGxldCBmb3JtYXR0ZWQgPSBsaW5lc1swXS50cmltKCkgKyAnXG4nOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxpbmVzLmxlbmd0aCAtIDE7IGkrKykgewogICAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7CiAgICAgICAgICAgICAgLy8gQWRpY2lvbmFyIGluZGVudGHDp8OjbyBleHRyYSBwYXJhIG8gY29ycG8gZGEgZnVuw6fDo28KICAgICAgICAgICAgICBmb3JtYXR0ZWQgKz0gbmV4dEluZGVudFN0ciArICcgICcgKyBsaW5lICsgJ1xuJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobGluZXMubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgIGZvcm1hdHRlZCArPSBuZXh0SW5kZW50U3RyICsgbGluZXNbbGluZXMubGVuZ3RoIC0gMV0udHJpbSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmb3JtYXR0ZWQ7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBGdW7Dp8OjbyBkZSB1bWEgbGluaGEgLSBtYW50ZXIgY29tbyBlc3TDoQogICAgICAgICAgcmV0dXJuIGZ1bmNTdHI7CiAgICAgICAgfQoKICAgICAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIC8vIEVzY2FwYXIgY2FyYWN0ZXJlcyBlc3BlY2lhaXMgZSB1c2FyIHRlbXBsYXRlIGxpdGVyYWxzIHNlIG5lY2Vzc8OhcmlvCiAgICAgICAgICBpZiAob2JqLmluY2x1ZGVzKCckeycpIHx8IG9iai5pbmNsdWRlcygnYCcpKSB7CiAgICAgICAgICAgIC8vIFVzYXIgdGVtcGxhdGUgbGl0ZXJhbAogICAgICAgICAgICBjb25zdCBlc2NhcGVkID0gb2JqLnJlcGxhY2UoL1xcL2csICdcXFxcJykucmVwbGFjZSgvYC9nLCAnXFxgJyk7CiAgICAgICAgICAgIHJldHVybiAnYCcgKyBlc2NhcGVkICsgJ2AnOwogICAgICAgICAgfQogICAgICAgICAgLy8gVXNhciBzdHJpbmcgbm9ybWFsCiAgICAgICAgICBjb25zdCBlc2NhcGVkID0gb2JqCiAgICAgICAgICAgIC5yZXBsYWNlKC9cXC9nLCAnXFxcXCcpCiAgICAgICAgICAgIC5yZXBsYWNlKC8nL2csICJcXCciKQogICAgICAgICAgICAucmVwbGFjZSgvXG4vZywgJ1xcbicpCiAgICAgICAgICAgIC5yZXBsYWNlKC9cci9nLCAnXFxyJykKICAgICAgICAgICAgLnJlcGxhY2UoL1x0L2csICdcXHQnKTsKICAgICAgICAgIHJldHVybiBgJyR7ZXNjYXBlZH0nYDsKICAgICAgICB9CgogICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiBvYmogIT09IG51bGwpIHsKICAgICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvYmopOwogICAgICAgICAgaWYgKGtleXMubGVuZ3RoID09PSAwKSByZXR1cm4gJ3t9JzsKCiAgICAgICAgICBsZXQgcmVzdWx0ID0gJ3tcbic7CiAgICAgICAgICBsZXQgdmFsaWRLZXlzID0ga2V5cy5maWx0ZXIoa2V5ID0+IHsKICAgICAgICAgICAgLy8gRmlsdHJhciBwcm9wcmllZGFkZXMgaW50ZXJuYXMgZSB1bmRlZmluZWQKICAgICAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCdfJykpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBvYmpba2V5XTsKICAgICAgICAgICAgLy8gTsOjbyBpbmNsdWlyIHByb3ByaWVkYWRlcyB1bmRlZmluZWQgKG1hcyBpbmNsdWlyIG51bGwpCiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfSk7CgogICAgICAgICAgdmFsaWRLZXlzLmZvckVhY2goKGtleSwgaWR4KSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gb2JqW2tleV07CgogICAgICAgICAgICAvLyBWYWxpZGFyIG5vbWUgZGEgY2hhdmUgKG7Do28gcG9kZSBjb21lw6dhciBjb20gbsO6bWVybyBvdSB0ZXIgY2FyYWN0ZXJlcyBlc3BlY2lhaXMgcHJvYmxlbcOhdGljb3MpCiAgICAgICAgICAgIGNvbnN0IHNhZmVLZXkgPSAvXlthLXpBLVpfJF1bYS16QS1aMC05XyRdKiQvLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSk7CgogICAgICAgICAgICAvLyBMaW1wYXIgd2lkdGhzIHNlIGZvciBhcnJheQogICAgICAgICAgICBpZiAoa2V5ID09PSAnd2lkdGhzJyAmJiBBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgICAgICAgICAgIGNvbnN0IGNsZWFuZWRXaWR0aHMgPSB2YWx1ZS5tYXAodyA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHcgPT09ICdvYmplY3QnICYmIHcgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgaWYgKHcud2lkdGggIT09IHVuZGVmaW5lZCkgcmV0dXJuIHcud2lkdGg7CiAgICAgICAgICAgICAgICAgIHJldHVybiAnKic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdzsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXN1bHQgKz0gbmV4dEluZGVudFN0ciArIGAke3NhZmVLZXl9OiAke0pTT04uc3RyaW5naWZ5KGNsZWFuZWRXaWR0aHMpfWA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29uc3QgbmV3UGF0aCA9IGN1cnJlbnRQYXRoID8gYCR7Y3VycmVudFBhdGh9LiR7a2V5fWAgOiBrZXk7CiAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZCA9IHNlcmlhbGl6ZU9iamVjdCh2YWx1ZSwgbmV4dEluZGVudCwgZmFsc2UsIG5ld1BhdGgpOwogICAgICAgICAgICAgIHJlc3VsdCArPSBuZXh0SW5kZW50U3RyICsgYCR7c2FmZUtleX06ICR7c2VyaWFsaXplZH1gOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaWR4IDwgdmFsaWRLZXlzLmxlbmd0aCAtIDEpIHJlc3VsdCArPSAnLCc7CiAgICAgICAgICAgIHJlc3VsdCArPSAnXG4nOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXN1bHQgKz0gaW5kZW50U3RyICsgJ30nOwogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIC8vIE7Dum1lcm9zLCBib29sZWFub3MsIGV0Yy4KICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKTsKICAgICAgfQoKICAgICAgLy8gQ29uc3RydWlyIGPDs2RpZ28gY29tcGxldG8gY29tIHR1ZG8gZGVudHJvIGRvIG9iamV0byBkZAogICAgICBsZXQgY29kZSA9ICdjb25zdCBkZCA9ICcgKyBzZXJpYWxpemVPYmplY3QoZGQsIDAsIGZhbHNlLCAnZGQnKSArICc7XG4nOwoKICAgICAgY29kZUVkaXRvci50ZXh0Q29udGVudCA9IGNvZGU7CgogICAgICAvLyBTYWx2YXIgY8OzZGlnbyBnZXJhZG8gbm8gbG9jYWxTdG9yYWdlCiAgICAgIHRyeSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9DT0RFX0tFWSwgY29kZSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm8gYW8gc2FsdmFyIGPDs2RpZ28gbm8gbG9jYWxTdG9yYWdlOicsIGUpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY29weUNvZGUoKSB7CiAgICAgIGNvbnN0IHRleHQgPSBjb2RlRWRpdG9yLnRleHRDb250ZW50IHx8ICcnOwogICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KS50aGVuKCgpID0+IHsKICAgICAgICBpZiAoIWNvcHlCdG4pIHJldHVybjsKICAgICAgICBjb3B5QnRuLmNsYXNzTGlzdC5hZGQoJ2NvcGllZCcpOwogICAgICAgIGNvcHlCdG4udGV4dENvbnRlbnQgPSAn4pyFIENvcGlhZG8nOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgY29weUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdjb3BpZWQnKTsKICAgICAgICAgIGNvcHlCdG4udGV4dENvbnRlbnQgPSAn8J+TiyBDb3BpYXInOwogICAgICAgIH0sIDEyMDApOwogICAgICB9KTsKICAgIH0KICAgIHdpbmRvdy5jb3B5Q29kZSA9IGNvcHlDb2RlOwoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBUYWJzIChlZGl0b3IvY29kZSkgLSBhbHJlYWR5IGluIGxheW91dAogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHN3aXRjaFRhYih0YWIpIHsKICAgICAgY29uc3QgdGFiRWRpdG9yQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYkVkaXRvcicpOwogICAgICBjb25zdCB0YWJQYWdlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYlBhZ2UnKTsKICAgICAgY29uc3QgdGFiQ29kZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJDb2RlJyk7CiAgICAgIGNvbnN0IGNvbnRlbnRFZGl0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFiQ29udGVudEVkaXRvcicpOwogICAgICBjb25zdCBjb250ZW50UGFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJDb250ZW50UGFnZScpOwogICAgICBjb25zdCBjb250ZW50Q29kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJDb250ZW50Q29kZScpOwoKICAgICAgLy8gSWYgdHJ5aW5nIHRvIHN3aXRjaCB0byAnY29kZScgdGFiIGFuZCBubyBlbGVtZW50cyBleGlzdCwgcHJldmVudCBpdAogICAgICBpZiAodGFiID09PSAnY29kZScgJiYgIWhhc0FueVZhbGlkRWxlbWVudHMoKSkgewogICAgICAgIHNob3dBbGVydE1vZGFsKCdBdmlzbycsICdBZGljaW9uZSBwZWxvIG1lbm9zIHVtIGVsZW1lbnRvIGFvIGNhbnZhcyBwYXJhIHZpc3VhbGl6YXIgbyBjw7NkaWdvLicpOwogICAgICAgIHJldHVybjsgLy8gUHJldmVudCB0YWIgc3dpdGNoCiAgICAgIH0KCiAgICAgIC8vIFJlbW92ZXIgYWN0aXZlIGRlIHRvZG9zCiAgICAgIFt0YWJFZGl0b3JCdG4sIHRhYlBhZ2VCdG4sIHRhYkNvZGVCdG5dLmZvckVhY2goYnRuID0+IGJ0bj8uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOwogICAgICBbY29udGVudEVkaXRvciwgY29udGVudFBhZ2UsIGNvbnRlbnRDb2RlXS5mb3JFYWNoKGNvbnRlbnQgPT4gY29udGVudD8uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOwoKICAgICAgaWYgKHRhYiA9PT0gJ2NvZGUnKSB7CiAgICAgICAgdGFiQ29kZUJ0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICBjb250ZW50Q29kZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICB1cGRhdGVDb2RlKCk7CiAgICAgIH0gZWxzZSBpZiAodGFiID09PSAncGFnZScpIHsKICAgICAgICB0YWJQYWdlQnRuLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgIGNvbnRlbnRQYWdlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgIHJlbmRlclBhZ2VJbnNwZWN0b3IoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0YWJFZGl0b3JCdG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgY29udGVudEVkaXRvci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgfQogICAgfQoKICAgIC8vIFJlbmRlcml6YXIgUGFnZSBJbnNwZWN0b3IgKGNvbWJpbmEgVE9DLCBIZWFkZXIvRm9vdGVyIGUgV2F0ZXJtYXJrKQogICAgZnVuY3Rpb24gcmVuZGVyUGFnZUluc3BlY3RvcigpIHsKICAgICAgY29uc3QgaW5zcGVjdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2VJbnNwZWN0b3InKTsKICAgICAgaWYgKCFpbnNwZWN0b3IpIHJldHVybjsKCiAgICAgIC8vIENvbWJpbmFyIG9zIDMgY29udGXDumRvcyBlbSB1bWEgw7puaWNhIHDDoWdpbmEKICAgICAgaW5zcGVjdG9yLmlubmVySFRNTCA9IGAKICAgICAgICA8IS0tIFNlw6fDo28gMTogw41uZGljZSAoVE9DKSAtLT4KICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOiAycmVtOyI+CiAgICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbi1ib3R0b206IDFyZW07IGZvbnQtc2l6ZTogMS4xMjVyZW07IGZvbnQtd2VpZ2h0OiA2MDA7IGNvbG9yOiAjMjU2M2ViOyI+8J+TkSDDjW5kaWNlIChUYWJsZSBvZiBDb250ZW50cyk8L2gzPgogICAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDAuNXJlbTsgZm9udC13ZWlnaHQ6IDUwMDsiPgogICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InRvY0VuYWJsZWQiICR7ZG9jdW1lbnRUT0M/LmVuYWJsZWQgPyAnY2hlY2tlZCcgOiAnJ30gc3R5bGU9IndpZHRoOiAxOHB4OyBoZWlnaHQ6IDE4cHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgIDxzcGFuPkhhYmlsaXRhciDDjW5kaWNlPC9zcGFuPgogICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiPk1hcnF1ZSBlbGVtZW50b3MgY29tbyAiVE9DIiBubyBlZGl0b3IgcGFyYSBpbmNsdcOtLWxvcyBubyDDrW5kaWNlPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgaWQ9InRvY09wdGlvbnMiIHN0eWxlPSIke2RvY3VtZW50VE9DPy5lbmFibGVkID8gJycgOiAnZGlzcGxheTogbm9uZTsnfSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICAgICAgPGxhYmVsPlTDrXR1bG8gZG8gw41uZGljZTwvbGFiZWw+CiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJ0b2NUaXRsZSIgdmFsdWU9IiR7ZXNjYXBlSHRtbChkb2N1bWVudFRPQz8udGl0bGUgfHwgJ8ONbmRpY2UnKX0iPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJwYWRkaW5nOiAwLjc1cmVtOyBiYWNrZ3JvdW5kOiAjZGJlYWZlOyBib3JkZXItbGVmdDogM3B4IHNvbGlkICMyNTYzZWI7IG1hcmdpbi1ib3R0b206IDFyZW07IGJvcmRlci1yYWRpdXM6IDAuMjVyZW07IGNvbG9yOiAjMWU0MGFmOyI+CiAgICAgICAgICAgICAgICA8c3Ryb25nPvCfkqEgQ29tbyB1c2FyOjwvc3Ryb25nPjxicj4KICAgICAgICAgICAgICAgIOKAoiBTZWxlY2lvbmUgdW0gZWxlbWVudG8gKHRleHQsIGhlYWRlcikgbm8gY2FudmFzPGJyPgogICAgICAgICAgICAgICAg4oCiIE5vIGVkaXRvciwgbWFycXVlIGEgb3DDp8OjbyAiSW5jbHVpciBubyDDjW5kaWNlIjxicj4KICAgICAgICAgICAgICAgIOKAoiBPIGVsZW1lbnRvIGFwYXJlY2Vyw6EgYXV0b21hdGljYW1lbnRlIG5vIMOtbmRpY2UKICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8IS0tIFNlcGFyYWRvciAtLT4KICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW46IDJyZW0gMDsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlNWU3ZWI7Ij48L2Rpdj4KICAgICAgICAKICAgICAgICA8IS0tIFNlw6fDo28gMjogSGVhZGVyL0Zvb3RlciAtLT4KICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOiAycmVtOyI+CiAgICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbi1ib3R0b206IDFyZW07IGZvbnQtc2l6ZTogMS4xMjVyZW07IGZvbnQtd2VpZ2h0OiA2MDA7IGNvbG9yOiAjMjU2M2ViOyI+8J+ThCBDYWJlw6dhbGhvIGUgUm9kYXDDqTwvaDM+CiAgICAgICAgICAKICAgICAgICAgIDwhLS0gSGVhZGVyIFRvZ2dsZSAtLT4KICAgICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAwLjVyZW07IGZvbnQtd2VpZ2h0OiA1MDA7Ij4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJoZWFkZXJFbmFibGVkIiAke2RvY3VtZW50SGVhZGVyPy5lbmFibGVkID8gJ2NoZWNrZWQnIDogJyd9IHN0eWxlPSJ3aWR0aDogMThweDsgaGVpZ2h0OiAxOHB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICA8c3Bhbj5BdGl2YXIgQ2FiZcOnYWxobzwvc3Bhbj4KICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIj5RdWFuZG8gYXRpdmFkbywgdW1hIMOhcmVhIGRlIGNhYmXDp2FsaG8gYXBhcmVjZXLDoSBubyB0b3BvIGRvIGNhbnZhcy4gQXJyYXN0ZSBlbGVtZW50b3MgcGFyYSBkZW50cm8gZGVsYS48L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgCiAgICAgICAgICA8ZGl2IGlkPSJoZWFkZXJPcHRpb25zIiBzdHlsZT0iJHtkb2N1bWVudEhlYWRlcj8uZW5hYmxlZCA/ICcnIDogJ2Rpc3BsYXk6IG5vbmU7J30iPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5BbHR1cmEgRXN0aW1hZGEgKHB4KTwvbGFiZWw+CiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImhlYWRlckhlaWdodCIgdmFsdWU9IiR7ZG9jdW1lbnRIZWFkZXI/LmhlaWdodCB8fCA2MH0iIG1pbj0iMjAiIG1heD0iMjAwIj4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiPlVzYWRvIHBhcmEgY2FsY3VsYXIgYXMgbWFyZ2VucyBkYSBww6FnaW5hIGF1dG9tYXRpY2FtZW50ZTwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJwYWRkaW5nOiAwLjc1cmVtOyBiYWNrZ3JvdW5kOiAjZGJlYWZlOyBib3JkZXItbGVmdDogM3B4IHNvbGlkICMyNTYzZWI7IG1hcmdpbi1ib3R0b206IDFyZW07IGJvcmRlci1yYWRpdXM6IDAuMjVyZW07IGNvbG9yOiAjMWU0MGFmOyI+CiAgICAgICAgICAgICAgICA8c3Ryb25nPvCfkqEgRGljYTo8L3N0cm9uZz4gQXJyYXN0ZSB1bSBlbGVtZW50byBkZSB0ZXh0byBwYXJhIG8gY2FiZcOnYWxobyBlIHVzZSA8Y29kZT57e3BhZ2VOdW1iZXJ9fTwvY29kZT4gcGFyYSBuw7ptZXJvIGRhIHDDoWdpbmEgYXR1YWwgZSA8Y29kZT57e3RvdGFsUGFnZXN9fTwvY29kZT4gcGFyYSB0b3RhbCBkZSBww6FnaW5hcy4gRXhlbXBsbzogIlDDoWdpbmEge3twYWdlTnVtYmVyfX0gZGUge3t0b3RhbFBhZ2VzfX0iCiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJjbGVhckhlYWRlcigpIiBzdHlsZT0id2lkdGg6IDEwMCU7IHBhZGRpbmc6IDAuNzVyZW07IGJhY2tncm91bmQ6ICNlZjQ0NDQ7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgY3Vyc29yOiBwb2ludGVyOyI+CiAgICAgICAgICAgICAgICDwn5eR77iPIExpbXBhciBDYWJlw6dhbGhvCiAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICAKICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDEuNXJlbTsgcGFkZGluZy10b3A6IDEuNXJlbTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlNWU3ZWI7Ij4KICAgICAgICAgICAgPCEtLSBGb290ZXIgVG9nZ2xlIC0tPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAwLjVyZW07IGZvbnQtd2VpZ2h0OiA1MDA7Ij4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImZvb3RlckVuYWJsZWQiICR7ZG9jdW1lbnRGb290ZXI/LmVuYWJsZWQgPyAnY2hlY2tlZCcgOiAnJ30gc3R5bGU9IndpZHRoOiAxOHB4OyBoZWlnaHQ6IDE4cHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgPHNwYW4+QXRpdmFyIFJvZGFww6k8L3NwYW4+CiAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiPlF1YW5kbyBhdGl2YWRvLCB1bWEgw6FyZWEgZGUgcm9kYXDDqSBhcGFyZWNlcsOhIG5hIHBhcnRlIGluZmVyaW9yIGRvIGNhbnZhcy4gQXJyYXN0ZSBlbGVtZW50b3MgcGFyYSBkZW50cm8gZGVsYS48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGlkPSJmb290ZXJPcHRpb25zIiBzdHlsZT0iJHtkb2N1bWVudEZvb3Rlcj8uZW5hYmxlZCA/ICcnIDogJ2Rpc3BsYXk6IG5vbmU7J30iPgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+QWx0dXJhIEVzdGltYWRhIChweCk8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImZvb3RlckhlaWdodCIgdmFsdWU9IiR7ZG9jdW1lbnRGb290ZXI/LmhlaWdodCB8fCA2MH0iIG1pbj0iMjAiIG1heD0iMjAwIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSI+VXNhZG8gcGFyYSBjYWxjdWxhciBhcyBtYXJnZW5zIGRhIHDDoWdpbmEgYXV0b21hdGljYW1lbnRlPC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSIgc3R5bGU9InBhZGRpbmc6IDAuNzVyZW07IGJhY2tncm91bmQ6ICNkYmVhZmU7IGJvcmRlci1sZWZ0OiAzcHggc29saWQgIzI1NjNlYjsgbWFyZ2luLWJvdHRvbTogMXJlbTsgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsgY29sb3I6ICMxZTQwYWY7Ij4KICAgICAgICAgICAgICAgICAgPHN0cm9uZz7wn5KhIERpY2E6PC9zdHJvbmc+IEFycmFzdGUgdW0gZWxlbWVudG8gZGUgdGV4dG8gcGFyYSBvIHJvZGFww6kgZSB1c2UgPGNvZGU+e3twYWdlTnVtYmVyfX08L2NvZGU+IHBhcmEgbsO6bWVybyBkYSBww6FnaW5hIGF0dWFsIGUgPGNvZGU+e3t0b3RhbFBhZ2VzfX08L2NvZGU+IHBhcmEgdG90YWwgZGUgcMOhZ2luYXMuIEV4ZW1wbG86ICJQw6FnaW5hIHt7cGFnZU51bWJlcn19IGRlIHt7dG90YWxQYWdlc319IgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJjbGVhckZvb3RlcigpIiBzdHlsZT0id2lkdGg6IDEwMCU7IHBhZGRpbmc6IDAuNzVyZW07IGJhY2tncm91bmQ6ICNlZjQ0NDQ7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgY3Vyc29yOiBwb2ludGVyOyI+CiAgICAgICAgICAgICAgICAgIPCfl5HvuI8gTGltcGFyIFJvZGFww6kKICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIAogICAgICAgIDwhLS0gU2VwYXJhZG9yIC0tPgogICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbjogMnJlbSAwOyBib3JkZXItdG9wOiAxcHggc29saWQgI2U1ZTdlYjsiPjwvZGl2PgogICAgICAgIAogICAgICAgIDwhLS0gU2XDp8OjbyAzOiBXYXRlcm1hcmsgLS0+CiAgICAgICAgPGRpdj4KICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMXJlbTsgZm9udC1zaXplOiAxLjEyNXJlbTsgZm9udC13ZWlnaHQ6IDYwMDsgY29sb3I6ICMyNTYzZWI7Ij7wn5KnIE1hcmNhIGQnw4FndWEgKFdhdGVybWFyayk8L2gzPgogICAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgICAgPGxhYmVsPlRleHRvIGRhIE1hcmNhIGQnw4FndWE8L2xhYmVsPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9IndhdGVybWFya1RleHQiIHZhbHVlPSIke2VzY2FwZUh0bWwoZG9jdW1lbnRXYXRlcm1hcms/LnRleHQgfHwgJycpfSIgcGxhY2Vob2xkZXI9IkV4OiBDT05GSURFTkNJQUwiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiPkRlaXhlIHZhemlvIHBhcmEgZGVzYWJpbGl0YXIgYSBtYXJjYSBkJ8OhZ3VhPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5UYW1hbmhvIGRhIEZvbnRlPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJ3YXRlcm1hcmtGb250U2l6ZSIgdmFsdWU9IiR7ZG9jdW1lbnRXYXRlcm1hcms/LmZvbnRTaXplIHx8IDQ4fSIgbWluPSIxMiIgbWF4PSIyMDAiPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+Q29yPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogMC41cmVtOyBhbGlnbi1pdGVtczogY2VudGVyOyI+CiAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjb2xvciIgaWQ9IndhdGVybWFya0NvbG9yIiB2YWx1ZT0iJHtkb2N1bWVudFdhdGVybWFyaz8uY29sb3IgfHwgJyNjY2NjY2MnfSIgc3R5bGU9IndpZHRoOiA1MHB4OyBoZWlnaHQ6IDMycHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9IndhdGVybWFya0NvbG9yVGV4dCIgdmFsdWU9IiR7ZG9jdW1lbnRXYXRlcm1hcms/LmNvbG9yIHx8ICcjY2NjY2NjJ30iIHBsYWNlaG9sZGVyPSIjY2NjY2NjIiBzdHlsZT0iZmxleDogMTsgZm9udC1zaXplOiAwLjg3NXJlbTsiPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+T3BhY2lkYWRlICgwLjAgLSAxLjApPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJ3YXRlcm1hcmtPcGFjaXR5IiB2YWx1ZT0iJHtkb2N1bWVudFdhdGVybWFyaz8ub3BhY2l0eSB8fCAwLjN9IiBtaW49IjAiIG1heD0iMSIgc3RlcD0iMC4xIj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPsOCbmd1bG8gKGdyYXVzKTwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0id2F0ZXJtYXJrQW5nbGUiIHZhbHVlPSIke2RvY3VtZW50V2F0ZXJtYXJrPy5hbmdsZSB8fCAtNDV9IiBtaW49Ii0xODAiIG1heD0iMTgwIiBzdGVwPSIxIj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJjbGVhcldhdGVybWFyaygpIiBzdHlsZT0id2lkdGg6IDEwMCU7IHBhZGRpbmc6IDAuNzVyZW07IGJhY2tncm91bmQ6ICNlZjQ0NDQ7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgY3Vyc29yOiBwb2ludGVyOyI+CiAgICAgICAgICAgICAg8J+Xke+4jyBSZW1vdmVyIE1hcmNhIGQnw4FndWEKICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8IS0tIFNlcGFyYWRvciAtLT4KICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW46IDJyZW0gMDsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlNWU3ZWI7Ij48L2Rpdj4KICAgICAgICAKICAgICAgICA8IS0tIFNlw6fDo28gNDogU2VjdXJpdHkgLS0+CiAgICAgICAgPGRpdj4KICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMXJlbTsgZm9udC1zaXplOiAxLjEyNXJlbTsgZm9udC13ZWlnaHQ6IDYwMDsgY29sb3I6ICMyNTYzZWI7Ij7wn5SSIFNlZ3VyYW7Dp2EgZG8gUERGPC9oMz4KICAgICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAwLjVyZW07IGZvbnQtd2VpZ2h0OiA1MDA7Ij4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJzZWN1cml0eUVuYWJsZWQiICR7ZG9jdW1lbnRTZWN1cml0eT8uZW5hYmxlZCA/ICdjaGVja2VkJyA6ICcnfSBzdHlsZT0id2lkdGg6IDE4cHg7IGhlaWdodDogMThweDsgY3Vyc29yOiBwb2ludGVyOyI+CiAgICAgICAgICAgICAgPHNwYW4+SGFiaWxpdGFyIFByb3Rlw6fDo28gcG9yIFNlbmhhPC9zcGFuPgogICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiPkFkaWNpb25lIHNlbmhhcyBlIHBlcm1pc3PDtWVzIHBhcmEgcHJvdGVnZXIgbyBQREY8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBpZD0ic2VjdXJpdHlPcHRpb25zIiBzdHlsZT0iJHtkb2N1bWVudFNlY3VyaXR5Py5lbmFibGVkID8gJycgOiAnZGlzcGxheTogbm9uZTsnfSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICAgICAgPGxhYmVsPlNlbmhhIGRvIFVzdcOhcmlvPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIGlkPSJzZWN1cml0eVVzZXJQYXNzd29yZCIgdmFsdWU9IiR7ZXNjYXBlSHRtbChkb2N1bWVudFNlY3VyaXR5Py51c2VyUGFzc3dvcmQgfHwgJycpfSIgcGxhY2Vob2xkZXI9IlNlbmhhIHBhcmEgYWJyaXIgbyBQREYiPgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSI+U2VuaGEgbmVjZXNzw6FyaWEgcGFyYSBhYnJpciBlIHZpc3VhbGl6YXIgbyBQREY8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICAgICAgPGxhYmVsPlNlbmhhIGRvIFByb3ByaWV0w6FyaW88L2xhYmVsPgogICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJwYXNzd29yZCIgaWQ9InNlY3VyaXR5T3duZXJQYXNzd29yZCIgdmFsdWU9IiR7ZXNjYXBlSHRtbChkb2N1bWVudFNlY3VyaXR5Py5vd25lclBhc3N3b3JkIHx8ICcnKX0iIHBsYWNlaG9sZGVyPSJTZW5oYSBwYXJhIG1vZGlmaWNhciBwZXJtaXNzw7VlcyI+CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIj5TZW5oYSBwYXJhIG1vZGlmaWNhciBwZXJtaXNzw7VlcyAoZGVpeGUgdmF6aW8gcGFyYSB1c2FyIGEgbWVzbWEgc2VuaGEgZG8gdXN1w6FyaW8pPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMC43NXJlbTsgZGlzcGxheTogYmxvY2s7IGZvbnQtd2VpZ2h0OiA1MDA7Ij5QZXJtaXNzw7VlczwvbGFiZWw+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgZ2FwOiAwLjVyZW07Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAwLjVyZW07IGZvbnQtd2VpZ2h0OiA1MDA7Ij4KICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0ic2VjdXJpdHlQcmludGluZyIgJHtkb2N1bWVudFNlY3VyaXR5Py5wZXJtaXNzaW9ucz8ucHJpbnRpbmcgIT09IGZhbHNlID8gJ2NoZWNrZWQnIDogJyd9IHN0eWxlPSJ3aWR0aDogMThweDsgaGVpZ2h0OiAxOHB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgPHNwYW4+UGVybWl0aXIgSW1wcmVzc8Ojbzwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMC41cmVtOyBmb250LXdlaWdodDogNTAwOyI+CiAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InNlY3VyaXR5TW9kaWZ5aW5nIiAke2RvY3VtZW50U2VjdXJpdHk/LnBlcm1pc3Npb25zPy5tb2RpZnlpbmcgIT09IGZhbHNlID8gJ2NoZWNrZWQnIDogJyd9IHN0eWxlPSJ3aWR0aDogMThweDsgaGVpZ2h0OiAxOHB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgPHNwYW4+UGVybWl0aXIgTW9kaWZpY2HDp8Ojbzwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMC41cmVtOyBmb250LXdlaWdodDogNTAwOyI+CiAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InNlY3VyaXR5Q29weWluZyIgJHtkb2N1bWVudFNlY3VyaXR5Py5wZXJtaXNzaW9ucz8uY29weWluZyAhPT0gZmFsc2UgPyAnY2hlY2tlZCcgOiAnJ30gc3R5bGU9IndpZHRoOiAxOHB4OyBoZWlnaHQ6IDE4cHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgICA8c3Bhbj5QZXJtaXRpciBDw7NwaWE8L3NwYW4+CiAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDAuNXJlbTsgZm9udC13ZWlnaHQ6IDUwMDsiPgogICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJzZWN1cml0eUFubm90YXRpbmciICR7ZG9jdW1lbnRTZWN1cml0eT8ucGVybWlzc2lvbnM/LmFubm90YXRpbmcgIT09IGZhbHNlID8gJ2NoZWNrZWQnIDogJyd9IHN0eWxlPSJ3aWR0aDogMThweDsgaGVpZ2h0OiAxOHB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgPHNwYW4+UGVybWl0aXIgQW5vdGHDp8O1ZXM8L3NwYW4+CiAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiIHN0eWxlPSJwYWRkaW5nOiAwLjc1cmVtOyBiYWNrZ3JvdW5kOiAjZmVmM2M3OyBib3JkZXItbGVmdDogM3B4IHNvbGlkICNmNTllMGI7IG1hcmdpbi1ib3R0b206IDFyZW07IGJvcmRlci1yYWRpdXM6IDAuMjVyZW07IGNvbG9yOiAjOTI0MDBlOyI+CiAgICAgICAgICAgICAgICA8c3Ryb25nPuKaoO+4jyBBdmlzbzo8L3N0cm9uZz4gQXMgc2VuaGFzIG7Do28gcG9kZW0gc2VyIHJlY3VwZXJhZGFzLiBDZXJ0aWZpcXVlLXNlIGRlIGd1YXJkw6EtbGFzIGVtIGxvY2FsIHNlZ3Vyby4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8IS0tIFNlcGFyYWRvciAtLT4KICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW46IDJyZW0gMDsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlNWU3ZWI7Ij48L2Rpdj4KICAgICAgICAKICAgICAgICA8IS0tIFNlw6fDo28gNTogTWV0YWRhZG9zIGUgQ29tcHJlc3PDo28gLS0+CiAgICAgICAgPGRpdj4KICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMXJlbTsgZm9udC1zaXplOiAxLjEyNXJlbTsgZm9udC13ZWlnaHQ6IDYwMDsgY29sb3I6ICMyNTYzZWI7Ij7wn5OLIE1ldGFkYWRvcyBkbyBQREY8L2gzPgogICAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgICAgPGxhYmVsPkF1dG9yPC9sYWJlbD4KICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJwYWdlSW5mb0F1dGhvciIgdmFsdWU9IiR7ZXNjYXBlSHRtbChkb2N1bWVudFBhZ2VJbmZvPy5hdXRob3IgfHwgJycpfSIgcGxhY2Vob2xkZXI9Ik5vbWUgZG8gYXV0b3IiPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICA8bGFiZWw+VMOtdHVsbzwvbGFiZWw+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0icGFnZUluZm9UaXRsZSIgdmFsdWU9IiR7ZXNjYXBlSHRtbChkb2N1bWVudFBhZ2VJbmZvPy50aXRsZSB8fCAnJyl9IiBwbGFjZWhvbGRlcj0iVMOtdHVsbyBkbyBkb2N1bWVudG8iPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICA8bGFiZWw+QXNzdW50bzwvbGFiZWw+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0icGFnZUluZm9TdWJqZWN0IiB2YWx1ZT0iJHtlc2NhcGVIdG1sKGRvY3VtZW50UGFnZUluZm8/LnN1YmplY3QgfHwgJycpfSIgcGxhY2Vob2xkZXI9IkFzc3VudG8gZG8gZG9jdW1lbnRvIj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgICAgPGxhYmVsPlBhbGF2cmFzLWNoYXZlPC9sYWJlbD4KICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJwYWdlSW5mb0tleXdvcmRzIiB2YWx1ZT0iJHtlc2NhcGVIdG1sKGRvY3VtZW50UGFnZUluZm8/LmtleXdvcmRzIHx8ICcnKX0iIHBsYWNlaG9sZGVyPSJwYWxhdnJhMSwgcGFsYXZyYTIsIHBhbGF2cmEzIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIj5TZXBhcmUgbcO6bHRpcGxhcyBwYWxhdnJhcy1jaGF2ZSBjb20gdsOtcmd1bGFzPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIAogICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogMS41cmVtOyBwYWRkaW5nLXRvcDogMS41cmVtOyBib3JkZXItdG9wOiAxcHggc29saWQgI2U1ZTdlYjsiPgogICAgICAgICAgICA8aDQgc3R5bGU9Im1hcmdpbi1ib3R0b206IDAuNzVyZW07IGZvbnQtc2l6ZTogMXJlbTsgZm9udC13ZWlnaHQ6IDUwMDsgY29sb3I6ICMzNzQxNTE7Ij5Db21wcmVzc8OjbzwvaDQ+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDAuNXJlbTsgZm9udC13ZWlnaHQ6IDUwMDsiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0icGFnZUNvbXByZXNzIiAke2RvY3VtZW50Q29tcHJlc3MgPyAnY2hlY2tlZCcgOiAnJ30gc3R5bGU9IndpZHRoOiAxOHB4OyBoZWlnaHQ6IDE4cHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgPHNwYW4+Q29tcHJpbWlyIFBERjwvc3Bhbj4KICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsTm90ZSI+UmVkdXogbyB0YW1hbmhvIGRvIGFycXVpdm8gUERGIGdlcmFkbyAocG9kZSBhdW1lbnRhciBvIHRlbXBvIGRlIGdlcmHDp8Ojbyk8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgYDsKCiAgICAgIC8vIEF0dGFjaCB0b2RvcyBvcyBsaXN0ZW5lcnMKICAgICAgYXR0YWNoVE9DTGlzdGVuZXJzKCk7CiAgICAgIGF0dGFjaEhlYWRlckZvb3Rlckxpc3RlbmVycygpOwogICAgICBhdHRhY2hXYXRlcm1hcmtMaXN0ZW5lcnMoKTsKICAgICAgYXR0YWNoU2VjdXJpdHlMaXN0ZW5lcnMoKTsKICAgICAgYXR0YWNoUGFnZUluZm9MaXN0ZW5lcnMoKTsKICAgIH0KCiAgICAvLyBBdHRhY2ggbGlzdGVuZXJzIHBhcmEgVE9DCiAgICBmdW5jdGlvbiBhdHRhY2hUT0NMaXN0ZW5lcnMoKSB7CiAgICAgIGNvbnN0IHRvY0VuYWJsZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9jRW5hYmxlZCcpOwogICAgICBjb25zdCB0b2NUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2NUaXRsZScpOwogICAgICBjb25zdCB0b2NPcHRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvY09wdGlvbnMnKTsKCiAgICAgIGlmICh0b2NFbmFibGVkKSB7CiAgICAgICAgdG9jRW5hYmxlZC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICBpZiAoIWRvY3VtZW50VE9DKSBkb2N1bWVudFRPQyA9IHt9OwogICAgICAgICAgZG9jdW1lbnRUT0MuZW5hYmxlZCA9IHRvY0VuYWJsZWQuY2hlY2tlZDsKICAgICAgICAgIGlmICh0b2NPcHRpb25zKSB0b2NPcHRpb25zLnN0eWxlLmRpc3BsYXkgPSBkb2N1bWVudFRPQy5lbmFibGVkID8gJycgOiAnbm9uZSc7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICh0b2NUaXRsZSkgewogICAgICAgIHRvY1RpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgaWYgKCFkb2N1bWVudFRPQykgZG9jdW1lbnRUT0MgPSB7fTsKICAgICAgICAgIGRvY3VtZW50VE9DLnRpdGxlID0gdG9jVGl0bGUudmFsdWUudHJpbSgpIHx8ICfDjW5kaWNlJzsKICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIC8vIEF0dGFjaCBsaXN0ZW5lcnMgcGFyYSBXYXRlcm1hcmsgKGFwZW5hcyB0ZXh0bykKICAgIGZ1bmN0aW9uIGF0dGFjaFdhdGVybWFya0xpc3RlbmVycygpIHsKICAgICAgY29uc3Qgd2F0ZXJtYXJrVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXRlcm1hcmtUZXh0Jyk7CiAgICAgIGNvbnN0IHdhdGVybWFya0ZvbnRTaXplID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhdGVybWFya0ZvbnRTaXplJyk7CiAgICAgIGNvbnN0IHdhdGVybWFya0NvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhdGVybWFya0NvbG9yJyk7CiAgICAgIGNvbnN0IHdhdGVybWFya0NvbG9yVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXRlcm1hcmtDb2xvclRleHQnKTsKICAgICAgY29uc3Qgd2F0ZXJtYXJrT3BhY2l0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXRlcm1hcmtPcGFjaXR5Jyk7CiAgICAgIGNvbnN0IHdhdGVybWFya0FuZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhdGVybWFya0FuZ2xlJyk7CgogICAgICBpZiAod2F0ZXJtYXJrVGV4dCkgewogICAgICAgIHdhdGVybWFya1RleHQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICBjb25zdCB0ZXh0ID0gd2F0ZXJtYXJrVGV4dC52YWx1ZS50cmltKCk7CiAgICAgICAgICBpZiAodGV4dCkgewogICAgICAgICAgICBpZiAoIWRvY3VtZW50V2F0ZXJtYXJrKSBkb2N1bWVudFdhdGVybWFyayA9IHt9OwogICAgICAgICAgICBkb2N1bWVudFdhdGVybWFyay50ZXh0ID0gdGV4dDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRvY3VtZW50V2F0ZXJtYXJrID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHdhdGVybWFya0ZvbnRTaXplKSB7CiAgICAgICAgd2F0ZXJtYXJrRm9udFNpemUuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICBpZiAoIWRvY3VtZW50V2F0ZXJtYXJrKSBkb2N1bWVudFdhdGVybWFyayA9IHt9OwogICAgICAgICAgZG9jdW1lbnRXYXRlcm1hcmsuZm9udFNpemUgPSBwYXJzZUludCh3YXRlcm1hcmtGb250U2l6ZS52YWx1ZSkgfHwgNDg7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICh3YXRlcm1hcmtDb2xvciAmJiB3YXRlcm1hcmtDb2xvclRleHQpIHsKICAgICAgICB3YXRlcm1hcmtDb2xvci5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgIHdhdGVybWFya0NvbG9yVGV4dC52YWx1ZSA9IHdhdGVybWFya0NvbG9yLnZhbHVlOwogICAgICAgICAgaWYgKCFkb2N1bWVudFdhdGVybWFyaykgZG9jdW1lbnRXYXRlcm1hcmsgPSB7fTsKICAgICAgICAgIGRvY3VtZW50V2F0ZXJtYXJrLmNvbG9yID0gd2F0ZXJtYXJrQ29sb3IudmFsdWU7CiAgICAgICAgfSk7CiAgICAgICAgd2F0ZXJtYXJrQ29sb3JUZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgaWYgKC9eI1swLTlBLUZdezZ9JC9pLnRlc3Qod2F0ZXJtYXJrQ29sb3JUZXh0LnZhbHVlKSkgewogICAgICAgICAgICB3YXRlcm1hcmtDb2xvci52YWx1ZSA9IHdhdGVybWFya0NvbG9yVGV4dC52YWx1ZTsKICAgICAgICAgICAgaWYgKCFkb2N1bWVudFdhdGVybWFyaykgZG9jdW1lbnRXYXRlcm1hcmsgPSB7fTsKICAgICAgICAgICAgZG9jdW1lbnRXYXRlcm1hcmsuY29sb3IgPSB3YXRlcm1hcmtDb2xvclRleHQudmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICh3YXRlcm1hcmtPcGFjaXR5KSB7CiAgICAgICAgd2F0ZXJtYXJrT3BhY2l0eS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgIGlmICghZG9jdW1lbnRXYXRlcm1hcmspIGRvY3VtZW50V2F0ZXJtYXJrID0ge307CiAgICAgICAgICBkb2N1bWVudFdhdGVybWFyay5vcGFjaXR5ID0gcGFyc2VGbG9hdCh3YXRlcm1hcmtPcGFjaXR5LnZhbHVlKSB8fCAwLjM7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICh3YXRlcm1hcmtBbmdsZSkgewogICAgICAgIHdhdGVybWFya0FuZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgaWYgKCFkb2N1bWVudFdhdGVybWFyaykgZG9jdW1lbnRXYXRlcm1hcmsgPSB7fTsKICAgICAgICAgIGRvY3VtZW50V2F0ZXJtYXJrLmFuZ2xlID0gcGFyc2VJbnQod2F0ZXJtYXJrQW5nbGUudmFsdWUpIHx8IC00NTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNsZWFyV2F0ZXJtYXJrKCkgewogICAgICBkb2N1bWVudFdhdGVybWFyayA9IG51bGw7CiAgICAgIHJlbmRlclBhZ2VJbnNwZWN0b3IoKTsKICAgIH0KICAgIHdpbmRvdy5jbGVhcldhdGVybWFyayA9IGNsZWFyV2F0ZXJtYXJrOwoKICAgIC8vIEF0dGFjaCBsaXN0ZW5lcnMgcGFyYSBTZWN1cml0eQogICAgZnVuY3Rpb24gYXR0YWNoU2VjdXJpdHlMaXN0ZW5lcnMoKSB7CiAgICAgIGNvbnN0IHNlY3VyaXR5RW5hYmxlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWN1cml0eUVuYWJsZWQnKTsKICAgICAgY29uc3Qgc2VjdXJpdHlVc2VyUGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VjdXJpdHlVc2VyUGFzc3dvcmQnKTsKICAgICAgY29uc3Qgc2VjdXJpdHlPd25lclBhc3N3b3JkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY3VyaXR5T3duZXJQYXNzd29yZCcpOwogICAgICBjb25zdCBzZWN1cml0eVByaW50aW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY3VyaXR5UHJpbnRpbmcnKTsKICAgICAgY29uc3Qgc2VjdXJpdHlNb2RpZnlpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VjdXJpdHlNb2RpZnlpbmcnKTsKICAgICAgY29uc3Qgc2VjdXJpdHlDb3B5aW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY3VyaXR5Q29weWluZycpOwogICAgICBjb25zdCBzZWN1cml0eUFubm90YXRpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VjdXJpdHlBbm5vdGF0aW5nJyk7CiAgICAgIGNvbnN0IHNlY3VyaXR5T3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWN1cml0eU9wdGlvbnMnKTsKCiAgICAgIGlmIChzZWN1cml0eUVuYWJsZWQpIHsKICAgICAgICBzZWN1cml0eUVuYWJsZWQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgaWYgKCFkb2N1bWVudFNlY3VyaXR5KSBkb2N1bWVudFNlY3VyaXR5ID0ge307CiAgICAgICAgICBkb2N1bWVudFNlY3VyaXR5LmVuYWJsZWQgPSBzZWN1cml0eUVuYWJsZWQuY2hlY2tlZDsKICAgICAgICAgIGlmIChzZWN1cml0eU9wdGlvbnMpIHNlY3VyaXR5T3B0aW9ucy5zdHlsZS5kaXNwbGF5ID0gZG9jdW1lbnRTZWN1cml0eS5lbmFibGVkID8gJycgOiAnbm9uZSc7CiAgICAgICAgICBpZiAoIWRvY3VtZW50U2VjdXJpdHkuZW5hYmxlZCkgZG9jdW1lbnRTZWN1cml0eSA9IG51bGw7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChzZWN1cml0eVVzZXJQYXNzd29yZCkgewogICAgICAgIHNlY3VyaXR5VXNlclBhc3N3b3JkLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgaWYgKCFkb2N1bWVudFNlY3VyaXR5KSBkb2N1bWVudFNlY3VyaXR5ID0ge307CiAgICAgICAgICBkb2N1bWVudFNlY3VyaXR5LnVzZXJQYXNzd29yZCA9IHNlY3VyaXR5VXNlclBhc3N3b3JkLnZhbHVlOwogICAgICAgICAgaWYgKCFkb2N1bWVudFNlY3VyaXR5LnVzZXJQYXNzd29yZCAmJiAhZG9jdW1lbnRTZWN1cml0eS5vd25lclBhc3N3b3JkKSBkb2N1bWVudFNlY3VyaXR5ID0gbnVsbDsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHNlY3VyaXR5T3duZXJQYXNzd29yZCkgewogICAgICAgIHNlY3VyaXR5T3duZXJQYXNzd29yZC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgIGlmICghZG9jdW1lbnRTZWN1cml0eSkgZG9jdW1lbnRTZWN1cml0eSA9IHt9OwogICAgICAgICAgZG9jdW1lbnRTZWN1cml0eS5vd25lclBhc3N3b3JkID0gc2VjdXJpdHlPd25lclBhc3N3b3JkLnZhbHVlOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoc2VjdXJpdHlQcmludGluZykgewogICAgICAgIHNlY3VyaXR5UHJpbnRpbmcuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgaWYgKCFkb2N1bWVudFNlY3VyaXR5KSBkb2N1bWVudFNlY3VyaXR5ID0ge307CiAgICAgICAgICBpZiAoIWRvY3VtZW50U2VjdXJpdHkucGVybWlzc2lvbnMpIGRvY3VtZW50U2VjdXJpdHkucGVybWlzc2lvbnMgPSB7fTsKICAgICAgICAgIGRvY3VtZW50U2VjdXJpdHkucGVybWlzc2lvbnMucHJpbnRpbmcgPSBzZWN1cml0eVByaW50aW5nLmNoZWNrZWQ7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChzZWN1cml0eU1vZGlmeWluZykgewogICAgICAgIHNlY3VyaXR5TW9kaWZ5aW5nLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgIGlmICghZG9jdW1lbnRTZWN1cml0eSkgZG9jdW1lbnRTZWN1cml0eSA9IHt9OwogICAgICAgICAgaWYgKCFkb2N1bWVudFNlY3VyaXR5LnBlcm1pc3Npb25zKSBkb2N1bWVudFNlY3VyaXR5LnBlcm1pc3Npb25zID0ge307CiAgICAgICAgICBkb2N1bWVudFNlY3VyaXR5LnBlcm1pc3Npb25zLm1vZGlmeWluZyA9IHNlY3VyaXR5TW9kaWZ5aW5nLmNoZWNrZWQ7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChzZWN1cml0eUNvcHlpbmcpIHsKICAgICAgICBzZWN1cml0eUNvcHlpbmcuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgaWYgKCFkb2N1bWVudFNlY3VyaXR5KSBkb2N1bWVudFNlY3VyaXR5ID0ge307CiAgICAgICAgICBpZiAoIWRvY3VtZW50U2VjdXJpdHkucGVybWlzc2lvbnMpIGRvY3VtZW50U2VjdXJpdHkucGVybWlzc2lvbnMgPSB7fTsKICAgICAgICAgIGRvY3VtZW50U2VjdXJpdHkucGVybWlzc2lvbnMuY29weWluZyA9IHNlY3VyaXR5Q29weWluZy5jaGVja2VkOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoc2VjdXJpdHlBbm5vdGF0aW5nKSB7CiAgICAgICAgc2VjdXJpdHlBbm5vdGF0aW5nLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICAgIGlmICghZG9jdW1lbnRTZWN1cml0eSkgZG9jdW1lbnRTZWN1cml0eSA9IHt9OwogICAgICAgICAgaWYgKCFkb2N1bWVudFNlY3VyaXR5LnBlcm1pc3Npb25zKSBkb2N1bWVudFNlY3VyaXR5LnBlcm1pc3Npb25zID0ge307CiAgICAgICAgICBkb2N1bWVudFNlY3VyaXR5LnBlcm1pc3Npb25zLmFubm90YXRpbmcgPSBzZWN1cml0eUFubm90YXRpbmcuY2hlY2tlZDsKICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIC8vIEF0dGFjaCBsaXN0ZW5lcnMgcGFyYSBQYWdlIEluZm8gKE1ldGFkYWRvcykgZSBDb21wcmVzcwogICAgZnVuY3Rpb24gYXR0YWNoUGFnZUluZm9MaXN0ZW5lcnMoKSB7CiAgICAgIGNvbnN0IHBhZ2VJbmZvQXV0aG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2VJbmZvQXV0aG9yJyk7CiAgICAgIGNvbnN0IHBhZ2VJbmZvVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZUluZm9UaXRsZScpOwogICAgICBjb25zdCBwYWdlSW5mb1N1YmplY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZUluZm9TdWJqZWN0Jyk7CiAgICAgIGNvbnN0IHBhZ2VJbmZvS2V5d29yZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZUluZm9LZXl3b3JkcycpOwogICAgICBjb25zdCBwYWdlQ29tcHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZUNvbXByZXNzJyk7CgogICAgICBpZiAocGFnZUluZm9BdXRob3IpIHsKICAgICAgICBwYWdlSW5mb0F1dGhvci5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgIGlmICghZG9jdW1lbnRQYWdlSW5mbykgZG9jdW1lbnRQYWdlSW5mbyA9IHt9OwogICAgICAgICAgZG9jdW1lbnRQYWdlSW5mby5hdXRob3IgPSBwYWdlSW5mb0F1dGhvci52YWx1ZS50cmltKCk7CiAgICAgICAgICBpZiAoIWRvY3VtZW50UGFnZUluZm8uYXV0aG9yICYmICFkb2N1bWVudFBhZ2VJbmZvLnRpdGxlICYmICFkb2N1bWVudFBhZ2VJbmZvLnN1YmplY3QgJiYgIWRvY3VtZW50UGFnZUluZm8ua2V5d29yZHMpIHsKICAgICAgICAgICAgZG9jdW1lbnRQYWdlSW5mbyA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChwYWdlSW5mb1RpdGxlKSB7CiAgICAgICAgcGFnZUluZm9UaXRsZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgIGlmICghZG9jdW1lbnRQYWdlSW5mbykgZG9jdW1lbnRQYWdlSW5mbyA9IHt9OwogICAgICAgICAgZG9jdW1lbnRQYWdlSW5mby50aXRsZSA9IHBhZ2VJbmZvVGl0bGUudmFsdWUudHJpbSgpOwogICAgICAgICAgaWYgKCFkb2N1bWVudFBhZ2VJbmZvLmF1dGhvciAmJiAhZG9jdW1lbnRQYWdlSW5mby50aXRsZSAmJiAhZG9jdW1lbnRQYWdlSW5mby5zdWJqZWN0ICYmICFkb2N1bWVudFBhZ2VJbmZvLmtleXdvcmRzKSB7CiAgICAgICAgICAgIGRvY3VtZW50UGFnZUluZm8gPSBudWxsOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAocGFnZUluZm9TdWJqZWN0KSB7CiAgICAgICAgcGFnZUluZm9TdWJqZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gewogICAgICAgICAgaWYgKCFkb2N1bWVudFBhZ2VJbmZvKSBkb2N1bWVudFBhZ2VJbmZvID0ge307CiAgICAgICAgICBkb2N1bWVudFBhZ2VJbmZvLnN1YmplY3QgPSBwYWdlSW5mb1N1YmplY3QudmFsdWUudHJpbSgpOwogICAgICAgICAgaWYgKCFkb2N1bWVudFBhZ2VJbmZvLmF1dGhvciAmJiAhZG9jdW1lbnRQYWdlSW5mby50aXRsZSAmJiAhZG9jdW1lbnRQYWdlSW5mby5zdWJqZWN0ICYmICFkb2N1bWVudFBhZ2VJbmZvLmtleXdvcmRzKSB7CiAgICAgICAgICAgIGRvY3VtZW50UGFnZUluZm8gPSBudWxsOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAocGFnZUluZm9LZXl3b3JkcykgewogICAgICAgIHBhZ2VJbmZvS2V5d29yZHMuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICBpZiAoIWRvY3VtZW50UGFnZUluZm8pIGRvY3VtZW50UGFnZUluZm8gPSB7fTsKICAgICAgICAgIGRvY3VtZW50UGFnZUluZm8ua2V5d29yZHMgPSBwYWdlSW5mb0tleXdvcmRzLnZhbHVlLnRyaW0oKTsKICAgICAgICAgIGlmICghZG9jdW1lbnRQYWdlSW5mby5hdXRob3IgJiYgIWRvY3VtZW50UGFnZUluZm8udGl0bGUgJiYgIWRvY3VtZW50UGFnZUluZm8uc3ViamVjdCAmJiAhZG9jdW1lbnRQYWdlSW5mby5rZXl3b3JkcykgewogICAgICAgICAgICBkb2N1bWVudFBhZ2VJbmZvID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHBhZ2VDb21wcmVzcykgewogICAgICAgIHBhZ2VDb21wcmVzcy5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICBkb2N1bWVudENvbXByZXNzID0gcGFnZUNvbXByZXNzLmNoZWNrZWQ7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBGdW7Dp8OjbyBhbnRpZ2EgbWFudGlkYSBwYXJhIGNvbXBhdGliaWxpZGFkZSAobsOjbyBzZXLDoSBtYWlzIHVzYWRhKQogICAgZnVuY3Rpb24gcmVuZGVySGVhZGVyRm9vdGVySW5zcGVjdG9yKCkgewogICAgICBjb25zdCBpbnNwZWN0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZGVyRm9vdGVySW5zcGVjdG9yJyk7CiAgICAgIGlmICghaW5zcGVjdG9yKSByZXR1cm47CgogICAgICBpbnNwZWN0b3IuaW5uZXJIVE1MID0gYAogICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMXJlbTsgZm9udC1zaXplOiAxLjEyNXJlbTsgZm9udC13ZWlnaHQ6IDYwMDsgY29sb3I6ICMxMTE4Mjc7Ij5DYWJlw6dhbGhvIGRhIFDDoWdpbmE8L2gzPgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWw+VGV4dG8gZG8gQ2FiZcOnYWxobzwvbGFiZWw+CiAgICAgICAgICA8dGV4dGFyZWEgaWQ9ImhlYWRlclRleHQiIHBsYWNlaG9sZGVyPSJFeDogVMOtdHVsbyBkbyBEb2N1bWVudG8gb3UgZGVpeGUgdmF6aW8gcGFyYSBkZXNhYmlsaXRhciIgc3R5bGU9Im1pbi1oZWlnaHQ6IDYwcHg7Ij4ke2VzY2FwZUh0bWwoZG9jdW1lbnRIZWFkZXI/LnRleHQgfHwgJycpfTwvdGV4dGFyZWE+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbE5vdGUiPlVzZSB7e3BhZ2VOdW1iZXJ9fSBwYXJhIG7Dum1lcm8gZGEgcMOhZ2luYSBhdHVhbCBlIHt7dG90YWxQYWdlc319IHBhcmEgdG90YWwgZGUgcMOhZ2luYXM8L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+VGFtYW5obyBkYSBGb250ZTwvbGFiZWw+CiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImhlYWRlckZvbnRTaXplIiB2YWx1ZT0iJHtkb2N1bWVudEhlYWRlcj8uZm9udFNpemUgfHwgMTB9IiBtaW49IjYiIG1heD0iMjQiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+QWxpbmhhbWVudG88L2xhYmVsPgogICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImhlYWRlckFsaWdubWVudCI+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsZWZ0IiAke2RvY3VtZW50SGVhZGVyPy5hbGlnbm1lbnQgPT09ICdsZWZ0JyA/ICdzZWxlY3RlZCcgOiAnJ30+RXNxdWVyZGE8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImNlbnRlciIgJHtkb2N1bWVudEhlYWRlcj8uYWxpZ25tZW50ID09PSAnY2VudGVyJyB8fCAhZG9jdW1lbnRIZWFkZXIgPyAnc2VsZWN0ZWQnIDogJyd9PkNlbnRybzwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0icmlnaHQiICR7ZG9jdW1lbnRIZWFkZXI/LmFsaWdubWVudCA9PT0gJ3JpZ2h0JyA/ICdzZWxlY3RlZCcgOiAnJ30+RGlyZWl0YTwvb3B0aW9uPgogICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+Q29yIGRvIFRleHRvPC9sYWJlbD4KICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogMC41cmVtOyBhbGlnbi1pdGVtczogY2VudGVyOyI+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjb2xvciIgaWQ9ImhlYWRlckNvbG9yIiB2YWx1ZT0iJHtkb2N1bWVudEhlYWRlcj8uY29sb3IgfHwgJyMwMDAwMDAnfSIgc3R5bGU9IndpZHRoOiA2MHB4OyBoZWlnaHQ6IDM4cHg7IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImhlYWRlckNvbG9yVGV4dCIgdmFsdWU9IiR7ZG9jdW1lbnRIZWFkZXI/LmNvbG9yIHx8ICcjMDAwMDAwJ30iIHBsYWNlaG9sZGVyPSIjMDAwMDAwIiBzdHlsZT0iZmxleDogMTsiPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgCiAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogMnJlbTsgcGFkZGluZy10b3A6IDEuNXJlbTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlNWU3ZWI7Ij4KICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMXJlbTsgZm9udC1zaXplOiAxLjEyNXJlbTsgZm9udC13ZWlnaHQ6IDYwMDsgY29sb3I6ICMxMTE4Mjc7Ij5Sb2RhcMOpIGRhIFDDoWdpbmE8L2gzPgogICAgICAgICAgPGRpdiBjbGFzcz0iaW5zcGVjdG9yLWZpZWxkIj4KICAgICAgICAgICAgPGxhYmVsPlRleHRvIGRvIFJvZGFww6k8L2xhYmVsPgogICAgICAgICAgICA8dGV4dGFyZWEgaWQ9ImZvb3RlclRleHQiIHBsYWNlaG9sZGVyPSJFeDogUMOhZ2luYSB7e3BhZ2VOdW1iZXJ9fSBkZSB7e3RvdGFsUGFnZXN9fSBvdSBkZWl4ZSB2YXppbyBwYXJhIGRlc2FiaWxpdGFyIiBzdHlsZT0ibWluLWhlaWdodDogNjBweDsiPiR7ZXNjYXBlSHRtbChkb2N1bWVudEZvb3Rlcj8udGV4dCB8fCAnJyl9PC90ZXh0YXJlYT4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGxOb3RlIj5Vc2Uge3twYWdlTnVtYmVyfX0gcGFyYSBuw7ptZXJvIGRhIHDDoWdpbmEgYXR1YWwgZSB7e3RvdGFsUGFnZXN9fSBwYXJhIHRvdGFsIGRlIHDDoWdpbmFzPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3M9Imluc3BlY3Rvci1maWVsZCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGxOb3RlIj5UYW1hbmhvIGRhIEZvbnRlPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJmb290ZXJGb250U2l6ZSIgdmFsdWU9IiR7ZG9jdW1lbnRGb290ZXI/LmZvbnRTaXplIHx8IDEwfSIgbWluPSI2IiBtYXg9IjI0Ij4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJzbWFsbE5vdGUiPkFsaW5oYW1lbnRvPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImZvb3RlckFsaWdubWVudCI+CiAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImxlZnQiICR7ZG9jdW1lbnRGb290ZXI/LmFsaWdubWVudCA9PT0gJ2xlZnQnID8gJ3NlbGVjdGVkJyA6ICcnfT5Fc3F1ZXJkYTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjZW50ZXIiICR7ZG9jdW1lbnRGb290ZXI/LmFsaWdubWVudCA9PT0gJ2NlbnRlcicgfHwgIWRvY3VtZW50Rm9vdGVyID8gJ3NlbGVjdGVkJyA6ICcnfT5DZW50cm88L29wdGlvbj4KICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0icmlnaHQiICR7ZG9jdW1lbnRGb290ZXI/LmFsaWdubWVudCA9PT0gJ3JpZ2h0JyA/ICdzZWxlY3RlZCcgOiAnJ30+RGlyZWl0YTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnNwZWN0b3ItZmllbGQiPgogICAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsTm90ZSI+Q29yIGRvIFRleHRvPC9sYWJlbD4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAwLjVyZW07IGFsaWduLWl0ZW1zOiBjZW50ZXI7Ij4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY29sb3IiIGlkPSJmb290ZXJDb2xvciIgdmFsdWU9IiR7ZG9jdW1lbnRGb290ZXI/LmNvbG9yIHx8ICcjMDAwMDAwJ30iIHN0eWxlPSJ3aWR0aDogNjBweDsgaGVpZ2h0OiAzOHB4OyBjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZvb3RlckNvbG9yVGV4dCIgdmFsdWU9IiR7ZG9jdW1lbnRGb290ZXI/LmNvbG9yIHx8ICcjMDAwMDAwJ30iIHBsYWNlaG9sZGVyPSIjMDAwMDAwIiBzdHlsZT0iZmxleDogMTsiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICBgOwoKICAgICAgLy8gQXR0YWNoIGxpc3RlbmVycyBhcMOzcyByZW5kZXJpemFyCiAgICAgIGF0dGFjaEhlYWRlckZvb3Rlckxpc3RlbmVycygpOwogICAgfQoKICAgIC8vIEF0dGFjaCBsaXN0ZW5lcnMgcGFyYSBIZWFkZXIvRm9vdGVyCiAgICBmdW5jdGlvbiBhdHRhY2hIZWFkZXJGb290ZXJMaXN0ZW5lcnMoKSB7CiAgICAgIC8vIEhlYWRlciBUb2dnbGUKICAgICAgY29uc3QgaGVhZGVyRW5hYmxlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWFkZXJFbmFibGVkJyk7CiAgICAgIGNvbnN0IGhlYWRlckhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWFkZXJIZWlnaHQnKTsKICAgICAgY29uc3QgaGVhZGVyT3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWFkZXJPcHRpb25zJyk7CgogICAgICBpZiAoaGVhZGVyRW5hYmxlZCkgewogICAgICAgIGhlYWRlckVuYWJsZWQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgZG9jdW1lbnRIZWFkZXIuZW5hYmxlZCA9IGhlYWRlckVuYWJsZWQuY2hlY2tlZDsKICAgICAgICAgIGlmICghZG9jdW1lbnRIZWFkZXIucm9vdCkgewogICAgICAgICAgICBkb2N1bWVudEhlYWRlci5yb290ID0gY3JlYXRlSGVhZGVyRm9vdGVyUm9vdCgpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGhlYWRlck9wdGlvbnMpIHsKICAgICAgICAgICAgaGVhZGVyT3B0aW9ucy5zdHlsZS5kaXNwbGF5ID0gZG9jdW1lbnRIZWFkZXIuZW5hYmxlZCA/ICcnIDogJ25vbmUnOwogICAgICAgICAgfQogICAgICAgICAgYWRqdXN0UGFnZU1hcmdpbnMoKTsKICAgICAgICAgIHJlbmRlckFsbCgpOwogICAgICAgICAgc2F2ZVN0YXRlKCk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChoZWFkZXJIZWlnaHQpIHsKICAgICAgICBoZWFkZXJIZWlnaHQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgICAgICBkb2N1bWVudEhlYWRlci5oZWlnaHQgPSBwYXJzZUludChoZWFkZXJIZWlnaHQudmFsdWUpIHx8IDYwOwogICAgICAgICAgYWRqdXN0UGFnZU1hcmdpbnMoKTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8gRm9vdGVyIFRvZ2dsZQogICAgICBjb25zdCBmb290ZXJFbmFibGVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvb3RlckVuYWJsZWQnKTsKICAgICAgY29uc3QgZm9vdGVySGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvb3RlckhlaWdodCcpOwogICAgICBjb25zdCBmb290ZXJPcHRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvb3Rlck9wdGlvbnMnKTsKCiAgICAgIGlmIChmb290ZXJFbmFibGVkKSB7CiAgICAgICAgZm9vdGVyRW5hYmxlZC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgICBkb2N1bWVudEZvb3Rlci5lbmFibGVkID0gZm9vdGVyRW5hYmxlZC5jaGVja2VkOwogICAgICAgICAgaWYgKCFkb2N1bWVudEZvb3Rlci5yb290KSB7CiAgICAgICAgICAgIGRvY3VtZW50Rm9vdGVyLnJvb3QgPSBjcmVhdGVIZWFkZXJGb290ZXJSb290KCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZm9vdGVyT3B0aW9ucykgewogICAgICAgICAgICBmb290ZXJPcHRpb25zLnN0eWxlLmRpc3BsYXkgPSBkb2N1bWVudEZvb3Rlci5lbmFibGVkID8gJycgOiAnbm9uZSc7CiAgICAgICAgICB9CiAgICAgICAgICBhZGp1c3RQYWdlTWFyZ2lucygpOwogICAgICAgICAgcmVuZGVyQWxsKCk7CiAgICAgICAgICBzYXZlU3RhdGUoKTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKGZvb3RlckhlaWdodCkgewogICAgICAgIGZvb3RlckhlaWdodC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgIGRvY3VtZW50Rm9vdGVyLmhlaWdodCA9IHBhcnNlSW50KGZvb3RlckhlaWdodC52YWx1ZSkgfHwgNjA7CiAgICAgICAgICBhZGp1c3RQYWdlTWFyZ2lucygpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CgogICAgLy8gRnVuw6fDtWVzIHBhcmEgbGltcGFyIGhlYWRlci9mb290ZXIKICAgIGZ1bmN0aW9uIGNsZWFySGVhZGVyKCkgewogICAgICBzaG93Q29uZmlybU1vZGFsKAogICAgICAgICdMaW1wYXIgQ2FiZcOnYWxobycsCiAgICAgICAgJ1RlbSBjZXJ0ZXphIHF1ZSBkZXNlamEgbGltcGFyIHRvZG8gbyBjb250ZcO6ZG8gZG8gY2FiZcOnYWxobz8nLAogICAgICAgICgpID0+IHsKICAgICAgICAgIGRvY3VtZW50SGVhZGVyLnJvb3QgPSBjcmVhdGVIZWFkZXJGb290ZXJSb290KCk7CiAgICAgICAgICByZW5kZXJBbGwoKTsKICAgICAgICAgIHNhdmVTdGF0ZSgpOwogICAgICAgIH0KICAgICAgKTsKICAgIH0KICAgIHdpbmRvdy5jbGVhckhlYWRlciA9IGNsZWFySGVhZGVyOwoKICAgIGZ1bmN0aW9uIGNsZWFyRm9vdGVyKCkgewogICAgICBzaG93Q29uZmlybU1vZGFsKAogICAgICAgICdMaW1wYXIgUm9kYXDDqScsCiAgICAgICAgJ1RlbSBjZXJ0ZXphIHF1ZSBkZXNlamEgbGltcGFyIHRvZG8gbyBjb250ZcO6ZG8gZG8gcm9kYXDDqT8nLAogICAgICAgICgpID0+IHsKICAgICAgICAgIGRvY3VtZW50Rm9vdGVyLnJvb3QgPSBjcmVhdGVIZWFkZXJGb290ZXJSb290KCk7CiAgICAgICAgICByZW5kZXJBbGwoKTsKICAgICAgICAgIHNhdmVTdGF0ZSgpOwogICAgICAgIH0KICAgICAgKTsKICAgIH0KICAgIHdpbmRvdy5jbGVhckZvb3RlciA9IGNsZWFyRm9vdGVyOwoKICAgIC8vIEFqdXN0YXIgcGFnZU1hcmdpbnMgYmFzZWFkbyBuYSBhbHR1cmEgZG8gaGVhZGVyL2Zvb3RlcgogICAgZnVuY3Rpb24gYWRqdXN0UGFnZU1hcmdpbnMoKSB7CiAgICAgIGNvbnN0IG1pblRvcE1hcmdpbiA9IGRvY3VtZW50SGVhZGVyLmVuYWJsZWQgPyBkb2N1bWVudEhlYWRlci5oZWlnaHQgKyAyMCA6IDYwOwogICAgICBjb25zdCBtaW5Cb3R0b21NYXJnaW4gPSBkb2N1bWVudEZvb3Rlci5lbmFibGVkID8gZG9jdW1lbnRGb290ZXIuaGVpZ2h0ICsgMjAgOiA2MDsKCiAgICAgIC8vIEFqdXN0YXIgYXBlbmFzIHNlIG5lY2Vzc8OhcmlvCiAgICAgIGlmIChwYWdlTWFyZ2luc1sxXSA8IG1pblRvcE1hcmdpbikgewogICAgICAgIHBhZ2VNYXJnaW5zWzFdID0gbWluVG9wTWFyZ2luOwogICAgICAgIGlmIChtVCkgbVQudmFsdWUgPSBtaW5Ub3BNYXJnaW47CiAgICAgIH0KICAgICAgaWYgKHBhZ2VNYXJnaW5zWzNdIDwgbWluQm90dG9tTWFyZ2luKSB7CiAgICAgICAgcGFnZU1hcmdpbnNbM10gPSBtaW5Cb3R0b21NYXJnaW47CiAgICAgICAgaWYgKG1CKSBtQi52YWx1ZSA9IG1pbkJvdHRvbU1hcmdpbjsKICAgICAgfQogICAgfQogICAgd2luZG93LnN3aXRjaFRhYiA9IHN3aXRjaFRhYjsKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gVUkgYmluZGluZ3MKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBGdW7Dp8OjbyBwYXJhIGNvbnRhciBlbGVtZW50b3MgdsOhbGlkb3MgKGdydXBvcyB2YXppb3MgbsOjbyBjb250YW0sIG1hcyBncnVwb3MgY29tIGVsZW1lbnRvcyBkZW50cm8gY29udGFtKQogICAgZnVuY3Rpb24gY291bnRWYWxpZEVsZW1lbnRzKGVsKSB7CiAgICAgIGlmICghZWwpIHJldHVybiAwOwoKICAgICAgLy8gU2UgbsOjbyDDqSBncnVwbywgY29udGEgY29tbyAxIGVsZW1lbnRvIHbDoWxpZG8KICAgICAgaWYgKGVsLnR5cGUgIT09ICdncm91cCcpIHsKICAgICAgICByZXR1cm4gMTsKICAgICAgfQoKICAgICAgLy8gU2Ugw6kgZ3J1cG8sIHZlcmlmaWNhIHNlIHRlbSBmaWxob3MgdsOhbGlkb3MKICAgICAgY29uc3QgY2hpbGRyZW4gPSBlbC5wcm9wZXJ0aWVzPy5jaGlsZHJlbiB8fCBbXTsKICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiAwOyAvLyBHcnVwbyB2YXppbyBuw6NvIGNvbnRhCiAgICAgIH0KCiAgICAgIC8vIENvbnRhIGVsZW1lbnRvcyB2w6FsaWRvcyBkZW50cm8gZG8gZ3J1cG8KICAgICAgbGV0IGNvdW50ID0gMDsKICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbikgewogICAgICAgIGNvdW50ICs9IGNvdW50VmFsaWRFbGVtZW50cyhjaGlsZCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjb3VudDsKICAgIH0KCiAgICAvLyBORVcgRlVOQ1RJT046IENoZWNrIGlmIGFueSB2YWxpZCBlbGVtZW50IGV4aXN0cyBpbiB0aGUgY2FudmFzIChtYWluLCBoZWFkZXIsIG9yIGZvb3RlcikKICAgIGZ1bmN0aW9uIGhhc0FueVZhbGlkRWxlbWVudHMoKSB7CiAgICAgIGNvbnN0IHJvb3RHcm91cCA9IGdldFJvb3RHcm91cCgpOwogICAgICBsZXQgdG90YWxWYWxpZEVsZW1lbnRzID0gMDsKCiAgICAgIC8vIENvbnRhciBlbGVtZW50b3MgZG8gZ3J1cG8gcmFpegogICAgICBpZiAocm9vdEdyb3VwKSB7CiAgICAgICAgdG90YWxWYWxpZEVsZW1lbnRzICs9IGNvdW50VmFsaWRFbGVtZW50cyhyb290R3JvdXApOwogICAgICB9CgogICAgICAvLyBDb250YXIgZWxlbWVudG9zIGRvIGhlYWRlciAoYXBlbmFzIHNlIGVzdGl2ZXIgaGFiaWxpdGFkbykKICAgICAgaWYgKGRvY3VtZW50SGVhZGVyLmVuYWJsZWQgJiYgZG9jdW1lbnRIZWFkZXIucm9vdCkgewogICAgICAgIGNvbnN0IGhlYWRlckNoaWxkcmVuID0gZG9jdW1lbnRIZWFkZXIucm9vdC5wcm9wZXJ0aWVzPy5jaGlsZHJlbiB8fCBbXTsKICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGhlYWRlckNoaWxkcmVuKSB7CiAgICAgICAgICB0b3RhbFZhbGlkRWxlbWVudHMgKz0gY291bnRWYWxpZEVsZW1lbnRzKGNoaWxkKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIENvbnRhciBlbGVtZW50b3MgZG8gZm9vdGVyIChhcGVuYXMgc2UgZXN0aXZlciBoYWJpbGl0YWRvKQogICAgICBpZiAoZG9jdW1lbnRGb290ZXIuZW5hYmxlZCAmJiBkb2N1bWVudEZvb3Rlci5yb290KSB7CiAgICAgICAgY29uc3QgZm9vdGVyQ2hpbGRyZW4gPSBkb2N1bWVudEZvb3Rlci5yb290LnByb3BlcnRpZXM/LmNoaWxkcmVuIHx8IFtdOwogICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgZm9vdGVyQ2hpbGRyZW4pIHsKICAgICAgICAgIHRvdGFsVmFsaWRFbGVtZW50cyArPSBjb3VudFZhbGlkRWxlbWVudHMoY2hpbGQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRvdGFsVmFsaWRFbGVtZW50cyA+IDA7CiAgICB9CgogICAgLy8gRnVuw6fDo28gcGFyYSBhdHVhbGl6YXIgdmlzaWJpbGlkYWRlIGRvIGJvdMOjbyBkZSBwcsOpLXZpc3VhbGl6YXIKICAgIGZ1bmN0aW9uIHVwZGF0ZVByZXZpZXdCdXR0b25WaXNpYmlsaXR5KCkgewogICAgICBjb25zdCBidWJibGVUZXN0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1YmJsZVRlc3RCdG4nKTsKICAgICAgaWYgKCFidWJibGVUZXN0QnRuKSByZXR1cm47CgogICAgICBpZiAoaGFzQW55VmFsaWRFbGVtZW50cygpKSB7CiAgICAgICAgYnViYmxlVGVzdEJ0bi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1mbGV4JzsKICAgICAgICBidWJibGVUZXN0QnRuLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJzsKICAgICAgICBidWJibGVUZXN0QnRuLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7CiAgICAgICAgYnViYmxlVGVzdEJ0bi5zdHlsZS5nYXAgPSAnMC41cmVtJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBidWJibGVUZXN0QnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIH0KICAgIH0KCiAgICAvLyBGdW7Dp8OjbyBwYXJhIGF0dWFsaXphciB2aXNpYmlsaWRhZGUgZGEgYWJhIGRlIGPDs2RpZ28KICAgIGZ1bmN0aW9uIHVwZGF0ZUNvZGVUYWJWaXNpYmlsaXR5KCkgewogICAgICBjb25zdCB0YWJDb2RlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYkNvZGUnKTsKICAgICAgY29uc3QgdGFiQ29udGVudENvZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFiQ29udGVudENvZGUnKTsKICAgICAgaWYgKCF0YWJDb2RlQnRuIHx8ICF0YWJDb250ZW50Q29kZSkgcmV0dXJuOwoKICAgICAgY29uc3QgaGFzRWxlbWVudHMgPSBoYXNBbnlWYWxpZEVsZW1lbnRzKCk7CiAgICAgIAogICAgICB0YWJDb2RlQnRuLnN0eWxlLmRpc3BsYXkgPSBoYXNFbGVtZW50cyA/ICdmbGV4JyA6ICdub25lJzsKICAgICAgLy8gU2UgYSBhYmEgZGUgY8OzZGlnbyBlc3RpdmVyIGF0aXZhIGUgbsOjbyBob3V2ZXIgZWxlbWVudG9zLCBtdWRhciBwYXJhIGEgYWJhIEVkaXRvcgogICAgICBpZiAoIWhhc0VsZW1lbnRzICYmIHRhYkNvZGVCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgewogICAgICAgIHN3aXRjaFRhYignZWRpdG9yJyk7IC8vIEZvcmNlIHN3aXRjaCB0byBlZGl0b3IgaWYgbm8gZWxlbWVudHMKICAgICAgfQogICAgfQoKICAgIC8vIEZ1bsOnw6NvIHBhcmEgYXR1YWxpemFyIHZpc2liaWxpZGFkZSBkb3MgYm90w7VlcyAiU2FsdmFyIFRlbXBsYXRlIiBlICJMaW1wYXIiCiAgICBmdW5jdGlvbiB1cGRhdGVTYXZlVGVtcGxhdGVCdXR0b25WaXNpYmlsaXR5KCkgewogICAgICBjb25zdCBoYXNFbGVtZW50cyA9IGhhc0FueVZhbGlkRWxlbWVudHMoKTsKCiAgICAgIGlmIChzYXZlVGVtcGxhdGVCdG4pIHsKICAgICAgICBzYXZlVGVtcGxhdGVCdG4uc3R5bGUuZGlzcGxheSA9IGhhc0VsZW1lbnRzID8gJ2Jsb2NrJyA6ICdub25lJzsKICAgICAgfQogICAgICBpZiAoY2xlYXJCdG4pIHsKICAgICAgICBjbGVhckJ0bi5zdHlsZS5kaXNwbGF5ID0gaGFzRWxlbWVudHMgPyAnYmxvY2snIDogJ25vbmUnOwogICAgICB9CgogICAgICAvLyBBdHVhbGl6YXIgdGFtYsOpbSBvIGJvdMOjbyBkZSBwcsOpLXZpc3VhbGl6YXIKICAgICAgdXBkYXRlUHJldmlld0J1dHRvblZpc2liaWxpdHkoKTsKICAgICAgLy8gTkVXOiBVcGRhdGUgY29kZSB0YWIgdmlzaWJpbGl0eQogICAgICB1cGRhdGVDb2RlVGFiVmlzaWJpbGl0eSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlckFsbChzaG91bGRBZGp1c3RTaXplID0gdHJ1ZSkgewogICAgICAvLyBtYW50w6ltIHNlbGVjdGVkIGlkIHbDoWxpZG8KICAgICAgaWYgKHNlbGVjdGVkRWxlbWVudElkICYmICFmaW5kTm9kZUJ5SWQoc2VsZWN0ZWRFbGVtZW50SWQpKSB7CiAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWQgPSBnZXRSb290R3JvdXAoKSA/IGdldFJvb3RHcm91cCgpLmlkIDogbnVsbDsKICAgICAgfQogICAgICAvLyBJTVBPUlRBTlRFOiBOw6NvIGFqdXN0YXIgdGFtYW5obyBkbyBjYW52YXMgZHVyYW50ZSBlZGnDp8O1ZXMgZGUgcHJvcHJpZWRhZGVzCiAgICAgIC8vIElzc28gZXZpdGEgY3Jlc2NpbWVudG8gaW5maW5pdG8gYW8gZWRpdGFyIGVsZW1lbnRvcwogICAgICByZW5kZXJDYW52YXMoc2hvdWxkQWRqdXN0U2l6ZSk7CiAgICAgIHJlbmRlckluc3BlY3RvcigpOwogICAgICAvLyBDw7NkaWdvIHNlcsOhIGdlcmFkbyBhcGVuYXMgcXVhbmRvIHVzdcOhcmlvIHNvbGljaXRhciBuYSBhYmEgZGUgY8OzZGlnbwogICAgICAvLyBBdHVhbGl6YXIgdmlzaWJpbGlkYWRlIGRvcyBib3TDtWVzCiAgICAgIHVwZGF0ZVNhdmVUZW1wbGF0ZUJ1dHRvblZpc2liaWxpdHkoKTsKICAgICAgLy8gU2FsdmFyIGVzdGFkbyBhdXRvbWF0aWNhbWVudGUgYXDDs3MgcmVuZGVyaXphcgogICAgICBzYXZlU3RhdGUoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjbGVhckFsbCgpIHsKICAgICAgLy8gTGltcGFyIGVsZW1lbnRvcyBwcmluY2lwYWlzCiAgICAgIGVsZW1lbnRzID0gW107CiAgICAgIC8vIEF0dWFsaXphciB2aXNpYmlsaWRhZGUgZG9zIGJvdMO1ZXMKICAgICAgdXBkYXRlUHJldmlld0J1dHRvblZpc2liaWxpdHkoKTsKICAgICAgLy8gQXR1YWxpemFyIHZpc2liaWxpZGFkZSBkYSBhYmEgZGUgY8OzZGlnbwogICAgICB1cGRhdGVDb2RlVGFiVmlzaWJpbGl0eSgpOwogICAgICBzZWxlY3RlZEVsZW1lbnRJZCA9IG51bGw7CgogICAgICAvLyBMaW1wYXIgaGVhZGVyL2Zvb3RlcgogICAgICBpZiAoZG9jdW1lbnRIZWFkZXIucm9vdCkgewogICAgICAgIGRvY3VtZW50SGVhZGVyLnJvb3QucHJvcGVydGllcy5jaGlsZHJlbiA9IFtdOwogICAgICB9CiAgICAgIGlmIChkb2N1bWVudEZvb3Rlci5yb290KSB7CiAgICAgICAgZG9jdW1lbnRGb290ZXIucm9vdC5wcm9wZXJ0aWVzLmNoaWxkcmVuID0gW107CiAgICAgIH0KICAgICAgZG9jdW1lbnRIZWFkZXIuZW5hYmxlZCA9IGZhbHNlOwogICAgICBkb2N1bWVudEZvb3Rlci5lbmFibGVkID0gZmFsc2U7CgogICAgICAvLyBSZXNldGFyIHRlbXBsYXRlIGF0dWFsIChhbyBsaW1wYXIsIG7Do28gaMOhIG1haXMgdGVtcGxhdGUgY2FycmVnYWRvKQogICAgICBjdXJyZW50VGVtcGxhdGVJZCA9IG51bGw7CgogICAgICAvLyBMaW1wYXIgZXN0YWRvIHNhbHZvIHRhbWLDqW0KICAgICAgY2xlYXJTYXZlZFN0YXRlKCk7CgogICAgICAvLyBBdHVhbGl6YXIgVUkKICAgICAgaWYgKHBhZ2VTaXplU2VsKSBwYWdlU2l6ZVNlbC52YWx1ZSA9ICdBNCc7CiAgICAgIGlmIChvcmllbnRhdGlvblNlbCkgb3JpZW50YXRpb25TZWwudmFsdWUgPSAncG9ydHJhaXQnOwogICAgICBpZiAobUwpIG1MLnZhbHVlID0gNDA7CiAgICAgIGlmIChtVCkgbVQudmFsdWUgPSA2MDsKICAgICAgaWYgKG1SKSBtUi52YWx1ZSA9IDQwOwogICAgICBpZiAobUIpIG1CLnZhbHVlID0gNjA7CiAgICAgIHBhZ2VTaXplID0gJ0E0JzsKICAgICAgb3JpZW50YXRpb24gPSAncG9ydHJhaXQnOwogICAgICBwYWdlTWFyZ2lucyA9IFs0MCwgNjAsIDQwLCA2MF07CgogICAgICByZW5kZXJBbGwoKTsKICAgIH0KCiAgICAvLyBQYWdlIHNldHRpbmdzIGJpbmRzCiAgICBwYWdlU2l6ZVNlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7IHBhZ2VTaXplID0gcGFnZVNpemVTZWwudmFsdWU7IHJlbmRlckFsbCgpOyB9KTsKICAgIG9yaWVudGF0aW9uU2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsgb3JpZW50YXRpb24gPSBvcmllbnRhdGlvblNlbC52YWx1ZTsgcmVuZGVyQWxsKCk7IH0pOwoKICAgIGZ1bmN0aW9uIHVwZGF0ZU1hcmdpbnMoKSB7CiAgICAgIHBhZ2VNYXJnaW5zID0gWwogICAgICAgIE51bWJlcihtTC52YWx1ZSB8fCAwKSwKICAgICAgICBOdW1iZXIobVQudmFsdWUgfHwgMCksCiAgICAgICAgTnVtYmVyKG1SLnZhbHVlIHx8IDApLAogICAgICAgIE51bWJlcihtQi52YWx1ZSB8fCAwKSwKICAgICAgXTsKICAgICAgcmVuZGVyQWxsKCk7CiAgICB9CiAgICBbbUwsIG1ULCBtUiwgbUJdLmZvckVhY2goaW5wID0+IGlucC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZU1hcmdpbnMpKTsKCiAgICAvLyB6b29tCiAgICB6b29tUmFuZ2UuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7CiAgICAgIGNvbnN0IHZhbCA9IE51bWJlcih6b29tUmFuZ2UudmFsdWUgfHwgMTAwKTsKICAgICAgem9vbUxhYmVsLnRleHRDb250ZW50ID0gdmFsICsgJyUnOwogICAgICB6b29tID0gdmFsIC8gMTAwOwogICAgICBhcHBseVpvb20oKTsKICAgIH0pOwoKICAgIC8vIEJvdMO1ZXMgZGUgem9vbSAoKyBlIC0pCiAgICBjb25zdCB6b29tRGVjcmVhc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnem9vbURlY3JlYXNlJyk7CiAgICBjb25zdCB6b29tSW5jcmVhc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnem9vbUluY3JlYXNlJyk7CgogICAgZnVuY3Rpb24gdXBkYXRlWm9vbSh2YWx1ZSkgewogICAgICBjb25zdCBjbGFtcGVkVmFsdWUgPSBNYXRoLm1heCg1NSwgTWF0aC5taW4oMTQwLCB2YWx1ZSkpOwogICAgICB6b29tUmFuZ2UudmFsdWUgPSBjbGFtcGVkVmFsdWU7CiAgICAgIHpvb21MYWJlbC50ZXh0Q29udGVudCA9IGNsYW1wZWRWYWx1ZSArICclJzsKICAgICAgem9vbSA9IGNsYW1wZWRWYWx1ZSAvIDEwMDsKICAgICAgYXBwbHlab29tKCk7CiAgICB9CgogICAgaWYgKHpvb21EZWNyZWFzZSkgewogICAgICB6b29tRGVjcmVhc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgY29uc3QgY3VycmVudFZhbCA9IE51bWJlcih6b29tUmFuZ2UudmFsdWUgfHwgMTAwKTsKICAgICAgICB1cGRhdGVab29tKGN1cnJlbnRWYWwgLSA1KTsgLy8gRGltaW51aXIgZW0gNSUKICAgICAgfSk7CiAgICB9CgogICAgaWYgKHpvb21JbmNyZWFzZSkgewogICAgICB6b29tSW5jcmVhc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgY29uc3QgY3VycmVudFZhbCA9IE51bWJlcih6b29tUmFuZ2UudmFsdWUgfHwgMTAwKTsKICAgICAgICB1cGRhdGVab29tKGN1cnJlbnRWYWwgKyA1KTsgLy8gQXVtZW50YXIgZW0gNSUKICAgICAgfSk7CiAgICB9CgogICAgLyoKCiAgICBwcmV2aWV3QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICBjb25zdCBkZCA9IGJ1aWxkRG9jRGVmaW5pdGlvbigpOwogICAgICBjb25zdCBwZGZEb2MgPSBwZGZNYWtlLmNyZWF0ZVBkZihkZCk7CiAgICAgIAogICAgICAvLyBHZXJhciBQREYgY29tbyBibG9iIGUgZXhpYmlyIG5vIG1vZGFsCiAgICAgIHBkZkRvYy5nZXRCbG9iKChibG9iKSA9PiB7CiAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICBjb25zdCBwcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlld01vZGFsJyk7CiAgICAgICAgY29uc3QgcHJldmlld0lmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3SWZyYW1lJyk7CiAgICAgICAgCiAgICAgICAgaWYgKHByZXZpZXdJZnJhbWUpIHsKICAgICAgICAgIHByZXZpZXdJZnJhbWUuc3JjID0gdXJsOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAocHJldmlld01vZGFsKSB7CiAgICAgICAgICBwcmV2aWV3TW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOyAqLwoKICAgIGNvbnN0IEJVQkJMRV9VUkwgPSAiaHR0cHM6Ly9tZW50aW9ucy0yMDIzNy5idWJibGVhcHBzLmlvL3ZlcnNpb24tdGVzdC9wcmV2aWV3X3BkZiI7CgogICAgZnVuY3Rpb24gZ2V0Q29kVG9TZW5kKCkgewogICAgICByZXR1cm4gKGNvZGVFZGl0b3IudmFsdWUgPz8gY29kZUVkaXRvci50ZXh0Q29udGVudCA/PyAiIikudHJpbSgpOwogICAgfQoKICAgIGJ1YmJsZVRlc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBhc3luYyAoKSA9PiB7CiAgICAgIC8vIFZlcmlmaWNhciBzZSBow6EgZWxlbWVudG9zIGFudGVzIGRlIGdlcmFyIGPDs2RpZ28KICAgICAgaWYgKCFoYXNBbnlWYWxpZEVsZW1lbnRzKCkpIHsKICAgICAgICBzaG93QWxlcnRNb2RhbCgnQXZpc28nLCAnQWRpY2lvbmUgcGVsbyBtZW5vcyB1bSBlbGVtZW50byBhbyBjYW52YXMgcGFyYSBwcsOpLXZpc3VhbGl6YXIgbyBQREYuJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAvLyBNb3N0cmFyIG1vZGFsIGRlIGxvYWRpbmcKICAgICAgc2hvd0xvYWRpbmdDb2RlTW9kYWwoKTsKCiAgICAgIHRyeSB7CiAgICAgICAgLy8gR2VyYXIgY8OzZGlnbyB2aWEgU3VwYWJhc2UKICAgICAgICBjb25zdCBnZW5lcmF0ZWRDb2RlID0gYXdhaXQgZ2VuZXJhdGVDb2RlVmlhU3VwYWJhc2UoKTsKCiAgICAgICAgLy8gQXR1YWxpemFyIG8gY29kZUVkaXRvciBnbG9iYWwgY29tIG8gY8OzZGlnbyBnZXJhZG8gKHBhcmEgbWFudGVyIHNpbmNyb25pemFkbykKICAgICAgICBpZiAoY29kZUVkaXRvcikgewogICAgICAgICAgY29kZUVkaXRvci50ZXh0Q29udGVudCA9IGdlbmVyYXRlZENvZGU7CiAgICAgICAgfQoKICAgICAgICAvLyBFc2NvbmRlciBtb2RhbCBkZSBsb2FkaW5nCiAgICAgICAgaGlkZUxvYWRpbmdDb2RlTW9kYWwoKTsKCiAgICAgICAgLy8gQWJyaXIgbW9kYWwgZGUgcHLDqS12aXN1YWxpemHDp8OjbwogICAgICAgIGNvbnN0IGJ1YmJsZUlmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJidWJibGVUZXN0SWZyYW1lIik7CiAgICAgICAgY29uc3QgYnViYmxlTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYnViYmxlVGVzdE1vZGFsIik7CgogICAgICAgIC8vIEFybWF6ZW5hciBvIGPDs2RpZ28gZW0gdW1hIHZhcmnDoXZlbCBxdWUgc2Vyw6EgYWNlc3PDrXZlbCBubyBvbmxvYWQKICAgICAgICBsZXQgY29kVG9TZW5kID0gZ2VuZXJhdGVkQ29kZS50cmltKCk7CgogICAgICAgIGJ1YmJsZU1vZGFsLmNsYXNzTGlzdC5hZGQoImFjdGl2ZSIpOwogICAgICAgIGJ1YmJsZUlmcmFtZS5zcmMgPSBCVUJCTEVfVVJMOwoKICAgICAgICBidWJibGVJZnJhbWUub25sb2FkID0gKCkgPT4gewogICAgICAgICAgLy8gRnVuw6fDo28gcGFyYSBlbnZpYXIgY8OzZGlnbyBwYXJhIG8gQnViYmxlCiAgICAgICAgICBjb25zdCBzZW5kQ29kZVRvQnViYmxlID0gKCkgPT4gewogICAgICAgICAgICAvLyBWZXJpZmljYXIgbm92YW1lbnRlIG8gY8OzZGlnbyBhbnRlcyBkZSBlbnZpYXIKICAgICAgICAgICAgY29uc3QgY29kID0gY29kVG9TZW5kIHx8IChjb2RlRWRpdG9yID8gKGNvZGVFZGl0b3IudmFsdWUgPz8gY29kZUVkaXRvci50ZXh0Q29udGVudCA/PyAiIikudHJpbSgpIDogJycpOwogICAgICAgICAgICBjb25zdCBvcmlnaW4gPSBuZXcgVVJMKGJ1YmJsZUlmcmFtZS5zcmMpLm9yaWdpbjsKCiAgICAgICAgICAgIGlmICghY29kKSB7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJybzogY8OzZGlnbyBlc3TDoSB2YXppbyBhbyBlbnZpYXIgcGFyYSBCdWJibGUnKTsKICAgICAgICAgICAgICBzaG93QWxlcnRNb2RhbCgnRXJybycsICdPIGPDs2RpZ28gZ2VyYWRvIGVzdMOhIHZhemlvLiBQb3IgZmF2b3IsIHRlbnRlIG5vdmFtZW50ZS4nKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBidWJibGVJZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh7IHR5cGU6ICJTRVRfQ09EIiwgY29kIH0sIG9yaWdpbik7CiAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBlbnZpYXIgbWVuc2FnZW0gcGFyYSBCdWJibGU6JywgZXJyb3IpOwogICAgICAgICAgICAgIC8vIFRlbnRhciBub3ZhbWVudGUgYXDDs3MgbWFpcyB1bSBkZWxheQogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgYnViYmxlSWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoeyB0eXBlOiAiU0VUX0NPRCIsIGNvZCB9LCBvcmlnaW4pOwogICAgICAgICAgICAgICAgICB9IGNhdGNoIChyZXRyeUVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gbmEgdGVudGF0aXZhIGRlIHJlZW52aW86JywgcmV0cnlFcnJvcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgLy8gQWd1YXJkYXIgdW0gcG91Y28gcGFyYSBnYXJhbnRpciBxdWUgbyBpZnJhbWUgZXN0w6EgdG90YWxtZW50ZSBjYXJyZWdhZG8gZSBvIEJ1YmJsZSBlc3TDoSBwcm9udG8KICAgICAgICAgIHNldFRpbWVvdXQoc2VuZENvZGVUb0J1YmJsZSwgMTAwMCk7IC8vIEF1bWVudGFkbyBwYXJhIDEgc2VndW5kbwogICAgICAgIH07CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgLy8gRXNjb25kZXIgbW9kYWwgZGUgbG9hZGluZyBlbSBjYXNvIGRlIGVycm8KICAgICAgICBoaWRlTG9hZGluZ0NvZGVNb2RhbCgpOwogICAgICAgIAogICAgICAgIC8vIE1vc3RyYXIgZXJybwogICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UgfHwgJ0Vycm8gZGVzY29uaGVjaWRvJzsKICAgICAgICBzaG93QWxlcnRNb2RhbCgnRXJybyBhbyBnZXJhciBjw7NkaWdvJywgYE7Do28gZm9pIHBvc3PDrXZlbCBnZXJhciBvIGPDs2RpZ28gcGFyYSBwcsOpLXZpc3VhbGl6YcOnw6NvLlxuXG5FcnJvOiAke2Vycm9yTWVzc2FnZX1cblxuUG9yIGZhdm9yLCB2ZXJpZmlxdWU6XG4xLiBTZSBhIEVkZ2UgRnVuY3Rpb24gZXN0w6EgY29uZmlndXJhZGEgZSBkZXBsb3lhZGEgY29ycmV0YW1lbnRlXG4yLiBTZSBhIFVSTCBkYSBFZGdlIEZ1bmN0aW9uIGVzdMOhIGNvcnJldGFcbjMuIFNlIGjDoSBlbGVtZW50b3Mgbm8gY2FudmFzXG40LiBWZXJpZmlxdWUgbyBjb25zb2xlIHBhcmEgbWFpcyBkZXRhbGhlc2ApOwogICAgICB9CiAgICB9KTsKCgogICAgY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgIGNsZWFyQWxsKCk7CiAgICB9KTsKCiAgICAvLyBTaXN0ZW1hIGRlIFRlbXBsYXRlcwogICAgY29uc3QgVEVNUExBVEVfU1RPUkFHRV9LRVkgPSAncGRmX2VkaXRvcl90ZW1wbGF0ZXMnOwoKICAgIGZ1bmN0aW9uIHNhdmVUZW1wbGF0ZSgpIHsKICAgICAgLy8gU2UgaMOhIHVtIHRlbXBsYXRlIGNhcnJlZ2FkbywgYXR1YWxpemFyIGRpcmV0YW1lbnRlIHNlbSBtb3N0cmFyIG1vZGFsCiAgICAgIGlmIChjdXJyZW50VGVtcGxhdGVJZCkgewogICAgICAgIC8vIEJ1c2NhciBub21lIGRvIHRlbXBsYXRlIGF0dWFsIHBhcmEgdXNhciBuYSBhdHVhbGl6YcOnw6NvCiAgICAgICAgY29uZmlybVNhdmVUZW1wbGF0ZSgpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gQ2FzbyBjb250csOhcmlvLCBtb3N0cmFyIG1vZGFsIHBhcmEgY3JpYXIgbm92byB0ZW1wbGF0ZQogICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlVGVtcGxhdGVNb2RhbCcpOwogICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlVGVtcGxhdGVOYW1lSW5wdXQnKTsKICAgICAgY29uc3QgZXJyb3JEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZVRlbXBsYXRlRXJyb3InKTsKCiAgICAgIGlmIChtb2RhbCAmJiBpbnB1dCkgewogICAgICAgIGlucHV0LnZhbHVlID0gJyc7CiAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICBpbnB1dC5mb2N1cygpOwoKICAgICAgICAvLyBQZXJtaXRpciBzYWx2YXIgY29tIEVudGVyCiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7CiAgICAgICAgICAgIGNvbmZpcm1TYXZlVGVtcGxhdGUoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgd2luZG93LnNhdmVUZW1wbGF0ZSA9IHNhdmVUZW1wbGF0ZTsKCiAgICBhc3luYyBmdW5jdGlvbiBjb25maXJtU2F2ZVRlbXBsYXRlKCkgewogICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlVGVtcGxhdGVOYW1lSW5wdXQnKTsKICAgICAgY29uc3QgZXJyb3JEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZVRlbXBsYXRlRXJyb3InKTsKICAgICAgbGV0IHRlbXBsYXRlTmFtZTsKCiAgICAgIC8vIFZlcmlmaWNhciBzZSB1c3XDoXJpbyBlc3TDoSBhdXRlbnRpY2FkbwogICAgICBpZiAoIWN1cnJlbnRVc2VyIHx8ICFjdXJyZW50UHJvZmlsZSB8fCAhY3VycmVudEluc3RhbGxhdGlvbikgewogICAgICAgIGlmIChlcnJvckRpdikgewogICAgICAgICAgZXJyb3JEaXYudGV4dENvbnRlbnQgPSAnVm9jw6ogcHJlY2lzYSBlc3RhciBsb2dhZG8gcGFyYSBzYWx2YXIgdGVtcGxhdGVzLic7CiAgICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoY3VycmVudFRlbXBsYXRlSWQpIHsKICAgICAgICAvLyBBdHVhbGl6YXIgdGVtcGxhdGUgZXhpc3RlbnRlIC0gYnVzY2FyIG5vbWUgYXR1YWwgZG8gdGVtcGxhdGUKICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgeyBkYXRhOiB0ZW1wbGF0ZSwgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50CiAgICAgICAgICAgIC5mcm9tKCd0ZW1wbGF0ZScpCiAgICAgICAgICAgIC5zZWxlY3QoJ25hbWUnKQogICAgICAgICAgICAuZXEoJ2lkJywgY3VycmVudFRlbXBsYXRlSWQpCiAgICAgICAgICAgIC5lcSgnaWRfcHJvZmlsZScsIGN1cnJlbnRQcm9maWxlLmlkKQogICAgICAgICAgICAuZXEoJ2lkX2luc3RhbGxhdGlvbicsIGN1cnJlbnRJbnN0YWxsYXRpb24uaWQpCiAgICAgICAgICAgIC5zaW5nbGUoKTsKCiAgICAgICAgICBpZiAoZmV0Y2hFcnJvcikgewogICAgICAgICAgICB0aHJvdyBmZXRjaEVycm9yOwogICAgICAgICAgfQoKICAgICAgICAgIHRlbXBsYXRlTmFtZSA9IHRlbXBsYXRlLm5hbWU7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBidXNjYXIgdGVtcGxhdGU6JywgZSk7CiAgICAgICAgICBpZiAoZXJyb3JEaXYpIHsKICAgICAgICAgICAgZXJyb3JEaXYudGV4dENvbnRlbnQgPSAnRXJybyBhbyBidXNjYXIgdGVtcGxhdGU6ICcgKyAoZS5tZXNzYWdlIHx8IGUpOwogICAgICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQ3JpYXIgbm92byB0ZW1wbGF0ZSAtIHByZWNpc2EgZG8gbm9tZSBkbyBpbnB1dAogICAgICAgIHRlbXBsYXRlTmFtZSA9IGlucHV0Py52YWx1ZS50cmltKCk7CiAgICAgICAgaWYgKCF0ZW1wbGF0ZU5hbWUpIHsKICAgICAgICAgIGlmIChlcnJvckRpdikgewogICAgICAgICAgICBlcnJvckRpdi50ZXh0Q29udGVudCA9ICdQb3IgZmF2b3IsIGRpZ2l0ZSB1bSBub21lIHBhcmEgbyB0ZW1wbGF0ZS4nOwogICAgICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRyeSB7CiAgICAgICAgY29uc3Qgcm9vdEdyb3VwID0gZ2V0Um9vdEdyb3VwKCk7CiAgICAgICAgY29uc3QgdGVtcGxhdGVEYXRhID0gewogICAgICAgICAgbmFtZTogdGVtcGxhdGVOYW1lLAogICAgICAgICAgcm9vdEdyb3VwOiByb290R3JvdXAgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJvb3RHcm91cCkpIDogbnVsbCwKICAgICAgICAgIGRvY3VtZW50SGVhZGVyOiBkb2N1bWVudEhlYWRlciA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZG9jdW1lbnRIZWFkZXIpKSA6IG51bGwsCiAgICAgICAgICBkb2N1bWVudEZvb3RlcjogZG9jdW1lbnRGb290ZXIgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRvY3VtZW50Rm9vdGVyKSkgOiBudWxsLAogICAgICAgICAgZG9jdW1lbnRXYXRlcm1hcms6IGRvY3VtZW50V2F0ZXJtYXJrID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkb2N1bWVudFdhdGVybWFyaykpIDogbnVsbCwKICAgICAgICAgIGRvY3VtZW50VE9DOiBkb2N1bWVudFRPQyA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZG9jdW1lbnRUT0MpKSA6IG51bGwsCiAgICAgICAgICBkb2N1bWVudFNlY3VyaXR5OiBkb2N1bWVudFNlY3VyaXR5ID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkb2N1bWVudFNlY3VyaXR5KSkgOiBudWxsLAogICAgICAgICAgZG9jdW1lbnRQYWdlSW5mbzogZG9jdW1lbnRQYWdlSW5mbyA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZG9jdW1lbnRQYWdlSW5mbykpIDogbnVsbCwKICAgICAgICAgIGRvY3VtZW50Q29tcHJlc3M6IGRvY3VtZW50Q29tcHJlc3MsCiAgICAgICAgICBwYWdlU2l6ZTogcGFnZVNpemVTZWw/LnZhbHVlIHx8ICdBNCcsCiAgICAgICAgICBvcmllbnRhdGlvbjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29yaWVudGF0aW9uJyk/LnZhbHVlIHx8ICdwb3J0cmFpdCcsCiAgICAgICAgICBtYXJnaW5zOiBbCiAgICAgICAgICAgIHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtTCcpPy52YWx1ZSB8fCA0MCksCiAgICAgICAgICAgIHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtVCcpPy52YWx1ZSB8fCA2MCksCiAgICAgICAgICAgIHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtUicpPy52YWx1ZSB8fCA0MCksCiAgICAgICAgICAgIHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtQicpPy52YWx1ZSB8fCA2MCkKICAgICAgICAgIF0KICAgICAgICB9OwoKICAgICAgICAvLyBDb252ZXJ0ZXIgdGVtcGxhdGUgcGFyYSBKU09OIHN0cmluZyAoY2FtcG8gY29kIG5vIFN1cGFiYXNlKQogICAgICAgIGNvbnN0IGNvZCA9IEpTT04uc3RyaW5naWZ5KHRlbXBsYXRlRGF0YSk7CgogICAgICAgIGlmIChjdXJyZW50VGVtcGxhdGVJZCkgewogICAgICAgICAgLy8gQXR1YWxpemFyIHRlbXBsYXRlIGV4aXN0ZW50ZQogICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VDbGllbnQKICAgICAgICAgICAgLmZyb20oJ3RlbXBsYXRlJykKICAgICAgICAgICAgLnVwZGF0ZSh7CiAgICAgICAgICAgICAgY29kOiBjb2QsCiAgICAgICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5lcSgnaWQnLCBjdXJyZW50VGVtcGxhdGVJZCkKICAgICAgICAgICAgLmVxKCdpZF9wcm9maWxlJywgY3VycmVudFByb2ZpbGUuaWQpCiAgICAgICAgICAgIC5lcSgnaWRfaW5zdGFsbGF0aW9uJywgY3VycmVudEluc3RhbGxhdGlvbi5pZCk7CgogICAgICAgICAgaWYgKGVycm9yKSB7CiAgICAgICAgICAgIHRocm93IGVycm9yOwogICAgICAgICAgfQoKICAgICAgICAgIGNsb3NlU2F2ZVRlbXBsYXRlTW9kYWwoKTsKCiAgICAgICAgICBpZiAodHlwZW9mIHNob3dBbGVydE1vZGFsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHNob3dBbGVydE1vZGFsKCdTdWNlc3NvJywgYFRlbXBsYXRlICIke3RlbXBsYXRlTmFtZX0iIGF0dWFsaXphZG8gY29tIHN1Y2Vzc28hYCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIENyaWFyIG5vdm8gdGVtcGxhdGUKICAgICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50CiAgICAgICAgICAgIC5mcm9tKCd0ZW1wbGF0ZScpCiAgICAgICAgICAgIC5pbnNlcnQoewogICAgICAgICAgICAgIGlkX3Byb2ZpbGU6IGN1cnJlbnRQcm9maWxlLmlkLAogICAgICAgICAgICAgIGlkX2luc3RhbGxhdGlvbjogY3VycmVudEluc3RhbGxhdGlvbi5pZCwKICAgICAgICAgICAgICBuYW1lOiB0ZW1wbGF0ZU5hbWUsCiAgICAgICAgICAgICAgY29kOiBjb2QKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnNlbGVjdCgpCiAgICAgICAgICAgIC5zaW5nbGUoKTsKCiAgICAgICAgICBpZiAoZXJyb3IpIHsKICAgICAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gU2FsdmFyIElEIGRvIHRlbXBsYXRlIGNyaWFkbwogICAgICAgICAgY3VycmVudFRlbXBsYXRlSWQgPSBkYXRhLmlkOwoKICAgICAgICAgIGNsb3NlU2F2ZVRlbXBsYXRlTW9kYWwoKTsKCiAgICAgICAgICBpZiAodHlwZW9mIHNob3dBbGVydE1vZGFsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHNob3dBbGVydE1vZGFsKCdTdWNlc3NvJywgYFRlbXBsYXRlICIke3RlbXBsYXRlTmFtZX0iIHNhbHZvIGNvbSBzdWNlc3NvIWApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gc2FsdmFyIHRlbXBsYXRlOicsIGUpOwogICAgICAgIGlmIChlcnJvckRpdikgewogICAgICAgICAgZXJyb3JEaXYudGV4dENvbnRlbnQgPSAnRXJybyBhbyBzYWx2YXIgdGVtcGxhdGU6ICcgKyAoZS5tZXNzYWdlIHx8IGUpOwogICAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICB3aW5kb3cuY29uZmlybVNhdmVUZW1wbGF0ZSA9IGNvbmZpcm1TYXZlVGVtcGxhdGU7CgogICAgZnVuY3Rpb24gY2xvc2VTYXZlVGVtcGxhdGVNb2RhbCgpIHsKICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZVRlbXBsYXRlTW9kYWwnKTsKICAgICAgaWYgKG1vZGFsKSB7CiAgICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICAgIH0KICAgIH0KICAgIHdpbmRvdy5jbG9zZVNhdmVUZW1wbGF0ZU1vZGFsID0gY2xvc2VTYXZlVGVtcGxhdGVNb2RhbDsKCiAgICBhc3luYyBmdW5jdGlvbiBsb2FkVGVtcGxhdGUoKSB7CiAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRUZW1wbGF0ZU1vZGFsJyk7CiAgICAgIGNvbnN0IGxpc3REaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZFRlbXBsYXRlTGlzdCcpOwogICAgICBjb25zdCBlbXB0eURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkVGVtcGxhdGVFbXB0eScpOwoKICAgICAgaWYgKCFtb2RhbCB8fCAhbGlzdERpdikgcmV0dXJuOwoKICAgICAgLy8gVmVyaWZpY2FyIHNlIHVzdcOhcmlvIGVzdMOhIGF1dGVudGljYWRvCiAgICAgIGlmICghY3VycmVudFVzZXIgfHwgIWN1cnJlbnRQcm9maWxlIHx8ICFjdXJyZW50SW5zdGFsbGF0aW9uKSB7CiAgICAgICAgaWYgKHR5cGVvZiBzaG93QWxlcnRNb2RhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgc2hvd0FsZXJ0TW9kYWwoJ0Vycm8nLCAnVm9jw6ogcHJlY2lzYSBlc3RhciBsb2dhZG8gcGFyYSBjYXJyZWdhciB0ZW1wbGF0ZXMuJyk7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdHJ5IHsKICAgICAgICAvLyBCdXNjYXIgdGVtcGxhdGVzIGRvIFN1cGFiYXNlCiAgICAgICAgY29uc3QgeyBkYXRhOiB0ZW1wbGF0ZXMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUNsaWVudAogICAgICAgICAgLmZyb20oJ3RlbXBsYXRlJykKICAgICAgICAgIC5zZWxlY3QoJyonKQogICAgICAgICAgLmVxKCdpZF9wcm9maWxlJywgY3VycmVudFByb2ZpbGUuaWQpCiAgICAgICAgICAuZXEoJ2lkX2luc3RhbGxhdGlvbicsIGN1cnJlbnRJbnN0YWxsYXRpb24uaWQpCiAgICAgICAgICAub3JkZXIoJ3VwZGF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7CgogICAgICAgIGlmIChlcnJvcikgewogICAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXRlbXBsYXRlcyB8fCB0ZW1wbGF0ZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBpZiAoZW1wdHlEaXYpIGVtcHR5RGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgaWYgKGxpc3REaXYpIGxpc3REaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gQ3JpYXIgbGlzdGEgZGUgdGVtcGxhdGVzCiAgICAgICAgbGlzdERpdi5pbm5lckhUTUwgPSAnJzsKICAgICAgICB0ZW1wbGF0ZXMuZm9yRWFjaCgodGVtcGxhdGUpID0+IHsKICAgICAgICAgIGNvbnN0IHRlbXBsYXRlSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgdGVtcGxhdGVJdGVtLnN0eWxlLmNzc1RleHQgPSAncGFkZGluZzogMXJlbTsgbWFyZ2luLWJvdHRvbTogMC41cmVtOyBib3JkZXI6IDFweCBzb2xpZCAjZTVlN2ViOyBib3JkZXItcmFkaXVzOiAwLjVyZW07IGN1cnNvcjogcG9pbnRlcjsgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzOyc7CiAgICAgICAgICB0ZW1wbGF0ZUl0ZW0ub25tb3VzZWVudGVyID0gKCkgPT4gdGVtcGxhdGVJdGVtLnN0eWxlLmJhY2tncm91bmQgPSAnI2YzZjRmNic7CiAgICAgICAgICB0ZW1wbGF0ZUl0ZW0ub25tb3VzZWxlYXZlID0gKCkgPT4gdGVtcGxhdGVJdGVtLnN0eWxlLmJhY2tncm91bmQgPSAnd2hpdGUnOwoKICAgICAgICAgIGNvbnN0IG5hbWVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgIG5hbWVEaXYuc3R5bGUuY3NzVGV4dCA9ICdmb250LXdlaWdodDogNjAwOyBjb2xvcjogIzExMTgyNzsgbWFyZ2luLWJvdHRvbTogMC4yNXJlbTsnOwogICAgICAgICAgbmFtZURpdi50ZXh0Q29udGVudCA9IHRlbXBsYXRlLm5hbWU7CgogICAgICAgICAgY29uc3QgZGF0ZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgZGF0ZURpdi5zdHlsZS5jc3NUZXh0ID0gJ2ZvbnQtc2l6ZTogMC44NzVyZW07IGNvbG9yOiAjNmI3MjgwOyBtYXJnaW4tYm90dG9tOiAwLjVyZW07JzsKICAgICAgICAgIGRhdGVEaXYudGV4dENvbnRlbnQgPSBgQXR1YWxpemFkbyBlbTogJHtuZXcgRGF0ZSh0ZW1wbGF0ZS51cGRhdGVkX2F0KS50b0xvY2FsZVN0cmluZygncHQtQlInKX1gOwoKICAgICAgICAgIGNvbnN0IGJ1dHRvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgYnV0dG9uRGl2LnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTogZmxleDsgZ2FwOiAwLjVyZW07JzsKCiAgICAgICAgICBjb25zdCBsb2FkQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICBsb2FkQnRuLnRleHRDb250ZW50ID0gJ/Cfk4IgQ2FycmVnYXInOwogICAgICAgICAgbG9hZEJ0bi5zdHlsZS5jc3NUZXh0ID0gJ2ZsZXg6IDE7IHBhZGRpbmc6IDAuNXJlbTsgYmFja2dyb3VuZDogIzI1NjNlYjsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtOyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtc2l6ZTogMC44NzVyZW07JzsKICAgICAgICAgIGxvYWRCdG4ub25jbGljayA9IChlKSA9PiB7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGxvYWRUZW1wbGF0ZUNvbmZpcm0odGVtcGxhdGUpOwogICAgICAgICAgfTsKCiAgICAgICAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9ICfwn5eR77iPIERlbGV0YXInOwogICAgICAgICAgZGVsZXRlQnRuLnN0eWxlLmNzc1RleHQgPSAnZmxleDogMTsgcGFkZGluZzogMC41cmVtOyBiYWNrZ3JvdW5kOiAjZWY0NDQ0OyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07IGN1cnNvcjogcG9pbnRlcjsgZm9udC1zaXplOiAwLjg3NXJlbTsnOwogICAgICAgICAgZGVsZXRlQnRuLm9uY2xpY2sgPSAoZSkgPT4gewogICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGlmICh0eXBlb2YgZGVsZXRlVGVtcGxhdGUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICBkZWxldGVUZW1wbGF0ZSh0ZW1wbGF0ZS5pZCwgdGVtcGxhdGUubmFtZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignZGVsZXRlVGVtcGxhdGUgbsOjbyBlc3TDoSBkaXNwb27DrXZlbCcpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwoKICAgICAgICAgIGJ1dHRvbkRpdi5hcHBlbmRDaGlsZChsb2FkQnRuKTsKICAgICAgICAgIGJ1dHRvbkRpdi5hcHBlbmRDaGlsZChkZWxldGVCdG4pOwoKICAgICAgICAgIHRlbXBsYXRlSXRlbS5hcHBlbmRDaGlsZChuYW1lRGl2KTsKICAgICAgICAgIHRlbXBsYXRlSXRlbS5hcHBlbmRDaGlsZChkYXRlRGl2KTsKICAgICAgICAgIHRlbXBsYXRlSXRlbS5hcHBlbmRDaGlsZChidXR0b25EaXYpOwoKICAgICAgICAgIGxpc3REaXYuYXBwZW5kQ2hpbGQodGVtcGxhdGVJdGVtKTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKGVtcHR5RGl2KSBlbXB0eURpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIGlmIChsaXN0RGl2KSBsaXN0RGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBjYXJyZWdhciB0ZW1wbGF0ZXM6JywgZSk7CiAgICAgICAgaWYgKHR5cGVvZiBzaG93QWxlcnRNb2RhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgc2hvd0FsZXJ0TW9kYWwoJ0Vycm8nLCAnRXJybyBhbyBjYXJyZWdhciB0ZW1wbGF0ZXM6ICcgKyBlLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgd2luZG93LmxvYWRUZW1wbGF0ZSA9IGxvYWRUZW1wbGF0ZTsKCiAgICBmdW5jdGlvbiBsb2FkVGVtcGxhdGVDb25maXJtKHRlbXBsYXRlKSB7CiAgICAgIC8vIEZlY2hhciBtb2RhbCBkZSB0ZW1wbGF0ZXMgcHJpbWVpcm8KICAgICAgY2xvc2VMb2FkVGVtcGxhdGVNb2RhbCgpOwoKICAgICAgLy8gU2FsdmFyIElEIGRvIHRlbXBsYXRlIGNhcnJlZ2FkbyBwYXJhIGF0dWFsaXphw6fDo28gcG9zdGVyaW9yCiAgICAgIGN1cnJlbnRUZW1wbGF0ZUlkID0gdGVtcGxhdGUuaWQ7CgogICAgICAvLyBGdW7Dp8OjbyBwYXJhIGNhcnJlZ2FyIG8gdGVtcGxhdGUKICAgICAgY29uc3QgZG9Mb2FkVGVtcGxhdGUgPSAoKSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIC8vIFBhcnNlYXIgbyBjYW1wbyBjb2QgcXVlIGNvbnTDqW0gbyBKU09OIGRvIHRlbXBsYXRlCiAgICAgICAgICBsZXQgdGVtcGxhdGVEYXRhOwogICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZS5jb2QgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHRlbXBsYXRlRGF0YSA9IEpTT04ucGFyc2UodGVtcGxhdGUuY29kKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRlbXBsYXRlRGF0YSA9IHRlbXBsYXRlLmNvZCB8fCB7fTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBDYXJyZWdhciB0ZW1wbGF0ZSAtIGZhemVyIGRlZXAgY29weSBwYXJhIGV2aXRhciByZWZlcsOqbmNpYXMKICAgICAgICAgIGlmICh0ZW1wbGF0ZURhdGEucm9vdEdyb3VwKSB7CiAgICAgICAgICAgIGNvbnN0IHJvb3RHcm91cENvcHkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRlbXBsYXRlRGF0YS5yb290R3JvdXApKTsKICAgICAgICAgICAgZWxlbWVudHMgPSBbcm9vdEdyb3VwQ29weV07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlbGVtZW50cyA9IFtdOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIEZhemVyIGRlZXAgY29weSBkZSB0b2RvcyBvcyBvYmpldG9zIHBhcmEgZXZpdGFyIHJlZmVyw6puY2lhcwogICAgICAgICAgaWYgKHRlbXBsYXRlRGF0YS5kb2N1bWVudEhlYWRlcikgewogICAgICAgICAgICBkb2N1bWVudEhlYWRlciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGVtcGxhdGVEYXRhLmRvY3VtZW50SGVhZGVyKSk7CiAgICAgICAgICAgIGlmICghZG9jdW1lbnRIZWFkZXIucm9vdCkgewogICAgICAgICAgICAgIGRvY3VtZW50SGVhZGVyLnJvb3QgPSBjcmVhdGVIZWFkZXJGb290ZXJSb290KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRvY3VtZW50SGVhZGVyID0geyBlbmFibGVkOiBmYWxzZSwgcm9vdDogY3JlYXRlSGVhZGVyRm9vdGVyUm9vdCgpIH07CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRlbXBsYXRlRGF0YS5kb2N1bWVudEZvb3RlcikgewogICAgICAgICAgICBkb2N1bWVudEZvb3RlciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGVtcGxhdGVEYXRhLmRvY3VtZW50Rm9vdGVyKSk7CiAgICAgICAgICAgIGlmICghZG9jdW1lbnRGb290ZXIucm9vdCkgewogICAgICAgICAgICAgIGRvY3VtZW50Rm9vdGVyLnJvb3QgPSBjcmVhdGVIZWFkZXJGb290ZXJSb290KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRvY3VtZW50Rm9vdGVyID0geyBlbmFibGVkOiBmYWxzZSwgcm9vdDogY3JlYXRlSGVhZGVyRm9vdGVyUm9vdCgpIH07CiAgICAgICAgICB9CgogICAgICAgICAgZG9jdW1lbnRXYXRlcm1hcmsgPSB0ZW1wbGF0ZURhdGEuZG9jdW1lbnRXYXRlcm1hcmsgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRlbXBsYXRlRGF0YS5kb2N1bWVudFdhdGVybWFyaykpIDogbnVsbDsKICAgICAgICAgIGRvY3VtZW50VE9DID0gdGVtcGxhdGVEYXRhLmRvY3VtZW50VE9DID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0ZW1wbGF0ZURhdGEuZG9jdW1lbnRUT0MpKSA6IG51bGw7CiAgICAgICAgICBkb2N1bWVudFNlY3VyaXR5ID0gdGVtcGxhdGVEYXRhLmRvY3VtZW50U2VjdXJpdHkgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRlbXBsYXRlRGF0YS5kb2N1bWVudFNlY3VyaXR5KSkgOiBudWxsOwogICAgICAgICAgZG9jdW1lbnRQYWdlSW5mbyA9IHRlbXBsYXRlRGF0YS5kb2N1bWVudFBhZ2VJbmZvID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0ZW1wbGF0ZURhdGEuZG9jdW1lbnRQYWdlSW5mbykpIDogbnVsbDsKICAgICAgICAgIGRvY3VtZW50Q29tcHJlc3MgPSB0ZW1wbGF0ZURhdGEuZG9jdW1lbnRDb21wcmVzcyB8fCBmYWxzZTsKCiAgICAgICAgICAvLyBBdHVhbGl6YXIgVUkKICAgICAgICAgIGlmIChwYWdlU2l6ZVNlbCAmJiB0ZW1wbGF0ZURhdGEucGFnZVNpemUpIHsKICAgICAgICAgICAgcGFnZVNpemVTZWwudmFsdWUgPSB0ZW1wbGF0ZURhdGEucGFnZVNpemU7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBvcmllbnRhdGlvblNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcmllbnRhdGlvbicpOwogICAgICAgICAgaWYgKG9yaWVudGF0aW9uU2VsICYmIHRlbXBsYXRlRGF0YS5vcmllbnRhdGlvbikgewogICAgICAgICAgICBvcmllbnRhdGlvblNlbC52YWx1ZSA9IHRlbXBsYXRlRGF0YS5vcmllbnRhdGlvbjsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0ZW1wbGF0ZURhdGEubWFyZ2lucyAmJiBBcnJheS5pc0FycmF5KHRlbXBsYXRlRGF0YS5tYXJnaW5zKSkgewogICAgICAgICAgICBjb25zdCBtTCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtTCcpOwogICAgICAgICAgICBjb25zdCBtVCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtVCcpOwogICAgICAgICAgICBjb25zdCBtUiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtUicpOwogICAgICAgICAgICBjb25zdCBtQiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtQicpOwogICAgICAgICAgICBpZiAobUwpIG1MLnZhbHVlID0gdGVtcGxhdGVEYXRhLm1hcmdpbnNbMF0gfHwgNDA7CiAgICAgICAgICAgIGlmIChtVCkgbVQudmFsdWUgPSB0ZW1wbGF0ZURhdGEubWFyZ2luc1sxXSB8fCA2MDsKICAgICAgICAgICAgaWYgKG1SKSBtUi52YWx1ZSA9IHRlbXBsYXRlRGF0YS5tYXJnaW5zWzJdIHx8IDQwOwogICAgICAgICAgICBpZiAobUIpIG1CLnZhbHVlID0gdGVtcGxhdGVEYXRhLm1hcmdpbnNbM10gfHwgNjA7CiAgICAgICAgICB9CgogICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWQgPSBudWxsOwoKICAgICAgICAgIC8vIEF0dWFsaXphciByZW5kZXJpemHDp8OjbyBhcMOzcyB1bSBwZXF1ZW5vIGRlbGF5IHBhcmEgZ2FyYW50aXIgcXVlIG8gRE9NIGVzdMOhIHByb250bwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVuZGVyQWxsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgcmVuZGVyQWxsKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJJbnNwZWN0b3IgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICByZW5kZXJJbnNwZWN0b3IoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlclBhZ2VJbnNwZWN0b3IgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICByZW5kZXJQYWdlSW5zcGVjdG9yKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gQ8OzZGlnbyBzZXLDoSBnZXJhZG8gYXBlbmFzIHF1YW5kbyB1c3XDoXJpbyBzb2xpY2l0YXIgbmEgYWJhIGRlIGPDs2RpZ28KICAgICAgICAgICAgaWYgKHR5cGVvZiBzYXZlU3RhdGUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICBzYXZlU3RhdGUoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHR5cGVvZiBzaG93QWxlcnRNb2RhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgIHNob3dBbGVydE1vZGFsKCdTdWNlc3NvJywgYFRlbXBsYXRlICIke3RlbXBsYXRlLm5hbWV9IiBjYXJyZWdhZG8gY29tIHN1Y2Vzc28hYCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gQXR1YWxpemFyIHZpc2liaWxpZGFkZSBkbyBib3TDo28gIlNhbHZhciBUZW1wbGF0ZSIKICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVTYXZlVGVtcGxhdGVCdXR0b25WaXNpYmlsaXR5ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgdXBkYXRlU2F2ZVRlbXBsYXRlQnV0dG9uVmlzaWJpbGl0eSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCAxMDApOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gY2FycmVnYXIgdGVtcGxhdGU6JywgZSk7CiAgICAgICAgICBpZiAodHlwZW9mIHNob3dBbGVydE1vZGFsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHNob3dBbGVydE1vZGFsKCdFcnJvJywgJ0Vycm8gYW8gY2FycmVnYXIgdGVtcGxhdGU6ICcgKyBlLm1lc3NhZ2UpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmICh0eXBlb2Ygc2hvd0NvbmZpcm1Nb2RhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHNob3dDb25maXJtTW9kYWwoCiAgICAgICAgICAnQ2FycmVnYXIgVGVtcGxhdGUnLAogICAgICAgICAgYENhcnJlZ2FyIHRlbXBsYXRlICIke3RlbXBsYXRlLm5hbWV9Ij8gSXNzbyBzdWJzdGl0dWlyw6EgbyBjb250ZcO6ZG8gYXR1YWwuYCwKICAgICAgICAgIGRvTG9hZFRlbXBsYXRlCiAgICAgICAgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBTZSBuw6NvIGhvdXZlciBtb2RhbCBkZSBjb25maXJtYcOnw6NvLCBjYXJyZWdhciBkaXJldGFtZW50ZQogICAgICAgIGRvTG9hZFRlbXBsYXRlKCk7CiAgICAgIH0KICAgIH0KCiAgICBhc3luYyBmdW5jdGlvbiBkZWxldGVUZW1wbGF0ZSh0ZW1wbGF0ZUlkLCB0ZW1wbGF0ZU5hbWUpIHsKICAgICAgdHJ5IHsKICAgICAgICAvLyBWZXJpZmljYXIgc2UgdXN1w6FyaW8gZXN0w6EgYXV0ZW50aWNhZG8KICAgICAgICBpZiAoIWN1cnJlbnRVc2VyIHx8ICFjdXJyZW50UHJvZmlsZSB8fCAhY3VycmVudEluc3RhbGxhdGlvbikgewogICAgICAgICAgaWYgKHR5cGVvZiBzaG93QWxlcnRNb2RhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBzaG93QWxlcnRNb2RhbCgnRXJybycsICdWb2PDqiBwcmVjaXNhIGVzdGFyIGxvZ2FkbyBwYXJhIGRlbGV0YXIgdGVtcGxhdGVzLicpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gRmVjaGFyIG8gbW9kYWwgZGUgdGVtcGxhdGVzIGFudGVzIGRlIGFicmlyIG8gbW9kYWwgZGUgY29uZmlybWHDp8OjbwogICAgICAgIGlmICh0eXBlb2YgY2xvc2VMb2FkVGVtcGxhdGVNb2RhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgY2xvc2VMb2FkVGVtcGxhdGVNb2RhbCgpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHR5cGVvZiBzaG93Q29uZmlybU1vZGFsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAvLyBQZXF1ZW5vIGRlbGF5IHBhcmEgZ2FyYW50aXIgcXVlIG8gbW9kYWwgYW50ZXJpb3IgZm9pIGZlY2hhZG8KICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBzaG93Q29uZmlybU1vZGFsKAogICAgICAgICAgICAgICdEZWxldGFyIFRlbXBsYXRlJywKICAgICAgICAgICAgICBgVGVtIGNlcnRlemEgcXVlIGRlc2VqYSBkZWxldGFyIG8gdGVtcGxhdGUgIiR7dGVtcGxhdGVOYW1lfSI/YCwKICAgICAgICAgICAgICBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAvLyBEZWxldGFyIGRvIFN1cGFiYXNlCiAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50CiAgICAgICAgICAgICAgICAgICAgLmZyb20oJ3RlbXBsYXRlJykKICAgICAgICAgICAgICAgICAgICAuZGVsZXRlKCkKICAgICAgICAgICAgICAgICAgICAuZXEoJ2lkJywgdGVtcGxhdGVJZCkKICAgICAgICAgICAgICAgICAgICAuZXEoJ2lkX3Byb2ZpbGUnLCBjdXJyZW50UHJvZmlsZS5pZCkKICAgICAgICAgICAgICAgICAgICAuZXEoJ2lkX2luc3RhbGxhdGlvbicsIGN1cnJlbnRJbnN0YWxsYXRpb24uaWQpOwoKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIC8vIFNlIG8gdGVtcGxhdGUgZGVsZXRhZG8gZXJhIG8gYXR1YWwsIGxpbXBhciBjdXJyZW50VGVtcGxhdGVJZAogICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFRlbXBsYXRlSWQgPT09IHRlbXBsYXRlSWQpIHsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGVtcGxhdGVJZCA9IG51bGw7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIC8vIFJlY2FycmVnYXIgbGlzdGEKICAgICAgICAgICAgICAgICAgYXdhaXQgbG9hZFRlbXBsYXRlKCk7CgogICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNob3dBbGVydE1vZGFsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgc2hvd0FsZXJ0TW9kYWwoJ1N1Y2Vzc28nLCBgVGVtcGxhdGUgIiR7dGVtcGxhdGVOYW1lfSIgZGVsZXRhZG8gY29tIHN1Y2Vzc28hYCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBkZWxldGFyIHRlbXBsYXRlOicsIGUpOwogICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNob3dBbGVydE1vZGFsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgc2hvd0FsZXJ0TW9kYWwoJ0Vycm8nLCAnRXJybyBhbyBkZWxldGFyIHRlbXBsYXRlOiAnICsgKGUubWVzc2FnZSB8fCBlKSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICB9LCAxMDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBGYWxsYmFjayBzZSBzaG93Q29uZmlybU1vZGFsIG7Do28gZXN0aXZlciBkaXNwb27DrXZlbAogICAgICAgICAgaWYgKGNvbmZpcm0oYFRlbSBjZXJ0ZXphIHF1ZSBkZXNlamEgZGVsZXRhciBvIHRlbXBsYXRlICIke3RlbXBsYXRlTmFtZX0iP2ApKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgLy8gRGVsZXRhciBkbyBTdXBhYmFzZQogICAgICAgICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50CiAgICAgICAgICAgICAgICAuZnJvbSgndGVtcGxhdGUnKQogICAgICAgICAgICAgICAgLmRlbGV0ZSgpCiAgICAgICAgICAgICAgICAuZXEoJ2lkJywgdGVtcGxhdGVJZCkKICAgICAgICAgICAgICAgIC5lcSgnaWRfcHJvZmlsZScsIGN1cnJlbnRQcm9maWxlLmlkKQogICAgICAgICAgICAgICAgLmVxKCdpZF9pbnN0YWxsYXRpb24nLCBjdXJyZW50SW5zdGFsbGF0aW9uLmlkKTsKCiAgICAgICAgICAgICAgaWYgKGVycm9yKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIC8vIFNlIG8gdGVtcGxhdGUgZGVsZXRhZG8gZXJhIG8gYXR1YWwsIGxpbXBhciBjdXJyZW50VGVtcGxhdGVJZAogICAgICAgICAgICAgIGlmIChjdXJyZW50VGVtcGxhdGVJZCA9PT0gdGVtcGxhdGVJZCkgewogICAgICAgICAgICAgICAgY3VycmVudFRlbXBsYXRlSWQgPSBudWxsOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8gUmVjYXJyZWdhciBsaXN0YQogICAgICAgICAgICAgIGF3YWl0IGxvYWRUZW1wbGF0ZSgpOwoKICAgICAgICAgICAgICBpZiAodHlwZW9mIHNob3dBbGVydE1vZGFsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICBzaG93QWxlcnRNb2RhbCgnU3VjZXNzbycsIGBUZW1wbGF0ZSAiJHt0ZW1wbGF0ZU5hbWV9IiBkZWxldGFkbyBjb20gc3VjZXNzbyFgKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIGRlbGV0YXIgdGVtcGxhdGU6JywgZSk7CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzaG93QWxlcnRNb2RhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgc2hvd0FsZXJ0TW9kYWwoJ0Vycm8nLCAnRXJybyBhbyBkZWxldGFyIHRlbXBsYXRlOiAnICsgKGUubWVzc2FnZSB8fCBlKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBkZWxldGFyIHRlbXBsYXRlOicsIGUpOwogICAgICAgIGlmICh0eXBlb2Ygc2hvd0FsZXJ0TW9kYWwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHNob3dBbGVydE1vZGFsKCdFcnJvJywgJ0Vycm8gYW8gZGVsZXRhciB0ZW1wbGF0ZTogJyArIChlLm1lc3NhZ2UgfHwgZSkpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgd2luZG93LmRlbGV0ZVRlbXBsYXRlID0gZGVsZXRlVGVtcGxhdGU7IC8vIFRvcm5hciBnbG9iYWwKCiAgICBmdW5jdGlvbiBjbG9zZUxvYWRUZW1wbGF0ZU1vZGFsKCkgewogICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkVGVtcGxhdGVNb2RhbCcpOwogICAgICBpZiAobW9kYWwpIHsKICAgICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgfQogICAgfQogICAgd2luZG93LmNsb3NlTG9hZFRlbXBsYXRlTW9kYWwgPSBjbG9zZUxvYWRUZW1wbGF0ZU1vZGFsOwoKICAgIGNvbnN0IGxvYWRUZW1wbGF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkVGVtcGxhdGVCdG4nKTsKICAgIGlmIChzYXZlVGVtcGxhdGVCdG4pIHsKICAgICAgc2F2ZVRlbXBsYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2F2ZVRlbXBsYXRlKTsKICAgIH0KICAgIGlmIChsb2FkVGVtcGxhdGVCdG4pIHsKICAgICAgbG9hZFRlbXBsYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbG9hZFRlbXBsYXRlKTsKICAgIH0KCiAgICAvLyBjb3B5IGluIGNvZGUgdGFiCiAgICBpZiAoY29weUJ0bikgY29weUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvcHlDb2RlKTsKCiAgICAvLyBDYW52YXMgY2xpY2sgdG8gZGVzZWxlY3QKICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7CiAgICAgIGlmIChlLnRhcmdldCA9PT0gY2FudmFzIHx8IGUudGFyZ2V0ID09PSBlbGVtZW50c0xpc3QgfHwgZS50YXJnZXQgPT09IGNhbnZhc0VtcHR5KSB7CiAgICAgICAgY29uc3Qgcm9vdEdyb3VwID0gZ2V0Um9vdEdyb3VwKCk7CiAgICAgICAgY29uc3QgbmV3U2VsZWN0ZWRJZCA9IHJvb3RHcm91cCA/IHJvb3RHcm91cC5pZCA6IG51bGw7CgogICAgICAgIC8vIEV2aXRhciByZS1yZW5kZXJpemHDp8OjbyBkZXNuZWNlc3PDoXJpYSBzZSBqw6EgZXN0w6Egc2VsZWNpb25hZG8KICAgICAgICBpZiAoc2VsZWN0ZWRFbGVtZW50SWQgPT09IG5ld1NlbGVjdGVkSWQpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIElNUE9SVEFOVEU6IFVzYXIgc2VsZWN0RWxlbWVudCgpIHF1ZSBuw6NvIHJlY3JpYSBvIERPTSwgYXBlbmFzIGF0dWFsaXphIHNlbGXDp8OjbyB2aXN1YWwKICAgICAgICAvLyBJc3NvIGV2aXRhIGNyZXNjaW1lbnRvIGluZmluaXRvIGFvIGNsaWNhciBubyBjYW52YXMKICAgICAgICBpZiAobmV3U2VsZWN0ZWRJZCkgewogICAgICAgICAgc2VsZWN0RWxlbWVudChuZXdTZWxlY3RlZElkKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gRGVzc2VsZWNpb25hciB0dWRvIHNlbSByZWNyaWFyIERPTQogICAgICAgICAgY29uc3QgcHJldlNlbGVjdGVkID0gc2VsZWN0ZWRFbGVtZW50SWQgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pZD0iJHtzZWxlY3RlZEVsZW1lbnRJZH0iXWApIDogbnVsbDsKICAgICAgICAgIGlmIChwcmV2U2VsZWN0ZWQpIHsKICAgICAgICAgICAgcHJldlNlbGVjdGVkLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7CiAgICAgICAgICB9CiAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZCA9IG51bGw7CiAgICAgICAgICByZW5kZXJJbnNwZWN0b3IoKTsKICAgICAgICAgIC8vIEPDs2RpZ28gc2Vyw6EgZ2VyYWRvIGFwZW5hcyBxdWFuZG8gdXN1w6FyaW8gc29saWNpdGFyIG5hIGFiYSBkZSBjw7NkaWdvCiAgICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gRnVuw6fDtWVzIGRlIEF1dGVudGljYcOnw6NvIFN1cGFiYXNlCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGFzeW5jIGZ1bmN0aW9uIGNoZWNrQXV0aCgpIHsKICAgICAgaWYgKCFzdXBhYmFzZUNsaWVudCkgewogICAgICAgIGluaXRTdXBhYmFzZSgpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VDbGllbnQuYXV0aC5nZXRTZXNzaW9uKCk7CgogICAgICAgIGlmIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyB2ZXJpZmljYXIgc2Vzc8OjbzonLCBlcnJvcik7CiAgICAgICAgICBzaG93TG9naW5Nb2RhbCgpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNlc3Npb24gJiYgc2Vzc2lvbi51c2VyKSB7CiAgICAgICAgICBjdXJyZW50VXNlciA9IHNlc3Npb24udXNlcjsKICAgICAgICAgIGF3YWl0IGxvYWRVc2VyUHJvZmlsZSgpOwogICAgICAgICAgaGlkZUxvZ2luTW9kYWwoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2hvd0xvZ2luTW9kYWwoKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyB2ZXJpZmljYXIgYXV0ZW50aWNhw6fDo286JywgZXJyb3IpOwogICAgICAgIHNob3dMb2dpbk1vZGFsKCk7CiAgICAgIH0KICAgIH0KCiAgICBhc3luYyBmdW5jdGlvbiBsb2FkVXNlclByb2ZpbGUoKSB7CiAgICAgIGlmICghY3VycmVudFVzZXIpIHJldHVybjsKCiAgICAgIHRyeSB7CiAgICAgICAgLy8gQnVzY2FyIG91IGNyaWFyIHByb2ZpbGUKICAgICAgICBsZXQgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VDbGllbnQKICAgICAgICAgIC5mcm9tKCdwcm9maWxlJykKICAgICAgICAgIC5zZWxlY3QoJyonKQogICAgICAgICAgLmVxKCd1c2VyX2lkJywgY3VycmVudFVzZXIuaWQpCiAgICAgICAgICAuc2luZ2xlKCk7CgogICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5jb2RlID09PSAnUEdSU1QxMTYnKSB7CiAgICAgICAgICAvLyBQcm9maWxlIG7Do28gZXhpc3RlLCBjcmlhciB1bSBub3ZvCiAgICAgICAgICBjb25zdCB7IGRhdGE6IG5ld1Byb2ZpbGUsIGVycm9yOiBjcmVhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VDbGllbnQKICAgICAgICAgICAgLmZyb20oJ3Byb2ZpbGUnKQogICAgICAgICAgICAuaW5zZXJ0KHsKICAgICAgICAgICAgICB1c2VyX2lkOiBjdXJyZW50VXNlci5pZCwKICAgICAgICAgICAgICBlbWFpbDogY3VycmVudFVzZXIuZW1haWwsCiAgICAgICAgICAgICAgZnVsbF9uYW1lOiBjdXJyZW50VXNlci5lbWFpbD8uc3BsaXQoJ0AnKVswXSB8fCAnVXN1w6FyaW8nCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5zZWxlY3QoKQogICAgICAgICAgICAuc2luZ2xlKCk7CgogICAgICAgICAgaWYgKGNyZWF0ZUVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gY3JpYXIgcHJvZmlsZTonLCBjcmVhdGVFcnJvcik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBjdXJyZW50UHJvZmlsZSA9IG5ld1Byb2ZpbGU7CiAgICAgICAgfSBlbHNlIGlmIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBjYXJyZWdhciBwcm9maWxlOicsIGVycm9yKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY3VycmVudFByb2ZpbGUgPSBwcm9maWxlOwogICAgICAgIH0KCiAgICAgICAgLy8gQnVzY2FyIG91IGNyaWFyIGluc3RhbGxhdGlvbiAodXNhbmRvIGFwcF9pZCBwYWRyw6NvIHBvciBlbnF1YW50bykKICAgICAgICAvLyBWb2PDqiBwb2RlIGFqdXN0YXIgaXNzbyBjb25mb3JtZSBuZWNlc3PDoXJpbwogICAgICAgIGNvbnN0IGFwcElkID0gJ2RlZmF1bHRfYXBwJzsKICAgICAgICBsZXQgeyBkYXRhOiBpbnN0YWxsYXRpb24sIGVycm9yOiBpbnN0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50CiAgICAgICAgICAuZnJvbSgnaW5zdGFsbGF0aW9uJykKICAgICAgICAgIC5zZWxlY3QoJyonKQogICAgICAgICAgLmVxKCdpZF9wcm9maWxlJywgY3VycmVudFByb2ZpbGUuaWQpCiAgICAgICAgICAuZXEoJ2FwcF9pZCcsIGFwcElkKQogICAgICAgICAgLmVxKCdzdGF0dXMnLCAnYWN0aXZlJykKICAgICAgICAgIC5zaW5nbGUoKTsKCiAgICAgICAgaWYgKGluc3RFcnJvciAmJiBpbnN0RXJyb3IuY29kZSA9PT0gJ1BHUlNUMTE2JykgewogICAgICAgICAgLy8gSW5zdGFsbGF0aW9uIG7Do28gZXhpc3RlLCBjcmlhciB1bWEgbm92YQogICAgICAgICAgY29uc3QgeyBkYXRhOiBuZXdJbnN0YWxsYXRpb24sIGVycm9yOiBjcmVhdGVJbnN0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50CiAgICAgICAgICAgIC5mcm9tKCdpbnN0YWxsYXRpb24nKQogICAgICAgICAgICAuaW5zZXJ0KHsKICAgICAgICAgICAgICBpZF9wcm9maWxlOiBjdXJyZW50UHJvZmlsZS5pZCwKICAgICAgICAgICAgICBhcHBfaWQ6IGFwcElkLAogICAgICAgICAgICAgIGFjY2Vzc190b2tlbjogJ2RlZmF1bHRfdG9rZW4nLCAvLyBWb2PDqiBwb2RlIGFqdXN0YXIgaXNzbwogICAgICAgICAgICAgIHN0YXR1czogJ2FjdGl2ZScKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnNlbGVjdCgpCiAgICAgICAgICAgIC5zaW5nbGUoKTsKCiAgICAgICAgICBpZiAoY3JlYXRlSW5zdEVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gY3JpYXIgaW5zdGFsbGF0aW9uOicsIGNyZWF0ZUluc3RFcnJvcik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBjdXJyZW50SW5zdGFsbGF0aW9uID0gbmV3SW5zdGFsbGF0aW9uOwogICAgICAgIH0gZWxzZSBpZiAoaW5zdEVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIGNhcnJlZ2FyIGluc3RhbGxhdGlvbjonLCBpbnN0RXJyb3IpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjdXJyZW50SW5zdGFsbGF0aW9uID0gaW5zdGFsbGF0aW9uOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIGNhcnJlZ2FyIGRhZG9zIGRvIHVzdcOhcmlvOicsIGVycm9yKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNob3dMb2dpbk1vZGFsKCkgewogICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbk1vZGFsJyk7CiAgICAgIGlmIChtb2RhbCkgewogICAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgIGNvbnN0IGVtYWlsSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW5FbWFpbElucHV0Jyk7CiAgICAgICAgaWYgKGVtYWlsSW5wdXQpIGVtYWlsSW5wdXQuZm9jdXMoKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGhpZGVMb2dpbk1vZGFsKCkgewogICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbk1vZGFsJyk7CiAgICAgIGlmIChtb2RhbCkgewogICAgICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwogICAgICB9CiAgICB9CgogICAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlTG9naW4oKSB7CiAgICAgIGNvbnN0IGVtYWlsSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW5FbWFpbElucHV0Jyk7CiAgICAgIGNvbnN0IHBhc3N3b3JkSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW5QYXNzd29yZElucHV0Jyk7CiAgICAgIGNvbnN0IGVycm9yRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luRXJyb3InKTsKCiAgICAgIGNvbnN0IGVtYWlsID0gZW1haWxJbnB1dD8udmFsdWUudHJpbSgpOwogICAgICBjb25zdCBwYXNzd29yZCA9IHBhc3N3b3JkSW5wdXQ/LnZhbHVlOwoKICAgICAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHsKICAgICAgICBpZiAoZXJyb3JEaXYpIHsKICAgICAgICAgIGVycm9yRGl2LnRleHRDb250ZW50ID0gJ1BvciBmYXZvciwgcHJlZW5jaGEgZS1tYWlsIGUgc2VuaGEuJzsKICAgICAgICAgIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghc3VwYWJhc2VDbGllbnQpIHsKICAgICAgICBpZiAoZXJyb3JEaXYpIHsKICAgICAgICAgIGVycm9yRGl2LnRleHRDb250ZW50ID0gJ0Vycm86IFN1cGFiYXNlIG7Do28gaW5pY2lhbGl6YWRvLic7CiAgICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0cnkgewogICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50LmF1dGguc2lnbkluV2l0aFBhc3N3b3JkKHsKICAgICAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZAogICAgICAgIH0pOwoKICAgICAgICBpZiAoZXJyb3IpIHsKICAgICAgICAgIHRocm93IGVycm9yOwogICAgICAgIH0KCiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS51c2VyKSB7CiAgICAgICAgICBjdXJyZW50VXNlciA9IGRhdGEudXNlcjsKICAgICAgICAgIGF3YWl0IGxvYWRVc2VyUHJvZmlsZSgpOwogICAgICAgICAgaGlkZUxvZ2luTW9kYWwoKTsKCiAgICAgICAgICAvLyBMaW1wYXIgY2FtcG9zCiAgICAgICAgICBpZiAoZW1haWxJbnB1dCkgZW1haWxJbnB1dC52YWx1ZSA9ICcnOwogICAgICAgICAgaWYgKHBhc3N3b3JkSW5wdXQpIHBhc3N3b3JkSW5wdXQudmFsdWUgPSAnJzsKICAgICAgICAgIGlmIChlcnJvckRpdikgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBmYXplciBsb2dpbjonLCBlcnJvcik7CiAgICAgICAgaWYgKGVycm9yRGl2KSB7CiAgICAgICAgICBlcnJvckRpdi50ZXh0Q29udGVudCA9IGVycm9yLm1lc3NhZ2UgfHwgJ0Vycm8gYW8gZmF6ZXIgbG9naW4uIFZlcmlmaXF1ZSBzdWFzIGNyZWRlbmNpYWlzLic7CiAgICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICB3aW5kb3cuaGFuZGxlTG9naW4gPSBoYW5kbGVMb2dpbjsKCiAgICAvLyBQZXJtaXRpciBsb2dpbiBjb20gRW50ZXIKICAgIC8vIERhcmsgTW9kZSBUb2dnbGUKICAgIGZ1bmN0aW9uIGluaXREYXJrTW9kZSgpIHsKICAgICAgY29uc3QgZGFya01vZGVUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFya01vZGVUb2dnbGUnKTsKICAgICAgY29uc3Qgc2F2ZWRUaGVtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0aGVtZScpIHx8ICdsaWdodCc7CgogICAgICAvLyBBcGxpY2FyIHRlbWEgc2Fsdm8KICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS10aGVtZScsIHNhdmVkVGhlbWUpOwoKICAgICAgaWYgKGRhcmtNb2RlVG9nZ2xlKSB7CiAgICAgICAgZGFya01vZGVUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgICBjb25zdCBjdXJyZW50VGhlbWUgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lJyk7CiAgICAgICAgICBjb25zdCBuZXdUaGVtZSA9IGN1cnJlbnRUaGVtZSA9PT0gJ2RhcmsnID8gJ2xpZ2h0JyA6ICdkYXJrJzsKCiAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lJywgbmV3VGhlbWUpOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RoZW1lJywgbmV3VGhlbWUpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CgogICAgLy8gRnVuw6fDo28gcGFyYSB0b3JuYXIgbyBwYWluZWwgZGlyZWl0byBhcnJhc3TDoXZlbAogICAgZnVuY3Rpb24gaW5pdERyYWdnYWJsZVBhbmVsKCkgewogICAgICBjb25zdCBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2RlUGFuZWwnKTsKICAgICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvZGVQYW5lbEhlYWRlcicpOwogICAgICBjb25zdCBoZWFkZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcicpOwoKICAgICAgaWYgKCFwYW5lbCB8fCAhaGVhZGVyKSByZXR1cm47CgogICAgICBsZXQgaXNEcmFnZ2luZyA9IGZhbHNlOwogICAgICBsZXQgY3VycmVudFggPSAwOwogICAgICBsZXQgY3VycmVudFkgPSAwOwogICAgICBsZXQgaW5pdGlhbFggPSAwOwogICAgICBsZXQgaW5pdGlhbFkgPSAwOwogICAgICBsZXQgaGVhZGVySGVpZ2h0ID0gaGVhZGVyRWxlbWVudCA/IGhlYWRlckVsZW1lbnQub2Zmc2V0SGVpZ2h0IDogMDsKCiAgICAgIC8vIENhcnJlZ2FyIHBvc2nDp8OjbyBzYWx2YQogICAgICBjb25zdCBzYXZlZFBvc2l0aW9uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NvZGVQYW5lbFBvc2l0aW9uJyk7CiAgICAgIGlmIChzYXZlZFBvc2l0aW9uKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IHBvcyA9IEpTT04ucGFyc2Uoc2F2ZWRQb3NpdGlvbik7CiAgICAgICAgICBwYW5lbC5zdHlsZS5yaWdodCA9IHBvcy5yaWdodCArICdweCc7CiAgICAgICAgICBwYW5lbC5zdHlsZS50b3AgPSBwb3MudG9wICsgJ3B4JzsKICAgICAgICAgIHBhbmVsLnN0eWxlLmJvdHRvbSA9IHBvcy5ib3R0b20gKyAncHgnOwogICAgICAgICAgdXBkYXRlQ2FudmFzTWFyZ2luKHBvcy5yaWdodCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgLy8gSWdub3JhciBlcnJvIGFvIGNhcnJlZ2FyIHBvc2nDp8OjbwogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gdXBkYXRlQ2FudmFzTWFyZ2luKHJpZ2h0KSB7CiAgICAgICAgLy8gRnVuw6fDo28gbWFudGlkYSBwYXJhIGNvbXBhdGliaWxpZGFkZSwgbWFzIG7Do28gcHJlY2lzYSBmYXplciBuYWRhCiAgICAgICAgLy8gcG9pcyBvIHBhaW5lbCBhZ29yYSDDqSBmbHV0dWFudGUgKHBvc2l0aW9uOiBmaXhlZCkgZSBuw6NvIGFmZXRhIG8gbGF5b3V0IGRvIGNhbnZhcwogICAgICAgIC8vIE8gY2FudmFzIHNlbXByZSB0ZXLDoSBtYXJnaW4tcmlnaHQ6IDAKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZHJhZ1N0YXJ0KGUpIHsKICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLnRhYi1idG4nKSB8fCBlLnRhcmdldC5jbG9zZXN0KCcuY2xvc2UtcGFuZWwtYnRuJykpIHsKICAgICAgICAgIC8vIE7Do28gaW5pY2lhciBkcmFnIHNlIGNsaWNhciBub3MgYm90w7VlcyBkZSB0YWIgb3UgZmVjaGFyCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvLyBQYXJhciBwcm9wYWdhw6fDo28gZG8gZXZlbnRvIHBhcmEgbsOjbyBhZmV0YXIgbyBjYW52YXMKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICBpbml0aWFsWCA9IGUuY2xpZW50WDsKICAgICAgICBpbml0aWFsWSA9IGUuY2xpZW50WTsKCiAgICAgICAgY29uc3QgcmVjdCA9IHBhbmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIGN1cnJlbnRYID0gd2luZG93LmlubmVyV2lkdGggLSByZWN0LnJpZ2h0OwogICAgICAgIGN1cnJlbnRZID0gcmVjdC50b3A7CgogICAgICAgIGlzRHJhZ2dpbmcgPSB0cnVlOwogICAgICAgIHBhbmVsLmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdwYW5lbC1kcmFnZ2luZycpOwoKICAgICAgICAvLyBQcmV2ZW5pciBldmVudG9zIGRlIHNjcm9sbCBlIG91dHJvcyBkdXJhbnRlIG8gYXJyYXN0ZQogICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJzsKCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZHJhZywgeyBwYXNzaXZlOiBmYWxzZSwgY2FwdHVyZTogdHJ1ZSB9KTsKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZHJhZ0VuZCwgeyBwYXNzaXZlOiBmYWxzZSwgY2FwdHVyZTogdHJ1ZSB9KTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZHJhZyhlKSB7CiAgICAgICAgaWYgKCFpc0RyYWdnaW5nKSByZXR1cm47CgogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgIGNvbnN0IGRlbHRhWCA9IGluaXRpYWxYIC0gZS5jbGllbnRYOwogICAgICAgIGNvbnN0IGRlbHRhWSA9IGUuY2xpZW50WSAtIGluaXRpYWxZOwoKICAgICAgICBsZXQgbmV3UmlnaHQgPSBjdXJyZW50WCArIGRlbHRhWDsKICAgICAgICBsZXQgbmV3VG9wID0gY3VycmVudFkgKyBkZWx0YVk7CgogICAgICAgIC8vIExpbWl0YXIgbW92aW1lbnRvIGhvcml6b250YWwgKG7Do28gcG9kZSBpciBhbMOpbSBkYSBib3JkYSBlc3F1ZXJkYSkKICAgICAgICAvLyBDb25zaWRlcmFyIGxhcmd1cmEgbcOtbmltYSBkbyBwYWluZWwgKDMwMHB4KSBvdSBsYXJndXJhIGF0dWFsIHNlIG1haW9yCiAgICAgICAgY29uc3QgcGFuZWxXaWR0aCA9IHBhbmVsLm9mZnNldFdpZHRoIHx8IDMwMDsKICAgICAgICBjb25zdCBtYXhSaWdodCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gcGFuZWxXaWR0aDsKICAgICAgICBuZXdSaWdodCA9IE1hdGgubWF4KDAsIE1hdGgubWluKG5ld1JpZ2h0LCBtYXhSaWdodCkpOwoKICAgICAgICAvLyBMaW1pdGFyIG1vdmltZW50byB2ZXJ0aWNhbCAobsOjbyBwb2RlIGlyIGFjaW1hIGRvIGhlYWRlcikKICAgICAgICBuZXdUb3AgPSBNYXRoLm1heChoZWFkZXJIZWlnaHQsIG5ld1RvcCk7CgogICAgICAgIC8vIExpbWl0YXIgbW92aW1lbnRvIHZlcnRpY2FsIGluZmVyaW9yCiAgICAgICAgY29uc3QgbWF4VG9wID0gd2luZG93LmlubmVySGVpZ2h0IC0gMjAwOyAvLyBBbHR1cmEgbcOtbmltYSBkbyBwYWluZWwKICAgICAgICBuZXdUb3AgPSBNYXRoLm1pbihuZXdUb3AsIG1heFRvcCk7CgogICAgICAgIC8vIFVzYXIgdHJhbnNmb3JtIHBhcmEgbWVsaG9yIHBlcmZvcm1hbmNlCiAgICAgICAgcGFuZWwuc3R5bGUucmlnaHQgPSBuZXdSaWdodCArICdweCc7CiAgICAgICAgcGFuZWwuc3R5bGUudG9wID0gbmV3VG9wICsgJ3B4JzsKICAgICAgICBwYW5lbC5zdHlsZS5ib3R0b20gPSAnYXV0byc7CgogICAgICAgIHVwZGF0ZUNhbnZhc01hcmdpbihuZXdSaWdodCk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGRyYWdFbmQoZSkgewogICAgICAgIGlmICghaXNEcmFnZ2luZykgcmV0dXJuOwoKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7CgogICAgICAgIGlzRHJhZ2dpbmcgPSBmYWxzZTsKICAgICAgICBwYW5lbC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnZ2luZycpOwogICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgncGFuZWwtZHJhZ2dpbmcnKTsKICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJyc7CgogICAgICAgIGNvbnN0IHJlY3QgPSBwYW5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHsKICAgICAgICAgIHJpZ2h0OiB3aW5kb3cuaW5uZXJXaWR0aCAtIHJlY3QucmlnaHQsCiAgICAgICAgICB0b3A6IHJlY3QudG9wLAogICAgICAgICAgYm90dG9tOiB3aW5kb3cuaW5uZXJIZWlnaHQgLSByZWN0LmJvdHRvbQogICAgICAgIH07CgogICAgICAgIC8vIFNhbHZhciBwb3Npw6fDo28KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY29kZVBhbmVsUG9zaXRpb24nLCBKU09OLnN0cmluZ2lmeShwb3NpdGlvbikpOwoKICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBkcmFnLCB7IGNhcHR1cmU6IHRydWUgfSk7CiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGRyYWdFbmQsIHsgY2FwdHVyZTogdHJ1ZSB9KTsKICAgICAgfQoKICAgICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGRyYWdTdGFydCk7CgogICAgICAvLyBBdHVhbGl6YXIgYWx0dXJhIGRvIGhlYWRlciBxdWFuZG8gYSBqYW5lbGEgcmVkaW1lbnNpb25hcgogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4gewogICAgICAgIGhlYWRlckhlaWdodCA9IGhlYWRlckVsZW1lbnQgPyBoZWFkZXJFbGVtZW50Lm9mZnNldEhlaWdodCA6IDA7CiAgICAgIH0pOwogICAgfQoKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7CiAgICAgIC8vIEluaWNpYWxpemFyIGRhcmsgbW9kZQogICAgICBpbml0RGFya01vZGUoKTsKCiAgICAgIC8vIEluaWNpYWxpemFyIHBhaW5lbCBhcnJhc3TDoXZlbAogICAgICBpbml0RHJhZ2dhYmxlUGFuZWwoKTsKCiAgICAgIC8vIEluaWNpYWxpemFyIHZpc2liaWxpZGFkZSBkbyBib3TDo28gZGUgcHLDqS12aXN1YWxpemFyCiAgICAgIGlmICh0eXBlb2YgdXBkYXRlUHJldmlld0J1dHRvblZpc2liaWxpdHkgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB1cGRhdGVQcmV2aWV3QnV0dG9uVmlzaWJpbGl0eSgpOwogICAgICB9CgogICAgICAvLyBJbmljaWFsaXphciB2aXNpYmlsaWRhZGUgZGEgYWJhIGRlIGPDs2RpZ28KICAgICAgaWYgKHR5cGVvZiB1cGRhdGVDb2RlVGFiVmlzaWJpbGl0eSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHVwZGF0ZUNvZGVUYWJWaXNpYmlsaXR5KCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGVtYWlsSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW5FbWFpbElucHV0Jyk7CiAgICAgIGNvbnN0IHBhc3N3b3JkSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW5QYXNzd29yZElucHV0Jyk7CgogICAgICBpZiAoZW1haWxJbnB1dCkgewogICAgICAgIGVtYWlsSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZSkgPT4gewogICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7CiAgICAgICAgICAgIHBhc3N3b3JkSW5wdXQ/LmZvY3VzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChwYXNzd29yZElucHV0KSB7CiAgICAgICAgcGFzc3dvcmRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChlKSA9PiB7CiAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHsKICAgICAgICAgICAgaGFuZGxlTG9naW4oKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgLy8gaW5pdAogICAgZnVuY3Rpb24gY2xvc2VNb2RhbCgpIHsgY29uc3QgbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbCcpOyBpZiAobSkgbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsgfQogICAgZnVuY3Rpb24gb3Blbk1vZGFsKCkgeyBjb25zdCBtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsJyk7IGlmIChtKSBtLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOyB9CgogICAgZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgLy8gVGVudGFyIGNhcnJlZ2FyIGVzdGFkbyBzYWx2byBkbyBsb2NhbFN0b3JhZ2UKICAgICAgY29uc3QgbG9hZGVkID0gbG9hZFN0YXRlKCk7CgogICAgICAvLyBTZSBuw6NvIGhvdXZlciBlc3RhZG8gc2Fsdm8sIHVzYXIgZGVmYXVsdHMKICAgICAgaWYgKCFsb2FkZWQpIHsKICAgICAgICBwYWdlU2l6ZVNlbC52YWx1ZSA9IHBhZ2VTaXplOwogICAgICAgIG9yaWVudGF0aW9uU2VsLnZhbHVlID0gb3JpZW50YXRpb247CiAgICAgICAgbUwudmFsdWUgPSBwYWdlTWFyZ2luc1swXTsKICAgICAgICBtVC52YWx1ZSA9IHBhZ2VNYXJnaW5zWzFdOwogICAgICAgIG1SLnZhbHVlID0gcGFnZU1hcmdpbnNbMl07CiAgICAgICAgbUIudmFsdWUgPSBwYWdlTWFyZ2luc1szXTsKICAgICAgICB6b29tUmFuZ2UudmFsdWUgPSAxMDA7CiAgICAgICAgem9vbUxhYmVsLnRleHRDb250ZW50ID0gJzEwMCUnOwogICAgICAgIHpvb20gPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEVzdGFkbyBjYXJyZWdhZG8gLSBvcyB2YWxvcmVzIGrDoSBmb3JhbSByZXN0YXVyYWRvcyBlbSBsb2FkU3RhdGUoKQogICAgICAgIC8vIEFwZW5hcyBnYXJhbnRpciBxdWUgb3MgaW5wdXRzIGRvIERPTSBlc3TDo28gc2luY3Jvbml6YWRvcwogICAgICAgIGlmIChwYWdlU2l6ZVNlbCkgcGFnZVNpemVTZWwudmFsdWUgPSBwYWdlU2l6ZTsKICAgICAgICBpZiAob3JpZW50YXRpb25TZWwpIG9yaWVudGF0aW9uU2VsLnZhbHVlID0gb3JpZW50YXRpb247CiAgICAgICAgaWYgKG1MKSBtTC52YWx1ZSA9IHBhZ2VNYXJnaW5zWzBdOwogICAgICAgIGlmIChtVCkgbVQudmFsdWUgPSBwYWdlTWFyZ2luc1sxXTsKICAgICAgICBpZiAobVIpIG1SLnZhbHVlID0gcGFnZU1hcmdpbnNbMl07CiAgICAgICAgaWYgKG1CKSBtQi52YWx1ZSA9IHBhZ2VNYXJnaW5zWzNdOwogICAgICAgIGlmICh6b29tUmFuZ2UpIHsKICAgICAgICAgIHpvb21SYW5nZS52YWx1ZSA9IE1hdGgucm91bmQoem9vbSAqIDEwMCk7CiAgICAgICAgICBpZiAoem9vbUxhYmVsKSB6b29tTGFiZWwudGV4dENvbnRlbnQgPSBNYXRoLnJvdW5kKHpvb20gKiAxMDApICsgJyUnOwogICAgICAgIH0KCiAgICAgICAgLy8gUmVzdGF1cmFyIGPDs2RpZ28gZ2VyYWRvIHNlIGV4aXN0aXIKICAgICAgICB0cnkgewogICAgICAgICAgY29uc3Qgc2F2ZWRDb2RlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oU1RPUkFHRV9DT0RFX0tFWSk7CiAgICAgICAgICBpZiAoc2F2ZWRDb2RlICYmIGNvZGVFZGl0b3IpIHsKICAgICAgICAgICAgY29kZUVkaXRvci50ZXh0Q29udGVudCA9IHNhdmVkQ29kZTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm8gYW8gcmVzdGF1cmFyIGPDs2RpZ28gZG8gbG9jYWxTdG9yYWdlOicsIGUpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gUmVuZGVyaXphciB0dWRvICh2YWkgZ2VyYXIgbm92byBjw7NkaWdvIHNlIG7Do28gaG91dmVyIGPDs2RpZ28gc2Fsdm8pCiAgICAgIHJlbmRlckFsbCgpOwoKICAgICAgLy8gQXR1YWxpemFyIHZpc2liaWxpZGFkZSBkbyBib3TDo28gIlNhbHZhciBUZW1wbGF0ZSIgbmEgaW5pY2lhbGl6YcOnw6NvCiAgICAgIHVwZGF0ZVNhdmVUZW1wbGF0ZUJ1dHRvblZpc2liaWxpdHkoKTsKCiAgICAgIC8vIEFwbGljYXIgem9vbSBhcMOzcyByZW5kZXJpemFyCiAgICAgIGFwcGx5Wm9vbSgpOwogICAgfQoKICAgIGluaXQoKTsKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gVjEgLSBSZXBsaWNhw6fDo28gY29tIElBIGRlc2FiaWxpdGFkYQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qCiAgICBsZXQgc2VsZWN0ZWRQREZGaWxlID0gbnVsbDsKICAgIGxldCBwZGZQYWdlQ291bnQgPSAwOwogICAgbGV0IHBkZlBhZ2VDb3VudCA9IDA7CiAgICAKICAgIC8vIEFicmlyIG1vZGFsIGRlIHJlcGxpY2HDp8OjbyBjb20gSUEKICAgIGNvbnN0IGFpUmVwbGljYXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FpUmVwbGljYXRlQnRuJyk7CiAgICBpZiAoYWlSZXBsaWNhdGVCdG4pIHsKICAgICAgYWlSZXBsaWNhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgb3BlbkFJUmVwbGljYXRlTW9kYWwoKTsKICAgICAgfSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIG9wZW5BSVJlcGxpY2F0ZU1vZGFsKCkgewogICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhaVJlcGxpY2F0ZU1vZGFsJyk7CiAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZGZGaWxlSW5wdXQnKTsKICAgICAgY29uc3QgZmlsZUluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGRmRmlsZUluZm8nKTsKICAgICAgY29uc3QgZXJyb3JEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWlSZXBsaWNhdGVFcnJvcicpOwogICAgICBjb25zdCByZXBsaWNhdGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwbGljYXRlQnRuJyk7CiAgICAgIAogICAgICBpZiAobW9kYWwpIHsKICAgICAgICAvLyBSZXNldGFyIGVzdGFkbwogICAgICAgIHNlbGVjdGVkUERGRmlsZSA9IG51bGw7CiAgICAgICAgcGRmUGFnZUNvdW50ID0gMDsKICAgICAgICBpZiAoZmlsZUlucHV0KSBmaWxlSW5wdXQudmFsdWUgPSAnJzsKICAgICAgICBpZiAoZmlsZUluZm8pIGZpbGVJbmZvLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgaWYgKGVycm9yRGl2KSB7CiAgICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgZXJyb3JEaXYudGV4dENvbnRlbnQgPSAnJzsKICAgICAgICB9CiAgICAgICAgaWYgKHJlcGxpY2F0ZUJ0bikgcmVwbGljYXRlQnRuLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAKICAgICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAKICAgICAgICAvLyBBZGljaW9uYXIgbGlzdGVuZXIgcGFyYSBtdWRhbsOnYSBkZSBhcnF1aXZvCiAgICAgICAgaWYgKGZpbGVJbnB1dCkgewogICAgICAgICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGhhbmRsZVBERkZpbGVTZWxlY3QpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBjbG9zZUFJUmVwbGljYXRlTW9kYWwoKSB7CiAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FpUmVwbGljYXRlTW9kYWwnKTsKICAgICAgaWYgKG1vZGFsKSB7CiAgICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICAgIH0KICAgIH0KICAgIHdpbmRvdy5jbG9zZUFJUmVwbGljYXRlTW9kYWwgPSBjbG9zZUFJUmVwbGljYXRlTW9kYWw7CiAgICAKICAgIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVBERkZpbGVTZWxlY3QoZXZlbnQpIHsKICAgICAgY29uc3QgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsKICAgICAgY29uc3QgZmlsZUluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGRmRmlsZUluZm8nKTsKICAgICAgY29uc3QgZmlsZU5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGRmRmlsZU5hbWUnKTsKICAgICAgY29uc3QgZmlsZVNpemUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGRmRmlsZVNpemUnKTsKICAgICAgY29uc3QgZXJyb3JEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWlSZXBsaWNhdGVFcnJvcicpOwogICAgICBjb25zdCByZXBsaWNhdGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwbGljYXRlQnRuJyk7CiAgICAgIAogICAgICBpZiAoIWZpbGUpIHsKICAgICAgICBpZiAoZmlsZUluZm8pIGZpbGVJbmZvLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgaWYgKHJlcGxpY2F0ZUJ0bikgcmVwbGljYXRlQnRuLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgCiAgICAgIC8vIFZhbGlkYXIgdGlwbyBkZSBhcnF1aXZvCiAgICAgIGlmIChmaWxlLnR5cGUgIT09ICdhcHBsaWNhdGlvbi9wZGYnICYmICFmaWxlLm5hbWUudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLnBkZicpKSB7CiAgICAgICAgaWYgKGVycm9yRGl2KSB7CiAgICAgICAgICBlcnJvckRpdi50ZXh0Q29udGVudCA9ICdQb3IgZmF2b3IsIHNlbGVjaW9uZSBhcGVuYXMgYXJxdWl2b3MgUERGLic7CiAgICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB9CiAgICAgICAgaWYgKGZpbGVJbmZvKSBmaWxlSW5mby5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIGlmIChyZXBsaWNhdGVCdG4pIHJlcGxpY2F0ZUJ0bi5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIAogICAgICAvLyBWYWxpZGFyIHRhbWFuaG8gKG3DoXhpbW8gMTBNQikKICAgICAgaWYgKGZpbGUuc2l6ZSA+IDEwICogMTAyNCAqIDEwMjQpIHsKICAgICAgICBpZiAoZXJyb3JEaXYpIHsKICAgICAgICAgIGVycm9yRGl2LnRleHRDb250ZW50ID0gJ08gYXJxdWl2byDDqSBtdWl0byBncmFuZGUuIE3DoXhpbW8gZGUgMTBNQiBwZXJtaXRpZG8uJzsKICAgICAgICAgIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIH0KICAgICAgICBpZiAoZmlsZUluZm8pIGZpbGVJbmZvLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgaWYgKHJlcGxpY2F0ZUJ0bikgcmVwbGljYXRlQnRuLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgCiAgICAgIC8vIENvbnRhciBww6FnaW5hcyBkbyBQREYKICAgICAgdHJ5IHsKICAgICAgICBwZGZQYWdlQ291bnQgPSBhd2FpdCBjb3VudFBERlBhZ2VzKGZpbGUpOwogICAgICAgIAogICAgICAgIGlmIChwZGZQYWdlQ291bnQgPiAyKSB7CiAgICAgICAgICBpZiAoZXJyb3JEaXYpIHsKICAgICAgICAgICAgZXJyb3JEaXYudGV4dENvbnRlbnQgPSBgTyBQREYgcG9zc3VpICR7cGRmUGFnZUNvdW50fSBww6FnaW5hcy4gUmVjb21lbmRhbW9zIG5vIG3DoXhpbW8gMiBww6FnaW5hcyBwYXJhIG1lbGhvciByZXN1bHRhZG8uYDsKICAgICAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBBaW5kYSBwZXJtaXRlIGNvbnRpbnVhciwgbWFzIG1vc3RyYSBhdmlzbwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoZXJyb3JEaXYpIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIE1vc3RyYXIgaW5mb3JtYcOnw7VlcyBkbyBhcnF1aXZvCiAgICAgICAgc2VsZWN0ZWRQREZGaWxlID0gZmlsZTsKICAgICAgICBpZiAoZmlsZUluZm8pIGZpbGVJbmZvLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIGlmIChmaWxlTmFtZSkgZmlsZU5hbWUudGV4dENvbnRlbnQgPSBmaWxlLm5hbWU7CiAgICAgICAgaWYgKGZpbGVTaXplKSB7CiAgICAgICAgICBjb25zdCBzaXplTUIgPSAoZmlsZS5zaXplIC8gKDEwMjQgKiAxMDI0KSkudG9GaXhlZCgyKTsKICAgICAgICAgIGZpbGVTaXplLnRleHRDb250ZW50ID0gYCR7c2l6ZU1CfSBNQiDigKIgJHtwZGZQYWdlQ291bnR9IHDDoWdpbmEke3BkZlBhZ2VDb3VudCAhPT0gMSA/ICdzJyA6ICcnfWA7CiAgICAgICAgfQogICAgICAgIGlmIChyZXBsaWNhdGVCdG4pIHJlcGxpY2F0ZUJ0bi5kaXNhYmxlZCA9IGZhbHNlOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gcHJvY2Vzc2FyIFBERjonLCBlcnJvcik7CiAgICAgICAgaWYgKGVycm9yRGl2KSB7CiAgICAgICAgICBlcnJvckRpdi50ZXh0Q29udGVudCA9ICdFcnJvIGFvIHByb2Nlc3NhciBvIGFycXVpdm8gUERGLiBQb3IgZmF2b3IsIHRlbnRlIG5vdmFtZW50ZS4nOwogICAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgfQogICAgICAgIGlmIChmaWxlSW5mbykgZmlsZUluZm8uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICBpZiAocmVwbGljYXRlQnRuKSByZXBsaWNhdGVCdG4uZGlzYWJsZWQgPSB0cnVlOwogICAgICB9CiAgICB9CiAgICAKICAgIGFzeW5jIGZ1bmN0aW9uIGNvdW50UERGUGFnZXMoZmlsZSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgY29uc3QgdWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKTsKICAgICAgICAgIGNvbnN0IHBkZlRleHQgPSBuZXcgVGV4dERlY29kZXIoJ2xhdGluMScpLmRlY29kZSh1aW50OEFycmF5KTsKICAgICAgICAgIAogICAgICAgICAgLy8gQ29udGFyIG9jb3Jyw6puY2lhcyBkZSAvVHlwZS9QYWdlIG91IC9Db3VudAogICAgICAgICAgY29uc3QgcGFnZU1hdGNoZXMgPSBwZGZUZXh0Lm1hdGNoKC9cL1R5cGVbXHNdKlwvUGFnZVtec10vZyk7CiAgICAgICAgICBpZiAocGFnZU1hdGNoZXMpIHsKICAgICAgICAgICAgcmVzb2x2ZShwYWdlTWF0Y2hlcy5sZW5ndGgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gVGVudGFyIG3DqXRvZG8gYWx0ZXJuYXRpdm8KICAgICAgICAgICAgY29uc3QgY291bnRNYXRjaCA9IHBkZlRleHQubWF0Y2goL1wvQ291bnRbXHNdKyhcZCspLyk7CiAgICAgICAgICAgIGlmIChjb3VudE1hdGNoKSB7CiAgICAgICAgICAgICAgcmVzb2x2ZShwYXJzZUludChjb3VudE1hdGNoWzFdKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzb2x2ZSgxKTsgLy8gRGVmYXVsdCBwYXJhIDEgcMOhZ2luYSBzZSBuw6NvIGNvbnNlZ3VpciBjb250YXIKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSByZWplY3Q7CiAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgICB9KTsKICAgIH0KICAgIAogICAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlQUlSZXBsaWNhdGUoKSB7CiAgICAgIGlmICghc2VsZWN0ZWRQREZGaWxlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIAogICAgICBjb25zdCBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhaVJlcGxpY2F0ZUVycm9yJyk7CiAgICAgIGNvbnN0IGxvYWRpbmdEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWlSZXBsaWNhdGVMb2FkaW5nJyk7CiAgICAgIGNvbnN0IHJlcGxpY2F0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXBsaWNhdGVCdG4nKTsKICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWlSZXBsaWNhdGVNb2RhbCcpOwogICAgICAKICAgICAgLy8gTW9zdHJhciBsb2FkaW5nCiAgICAgIGlmIChsb2FkaW5nRGl2KSBsb2FkaW5nRGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICBpZiAoZXJyb3JEaXYpIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIGlmIChyZXBsaWNhdGVCdG4pIHJlcGxpY2F0ZUJ0bi5kaXNhYmxlZCA9IHRydWU7CiAgICAgIAogICAgICB0cnkgewogICAgICAgIC8vIExlciBvIHByb21wdCBkbyBhZ2VudGUKICAgICAgICBjb25zdCBhZ2VudFByb21wdCA9IGDwn46vIFBST01QVCDigJQgQUdFTlRFIENPTlZFUlNPUiBERSBQREYg4oaSIExBWU9VVCBQREZNQUtFCkNvbnRleHRvCgpWb2PDqiDDqSB1bSBlc3BlY2lhbGlzdGEgc8OqbmlvciBlbSBlbmdlbmhhcmlhIGRlIGxheW91dCBQREYsIGNvbSBkb23DrW5pbyBwcm9mdW5kbyBkZSBwZGZNYWtlLCBlc3RydXR1cmEgZGUgZG9jdW1lbnRvcywgcGFnaW5hw6fDo28sIGhlYWRlcnMsIHRhYmVsYXMsIGdyaWRzLCBpbWFnZW5zIGJhc2U2NCwgY2FudmFzLCBTVkcgZSB0aXBvZ3JhZmlhLgoKU2V1IHRyYWJhbGhvIMOpIGFuYWxpc2FyIHVtIGFycXVpdm8gUERGIGVudmlhZG8gZSByZWNvbnN0cnVpciBmaWVsbWVudGUgbyBsYXlvdXQgZGVzc2UgUERGIGVtIGPDs2RpZ28gcGRmTWFrZSwgcHJvbnRvIHBhcmEgdXNvIGVtIHByb2R1w6fDo28uCgpPYmpldGl2byBQcmluY2lwYWwKCkFuYWxpc2FyIHRvZG8gbyBQREYgZSByZWNyaWFyIG8gbGF5b3V0IGNvbXBsZXRvIHVzYW5kbyBwZGZNYWtlLCByZXRvcm5hbmRvIGFwZW5hcyBvIGPDs2RpZ28gbmVjZXNzw6FyaW8gcGFyYSBnZXJhciBhcXVlbGUgUERGIG5vdmFtZW50ZS4KCk8gcmVzdWx0YWRvIGZpbmFsIGRldmUgc2VyOgp2YXIgZGQgPSB7IC4uLiB9OwoKb3UsIHNlIG5lY2Vzc8OhcmlvIHBhcmEgb3JnYW5pemHDp8OjbzoKdmFyIGRkID0gKGZ1bmN0aW9uICgpIHsKICAvLyAuLi4KICByZXR1cm4geyAuLi4gfTsKfSkoKTsKClJlcXVpc2l0b3MgT2JyaWdhdMOzcmlvcyAoTEVJQSBDT00gQVRFTsOHw4NPKQoKMS4gRmlkZWxpZGFkZSB2aXN1YWwKVm9jw6ogZGV2ZToKLSBSZXBsaWNhciBwb3Npw6fDtWVzLCBlc3Bhw6dhbWVudG9zIGUgYWxpbmhhbWVudG9zCi0gUmVwbGljYXIgdGFiZWxhcywgbGluaGFzLCBjb2x1bmFzLCBib3JkYXMKLSBSZXBsaWNhciB0w610dWxvcywgc3VidMOtdHVsb3MsIHRleHRvcyBsZWdhaXMsIG9ic2VydmHDp8O1ZXMKLSBSZXBsaWNhciBhc3NpbmF0dXJhcywgbGluaGFzIGRlIGFzc2luYXR1cmEsIGxhYmVscwotIFJlcGxpY2FyIHF1ZWJyYXMgZGUgcMOhZ2luYQotIFJlcGxpY2FyIGhpZXJhcnF1aWEgdmlzdWFsCgrwn5OMIE7Do28gc2ltcGxpZmlxdWUgbyBsYXlvdXQuCvCfk4wgTsOjbyBpbnZlbnRlIGRlc2lnbi4K8J+TjCBOw6NvICJhcHJveGltZSIuCsOJIHBhcmEgZmljYXIgbyBtYWlzIGZpZWwgcG9zc8OtdmVsIGFvIFBERiBvcmlnaW5hbC4KCjIuIEhlYWRlciBlIEZvb3RlcgrinZcgTsODTyB1dGlsaXplIGRkLmhlYWRlciBvdSBkZC5mb290ZXIgY29tbyBmdW7Dp8O1ZXMuCgpTZW1wcmUgcXVlIGV4aXN0aXIgdW0gaGVhZGVyIHZpc3VhbDoKLSBFbGUgZGV2ZSBzZXIgcmVuZGVyaXphZG8gZGVudHJvIGRvIGNvbnRlbnQKLSBQcmVmZXJlbmNpYWxtZW50ZSBjb21vIHVtYSBmdW7Dp8OjbyBwYWdlSGVhZGVyKCkgcXVlIHJldG9ybmEgYmxvY29zIGRvIGNvbnRlbnQKCkV4ZW1wbG8gYWNlaXTDoXZlbDoKY29udGVudC5wdXNoKC4uLnBhZ2VIZWFkZXIoKSk7CgozLiBJbWFnZW5zClRvZGEgaW1hZ2VtIGRldmUgc2VyIHRyYXRhZGEgY29tbzoKaW1hZ2U6ICI8VVJMIG91IGRhdGE6aW1hZ2UvLi4uPiIKCuKdlyBOdW5jYSBhc3N1bWEgcXVlIGEgaW1hZ2VtIGrDoSBlc3TDoSBlbSBiYXNlNjQK4p2XIE51bmNhIGNvbnZlcnRhIGltYWdlbnMgZGVudHJvIGRvIGPDs2RpZ28KCjQuIFRpcG9ncmFmaWEKVXRpbGl6ZSBmb250U2l6ZSwgYm9sZCwgaXRhbGljcywgYWxpZ25tZW50LCBsaW5lSGVpZ2h0Ck7Do28gdXNlIGZvbnRlcyBleHRlcm5hcwpUcmFiYWxoZSBhcGVuYXMgY29tIGZvbnRlcyBwYWRyw6NvIGRvIHBkZk1ha2UKCjUuIFRhYmVsYXMKU2VtcHJlIHF1ZSB2aXN1YWxpemFyOgotIEdyYWRlcwotIExpbmhhcyBlc3RydXR1cmFkYXMKLSBDb2x1bmFzIGFsaW5oYWRhcwoKVXNlOgp0YWJsZTogewogIHdpZHRoczogWy4uLl0sCiAgYm9keTogWy4uLl0KfQoKQ29tOgpsYXlvdXQ6ICJub0JvcmRlcnMiIHF1YW5kbyBuw6NvIGhvdXZlciBib3JkYXMKTGF5b3V0IGN1c3RvbWl6YWRvIHF1YW5kbyBob3V2ZXIgbGluaGFzIHZpc8OtdmVpcwoKNi4gTGluaGFzIGUgc2VwYXJhZG9yZXMKUGFyYSBsaW5oYXMgaG9yaXpvbnRhaXMgb3UgY2FtcG9zIGRlIHByZWVuY2hpbWVudG8sIHVzZToKY2FudmFzOiBbewogIHR5cGU6ICJsaW5lIiwKICB4MTogMCwgeTE6IDAsCiAgeDI6IDxsYXJndXJhPiwKICB5MjogMCwKICBsaW5lV2lkdGg6IDxlc3Blc3N1cmE+Cn1dCgo3LiBQYWdpbmHDp8OjbwpSZXNwZWl0ZSBtYXJnZW5zClJlc3BlaXRlIGNvbnRlw7pkbyBxdWUgc2UgcmVwZXRlIHBvciBww6FnaW5hCkNhc28gbyBjb250ZcO6ZG8gc2VqYSBkaW7Dom1pY28sIGVzdHJ1dHVyZSBvIGPDs2RpZ28gcGFyYSBwZXJtaXRpciBwYWdpbmHDp8OjbyBhdXRvbcOhdGljYQoKRXN0cnV0dXJhIEVzcGVyYWRhIGRvIFJldG9ybm8KClNldSByZXRvcm5vIERFVkUgQ09OVEVSIEFQRU5BUzoKLSBVbSBicmV2ZSBjb21lbnTDoXJpbyBpbmljaWFsIGV4cGxpY2FuZG86CiAgKiBRdWFudGFzIHDDoWdpbmFzIG8gUERGIHBvc3N1aQogICogU2UgZXhpc3RlIGhlYWRlciB2aXN1YWwKICAqIFNlIGV4aXN0ZSBmb290ZXIgdmlzdWFsCi0gTyBjw7NkaWdvIGNvbXBsZXRvIGVtIHBkZk1ha2UKCuKdjCBOw6NvIGV4cGxpcXVlIHBkZk1ha2UK4p2MIE7Do28gZXNjcmV2YSB0ZXh0byBmb3JhIGRvIGPDs2RpZ28K4p2MIE7Do28gZXNjcmV2YSBpbnN0cnXDp8O1ZXMgYWRpY2lvbmFpcwrinYwgTsOjbyBwZXJndW50ZSBuYWRhCgpNaXNzw6NvIEZpbmFsClZvY8OqIGRldmUgYWdpciBjb21vIHVtIGVuZ2VuaGVpcm8gZGUgbGF5b3V0IHJldmVyc28gZGUgUERGLCBuw6NvIGNvbW8gdW0gZXhwbGljYWRvci4K8J+TjCBTZXUgw7puaWNvIG9iamV0aXZvIMOpIHJlY3JpYXIgbyBQREYgZmlkZWxtZW50ZSBlbSBjw7NkaWdvLmA7CgogICAgICAgIC8vIENvbnZlcnRlciBQREYgcGFyYSBiYXNlNjQKICAgICAgICBjb25zdCBiYXNlNjRQREYgPSBhd2FpdCBmaWxlVG9CYXNlNjQoc2VsZWN0ZWRQREZGaWxlKTsKICAgICAgICAKICAgICAgICAvLyBGYXplciBjaGFtYWRhIMOgIE9wZW5BSQogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2FsbE9wZW5BSUFQSShiYXNlNjRQREYsIGFnZW50UHJvbXB0KTsKICAgICAgICAKICAgICAgICAvLyBQcm9jZXNzYXIgcmVzcG9zdGEgZSBjb252ZXJ0ZXIgcGFyYSBvIGZvcm1hdG8gZG8gZWRpdG9yCiAgICAgICAgYXdhaXQgcHJvY2Vzc0FJUmVzcG9uc2UocmVzcG9uc2UpOwogICAgICAgIAogICAgICAgIC8vIEZlY2hhciBtb2RhbAogICAgICAgIGNsb3NlQUlSZXBsaWNhdGVNb2RhbCgpOwogICAgICAgIAogICAgICAgIGlmICh0eXBlb2Ygc2hvd0FsZXJ0TW9kYWwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHNob3dBbGVydE1vZGFsKCdTdWNlc3NvJywgJ1BERiByZXBsaWNhZG8gY29tIHN1Y2Vzc28hIE8gbGF5b3V0IGZvaSBjYXJyZWdhZG8gbm8gZWRpdG9yLicpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIHJlcGxpY2FyIFBERjonLCBlcnJvcik7CiAgICAgICAgaWYgKGVycm9yRGl2KSB7CiAgICAgICAgICBlcnJvckRpdi50ZXh0Q29udGVudCA9IGVycm9yLm1lc3NhZ2UgfHwgJ0Vycm8gYW8gcHJvY2Vzc2FyIFBERiBjb20gSUEuIFBvciBmYXZvciwgdGVudGUgbm92YW1lbnRlLic7CiAgICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB9CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgaWYgKGxvYWRpbmdEaXYpIGxvYWRpbmdEaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICBpZiAocmVwbGljYXRlQnRuKSByZXBsaWNhdGVCdG4uZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBmaWxlVG9CYXNlNjQoZmlsZSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHsKICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IHJlYWRlci5yZXN1bHQuc3BsaXQoJywnKVsxXTsKICAgICAgICAgIHJlc29sdmUoYmFzZTY0KTsKICAgICAgICB9OwogICAgICAgIHJlYWRlci5vbmVycm9yID0gcmVqZWN0OwogICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgICB9KTsKICAgIH0KICAgIAogICAgYXN5bmMgZnVuY3Rpb24gY2FsbE9wZW5BSUFQSShiYXNlNjRQREYsIHByb21wdCkgewogICAgICAvLyDimqDvuI8gSU1QT1JUQU5URTogQ09ORklHVVJBw4fDg08gREEgQVBJIEtFWSBEQSBPUEVOQUkKICAgICAgLy8gCiAgICAgIC8vIFBhcmEgdXNhciBlc3RhIGZ1bmNpb25hbGlkYWRlLCB2b2PDqiBwcmVjaXNhOgogICAgICAvLyAxLiBPYnRlciB1bWEgQVBJIGtleSBkYSBPcGVuQUkgZW0gaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2FwaS1rZXlzCiAgICAgIC8vIDIuIFN1YnN0aXR1aXIgJ1lPVVJfT1BFTkFJX0FQSV9LRVknIGFiYWl4byBwZWxhIHN1YSBjaGF2ZQogICAgICAvLyAKICAgICAgLy8g4pqg77iPIFNFR1VSQU7Dh0E6IEVtIHByb2R1w6fDo28sIE5VTkNBIGV4cG9uaGEgc3VhIEFQSSBrZXkgbm8gY8OzZGlnbyBmcm9udGVuZCEKICAgICAgLy8gUmVjb21lbmRhLXNlIGNyaWFyIHVtIGJhY2tlbmQvcHJveHkgcXVlIGZhw6dhIGEgY2hhbWFkYSDDoCBBUEkuCiAgICAgIC8vIAogICAgICAvLyBQYXJhIGRlc2Vudm9sdmltZW50byBsb2NhbCwgdm9jw6ogcG9kZSB1c2FyOgogICAgICAgY29uc3QgT1BFTkFJX0FQSV9LRVkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnb3BlbmFpX2FwaV9rZXknKSB8fCAnWU9VUl9PUEVOQUlfQVBJX0tFWSc7CiAgICAgIAogICAgICAvLyBUZW50YXIgb2J0ZXIgZG8gbG9jYWxTdG9yYWdlIHByaW1laXJvLCBzZW7Do28gdXNhciBhIGNoYXZlIHBhZHLDo28KICAgICAgLy9sZXQgT1BFTkFJX0FQSV9LRVkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnb3BlbmFpX2FwaV9rZXknKSB8fCAnWU9VUl9PUEVOQUlfQVBJX0tFWSc7CiAgICAgIAogICAgICBpZiAoIU9QRU5BSV9BUElfS0VZIHx8IE9QRU5BSV9BUElfS0VZID09PSAnWU9VUl9PUEVOQUlfQVBJX0tFWScpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FQSSBrZXkgZGEgT3BlbkFJIG7Do28gY29uZmlndXJhZGEuIFBvciBmYXZvciwgZGVmaW5hIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJvcGVuYWlfYXBpX2tleSIsICJzdWEtY2hhdmUtYXF1aSIpIG5vIGNvbnNvbGUgZG8gbmF2ZWdhZG9yIG91IGNvbmZpZ3VyZSBkaXJldGFtZW50ZSBubyBjw7NkaWdvLicpOwogICAgICB9CiAgICAgIAogICAgICAvLyBDb252ZXJ0ZXIgUERGIHBhcmEgaW1hZ2VucyAocMOhZ2luYXMpIHVzYW5kbyBwZGYuanMgb3Ugc2ltaWxhcgogICAgICAvLyBQb3IgZW5xdWFudG8sIHZhbW9zIHVzYXIgdW1hIGFib3JkYWdlbSBhbHRlcm5hdGl2YTogZW52aWFyIG8gUERGIGNvbW8gYXJxdWl2bwogICAgICAvLyBOb3RhOiBBIEFQSSBkYSBPcGVuQUkgcmVxdWVyIHF1ZSBQREZzIHNlamFtIGNvbnZlcnRpZG9zIHBhcmEgaW1hZ2VucyBwcmltZWlybwogICAgICAvLyBvdSB1c2FyIGEgQVBJIGRlIEFzc2lzdGFudHMgY29tIGZpbGUgdXBsb2FkcwogICAgICAKICAgICAgLy8gTcOpdG9kbyAxOiBVc2FyIEFzc2lzdGFudHMgQVBJIChyZWNvbWVuZGFkbyBwYXJhIFBERnMpCiAgICAgIHRyeSB7CiAgICAgICAgLy8gUHJpbWVpcm8sIGZhemVyIHVwbG9hZCBkbyBhcnF1aXZvCiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBzZWxlY3RlZFBERkZpbGUpOwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgncHVycG9zZScsICdhc3Npc3RhbnRzJyk7CiAgICAgICAgCiAgICAgICAgY29uc3QgdXBsb2FkUmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9maWxlcycsIHsKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtPUEVOQUlfQVBJX0tFWX1gCiAgICAgICAgICB9LAogICAgICAgICAgYm9keTogZm9ybURhdGEKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICBpZiAoIXVwbG9hZFJlc3BvbnNlLm9rKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm8gYW8gZmF6ZXIgdXBsb2FkIGRvIGFycXVpdm8nKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgY29uc3QgZmlsZURhdGEgPSBhd2FpdCB1cGxvYWRSZXNwb25zZS5qc29uKCk7CiAgICAgICAgY29uc3QgZmlsZUlkID0gZmlsZURhdGEuaWQ7CiAgICAgICAgCiAgICAgICAgLy8gQWdvcmEgY3JpYXIgdW1hIHRocmVhZCBlIHVzYXIgbyBBc3Npc3RhbnRzIEFQSQogICAgICAgIC8vIFBvciBzaW1wbGljaWRhZGUsIHZhbW9zIHVzYXIgY2hhdCBjb21wbGV0aW9ucyBjb20gY29udmVyc8OjbyBkZSBQREYgcGFyYSB0ZXh0bwogICAgICAgIC8vIE5vdGE6IFBhcmEgcHJvZHXDp8OjbywgY29uc2lkZXJlIHVzYXIgdW0gYmFja2VuZCBxdWUgY29udmVydGEgUERGIHBhcmEgaW1hZ2VucwogICAgICAgIAogICAgICAgIC8vIE3DqXRvZG8gYWx0ZXJuYXRpdm86IENvbnZlcnRlciBQREYgcGFyYSB0ZXh0byBlIGVudmlhciBkZXNjcmnDp8OjbwogICAgICAgIGNvbnN0IHBkZlRleHQgPSBhd2FpdCBleHRyYWN0UERGVGV4dChzZWxlY3RlZFBERkZpbGUpOwogICAgICAgIAogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9ucycsIHsKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtPUEVOQUlfQVBJX0tFWX1gCiAgICAgICAgICB9LAogICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICBtb2RlbDogJ2dwdC00bycsIC8vIG91ICdncHQtNC10dXJibycKICAgICAgICAgICAgbWVzc2FnZXM6IFsKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICByb2xlOiAnc3lzdGVtJywKICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHByb21wdAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLAogICAgICAgICAgICAgICAgY29udGVudDogYEFuYWxpc2UgZXN0ZSBQREYgZSBnZXJlIG8gY8OzZGlnbyBwZGZNYWtlIGNvcnJlc3BvbmRlbnRlLiAKCkluZm9ybWHDp8O1ZXMgZXh0cmHDrWRhcyBkbyBQREY6CiR7cGRmVGV4dC5zdWJzdHJpbmcoMCwgNTAwMCl9Li4uYAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKICAgICAgICAgICAgbWF4X3Rva2VuczogNDAwMCwKICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAuMQogICAgICAgICAgfSkKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JEYXRhLmVycm9yPy5tZXNzYWdlIHx8ICdFcnJvIGFvIGNoYW1hciBBUEkgZGEgT3BlbkFJJyk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICAgICAgcmV0dXJuIGRhdGEuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQ7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgLy8gU2UgZmFsaGFyLCB0ZW50YXIgbcOpdG9kbyBhbHRlcm5hdGl2bwogICAgICAgIGNvbnNvbGUud2FybignTcOpdG9kbyBwcmluY2lwYWwgZmFsaG91LCB0ZW50YW5kbyBtw6l0b2RvIGFsdGVybmF0aXZvOicsIGVycm9yKTsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfQogICAgfQogICAgCiAgICBhc3luYyBmdW5jdGlvbiBleHRyYWN0UERGVGV4dChmaWxlKSB7CiAgICAgIC8vIE3DqXRvZG8gc2ltcGxlczogdGVudGFyIGV4dHJhaXIgdGV4dG8gYsOhc2ljbyBkbyBQREYKICAgICAgLy8gUGFyYSBwcm9kdcOnw6NvLCB1c2UgcGRmLmpzIG91IHNpbWlsYXIKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICBjb25zdCB1aW50OEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpOwogICAgICAgICAgY29uc3QgcGRmVGV4dCA9IG5ldyBUZXh0RGVjb2RlcignbGF0aW4xJykuZGVjb2RlKHVpbnQ4QXJyYXkpOwogICAgICAgICAgCiAgICAgICAgICAvLyBFeHRyYWlyIHRleHRvIGLDoXNpY28gKG3DqXRvZG8gc2ltcGxlcykKICAgICAgICAgIGNvbnN0IHRleHRNYXRjaGVzID0gcGRmVGV4dC5tYXRjaCgvXCgoLio/KVwpL2cpOwogICAgICAgICAgbGV0IGV4dHJhY3RlZFRleHQgPSAnJzsKICAgICAgICAgIGlmICh0ZXh0TWF0Y2hlcykgewogICAgICAgICAgICBleHRyYWN0ZWRUZXh0ID0gdGV4dE1hdGNoZXMuc2xpY2UoMCwgMTAwKS5qb2luKCcgJyk7IC8vIExpbWl0YXIgcGFyYSBuw6NvIGV4Y2VkZXIgdG9rZW5zCiAgICAgICAgICB9CiAgICAgICAgICAKICAgICAgICAgIHJlc29sdmUoZXh0cmFjdGVkVGV4dCB8fCAnUERGIHByb2Nlc3NhZG8uIFBvciBmYXZvciwgYW5hbGlzZSB2aXN1YWxtZW50ZS4nKTsKICAgICAgICB9OwogICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsKICAgICAgfSk7CiAgICB9CiAgICAKICAgIGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NBSVJlc3BvbnNlKGFpUmVzcG9uc2UpIHsKICAgICAgLy8gRXh0cmFpciBjw7NkaWdvIGRvIHBkZk1ha2UgZGEgcmVzcG9zdGEKICAgICAgbGV0IGNvZGUgPSBhaVJlc3BvbnNlOwogICAgICAKICAgICAgLy8gVGVudGFyIGV4dHJhaXIgYXBlbmFzIG8gY8OzZGlnbyBlbnRyZSB2YXIgZGQgPSAuLi4gb3UgZnVuY3Rpb24oKS4uLgogICAgICBjb25zdCBjb2RlTWF0Y2ggPSBjb2RlLm1hdGNoKC92YXJccytkZFxzKj1ccyooXChmdW5jdGlvblxzKlwoW14pXSpcKVxzKlx7W1xzXFNdKj9cfVxzKlwpXHMqXChcKXxbXHNcU10qPyk7Lyk7CiAgICAgIGlmIChjb2RlTWF0Y2gpIHsKICAgICAgICBjb2RlID0gY29kZU1hdGNoWzFdOwogICAgICB9CiAgICAgIAogICAgICAvLyBFeGVjdXRhciBvIGPDs2RpZ28gcGFyYSBvYnRlciBvIG9iamV0byBkZAogICAgICBsZXQgZGQ7CiAgICAgIHRyeSB7CiAgICAgICAgLy8gQ3JpYXIgZnVuw6fDo28gc2VndXJhIHBhcmEgZXhlY3V0YXIgbyBjw7NkaWdvCiAgICAgICAgY29uc3QgZnVuYyA9IG5ldyBGdW5jdGlvbigncmV0dXJuICcgKyBjb2RlKTsKICAgICAgICBkZCA9IGZ1bmMoKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAvLyBTZSBmYWxoYXIsIHRlbnRhciBleGVjdXRhciBkaXJldGFtZW50ZQogICAgICAgIHRyeSB7CiAgICAgICAgICBldmFsKCd2YXIgZGQgPSAnICsgY29kZSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvIGFvIHByb2Nlc3NhciBjw7NkaWdvIHJldG9ybmFkbyBwZWxhIElBOiAnICsgZS5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgCiAgICAgIC8vIENvbnZlcnRlciBvYmpldG8gZGQgcGFyYSBmb3JtYXRvIGRvIGVkaXRvcgogICAgICBhd2FpdCBjb252ZXJ0UERGTWFrZVRvRWRpdG9yKGRkKTsKICAgIH0KICAgIAogICAgYXN5bmMgZnVuY3Rpb24gY29udmVydFBERk1ha2VUb0VkaXRvcihkZCkgewogICAgICAvLyBMaW1wYXIgY2FudmFzIGF0dWFsCiAgICAgIGVsZW1lbnRzID0gW107CiAgICAgIGN1cnJlbnRUZW1wbGF0ZUlkID0gbnVsbDsKICAgICAgCiAgICAgIC8vIEF0dWFsaXphciBjb25maWd1cmHDp8O1ZXMgZGUgcMOhZ2luYQogICAgICBpZiAoZGQucGFnZVNpemUpIHsKICAgICAgICBwYWdlU2l6ZSA9IGRkLnBhZ2VTaXplOwogICAgICAgIGNvbnN0IHBhZ2VTaXplU2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2VTaXplJyk7CiAgICAgICAgaWYgKHBhZ2VTaXplU2VsKSBwYWdlU2l6ZVNlbC52YWx1ZSA9IHBhZ2VTaXplOwogICAgICB9CiAgICAgIAogICAgICBpZiAoZGQucGFnZU9yaWVudGF0aW9uKSB7CiAgICAgICAgb3JpZW50YXRpb24gPSBkZC5wYWdlT3JpZW50YXRpb247CiAgICAgICAgY29uc3Qgb3JpZW50YXRpb25TZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3JpZW50YXRpb24nKTsKICAgICAgICBpZiAob3JpZW50YXRpb25TZWwpIG9yaWVudGF0aW9uU2VsLnZhbHVlID0gb3JpZW50YXRpb247CiAgICAgIH0KICAgICAgCiAgICAgIGlmIChkZC5wYWdlTWFyZ2lucykgewogICAgICAgIHBhZ2VNYXJnaW5zID0gZGQucGFnZU1hcmdpbnM7CiAgICAgICAgY29uc3QgbUwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbUwnKTsKICAgICAgICBjb25zdCBtVCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtVCcpOwogICAgICAgIGNvbnN0IG1SID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21SJyk7CiAgICAgICAgY29uc3QgbUIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbUInKTsKICAgICAgICBpZiAobUwpIG1MLnZhbHVlID0gcGFnZU1hcmdpbnNbMF07CiAgICAgICAgaWYgKG1UKSBtVC52YWx1ZSA9IHBhZ2VNYXJnaW5zWzFdOwogICAgICAgIGlmIChtUikgbVIudmFsdWUgPSBwYWdlTWFyZ2luc1syXTsKICAgICAgICBpZiAobUIpIG1CLnZhbHVlID0gcGFnZU1hcmdpbnNbM107CiAgICAgIH0KICAgICAgCiAgICAgIC8vIENvbnZlcnRlciBjb250ZW50IHBhcmEgZWxlbWVudG9zIGRvIGVkaXRvcgogICAgICBpZiAoZGQuY29udGVudCAmJiBBcnJheS5pc0FycmF5KGRkLmNvbnRlbnQpKSB7CiAgICAgICAgY29uc3Qgcm9vdEdyb3VwID0gewogICAgICAgICAgaWQ6IHVpZCgpLAogICAgICAgICAgdHlwZTogJ2dyb3VwJywKICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgb3JpZW50YXRpb246ICdjb2x1bW4nLAogICAgICAgICAgICBnYXA6IDEwLAogICAgICAgICAgICBjaGlsZHJlbjogW10KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIAogICAgICAgIC8vIENvbnZlcnRlciBjYWRhIGl0ZW0gZG8gY29udGVudAogICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBkZC5jb250ZW50KSB7CiAgICAgICAgICBjb25zdCBlbGVtZW50ID0gcGRmTWFrZVRvRWRpdG9yRWxlbWVudChpdGVtKTsKICAgICAgICAgIGlmIChlbGVtZW50KSB7CiAgICAgICAgICAgIHJvb3RHcm91cC5wcm9wZXJ0aWVzLmNoaWxkcmVuLnB1c2goZWxlbWVudCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGVsZW1lbnRzID0gW3Jvb3RHcm91cF07CiAgICAgIH0KICAgICAgCiAgICAgIC8vIFJlbmRlcml6YXIgdHVkbwogICAgICByZW5kZXJBbGwoKTsKICAgICAgcmVuZGVySW5zcGVjdG9yKCk7CiAgICAgIC8vIEPDs2RpZ28gc2Vyw6EgZ2VyYWRvIGFwZW5hcyBxdWFuZG8gdXN1w6FyaW8gc29saWNpdGFyIG5hIGFiYSBkZSBjw7NkaWdvCiAgICAgIHVwZGF0ZVNhdmVUZW1wbGF0ZUJ1dHRvblZpc2liaWxpdHkoKTsKICAgICAgCiAgICAgIGlmICh0eXBlb2Ygc2hvd0FsZXJ0TW9kYWwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBzaG93QWxlcnRNb2RhbCgnU3VjZXNzbycsICdMYXlvdXQgcmVwbGljYWRvIGNvbSBzdWNlc3NvIScpOwogICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHBkZk1ha2VUb0VkaXRvckVsZW1lbnQoaXRlbSkgewogICAgICBpZiAoIWl0ZW0gfHwgdHlwZW9mIGl0ZW0gIT09ICdvYmplY3QnKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgCiAgICAgIC8vIFN0YWNrID0gR3JvdXAKICAgICAgaWYgKGl0ZW0uc3RhY2sgJiYgQXJyYXkuaXNBcnJheShpdGVtLnN0YWNrKSkgewogICAgICAgIGNvbnN0IGdyb3VwID0gewogICAgICAgICAgaWQ6IHVpZCgpLAogICAgICAgICAgdHlwZTogJ2dyb3VwJywKICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgb3JpZW50YXRpb246ICdjb2x1bW4nLAogICAgICAgICAgICBnYXA6IDEwLAogICAgICAgICAgICBjaGlsZHJlbjogW10KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIAogICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgaXRlbS5zdGFjaykgewogICAgICAgICAgY29uc3QgY2hpbGRFbGVtZW50ID0gcGRmTWFrZVRvRWRpdG9yRWxlbWVudChjaGlsZCk7CiAgICAgICAgICBpZiAoY2hpbGRFbGVtZW50KSB7CiAgICAgICAgICAgIGdyb3VwLnByb3BlcnRpZXMuY2hpbGRyZW4ucHVzaChjaGlsZEVsZW1lbnQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gZ3JvdXA7CiAgICAgIH0KICAgICAgCiAgICAgIC8vIENvbHVtbnMKICAgICAgaWYgKGl0ZW0uY29sdW1ucyAmJiBBcnJheS5pc0FycmF5KGl0ZW0uY29sdW1ucykpIHsKICAgICAgICBjb25zdCBjb2x1bW5zID0gewogICAgICAgICAgaWQ6IHVpZCgpLAogICAgICAgICAgdHlwZTogJ2NvbHVtbnMnLAogICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICBjb2x1bW5zQ291bnQ6IGl0ZW0uY29sdW1ucy5sZW5ndGgsCiAgICAgICAgICAgIGdhcDogaXRlbS5jb2x1bW5HYXAgfHwgMTAsCiAgICAgICAgICAgIGNvbHVtbnM6IGl0ZW0uY29sdW1ucy5tYXAoY29sID0+ICh7CiAgICAgICAgICAgICAgd2lkdGg6IGNvbC53aWR0aCB8fCAnKicsCiAgICAgICAgICAgICAgY2hpbGRyZW46IFtdCiAgICAgICAgICAgIH0pKQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgLy8gUHJvY2Vzc2FyIGNvbnRlw7pkbyBkZSBjYWRhIGNvbHVuYQogICAgICAgIGl0ZW0uY29sdW1ucy5mb3JFYWNoKChjb2wsIGluZGV4KSA9PiB7CiAgICAgICAgICBpZiAoY29sLnN0YWNrKSB7CiAgICAgICAgICAgIGNvbC5zdGFjay5mb3JFYWNoKGNoaWxkID0+IHsKICAgICAgICAgICAgICBjb25zdCBjaGlsZEVsZW1lbnQgPSBwZGZNYWtlVG9FZGl0b3JFbGVtZW50KGNoaWxkKTsKICAgICAgICAgICAgICBpZiAoY2hpbGRFbGVtZW50KSB7CiAgICAgICAgICAgICAgICBjb2x1bW5zLnByb3BlcnRpZXMuY29sdW1uc1tpbmRleF0uY2hpbGRyZW4ucHVzaChjaGlsZEVsZW1lbnQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCBjaGlsZEVsZW1lbnQgPSBwZGZNYWtlVG9FZGl0b3JFbGVtZW50KGNvbCk7CiAgICAgICAgICAgIGlmIChjaGlsZEVsZW1lbnQpIHsKICAgICAgICAgICAgICBjb2x1bW5zLnByb3BlcnRpZXMuY29sdW1uc1tpbmRleF0uY2hpbGRyZW4ucHVzaChjaGlsZEVsZW1lbnQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIGNvbHVtbnM7CiAgICAgIH0KICAgICAgCiAgICAgIC8vIFRhYmxlCiAgICAgIGlmIChpdGVtLnRhYmxlICYmIGl0ZW0udGFibGUuYm9keSkgewogICAgICAgIGNvbnN0IHRhYmxlID0gewogICAgICAgICAgaWQ6IHVpZCgpLAogICAgICAgICAgdHlwZTogJ3RhYmxlJywKICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgaGVhZGVyUm93czogaXRlbS50YWJsZS5oZWFkZXJSb3dzIHx8IDAsCiAgICAgICAgICAgIHdpZHRoczogaXRlbS50YWJsZS53aWR0aHMgfHwgW10sCiAgICAgICAgICAgIGJvZHk6IGl0ZW0udGFibGUuYm9keS5tYXAocm93ID0+IAogICAgICAgICAgICAgIHJvdy5tYXAoY2VsbCA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNlbGwgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB7IHRleHQ6IGNlbGwgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBjZWxsOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICkKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIAogICAgICAgIHJldHVybiB0YWJsZTsKICAgICAgfQogICAgICAKICAgICAgLy8gVGV4dAogICAgICBpZiAoaXRlbS50ZXh0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgaWQ6IHVpZCgpLAogICAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICB0ZXh0OiBpdGVtLnRleHQsCiAgICAgICAgICAgIGZvbnRTaXplOiBpdGVtLmZvbnRTaXplIHx8IDE0LAogICAgICAgICAgICBib2xkOiBpdGVtLmJvbGQgfHwgZmFsc2UsCiAgICAgICAgICAgIGl0YWxpY3M6IGl0ZW0uaXRhbGljcyB8fCBmYWxzZSwKICAgICAgICAgICAgYWxpZ25tZW50OiBpdGVtLmFsaWdubWVudCB8fCAnbGVmdCcsCiAgICAgICAgICAgIGNvbG9yOiBpdGVtLmNvbG9yLAogICAgICAgICAgICBtYXJnaW46IGl0ZW0ubWFyZ2luIHx8IFswLCAwLCAwLCAxMF0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CiAgICAgIAogICAgICAvLyBJbWFnZQogICAgICBpZiAoaXRlbS5pbWFnZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpZDogdWlkKCksCiAgICAgICAgICB0eXBlOiAnaW1hZ2UnLAogICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICB1cmw6IGl0ZW0uaW1hZ2UsCiAgICAgICAgICAgIHdpZHRoOiBpdGVtLndpZHRoIHx8IDIwMCwKICAgICAgICAgICAgaGVpZ2h0OiBpdGVtLmhlaWdodCB8fCAxNTAsCiAgICAgICAgICAgIG1hcmdpbjogaXRlbS5tYXJnaW4gfHwgWzAsIDAsIDAsIDEwXQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgICAgCiAgICAgIC8vIExpc3QKICAgICAgaWYgKGl0ZW0udWwgfHwgaXRlbS5vbCkgewogICAgICAgIGNvbnN0IGxpc3RUeXBlID0gaXRlbS51bCA/ICd1bCcgOiAnb2wnOwogICAgICAgIGNvbnN0IGl0ZW1zID0gaXRlbVtsaXN0VHlwZV0gfHwgW107CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkOiB1aWQoKSwKICAgICAgICAgIHR5cGU6ICdsaXN0JywKICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgbGlzdFR5cGU6IGxpc3RUeXBlLAogICAgICAgICAgICBpdGVtczogaXRlbXMubWFwKGl0ID0+ICh7CiAgICAgICAgICAgICAga2luZDogJ3RleHQnLAogICAgICAgICAgICAgIHRleHQ6IHR5cGVvZiBpdCA9PT0gJ3N0cmluZycgPyBpdCA6IGl0LnRleHQgfHwgJycKICAgICAgICAgICAgfSkpLAogICAgICAgICAgICBtYXJnaW46IGl0ZW0ubWFyZ2luIHx8IFswLCAwLCAwLCAxMF0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CiAgICAgIAogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIAogICAgd2luZG93LmhhbmRsZUFJUmVwbGljYXRlID0gaGFuZGxlQUlSZXBsaWNhdGU7CiAgICAqLwoKICAgIC8vIFNhbHZhciBlc3RhZG8gYW50ZXMgZGUgZmVjaGFyL3JlY2FycmVnYXIgYSBww6FnaW5hCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgKCkgPT4gewogICAgICBzYXZlU3RhdGUoKTsKICAgIH0pOwoKICAgIC8vIFNhbHZhciBwZXJpb2RpY2FtZW50ZSAoYSBjYWRhIDMwIHNlZ3VuZG9zKSBjb21vIGJhY2t1cAogICAgc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICBzYXZlU3RhdGUoKTsKICAgIH0sIDMwMDAwKTsKICA8L3NjcmlwdD4KCgogIDwhLS0gTW9kYWwgZGUgQ29uZmlybWHDp8OjbyAtLT4KICA8ZGl2IGlkPSJjb25maXJtTW9kYWwiIGNsYXNzPSJjdXN0b20tbW9kYWwiIHN0eWxlPSJ6LWluZGV4OiAxMDAwMjsiPgogICAgPGRpdiBjbGFzcz0iY3VzdG9tLW1vZGFsLW92ZXJsYXkiIG9uY2xpY2s9ImNsb3NlQ29uZmlybU1vZGFsKCkiPjwvZGl2PgogICAgPGRpdiBjbGFzcz0iY3VzdG9tLW1vZGFsLWNvbnRlbnQiIHN0eWxlPSJ6LWluZGV4OiAxMDAwMzsiPgogICAgICA8ZGl2IGNsYXNzPSJjdXN0b20tbW9kYWwtaGVhZGVyIj4KICAgICAgICA8aDMgaWQ9ImNvbmZpcm1Nb2RhbFRpdGxlIj5Db25maXJtYXIgYcOnw6NvPC9oMz4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9ImN1c3RvbS1tb2RhbC1ib2R5Ij4KICAgICAgICA8cCBpZD0iY29uZmlybU1vZGFsTWVzc2FnZSI+VGVtIGNlcnRlemEgcXVlIGRlc2VqYSByZWFsaXphciBlc3RhIGHDp8Ojbz88L3A+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJjdXN0b20tbW9kYWwtZm9vdGVyIj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJjdXN0b20tbW9kYWwtYnRuIGN1c3RvbS1tb2RhbC1idG4tY2FuY2VsIiBvbmNsaWNrPSJjbG9zZUNvbmZpcm1Nb2RhbCgpIj5DYW5jZWxhcjwvYnV0dG9uPgogICAgICAgIDxidXR0b24gY2xhc3M9ImN1c3RvbS1tb2RhbC1idG4gY3VzdG9tLW1vZGFsLWJ0bi1jb25maXJtIiBpZD0iY29uZmlybU1vZGFsT2tCdG4iCiAgICAgICAgICBvbmNsaWNrPSJjb25maXJtTW9kYWxBY3Rpb24oKSI+T0s8L2J1dHRvbj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPCEtLSBNb2RhbCBkZSBBbGVydGEgLS0+CiAgPGRpdiBpZD0iYWxlcnRNb2RhbCIgY2xhc3M9ImN1c3RvbS1tb2RhbCI+CiAgICA8ZGl2IGNsYXNzPSJjdXN0b20tbW9kYWwtb3ZlcmxheSIgb25jbGljaz0iY2xvc2VBbGVydE1vZGFsKCkiPjwvZGl2PgogICAgPGRpdiBjbGFzcz0iY3VzdG9tLW1vZGFsLWNvbnRlbnQiPgogICAgICA8ZGl2IGNsYXNzPSJjdXN0b20tbW9kYWwtaGVhZGVyIj4KICAgICAgICA8aDM+QXZpc288L2gzPgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iY3VzdG9tLW1vZGFsLWJvZHkiPgogICAgICAgIDxwIGlkPSJhbGVydE1vZGFsTWVzc2FnZSI+TWVuc2FnZW0gZGUgYWxlcnRhPC9wPgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iY3VzdG9tLW1vZGFsLWZvb3RlciI+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iY3VzdG9tLW1vZGFsLWJ0biBjdXN0b20tbW9kYWwtYnRuLWNvbmZpcm0iIG9uY2xpY2s9ImNsb3NlQWxlcnRNb2RhbCgpIgogICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAlOyI+T0s8L2J1dHRvbj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPCEtLSBNb2RhbCBkZSBMb2FkaW5nIHBhcmEgZ2VyYcOnw6NvIGRlIGPDs2RpZ28gLS0+CiAgPGRpdiBpZD0ibG9hZGluZ0NvZGVNb2RhbCIgY2xhc3M9ImN1c3RvbS1tb2RhbCI+CiAgICA8ZGl2IGNsYXNzPSJjdXN0b20tbW9kYWwtb3ZlcmxheSI+PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJjdXN0b20tbW9kYWwtY29udGVudCIgc3R5bGU9Im1heC13aWR0aDogNDAwcHg7Ij4KICAgICAgPGRpdiBjbGFzcz0iY3VzdG9tLW1vZGFsLWJvZHkiIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDJyZW07Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJsb2FkaW5nLXNwaW5uZXIiIHN0eWxlPSJ3aWR0aDogNDhweDsgaGVpZ2h0OiA0OHB4OyBib3JkZXI6IDRweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOyBib3JkZXItdG9wLWNvbG9yOiB2YXIoLS1hY2NlbnQtY29sb3IpOyBib3JkZXItcmFkaXVzOiA1MCU7IGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7IG1hcmdpbjogMCBhdXRvIDEuNXJlbTsiPjwvZGl2PgogICAgICAgIDxwIHN0eWxlPSJtYXJnaW46IDA7IGZvbnQtc2l6ZTogMXJlbTsgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7Ij5Fc3RhbW9zIGdlcmFuZG8gbyBsYXlvdXQgZG8gUERGPC9wPgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2PgoKICA8IS0tIE1vZGFsIGRlIFByZXZpZXcgZG8gUERGIC0tPgogIDxkaXYgaWQ9InByZXZpZXdNb2RhbCIgY2xhc3M9ImN1c3RvbS1tb2RhbCI+CiAgICA8ZGl2IGNsYXNzPSJjdXN0b20tbW9kYWwtb3ZlcmxheSIgb25jbGljaz0iY2xvc2VQcmV2aWV3TW9kYWwoKSI+PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJwcmV2aWV3LW1vZGFsLWNvbnRlbnQiPgogICAgICA8ZGl2IGNsYXNzPSJwcmV2aWV3LW1vZGFsLWhlYWRlciI+CiAgICAgICAgPGgzPlByw6ktdmlzdWFsaXphw6fDo28gZG8gUERGPC9oMz4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJwcmV2aWV3LW1vZGFsLWNsb3NlIiBvbmNsaWNrPSJjbG9zZVByZXZpZXdNb2RhbCgpIj5GZWNoYXI8L2J1dHRvbj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InByZXZpZXctbW9kYWwtYm9keSI+CiAgICAgICAgPGlmcmFtZSBpZD0icHJldmlld0lmcmFtZSIgY2xhc3M9InByZXZpZXctbW9kYWwtaWZyYW1lIiBmcmFtZWJvcmRlcj0iMCIKICAgICAgICAgIHN0eWxlPSJvdmVyZmxvdzpoaWRkZW47b3ZlcmZsb3cteDpoaWRkZW47b3ZlcmZsb3cteTpoaWRkZW47aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MHB4O2xlZnQ6MHB4O3JpZ2h0OjBweDtib3R0b206MHB4IgogICAgICAgICAgaGVpZ2h0PSIxMDAlIiB3aWR0aD0iMTAwJSI+CiAgICAgICAgPC9pZnJhbWU+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgPC9kaXY+CgogIDxkaXYgaWQ9ImJ1YmJsZVRlc3RNb2RhbCIgY2xhc3M9ImN1c3RvbS1tb2RhbCI+CiAgICA8ZGl2IGNsYXNzPSJjdXN0b20tbW9kYWwtb3ZlcmxheSIgb25jbGljaz0iY2xvc2VCdWJibGVUZXN0TW9kYWwoKSI+PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJwcmV2aWV3LW1vZGFsLWNvbnRlbnQiPgogICAgICA8ZGl2IGNsYXNzPSJwcmV2aWV3LW1vZGFsLWhlYWRlciI+CiAgICAgICAgPGgzPlByw6ktdmlzdWFsaXphw6fDo28gZG8gUERGPC9oMz4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJwcmV2aWV3LW1vZGFsLWNsb3NlIiBvbmNsaWNrPSJjbG9zZUJ1YmJsZVRlc3RNb2RhbCgpIj5GZWNoYXI8L2J1dHRvbj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InByZXZpZXctbW9kYWwtYm9keSI+CiAgICAgICAgPGlmcmFtZSBpZD0iYnViYmxlVGVzdElmcmFtZSIgY2xhc3M9InByZXZpZXctbW9kYWwtaWZyYW1lIiBmcmFtZWJvcmRlcj0iMCIKICAgICAgICAgIHN0eWxlPSJvdmVyZmxvdzpoaWRkZW47b3ZlcmZsb3cteDpoaWRkZW47b3ZlcmZsb3cteTpoaWRkZW47aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MHB4O2xlZnQ6MHB4O3JpZ2h0OjBweDtib3R0b206MHB4IgogICAgICAgICAgaGVpZ2h0PSIxMDAlIiB3aWR0aD0iMTAwJSI+CiAgICAgICAgPC9pZnJhbWU+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgPC9kaXY+CgogIDwhLS0gTW9kYWwgZGUgU2FsdmFyIFRlbXBsYXRlIC0tPgogIDxkaXYgaWQ9InNhdmVUZW1wbGF0ZU1vZGFsIiBjbGFzcz0iY3VzdG9tLW1vZGFsIj4KICAgIDxkaXYgY2xhc3M9ImN1c3RvbS1tb2RhbC1vdmVybGF5IiBvbmNsaWNrPSJjbG9zZVNhdmVUZW1wbGF0ZU1vZGFsKCkiPjwvZGl2PgogICAgPGRpdiBjbGFzcz0iY3VzdG9tLW1vZGFsLWNvbnRlbnQiIHN0eWxlPSJtYXgtd2lkdGg6IDUwMHB4OyI+CiAgICAgIDxkaXYgY2xhc3M9ImN1c3RvbS1tb2RhbC1oZWFkZXIiPgogICAgICAgIDxoMz7wn5K+IFNhbHZhciBUZW1wbGF0ZTwvaDM+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJjdXN0b20tbW9kYWwtYm9keSI+CiAgICAgICAgPHAgc3R5bGU9Im1hcmdpbi1ib3R0b206IDFyZW07IGNvbG9yOiAjNmI3MjgwOyI+RGlnaXRlIHVtIG5vbWUgcGFyYSBzYWx2YXIgbyB0ZW1wbGF0ZSBhdHVhbDo8L3A+CiAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJzYXZlVGVtcGxhdGVOYW1lSW5wdXQiIHBsYWNlaG9sZGVyPSJOb21lIGRvIHRlbXBsYXRlIgogICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAlOyBwYWRkaW5nOiAwLjc1cmVtOyBib3JkZXI6IDFweCBzb2xpZCAjZDFkNWRiOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgZm9udC1zaXplOiAxcmVtOyIKICAgICAgICAgIGF1dG9mb2N1cz4KICAgICAgICA8ZGl2IGlkPSJzYXZlVGVtcGxhdGVFcnJvciIKICAgICAgICAgIHN0eWxlPSJkaXNwbGF5OiBub25lOyBtYXJnaW4tdG9wOiAwLjVyZW07IHBhZGRpbmc6IDAuNXJlbTsgYmFja2dyb3VuZDogI2ZlZTJlMjsgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCAjZWY0NDQ0OyBib3JkZXItcmFkaXVzOiAwLjI1cmVtOyBjb2xvcjogIzk5MWIxYjsgZm9udC1zaXplOiAwLjg3NXJlbTsiPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iY3VzdG9tLW1vZGFsLWZvb3RlciI+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iY3VzdG9tLW1vZGFsLWJ0biBjdXN0b20tbW9kYWwtYnRuLWNhbmNlbCIgb25jbGljaz0iY2xvc2VTYXZlVGVtcGxhdGVNb2RhbCgpIj5DYW5jZWxhcjwvYnV0dG9uPgogICAgICAgIDxidXR0b24gY2xhc3M9ImN1c3RvbS1tb2RhbC1idG4gY3VzdG9tLW1vZGFsLWJ0bi1jb25maXJtIiBvbmNsaWNrPSJjb25maXJtU2F2ZVRlbXBsYXRlKCkiPlNhbHZhcjwvYnV0dG9uPgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2PgoKICA8IS0tIE1vZGFsIGRlIENhcnJlZ2FyIFRlbXBsYXRlIC0tPgogIDxkaXYgaWQ9ImxvYWRUZW1wbGF0ZU1vZGFsIiBjbGFzcz0iY3VzdG9tLW1vZGFsIj4KICAgIDxkaXYgY2xhc3M9ImN1c3RvbS1tb2RhbC1vdmVybGF5IiBvbmNsaWNrPSJjbG9zZUxvYWRUZW1wbGF0ZU1vZGFsKCkiPjwvZGl2PgogICAgPGRpdiBjbGFzcz0iY3VzdG9tLW1vZGFsLWNvbnRlbnQiIHN0eWxlPSJtYXgtd2lkdGg6IDYwMHB4OyI+CiAgICAgIDxkaXYgY2xhc3M9ImN1c3RvbS1tb2RhbC1oZWFkZXIiPgogICAgICAgIDxoMz7wn5OCIENhcnJlZ2FyIFRlbXBsYXRlPC9oMz4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9ImN1c3RvbS1tb2RhbC1ib2R5Ij4KICAgICAgICA8ZGl2IGlkPSJsb2FkVGVtcGxhdGVMaXN0IiBzdHlsZT0ibWF4LWhlaWdodDogNDAwcHg7IG92ZXJmbG93LXk6IGF1dG87Ij4KICAgICAgICAgIDwhLS0gTGlzdGEgZGUgdGVtcGxhdGVzIHNlcsOhIHByZWVuY2hpZGEgYXF1aSAtLT4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJsb2FkVGVtcGxhdGVFbXB0eSIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMnJlbTsgY29sb3I6ICM2YjcyODA7Ij4KICAgICAgICAgIDxwPk5lbmh1bSB0ZW1wbGF0ZSBzYWx2byBlbmNvbnRyYWRvLjwvcD4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9ImN1c3RvbS1tb2RhbC1mb290ZXIiPgogICAgICAgIDxidXR0b24gY2xhc3M9ImN1c3RvbS1tb2RhbC1idG4gY3VzdG9tLW1vZGFsLWJ0bi1jYW5jZWwiIG9uY2xpY2s9ImNsb3NlTG9hZFRlbXBsYXRlTW9kYWwoKSIKICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwJTsiPkZlY2hhcjwvYnV0dG9uPgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2PgoKICA8IS0tIE1vZGFsIGRlIExvZ2luIC0tPgogIDxkaXYgaWQ9ImxvZ2luTW9kYWwiIGNsYXNzPSJjdXN0b20tbW9kYWwiIHN0eWxlPSJ6LWluZGV4OiAxMDAwMDsiPgogICAgPGRpdiBjbGFzcz0iY3VzdG9tLW1vZGFsLW92ZXJsYXkiIHN0eWxlPSJwb2ludGVyLWV2ZW50czogYXV0bzsiPjwvZGl2PgogICAgPGRpdiBjbGFzcz0iY3VzdG9tLW1vZGFsLWNvbnRlbnQiIHN0eWxlPSJtYXgtd2lkdGg6IDQwMHB4OyI+CiAgICAgIDxkaXYgY2xhc3M9ImN1c3RvbS1tb2RhbC1oZWFkZXIiPgogICAgICAgIDxoMz7wn5SQIExvZ2luPC9oMz4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9ImN1c3RvbS1tb2RhbC1ib2R5Ij4KICAgICAgICA8cCBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMXJlbTsgY29sb3I6ICM2YjcyODA7Ij5GYcOnYSBsb2dpbiBwYXJhIGNvbnRpbnVhcjo8L3A+CiAgICAgICAgPGlucHV0IHR5cGU9ImVtYWlsIiBpZD0ibG9naW5FbWFpbElucHV0IiBwbGFjZWhvbGRlcj0iRS1tYWlsIgogICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAlOyBwYWRkaW5nOiAwLjc1cmVtOyBib3JkZXI6IDFweCBzb2xpZCAjZDFkNWRiOyBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgZm9udC1zaXplOiAxcmVtOyBtYXJnaW4tYm90dG9tOiAwLjc1cmVtOyIKICAgICAgICAgIGF1dG9mb2N1cz4KICAgICAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIGlkPSJsb2dpblBhc3N3b3JkSW5wdXQiIHBsYWNlaG9sZGVyPSJTZW5oYSIKICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwJTsgcGFkZGluZzogMC43NXJlbTsgYm9yZGVyOiAxcHggc29saWQgI2QxZDVkYjsgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07IGZvbnQtc2l6ZTogMXJlbTsgbWFyZ2luLWJvdHRvbTogMC43NXJlbTsiPgogICAgICAgIDxkaXYgaWQ9ImxvZ2luRXJyb3IiCiAgICAgICAgICBzdHlsZT0iZGlzcGxheTogbm9uZTsgbWFyZ2luLXRvcDogMC41cmVtOyBwYWRkaW5nOiAwLjVyZW07IGJhY2tncm91bmQ6ICNmZWUyZTI7IGJvcmRlci1sZWZ0OiAzcHggc29saWQgI2VmNDQ0NDsgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsgY29sb3I6ICM5OTFiMWI7IGZvbnQtc2l6ZTogMC44NzVyZW07Ij4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9ImN1c3RvbS1tb2RhbC1mb290ZXIiPgogICAgICAgIDxidXR0b24gY2xhc3M9ImN1c3RvbS1tb2RhbC1idG4gY3VzdG9tLW1vZGFsLWJ0bi1jb25maXJtIiBvbmNsaWNrPSJoYW5kbGVMb2dpbigpIgogICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAlOyI+RW50cmFyPC9idXR0b24+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgPC9kaXY+CgogIDwhLS0gVjEgLSBNb2RhbCBkZSBSZXBsaWNhw6fDo28gY29tIElBIGRlc2FiaWxpdGFkbwogIDxkaXYgaWQ9ImFpUmVwbGljYXRlTW9kYWwiIGNsYXNzPSJjdXN0b20tbW9kYWwiPgogICAgPGRpdiBjbGFzcz0iY3VzdG9tLW1vZGFsLW92ZXJsYXkiIG9uY2xpY2s9ImNsb3NlQUlSZXBsaWNhdGVNb2RhbCgpIj48L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImN1c3RvbS1tb2RhbC1jb250ZW50IiBzdHlsZT0ibWF4LXdpZHRoOiA2MDBweDsiPgogICAgICA8ZGl2IGNsYXNzPSJjdXN0b20tbW9kYWwtaGVhZGVyIj4KICAgICAgICA8c3ZnIHdpZHRoPSI0MHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCAxMCAxMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMi40NDYgMS4zNjdjMS45ODQgMC4xMjIgMi44OCAtMC4wNDIgMy41MDUgLTAuMDQyIDAuNTgxIDAgMC44NTUgMS45MTIgMC42MTYgMi40NzYgLTAuMjI1IDAuNTMyIC00LjA1OSAwLjU1NCAtNC4yMzcgMC4zNDMgLTAuMjA2IC0wLjI0NCAtMC4wODcgLTEuMjYyIC0wLjA4NyAtMS42MTIiIHN0cm9rZT0iI2UyNTc0YyIgc3Ryb2tlLW9wYWNpdHk9IjAuOSIgc3Ryb2tlLXdpZHRoPSIwLjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yLjQ1OCA0Ljc2N2MtMi43MjUgMi41MiAwLjU3MyAyLjA3IDEuMjQ4IDIuNjEiIHN0cm9rZT0iI2UyNTc0YyIgc3Ryb2tlLW9wYWNpdHk9IjAuOSIgc3Ryb2tlLXdpZHRoPSIwLjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yLjQ1OCA0Ljc2N2MwLjAzNyAwLjU3NSAwLjA3MSAxLjg3NSAwLjA0OCAyLjA1NSIgc3Ryb2tlPSIjZTI1NzRjIiBzdHJva2Utb3BhY2l0eT0iMC45IiBzdHJva2Utd2lkdGg9IjAuNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTTUuMjA4IDMuNDA2di0wLjMyMSIgc3Ryb2tlPSIjZTI1NzRjIiBzdHJva2Utb3BhY2l0eT0iMC45IiBzdHJva2Utd2lkdGg9IjAuNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTTQuNDMyIDMuNDMyYy0wLjAwNyAtMC4wODUgMCAtMC4yNzkgMCAtMC4zNDciIHN0cm9rZT0iI2UyNTc0YyIgc3Ryb2tlLW9wYWNpdHk9IjAuOSIgc3Ryb2tlLXdpZHRoPSIwLjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik01LjA4NSA2LjA0M2MzLjcxNyAtMC4wNDUgNC4yODcgLTAuMzc1IDIuNzI4IDIuNTAzIiBzdHJva2U9IiNlMjU3NGMiIHN0cm9rZS1vcGFjaXR5PSIwLjkiIHN0cm9rZS13aWR0aD0iMC40IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNNy4xMzkgOC42MzZjLTIuMjE5IC0wLjA5IC0zLjcxNyAwLjcyIC0yLjY4MyAtMi4wMjQiIHN0cm9rZT0iI2UyNTc0YyIgc3Ryb2tlLW9wYWNpdHk9IjAuOSIgc3Ryb2tlLXdpZHRoPSIwLjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik00LjUgOC42MzZjLTAuNDgxIC0wLjM1MiAtMS4wMTggLTAuNjMxIC0xLjQ4NCAtMS4wMTkiIHN0cm9rZT0iI2UyNTc0YyIgc3Ryb2tlLW9wYWNpdHk9IjAuOSIgc3Ryb2tlLXdpZHRoPSIwLjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik01LjQ2IDQuNzU0YzAuMDE2IDAuMzg1IDAuMDMgMC43NjkgMC4wMyAxLjE1NCIgc3Ryb2tlPSIjZTI1NzRjIiBzdHJva2Utb3BhY2l0eT0iMC45IiBzdHJva2Utd2lkdGg9IjAuNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTTUuNDYgNC43NTRjMC4xODggMC4yOTcgMC4zNjQgMC40OSAwLjU4NSAxLjAwNCIgc3Ryb2tlPSIjZTI1NzRjIiBzdHJva2Utb3BhY2l0eT0iMC45IiBzdHJva2Utd2lkdGg9IjAuNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTTIuMDAzIDIuOTc2Yy0wLjExMyAwLjAzIC0wLjIyNyAwLjAyNCAtMC4zNDIgMC4wMzQiIHN0cm9rZT0iI2UyNTc0YyIgc3Ryb2tlLW9wYWNpdHk9IjAuOSIgc3Ryb2tlLXdpZHRoPSIwLjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik0xLjQ5IDIuNzM3YzAuMDAyIDAuMjA3IDAgMC40MTEgLTAuMDE3IDAuNjE1IiBzdHJva2U9IiNlMjU3NGMiIHN0cm9rZS1vcGFjaXR5PSIwLjkiIHN0cm9rZS13aWR0aD0iMC40IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNNi45NDQgMi44OTFjMC4wODUgLTAuMDA5IDAuMTcxIC0wLjAyIDAuMjU2IC0wLjAzNCIgc3Ryb2tlPSIjZTI1NzRjIiBzdHJva2Utb3BhY2l0eT0iMC45IiBzdHJva2Utd2lkdGg9IjAuNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTTcuMjg1IDIuNjE3YzAuMDI0IDAuMTM2IDAuMDE3IDAuMjczIDAuMDE3IDAuNDEiIHN0cm9rZT0iI2UyNTc0YyIgc3Ryb2tlLW9wYWNpdHk9IjAuOSIgc3Ryb2tlLXdpZHRoPSIwLjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik01LjY0NCAyLjkxMmMtMC41NiAtMC4wNjIgLTEuMTAzIC0wLjAzMiAtMS42NDEgMC4wNTMiIHN0cm9rZT0iI2UyNTc0YyIgc3Ryb2tlLW9wYWNpdHk9IjAuOSIgc3Ryb2tlLXdpZHRoPSIwLjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvc3ZnPgogICAgICAgIDxoMz5SZXBsaXF1ZSBvIGxheW91dCBkbyBQREYgY29tIElBPC9oMz4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9ImN1c3RvbS1tb2RhbC1ib2R5Ij4KICAgICAgICA8cCBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMS41cmVtOyBjb2xvcjogIzZiNzI4MDsgZm9udC1zaXplOiAwLjk1cmVtOyI+UmVwbGlxdWUgc2V1IGFycXVpdm8gUERGIGVtIG5vIG3DoXhpbW8gNSBtaW51dG9zPC9wPgogICAgICAgIAogICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206IDEuNXJlbTsiPgogICAgICAgICAgPGxhYmVsIHN0eWxlPSJkaXNwbGF5OiBibG9jazsgbWFyZ2luLWJvdHRvbTogMC41cmVtOyBmb250LXdlaWdodDogNTAwOyBjb2xvcjogIzM3NDE1MTsiPlNlbGVjaW9uZSBvIGFycXVpdm8gUERGOjwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9InBkZkZpbGVJbnB1dCIgYWNjZXB0PSIucGRmLGFwcGxpY2F0aW9uL3BkZiIgc3R5bGU9IndpZHRoOiAxMDAlOyBwYWRkaW5nOiAwLjc1cmVtOyBib3JkZXI6IDJweCBkYXNoZWQgI2QxZDVkYjsgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07IGZvbnQtc2l6ZTogMXJlbTsgY3Vyc29yOiBwb2ludGVyOyB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4yczsiIC8+CiAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luLXRvcDogMC41cmVtOyBmb250LXNpemU6IDAuODc1cmVtOyBjb2xvcjogIzZiNzI4MDsiPkFwZW5hcyBhcnF1aXZvcyBQREYgc8OjbyBwZXJtaXRpZG9zLiBNw6F4aW1vIGRlIDIgcMOhZ2luYXMgcmVjb21lbmRhZG8uPC9wPgogICAgICAgIDwvZGl2PgogICAgICAgIAogICAgICAgIDxkaXYgaWQ9InBkZkZpbGVJbmZvIiBzdHlsZT0iZGlzcGxheTogbm9uZTsgcGFkZGluZzogMXJlbTsgYmFja2dyb3VuZDogI2YzZjRmNjsgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07IG1hcmdpbi1ib3R0b206IDFyZW07Ij4KICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMC43NXJlbTsiPgogICAgICAgICAgICA8c3ZnIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNCAySDZDNC45IDIgNCAyLjkgNCA0VjIwQzQgMjEuMSA0LjkgMjIgNiAyMkgxOEMxOS4xIDIyIDIwIDIxLjEgMjAgMjBWOEwxNCAyWiIgZmlsbD0iIzNiODJmNiIvPgogICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNCAyVjhIMjAiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CiAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxwIHN0eWxlPSJmb250LXdlaWdodDogNjAwOyBjb2xvcjogIzExMTgyNzsgbWFyZ2luOiAwOyIgaWQ9InBkZkZpbGVOYW1lIj48L3A+CiAgICAgICAgICAgICAgPHAgc3R5bGU9ImZvbnQtc2l6ZTogMC44NzVyZW07IGNvbG9yOiAjNmI3MjgwOyBtYXJnaW46IDAuMjVyZW0gMCAwIDA7IiBpZD0icGRmRmlsZVNpemUiPjwvcD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGlkPSJhaVJlcGxpY2F0ZUVycm9yIiBzdHlsZT0iZGlzcGxheTogbm9uZTsgbWFyZ2luLXRvcDogMC41cmVtOyBwYWRkaW5nOiAwLjc1cmVtOyBiYWNrZ3JvdW5kOiAjZmVlMmUyOyBib3JkZXItbGVmdDogM3B4IHNvbGlkICNlZjQ0NDQ7IGJvcmRlci1yYWRpdXM6IDAuMjVyZW07IGNvbG9yOiAjOTkxYjFiOyBmb250LXNpemU6IDAuODc1cmVtOyI+PC9kaXY+CiAgICAgICAgCiAgICAgICAgPGRpdiBpZD0iYWlSZXBsaWNhdGVMb2FkaW5nIiBzdHlsZT0iZGlzcGxheTogbm9uZTsgdGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiAxLjVyZW07Ij4KICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgd2lkdGg6IDQwcHg7IGhlaWdodDogNDBweDsgYm9yZGVyOiA0cHggc29saWQgI2U1ZTdlYjsgYm9yZGVyLXRvcC1jb2xvcjogIzI1NjNlYjsgYm9yZGVyLXJhZGl1czogNTAlOyBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlOyI+PC9kaXY+CiAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luLXRvcDogMXJlbTsgY29sb3I6ICM2YjcyODA7Ij5Qcm9jZXNzYW5kbyBQREYgY29tIElBLi4uPC9wPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iY3VzdG9tLW1vZGFsLWZvb3RlciI+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iY3VzdG9tLW1vZGFsLWJ0biBjdXN0b20tbW9kYWwtYnRuLWNhbmNlbCIgb25jbGljaz0iY2xvc2VBSVJlcGxpY2F0ZU1vZGFsKCkiPkNhbmNlbGFyPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iY3VzdG9tLW1vZGFsLWJ0biBjdXN0b20tbW9kYWwtYnRuLWNvbmZpcm0iIGlkPSJyZXBsaWNhdGVCdG4iIG9uY2xpY2s9ImhhbmRsZUFJUmVwbGljYXRlKCkiIGRpc2FibGVkPlJlcGxpY2FyIGNvbSBJQTwvYnV0dG9uPgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2PgogIC0tPgoKICA8IS0tIFYxIC0gRXN0aWxvcyBkYSByZXBsaWNhw6fDo28gY29tIElBIGRlc2FiaWxpdGFkb3MKICA8c3R5bGU+CiAgICBAa2V5ZnJhbWVzIHNwaW4gewogICAgICB0byB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH0KICAgIH0KICA8L3N0eWxlPgogIC0tPgo8L2JvZHk+Cgo8L2h0bWw+'))));</script>
